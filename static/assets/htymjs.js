/*!
 * jQuery JavaScript Library v1.11.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-23T21:02Z
 */
function MediaStreamRecorder(e){if(!e)throw"MediaStream is mandatory.";this.start=function(o){var i=IsChrome||IsEdge||IsOpera?window.StereoAudioRecorder||IsEdge||IsOpera:window.MediaRecorderWrapper;-1!==this.mimeType.indexOf("video")&&(i=IsChrome||IsEdge||IsOpera?window.WhammyRecorder:window.MediaRecorderWrapper),"image/gif"===this.mimeType&&(i=window.GifRecorder),this.recorderType&&(i=this.recorderType),t=new i(e),t.blobs=[];var n=this;t.ondataavailable=function(e){t.blobs.push(e),n.ondataavailable(e)},t.onstop=this.onstop,t.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,t=mergeProps(t,this),t.start(o)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.stop=function(){t&&t.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.save=function(e,o){if(!e){if(!t)return;var i=new Blob(t.blobs,{type:t.blobs[0].type||this.mimeType});return void invokeSaveAsDialog(i)}invokeSaveAsDialog(e,o)},this.pause=function(){t&&(t.pause(),console.log("Paused recording.",this.mimeType||t.mimeType))},this.resume=function(){t&&(t.resume(),console.log("Resumed recording.",this.mimeType||t.mimeType))},this.recorderType=null;var t}function MultiStreamRecorder(e){if(!e)throw"MediaStream is mandatory.";var t=this,o=!!navigator.mozGetUserMedia;this.stream=e,this.start=function(r){function l(e){a++,t.ondataavailable(e)}i=new MediaStreamRecorder(e),n=new MediaStreamRecorder(e),i.mimeType="audio/ogg",n.mimeType="video/webm";for(var c in this)"function"!=typeof this[c]&&(i[c]=n[c]=this[c]);i.ondataavailable=function(e){s[a]||(s[a]={}),s[a].audio=e,s[a].video&&!s[a].onDataAvailableEventFired&&(s[a].onDataAvailableEventFired=!0,l(s[a]))},n.ondataavailable=function(e){return o?t.ondataavailable({video:e,audio:e}):(s[a]||(s[a]={}),s[a].video=e,void(s[a].audio&&!s[a].onDataAvailableEventFired&&(s[a].onDataAvailableEventFired=!0,l(s[a]))))},n.onstop=i.onstop=function(e){t.onstop(e)},o?n.start(r):(n.onStartedDrawingNonBlankFrames=function(){n.clearOldRecordedFrames(),i.start(r)},n.start(r))},this.stop=function(){i&&i.stop(),n&&n.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.pause=function(){i&&i.pause(),n&&n.pause()},this.resume=function(){i&&i.resume(),n&&n.resume()};var i,n,s={},a=0}function mergeProps(e,t){t=reformatProps(t);for(var o in t)"function"!=typeof t[o]&&(e[o]=t[o]);return e}function reformatProps(e){var t={};for(var o in e)if(-1!==o.indexOf("-")){var i=o.split("-"),n=i[0]+i[1].split("")[0].toUpperCase()+i[1].substr(1);t[n]=e[o]}else t[o]=e[o];return t}function dropFirstFrame(e){return e.shift(),e}function invokeSaveAsDialog(e,t){if(!e)throw"Blob object is required.";e.type||(e.type="video/webm");var o=e.type.split("/")[1];if(t&&-1!==t.indexOf(".")){var i=t.split(".");t=i[0],o=i[1]}var n=(t||Math.round(9999999999*Math.random())+888888888)+"."+o;if("undefined"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,n);if("undefined"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(e,n);var s=document.createElement("a");s.href=URL.createObjectURL(e),s.target="_blank",s.download=n,navigator.mozGetUserMedia&&(s.onclick=function(){(document.body||document.documentElement).removeChild(s)},(document.body||document.documentElement).appendChild(s));var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});s.dispatchEvent(a),navigator.mozGetUserMedia||URL.revokeObjectURL(s.href)}function bytesToSize(e){var t=1e3,o=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Bytes";var i=parseInt(Math.floor(Math.log(e)/Math.log(t)),10);return(e/Math.pow(t,i)).toPrecision(3)+" "+o[i]}function MediaRecorderWrapper(e){if("audio"===this.type&&e.getVideoTracks&&e.getVideoTracks().length&&!navigator.mozGetUserMedia){var t=new AudioContext,o=t.createMediaStreamSource(e),i=t.createMediaStreamDestination();o.connect(i),e=i.stream}this.start=function(t){function o(){if(!n){if(s)return void setTimeout(o,500);r=new MediaRecorder(e),r.ondataavailable=function(e){if(console.log("ondataavailable",e.data.type,e.data.size,e.data),!e.data.size)return void console.warn("Recording of",e.data.type,"failed.");var t=new window.Blob([e.data],{type:e.data.type||a.mimeType||"audio/ogg"});a.ondataavailable(t)},r.onstop=function(){},r.onerror=function(e){console.error(e),a.start(t)},r.onwarning=function(e){console.warn(e)},r.start(0),setTimeout(function(){r.stop(),o()},t)}}t=t||1e3,n=!1,o()};var n=!1;this.stop=function(){n=!0,a.onstop&&a.onstop({})};var s=!1;this.pause=function(){r&&(s=!0,"recording"===r.state&&r.pause())},this.resume=function(){r&&(s=!1,"paused"===r.state&&r.resume())},this.ondataavailable=this.onstop=function(){};var a=this;!a.mimeType&&e.getAudioTracks&&(a.mimeType=e.getAudioTracks().length&&e.getVideoTracks().length?"video/webm":"audio/ogg");var r}function StereoAudioRecorder(e){this.start=function(i){i=i||1e3,t=new StereoAudioRecorderHelper(e,this),t.record(),o=setInterval(function(){t.requestData()},i)},this.stop=function(){t&&(t.stop(),clearTimeout(o))},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){};var t,o}function StereoAudioRecorderHelper(e,t){function o(e,t){for(var o=e.length+t.length,i=new Float32Array(o),n=0,s=0;o>s;)i[s++]=e[n],i[s++]=t[n],n++;return i}function i(e,t){for(var o=new Float32Array(t),i=0,n=e.length,s=0;n>s;s++){var a=e[s];o.set(a,i),i+=a.length}return o}function n(e,t,o){for(var i=o.length,n=0;i>n;n++)e.setUint8(t+n,o.charCodeAt(n))}var s=44100;ObjectStore.AudioContextConstructor||(ObjectStore.AudioContextConstructor=new ObjectStore.AudioContext),s=ObjectStore.AudioContextConstructor.sampleRate;var a,r,l,c,d=[],u=[],h=!1,m=0,p=t.sampleRate||s,f=t.audioChannels||2;this.record=function(){h=!0,d.length=u.length=0,m=0},this.requestData=function(){if(!v){if(0===m)return void(b=!1);b=!0;var e=d.slice(0),s=(u.slice(0),m);d.length=u.length=[],m=0,b=!1;var a=i(e,s),r=i(e,s);if(2===f)var l=o(a,r);else var l=a;var c=new ArrayBuffer(44+2*l.length),h=new DataView(c);n(h,0,"RIFF"),h.setUint32(4,44+2*l.length,!0),n(h,8,"WAVE"),n(h,12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,f,!0),h.setUint32(24,p,!0),h.setUint32(28,4*p,!0),h.setUint16(32,2*f,!0),h.setUint16(34,16,!0),n(h,36,"data"),h.setUint32(40,2*l.length,!0);for(var g=l.length,_=44,w=1,y=0;g>y;y++)h.setInt16(_,32767*l[y]*w,!0),_+=2;var $=new Blob([h],{type:"audio/wav"});console.debug("audio recorded blob size:",bytesToSize($.size)),t.ondataavailable($)}},this.stop=function(){h=!1,this.requestData(),l.disconnect()};var c=ObjectStore.AudioContextConstructor;ObjectStore.VolumeGainNode=c.createGain();var r=ObjectStore.VolumeGainNode;ObjectStore.AudioInput=c.createMediaStreamSource(e);var l=ObjectStore.AudioInput;l.connect(r);var g=t.bufferSize||2048;if(0===t.bufferSize&&(g=0),c.createJavaScriptNode)a=c.createJavaScriptNode(g,f,f);else{if(!c.createScriptProcessor)throw"WebAudio API has no support on this browser.";a=c.createScriptProcessor(g,f,f)}g=a.bufferSize,console.debug("using audio buffer-size:",g);var b=!1;window.scriptprocessornode=a,1===f&&console.debug("All right-channels are skipped.");var v=!1;this.pause=function(){v=!0},this.resume=function(){v=!1},a.onaudioprocess=function(e){if(h&&!b&&!v){var t=e.inputBuffer.getChannelData(0);if(d.push(new Float32Array(t)),2===f){var o=e.inputBuffer.getChannelData(1);u.push(new Float32Array(o))}m+=g}},r.connect(a),a.connect(c.destination)}function WhammyRecorder(e){this.start=function(i){i=i||1e3,t=new WhammyRecorderHelper(e,this);for(var n in this)"function"!=typeof this[n]&&(t[n]=this[n]);t.record(),o=setInterval(function(){t.requestData()},i)},this.stop=function(){t&&(t.stop(),clearTimeout(o))},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){};var t,o}function WhammyRecorderHelper(e,t){function o(){if(p)return c=(new Date).getTime(),void setTimeout(o,500);if(!r){if(s)return setTimeout(o,100);var e=(new Date).getTime()-c;if(!e)return o();c=(new Date).getTime(),!m.isHTMLObject&&l.paused&&l.play(),h.drawImage(l,0,0,u.width,u.height),r||d.frames.push({duration:e,image:u.toDataURL("image/webp")}),a||i(d.frames[d.frames.length-1])||(a=!0,t.onStartedDrawingNonBlankFrames()),setTimeout(o,10)}}function i(e,t,o){var i=document.createElement("canvas");i.width=u.width,i.height=u.height;var n,s,a,r=i.getContext("2d"),l={r:0,g:0,b:0},c=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),d=t&&t>=0&&1>=t?t:0,h=o&&o>=0&&1>=o?o:0,m=new Image;m.src=e.image,r.drawImage(m,0,0,u.width,u.height);var p=r.getImageData(0,0,u.width,u.height);n=0,s=p.data.length,a=p.data.length/4;for(var f=0;s>f;f+=4){var g={r:p.data[f],g:p.data[f+1],b:p.data[f+2]},b=Math.sqrt(Math.pow(g.r-l.r,2)+Math.pow(g.g-l.g,2)+Math.pow(g.b-l.b,2));c*d>=b&&n++}return a*h>=a-n?!1:!0}function n(e,t,o,i){var n=document.createElement("canvas");n.width=u.width,n.height=u.height;for(var s=n.getContext("2d"),a=[],r=-1===t,l=t&&t>0&&t<=e.length?t:e.length,c={r:0,g:0,b:0},d=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),h=o&&o>=0&&1>=o?o:0,m=i&&i>=0&&1>=i?i:0,p=!1,f=0;l>f;f++){var g,b,v;if(!p){var _=new Image;_.src=e[f].image,s.drawImage(_,0,0,u.width,u.height);var w=s.getImageData(0,0,u.width,u.height);g=0,b=w.data.length,v=w.data.length/4;for(var y=0;b>y;y+=4){var $={r:w.data[y],g:w.data[y+1],b:w.data[y+2]},k=Math.sqrt(Math.pow($.r-c.r,2)+Math.pow($.g-c.g,2)+Math.pow($.b-c.b,2));d*h>=k&&g++}}!p&&v*m>=v-g||(r&&(p=!0),a.push(e[f]))}return a=a.concat(e.slice(l)),a.length<=0&&a.push(e[e.length-1]),a}this.record=function(){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(this.width||(this.width=l.videoWidth||l.clientWidth||320),this.height||(this.height=l.videoHeight||l.clientHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas&&this.canvas.width&&this.canvas.height||(this.canvas={width:this.width,height:this.height}),u.width=this.canvas.width,u.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?(this.isHTMLObject=!0,l=this.video.cloneNode()):(l=document.createElement("video"),l.src=URL.createObjectURL(e),l.width=this.video.width,l.height=this.video.height),l.muted=!0,l.play(),c=(new Date).getTime(),d=new Whammy.Video,console.log("canvas resolutions",u.width,"*",u.height),console.log("video width/height",l.width||u.width,"*",l.height||u.height),o()},this.clearOldRecordedFrames=function(){d.frames=[]};var s=!1;this.requestData=function(){if(!p){if(!d.frames.length)return void(s=!1);s=!0;var e=d.frames.slice(0);d.frames=n(e,-1),d.compile(function(e){t.ondataavailable(e),console.debug("video recorded blob size:",bytesToSize(e.size))}),d.frames=[],s=!1}};var a=!1,r=!1;this.stop=function(){r=!0,this.requestData()};var l,c,d,u=document.createElement("canvas"),h=u.getContext("2d"),m=this,p=!1;this.pause=function(){p=!0},this.resume=function(){p=!1}}function GifRecorder(e){function t(){l=Date.now();var e=new Blob([new Uint8Array(d.stream().bin)],{type:"image/gif"});i.ondataavailable(e),d.stream().bin=[]}if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";this.start=function(e){function i(e){return o?void setTimeout(i,500,e):(h=requestAnimationFrame(i),void 0===typeof c&&(c=e),void(90>e-c||(a.paused&&a.play(),s.drawImage(a,0,0,l,m),d.addFrame(s),c=e)))}e=e||1e3;var l=this.videoWidth||320,m=this.videoHeight||240;n.width=a.width=l,n.height=a.height=m,d=new GIFEncoder,d.setRepeat(0),d.setDelay(this.frameRate||200),d.setQuality(this.quality||1),d.start(),r=Date.now(),h=requestAnimationFrame(i),u=setTimeout(t,e)},this.stop=function(){h&&(cancelAnimationFrame(h),clearTimeout(u),t())};var o=!1;this.pause=function(){o=!0},this.resume=function(){o=!1},this.ondataavailable=function(){},this.onstop=function(){};var i=this,n=document.createElement("canvas"),s=n.getContext("2d"),a=document.createElement("video");a.muted=!0,a.autoplay=!0,a.src=URL.createObjectURL(e),a.play();var r,l,c,d,u,h=null}function applySelect2EmailField(e){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i),o=!1,i=!1,n=$("#community_username").html();$(e).select2({createSearchChoice:function(e){return e=e.replace(/\s+/g,""),t.test(e)?{id:e,text:e}:void 0},allowClear:!0,multiple:!0,tokenSeparators:[",",";"," "],selectOnBlur:!1,closeOnSelect:!0,tags:$(e).data("tags"),ajax:{url:"/communities/"+n+"/conferences/0/all_friends.json",dataType:"json",data:function(t,n){return $(e).select2("data").filter(function(e){jQuery.isEmptyObject(e)?(o=!1,i=!1):"all_members"==e.id?o=!0:"all_contacts"==e.id&&(i=!0)}),{query:t,page:n,all_members:o,all_contacts:i}},results:function(e){var t=new Array;t=$.map(e.tags,function(e){return{id:e.id,text:e.text,children:e.children}});var o=e.more_contacts;return{results:t,more:o}}}})}function doInitPermission(e){bmRoom.layout.enableAudio(e)?$("#mute-user-audio-"+e.sid).addClass("enabled"):($("#mute-user-audio-"+e.sid).removeClass("enabled"),bmRoom.socket.io.engine.id===e.sid&&($(".enter-test-left .enter-switchbox").hasClass("onactive")&&$("#enter-bg-presenter .enter-test-left .enter-test-list-right").trigger("click"),$("#enter-bg-presenter").is(":visible")&&($("#enter-bg").hide(),$("#enter-bg-presenter").hide()))),bmRoom.socket.io.engine.id===e.sid&&(bmRoom.layout.enableAudio(e)?$("#switch-audio").parent().show():$("#switch-audio").parent().hide(),$("#mic-menu").is(":visible")&&$("#switch-audio").parent().hide()),bmRoom.layout.enableVideo(e)?$("#mute-user-video-"+e.sid).addClass("enabled"):($("#mute-user-video-"+e.sid).removeClass("enabled"),bmRoom.socket.io.engine.id===e.sid&&($(".enter-test-right .enter-switchbox").hasClass("onactive")&&$("#enter-bg-presenter .enter-test-right .enter-test-list-right").trigger("click"),$("#enter-bg-presenter").is(":visible")&&($("#enter-bg").hide(),$("#enter-bg-presenter").hide()))),bmRoom.socket.io.engine.id===e.sid&&(bmRoom.layout.enableVideo(e)?$("#switch-video").parent().show():$("#switch-video").parent().hide(),$("#cam-menu").is(":visible")&&$("#switch-video").parent().hide()),$.each(bmRoom.stream.opens,function(t,o){e.sid===o.sid&&("av"==o.spec?($("#mute-user-video-"+o.sid).addClass("onactive"),$("#mute-user-audio-"+o.sid).removeClass("onactive")):"a"==o.spec&&($("#mute-user-video-"+o.sid).removeClass("onactive"),$("#mute-user-audio-"+o.sid).addClass("onactive")),$("#admin-user-"+o.sid+" .admin-roles-mu").show(),o.aopen?($("#stream-"+o.muxer_id+" .clroom-presenter-signal > span.clroom-mic-on").show(),$("#stream-"+o.muxer_id+" .clroom-presenter-signal > span.clroom-mic-mute").hide()):($("#stream-"+o.muxer_id+" .clroom-presenter-signal > span.clroom-mic-on").hide(),$("#stream-"+o.muxer_id+" .clroom-presenter-signal > span.clroom-mic-mute").show()))}),bmRoom.layout.enableAudio(e)?(bmRoom.socket.io.engine.id===e.sid&&$("#switch-audio").attr("disabled",!1),$("#mute-user-audio-"+e.sid).addClass("enabled")):(bmRoom.socket.io.engine.id===e.sid&&$("#switch-audio").attr("disabled",!0),$("#mute-user-audio-"+e.sid).removeClass("enabled")),bmRoom.layout.enableVideo(e)?(bmRoom.socket.io.engine.id===e.sid&&$("#switch-video").attr("disabled",!1),$("#mute-user-video-"+e.sid).addClass("enabled")):(bmRoom.socket.io.engine.id===e.sid&&$("#switch-video").attr("disabled",!0),$("#mute-user-video-"+e.sid).removeClass("enabled")),bmRoom.layout.resizeTitle()}function addApplauseAvatar(e){var t=applauseElement(e,!0);$("#applause-area > ul").append(t),t.animate({marginTop:"0"},1e3,function(){var t=$("#"+e.timestamp+"-applause-img");setTimeout(function(){t.fadeOut("slow",function(){t.remove()})},5e3),bindApplauseHover(e)})}function applauseElement(e,t){$("body").css("overflow","hidden");var o=$("#applause-area > ul").height()-56*$("#applause-area > ul > li").length,i=e.photo,n="",s="clroom-applause-box-photo",a="",r=$("#applause-info").clone();t&&(n="style='margin-top: "+o+"px'",a=$("#applause-animate").clone(),a.attr("id",e.timestamp+"-applause-img").removeAttr("style")),r.attr("id",e.timestamp+"-applause-info"),r.find(".clroom-applause-name").html(e.name);var l=$("<li id='applause-"+e.timestamp+"' "+n+" ><div class='"+s+"'><img src='"+i+"'></div></li>");return""!=a&&(r.prependTo(l),a.prependTo(l)),l}function bindApplauseHover(e){var t=$("#applause-"+e.timestamp),o=$("#"+e.timestamp+"-applause-info");t.click(function(){o.toggle()})}function getLastTextNodeIn(e){for(;e;){if(3==e.nodeType)return e;e=e.lastChild}}function isRangeAfterNode(e,t){var o,i;return e.compareBoundaryPoints?(o=document.createRange(),i=getLastTextNodeIn(t),i&&o.selectNodeContents(i),o.collapse(!1),e.compareBoundaryPoints(e.START_TO_END,o)>-1):e.compareEndPoints?1==t.nodeType?(o=document.body.createTextRange(),o.moveToElementText(t),o.collapse(!1),e.compareEndPoints("StartToEnd",o)>-1):!1:void 0}function stripHTML(e){var t=document.createElement("DIV");return t.innerHTML=e,t.innerText}function handleUsersList(e){("Temp-Organizer"==e.role||"Organizer"==e.role)&&(bmRoom.admin.admin_list.indexOf(e.sid)<0&&bmRoom.admin.admin_list.push(e.sid),bmRoom.user.admin_list.indexOf(e.sid)<0&&bmRoom.user.admin_list.push(e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.presenter_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.attendee_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.presenter_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.attendee_list,e.sid)),"Presenter"==e.role&&(bmRoom.admin.presenter_list.indexOf(e.sid)<0&&bmRoom.admin.presenter_list.push(e.sid),bmRoom.user.presenter_list.indexOf(e.sid)<0&&bmRoom.user.presenter_list.push(e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.admin_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.attendee_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.admin_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.attendee_list,e.sid)),"Member"==e.role&&(bmRoom.admin.attendee_list.indexOf(e.sid)<0&&bmRoom.admin.attendee_list.push(e.sid),bmRoom.user.attendee_list.indexOf(e.sid)<0&&bmRoom.user.attendee_list.push(e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.admin_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.presenter_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.admin_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.presenter_list,e.sid))}function cancelHandRaise(e){var t=$(e).attr("id").replace("raise-hand-","");"cancel-all-raise-hand"==t?bmRoom.socket.emit("cancel-raise-hand","all"):bmRoom.socket.emit("cancel-raise-hand",t)}function resize_scale(e){var t=e.naturalWidth,o=e.naturalHeight;if(t>o){$(e).width("100%");var i=$(e).width()/(t/o);$(e).height(i);var n=$("ul#bxslider").height();i>n&&$(e).height(n).width("auto")}else if(o>t){$("ul#bxslider li").height("100%"),$(e).height("100%").parent().height("100%");var s=$(e).height()*(t/o);$(e).width(s);var a=$("ul#bxslider").width();s>a&&$(e).width(a).height("auto")}else t==o&&($("ul#bxslider li").height("100%"),$(e).height("100%").width("auto"))}function get_whiteboard_file_title(e){$.ajax({url:"/content_objects/get_object_by_hash_id/"+e,type:"get"})}function open_uploaded_file(e,t){bmRoom.layout.closeAllOthers("whiteboard"),bmRoom.socket.emit("whiteboard:open_uploaded_file",[e,t]),bmRoom.saveRecordingAction("StartWhiteBoardEvent","WHITEBOARD","","","")}function drawLine(e,t){if(bmRoom.whiteboard.currentCtx){var o=convertXY(t);bmRoom.whiteboard.currentCtx.beginPath(),bmRoom.whiteboard.currentCtx.moveTo(bmRoom.whiteboard.drawClient.x,bmRoom.whiteboard.drawClient.y),bmRoom.whiteboard.currentCtx.quadraticCurveTo(bmRoom.whiteboard.drawClient.x,bmRoom.whiteboard.drawClient.y,o.x,o.y),bmRoom.whiteboard.currentCtx.stroke()}}function change_penpoint_style(e){$("#change_size_show").css({width:e+"px",height:e+"px","border-top-left-radius":e+"px","border-top-right-radius":e+"px","border-bottom-right-radius":e+"px","border-bottom-left-radius":e+"px","margin-left":"-"+e/2+"px","margin-top":"-"+e/2+"px"})}function set_the_last(){if($("#slider_thumbnail li:last").offset().left+$("#slider_thumbnail li:last").width()<$("#clroom-ppt-slide-body-out").offset().left+$("#clroom-ppt-slide-body-out").width()){var e=$("#slider_thumbnail").width()-$("#clroom-ppt-slide-body-out").width();e>0&&$("#slider_thumbnail").css("margin-left","-"+e+"px")}}function set_the_first(){if($("#slider_thumbnail li:first").offset().left-5>$("#clroom-ppt-slide-body-out").offset().left){var e=$("#slider_thumbnail").width()-$("#clroom-ppt-slide-body-out").width();e>0&&$("#slider_thumbnail").css("margin-left","0px")}}function noty(e){var t=0,o={animateOpen:"animation.open",animateClose:"animation.close",easing:"animation.easing",speed:"animation.speed",onShow:"callback.onShow",onShown:"callback.afterShow",onClose:"callback.onClose",onCloseClick:"callback.onCloseClick",onClosed:"callback.afterClose"};return jQuery.each(e,function(i,n){if(o[i]){t++;var s=o[i].split(".");e[s[0]]||(e[s[0]]={}),e[s[0]][s[1]]=n?n:function(){},delete e[i]}}),e.closeWith||(e.closeWith=jQuery.noty.defaults.closeWith),e.hasOwnProperty("closeButton")&&(t++,e.closeButton&&e.closeWith.push("button"),delete e.closeButton),e.hasOwnProperty("closeOnSelfClick")&&(t++,e.closeOnSelfClick&&e.closeWith.push("click"),delete e.closeOnSelfClick),e.hasOwnProperty("closeOnSelfOver")&&(t++,e.closeOnSelfOver&&e.closeWith.push("hover"),delete e.closeOnSelfOver),e.hasOwnProperty("custom")&&(t++,"null"!=e.custom.container&&(e.custom=e.custom.container)),e.hasOwnProperty("cssPrefix")&&(t++,delete e.cssPrefix),"noty_theme_default"==e.theme&&(t++,e.theme="defaultTheme"),e.hasOwnProperty("dismissQueue")||(e.dismissQueue=jQuery.noty.defaults.dismissQueue),e.buttons&&jQuery.each(e.buttons,function(e,o){o.click&&(t++,o.onClick=o.click,delete o.click),o.type&&(t++,o.addClass=o.type,delete o.type)}),t&&"undefined"!=typeof console&&console.warn&&console.warn("You are using noty v2 with v1.x.x options. @deprecated until v2.2.0 - Please update your options."),jQuery.notyRenderer.init(e)}function play_bigroom_video(e,t,o){t="undefined"!=typeof t?t:!1;var i=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/g,n=$(e).data("link"),s="";return a=n.replace(i,function(i,a){s=a,bmRoom.videoShare.currentVideo.youtubeLink=$(e).data("link"),bmRoom.videoShare.currentVideo.isMuted=0,bmRoom.videoShare.currentVideo.playingState="-1",bmRoom.videoShare.currentVideo.eventTime=Date.now(),bmRoom.videoShare.currentVideo.elapseTime=0,bmRoom.videoShare.currentVideo.volume=$(".volume-bar").attr("volume-value"),t&&(bmRoom.videoShare.currentVideo.playingState="1",bmRoom.videoShare.currentVideo.autoplay=999,bmRoom.videoShare.currentVideo.startAt=o),bmRoom.layout.closeAllOthers("youtube"),bmRoom.socket.emit("videoShare:load",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("StartYoutubeShareEvent","YOUTUBE","","",n),t?bmRoom.socket.emit("videoShare:action","autoplay"):bmRoom.socket.emit("videoShare:action","shared"),$(".clroom-modal-box, #bigroom_invite_people").hide()}),!1}function onPlayerReady(){switch($("#video-share-container").fitVids(),$("#total-video-duration").html(second_to_time(youtubePlayer.getDuration())),updateProgressBarDisplay(),Number(bmRoom.videoShare.currentVideo.playingState)){case-1:break;case 0:break;case 1:var e=Math.round((Date.now()-Number(bmRoom.videoShare.currentVideo.eventTime))/1e3);999==Number(bmRoom.videoShare.currentVideo.autoplay)&&(e=Math.round((Date.now()-Number(bmRoom.videoShare.currentVideo.startAt))/1e3));var t=Number(bmRoom.videoShare.currentVideo.elapseTime)+e;t<youtubePlayer.getDuration()&&playAndSeek(t);break;case 2:var t=Number(bmRoom.videoShare.currentVideo.elapseTime);playAndSeek(t);break;case 3:break;case 5:}}function onPlayerStateChange(e){e.data!=YT.PlayerState.PLAYING||done||(setTimeout(stopVideo,6e3),done=!0)}function stopVideo(){youtubePlayer.stopVideo()}function startProgressBar(){if(updateProgressBarDisplay(),clearProgressBarInterval(),youtubePlayer.getPlayerState()!=YT.PlayerState.PAUSED){var e=setInterval(function(){updateProgressBarDisplay(),youtubePlayer.getPlayerState()==YT.PlayerState.ENDED&&(bmRoom.videoShare.currentVideo.playingState=YT.PlayerState.ENDED,bmRoom.videoShare.currentVideo.elapseTime=0,$("#video-share-container .play-pause-video-button").removeClass("onactive"),clearProgressBarInterval())},1e3);progressBarHandle.push(e)}}function updateProgressBarDisplay(){ratio=youtubePlayer.getDuration()>0?youtubePlayer.getCurrentTime()/youtubePlayer.getDuration():0,$("#elapsed-progress").css("width",100*ratio+"%"),$("#elapsed-progress-handle").css("left",100*ratio-.5+"%"),$("#video-current-elapse").html(second_to_time(youtubePlayer.getCurrentTime())),$("#total-video-duration").html(second_to_time(youtubePlayer.getDuration()))}function cleanUpYouTubeEnding(){youtubePlayer.getPlayerState()==YT.PlayerState.ENDED&&clearProgressBarInterval()}function clearProgressBarInterval(){progressBarHandle.forEach(function(e){clearInterval(e)}),progressBarHandle=[]}function second_to_time(e){var t=Math.round(parseInt(e/3600)%24),o=Math.round(parseInt(e/60)%60),i=Math.round(e%60),n=(10>t?"0"+t:t)+":"+(10>o?"0"+o:o)+":"+(10>i?"0"+i:i);return n}function pauseProgressBar(){progressBarHandle.forEach(function(e){clearInterval(e)})}function setVolumeBar(e){youtubePlayer.setVolume(e.volume),$("#video-share-container .volume-bar").attr("volume-value",e.volume),$("#video-share-container .clroom-video-volume-current").css("width",e.volume+"%"),$("#video-share-container .clroom-video-volume-handle").css("right",100-e.volume+"%")}function playAndSeek(e){if(youtubePlayer.playVideo(),setVolumeBar(bmRoom.videoShare.currentVideo),e>0)var t=0,o=setInterval(function(){1==youtubePlayer.getPlayerState()?(youtubePlayer.seekTo(e+t,!0),ratio=(e+t)/youtubePlayer.getDuration(),$("#elapsed-progress").css("width",100*ratio+"%"),$("#elapsed-progress-handle").css("left",100*ratio-.5+"%"),clearInterval(o),1==Number(bmRoom.videoShare.currentVideo.isMuted)?(youtubePlayer.mute(),$("#video-share-container .mute-unmute-video-button").addClass("muteon")):(youtubePlayer.unMute(),$("#video-share-container .mute-unmute-video-button").removeClass("muteon")),2==Number(bmRoom.videoShare.currentVideo.playingState)?(youtubePlayer.pauseVideo(),$("#video-share-container .play-pause-video-button").removeClass("onactive"),pauseProgressBar()):($("#video-share-container .play-pause-video-button").addClass("onactive"),startProgressBar())):t++},1e3);else startProgressBar()}function onYouTubeIframeAPIReady(){}function playMp4Video(e,t,o){t="undefined"!=typeof t?t:!1;var i=$(e).data("link");return bmRoom.mp4Share.currentVideo.link=i,bmRoom.mp4Share.currentVideo.isMuted=0,bmRoom.mp4Share.currentVideo.playingState=0,bmRoom.mp4Share.currentVideo.eventTime=Date.now(),bmRoom.mp4Share.currentVideo.elapseTime=0,bmRoom.mp4Share.currentVideo.volume=$("#mp4-share-container .volume-bar").attr("volume-value"),t&&(bmRoom.mp4Share.currentVideo.playingState=1,bmRoom.mp4Share.currentVideo.autoplay=999,bmRoom.mp4Share.currentVideo.startAt=o),bmRoom.layout.closeAllOthers(),bmRoom.socket.emit("mp4Share:load",bmRoom.mp4Share.currentVideo),t||bmRoom.socket.emit("mp4Share:action","shared"),$(".clroom-modal-box, #bigroom_invite_people").hide(),!1}function updateMP4ProgressBarDisplay(){if(bmRoom.mp4Share.video){var e=bmRoom.mp4Share.video.currentTime,t=bmRoom.mp4Share.video.duration;ratio=t>0?e/t:0,e==t&&(bmRoom.mp4Share.currentVideo.playingState=3),$("#mp4-elapsed-progress").css("width",100*ratio+"%"),$("#mp4-elapsed-progress-handle").css("left",100*ratio-.5+"%"),$("#mp4-current-elapse").html(second_to_time(e)),$("#total-mp4-duration").html(second_to_time(t))}}function setVolumeBar(e){$("#mp4-share-container .volume-bar").attr("volume-value",e.volume),$("#mp4-share-container .clroom-video-volume-current").css("width",e.volume+"%"),$("#mp4-share-container .clroom-video-volume-handle").css("right",100-e.volume+"%")}function mp4PlayAndSeek(e){if(2!=Number(bmRoom.mp4Share.currentVideo.playingState)&&bmRoom.mp4Share.video.play(),setVolumeBar(bmRoom.mp4Share.currentVideo),e=parseFloat(e),e>0)var t=0,o=setInterval(function(){bmRoom.mp4Share.video?(bmRoom.mp4Share.video.currentTime=e+t,ratio=(e+t)/bmRoom.mp4Share.video.duration,$("#mp4-elapsed-progress").css("width",100*ratio+"%"),$("#mp4-elapsed-progress-handle").css("left",100*ratio-.5+"%"),clearInterval(o),1==Number(bmRoom.mp4Share.currentVideo.isMuted)?(bmRoom.mp4Share.volume=0,$("#mp4-share-container .mute-unmute-video-button").addClass("muteon")):(bmRoom.mp4Share.video.volume=parseInt(bmRoom.mp4Share.currentVideo.volume)/100,$("#mp4-share-container .mute-unmute-video-button").removeClass("muteon")),2==Number(bmRoom.mp4Share.currentVideo.playingState)?(bmRoom.mp4Share.video.pause(),$("#mp4-share-container .play-pause-video-button").removeClass("onactive")):$("#mp4-share-container .play-pause-video-button").addClass("onactive")):t++,setVolumeBar(bmRoom.mp4Share.currentVideo)},1e3)}function onMP4PlayerReady(){switch($("#mp4-share-container").fitVids(),$("#total-mp4-duration").html(second_to_time(bmRoom.mp4Share.video.duration)),updateMP4ProgressBarDisplay(),Number(bmRoom.mp4Share.currentVideo.playingState)){case 0:break;case 1:var e=Math.round((Date.now()-Number(bmRoom.mp4Share.currentVideo.eventTime))/1e3);999==Number(bmRoom.mp4Share.currentVideo.autoplay)&&(e=Math.round((Date.now()-Number(bmRoom.mp4Share.currentVideo.startAt))/1e3));var t=Number(bmRoom.mp4Share.currentVideo.elapseTime)+e;t<bmRoom.mp4Share.video.duration&&mp4PlayAndSeek(t);break;case 2:var t=Number(bmRoom.mp4Share.currentVideo.elapseTime);mp4PlayAndSeek(t);break;case 3:}}function second_to_time(e){var t=Math.round(parseInt(e/3600)%24),o=Math.round(parseInt(e/60)%60),i=Math.round(e%60),n=(10>t?"0"+t:t)+":"+(10>o?"0"+o:o)+":"+(10>i?"0"+i:i);return n}function checkHash(e){return e?e.match(/^#/)?e:"#"+e:"#"}function getCaretCharacterOffsetWithin(e){var t,o=0,i=e.ownerDocument||e.document,n=i.defaultView||i.parentWindow;if("undefined"!=typeof n.getSelection){if(t=n.getSelection(),t.rangeCount>0){var s=n.getSelection().getRangeAt(0),a=s.cloneRange();a.selectNodeContents(e),a.setEnd(s.endContainer,s.endOffset),o=a.toString().length}}else if((t=i.selection)&&"Control"!=t.type){var r=t.createRange(),l=i.body.createTextRange();l.moveToElementText(e),l.setEndPoint("EndToEnd",r),o=l.text.length}return o}function timeDifference(e,t){var o=Math.abs(e-t),i=Math.floor(o/1e3/60/60/24);o-=1e3*i*60*60*24;var n=Math.floor(o/1e3/60/60);o-=1e3*n*60*60;var s=Math.floor(o/1e3/60);o-=1e3*s*60;var a=Math.floor(o/1e3);return i>0?i+"d":n>0?n+"h":s>0?s+"m":a>0?a+"s":"now"}function bindKnockEvent(e){var t=$("#"+e+"-li .knock-btn > a");t.click(function(){var e=$(this).data("random-id"),t=$(this).data("knock-status"),o=$(this).data("user-name"),i=$(this).data("user-email");$.ajax({url:$("#server_url").val()+"/knock-to-enter-response",data:{obfuscated_id:bmRoom.twilioCall.obfuscatedId,user_name:o,user_email:i,knock_status:t},type:"get",dataType:"jsonp",crossDomain:!0,success:function(){}}),$("#"+e+"-li").remove(),bmRoom.socket.emit("knock:action",{random_id:e,name:o,email:i,confId:bmRoom.twilioCall.obfuscatedId,action:t,handler:{name:bmRoom.my.name}}),bmRoom.saveRecordingAction(t.capitalizeFirstLetter(),"KnockKnock","","","",bmRoom.socket.io.engine.id,bmRoom.my.name,"","knock-from-"+o),0==$("#knock-box-waiting-list > li").length&&$("#knock_notification_box").hide()})}function checkCreditCardType(e){$("#credit_card_raw_card_number").keyup(function(){var t=GetCreditCardTypeByNumber($("#credit_card_raw_card_number").val());"?"==t?$(e).children().removeClass("onactive"):($("."+t).addClass("onactive"),$("."+t).siblings().removeClass("onactive"),"amex-card"==t?"XXX"==$("#credit_card_raw_card_verification_code").attr("placeholder")&&$("#credit_card_raw_card_verification_code").attr("placeholder","XXXX"):"XXXX"==$("#credit_card_raw_card_verification_code").attr("placeholder")&&$("#credit_card_raw_card_verification_code").attr("placeholder","XXX"))
})}function setUpLandingPageCreditCardForm(){$("#credit-card-form").length>0&&!$("#credit-card-form").hasClass("close")&&($("#credit_card_usage").val(""),activateNewCardTab()),$("#saved_credit_card_form").is(":visible")&&$("#credit_card_usage").val($("#credit-card-select").val()),checkCreditCardType(".conf-creation-landing-addcard-topicon"),$(document).on("change","#credit-card-select",function(){$("#credit_card_usage").val($("#credit-card-select").val())}),$(document).on("click","#credit_card_used, #credit_card_new",function(){"onactive"!=this.className&&($("#credit_card_used, #credit_card_new").toggleClass("onactive"),$("#saved_credit_card_form, #add_credit_card_form").toggle()),$("#credit_card_usage").val("credit_card_used"==this.id?$("#credit-card-select").val():"")}),$(document).on("click","#enter_registration_coupon",function(){$(this).hide(),$("#enter_registration_coupon_form").show()}),$(document).on("click","#enter_registration_coupon_form button",function(e){return e.preventDefault(),$.ajax({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/conference_registrations/apply_coupon_code?coupon_code="+$("#conference_coupon_code").val()}),!1}),$("input:checkbox").prettyCheckable({color:"green"})}function activateNewCardTab(){$("#credit_card_new").addClass("onactive"),$("#credit_card_used").removeClass("onactive"),$("#saved_credit_card_form").hide()}function setUpCreditCardForm(){$("#credit-card-form").hasClass("close")||($("#credit_card_billing_address_attributes_country").customSelect(),$("#credit_card_usage").val("")),$("#credit-card-selection-section").hasClass("close")||($("#credit-card-selection-section").is(":visible")&&$("#credit-card-select").msDropDown(),$("#credit_card_usage").val($("#credit-card-select").val())),checkCreditCardType(".creditcard-logo"),$(document).on("change","#credit-card-select",function(){$("#credit_card_usage").val($("#credit-card-select").val())}),$(document).on("click","#enter-new-credit-card-link",function(e){return $("#credit-card-form").removeClass("close"),$("#credit-card-form").hasClass("custom-select-active")||($("#credit_card_billing_address_attributes_country").customSelect(),$("#credit-card-form").addClass("custom-select-active")),$("#credit-card-selection-section").addClass("close"),$("#credit_card_usage").val(""),e.preventDefault(),!1}),$(document).on("click","#use-existing-card-link",function(e){return $("#credit-card-form").addClass("close"),$("#credit-card-selection-section").removeClass("close"),$("#credit-card-selection-section").hasClass("ms-drop-down-active")||($("#credit-card-select").msDropDown(),$("#credit-card-selection-section").addClass("ms-drop-down-active")),$("#credit_card_usage").val($("#credit-card-select").val()),e.preventDefault(),!1}),$("input:checkbox").prettyCheckable({color:"green"})}function GetCreditCardTypeByNumber(e){var t=(e+"").replace(/\s/g,"");return/^(34|37)/.test(t)&&15==t.length?"amex-card":/^(51|52|53|54|55)/.test(t)&&16==t.length?"master-card":!/^(4)/.test(t)||13!=t.length&&16!=t.length?/^(6011)/.test(t)&&16==t.length?"discover-card":"?":"visa-card"}function calculateTodayPrice(){regular_price=$("#regular_price").val(),remaining_credit=Math.round(100*$("#remaining_credit").val())/100,discounted_price="percent_discount"==$("#coupon_type").val()?Math.round(regular_price*(100-$("#coupon_discount_percent").val())*100)/100:"amount_discount"==$("#coupon_type").val()?Math.round(regular_price-100*$("#coupon_discount_amount").val())/100:regular_price,due_today=Math.round(100*(discounted_price-$("#remaining_credit").val()))/100,0>due_today&&(due_today=0),$(".js-credit-remaining").html(remaining_credit>discounted_price?"$"+discounted_price:"$"+remaining_credit),$(".js-today-total").html("yes"==$("#currently_in_trial").val()?"$0 (currently in trial)":"$"+due_today),$(".js-next-billing-cycle-date").html(due_today>0?$("#js_fresh_next_due_date").val():$("#js_next_due_date").val())}function update_room_logo_croods(e){$("#submit_room_logo_form #conference_crop_x").val(e.x),$("#submit_room_logo_form #conference_crop_y").val(e.y),$("#submit_room_logo_form #conference_crop_w").val(e.width),$("#submit_room_logo_form #conference_crop_h").val(e.height)}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function o(e){var t=e.length,o=st.type(e);return"function"===o||st.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===o||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,o){if(st.isFunction(t))return st.grep(e,function(e,i){return!!t.call(e,i,e)!==o});if(t.nodeType)return st.grep(e,function(e){return e===t!==o});if("string"==typeof t){if(mt.test(t))return st.filter(t,e,o);t=st.filter(t,e)}return st.grep(e,function(e){return st.inArray(e,t)>=0!==o})}function n(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function s(e){var t=yt[e]={};return st.each(e.match(wt)||[],function(e,o){t[o]=!0}),t}function a(){ft.addEventListener?(ft.removeEventListener("DOMContentLoaded",r,!1),e.removeEventListener("load",r,!1)):(ft.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))}function r(){(ft.addEventListener||"load"===event.type||"complete"===ft.readyState)&&(a(),st.ready())}function l(e,t,o){if(void 0===o&&1===e.nodeType){var i="data-"+t.replace(Rt,"-$1").toLowerCase();if(o=e.getAttribute(i),"string"==typeof o){try{o="true"===o?!0:"false"===o?!1:"null"===o?null:+o+""===o?+o:Ct.test(o)?st.parseJSON(o):o}catch(n){}st.data(e,t,o)}else o=void 0}return o}function c(e){var t;for(t in e)if(("data"!==t||!st.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function d(e,t,o,i){if(st.acceptData(e)){var n,s,a=st.expando,r=e.nodeType,l=r?st.cache:e,c=r?e[a]:e[a]&&a;if(c&&l[c]&&(i||l[c].data)||void 0!==o||"string"!=typeof t)return c||(c=r?e[a]=G.pop()||st.guid++:a),l[c]||(l[c]=r?{}:{toJSON:st.noop}),("object"==typeof t||"function"==typeof t)&&(i?l[c]=st.extend(l[c],t):l[c].data=st.extend(l[c].data,t)),s=l[c],i||(s.data||(s.data={}),s=s.data),void 0!==o&&(s[st.camelCase(t)]=o),"string"==typeof t?(n=s[t],null==n&&(n=s[st.camelCase(t)])):n=s,n}}function u(e,t,o){if(st.acceptData(e)){var i,n,s=e.nodeType,a=s?st.cache:e,r=s?e[st.expando]:st.expando;if(a[r]){if(t&&(i=o?a[r]:a[r].data)){st.isArray(t)?t=t.concat(st.map(t,st.camelCase)):t in i?t=[t]:(t=st.camelCase(t),t=t in i?[t]:t.split(" ")),n=t.length;for(;n--;)delete i[t[n]];if(o?!c(i):!st.isEmptyObject(i))return}(o||(delete a[r].data,c(a[r])))&&(s?st.cleanData([e],!0):it.deleteExpando||a!=a.window?delete a[r]:a[r]=null)}}}function h(){return!0}function m(){return!1}function p(){try{return ft.activeElement}catch(e){}}function f(e){var t=Ft.split("|"),o=e.createDocumentFragment();if(o.createElement)for(;t.length;)o.createElement(t.pop());return o}function g(e,t){var o,i,n=0,s=typeof e.getElementsByTagName!==xt?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==xt?e.querySelectorAll(t||"*"):void 0;if(!s)for(s=[],o=e.childNodes||e;null!=(i=o[n]);n++)!t||st.nodeName(i,t)?s.push(i):st.merge(s,g(i,t));return void 0===t||t&&st.nodeName(e,t)?st.merge([e],s):s}function b(e){At.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){return st.nodeName(e,"table")&&st.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function _(e){return e.type=(null!==st.find.attr(e,"type"))+"/"+e.type,e}function w(e){var t=Gt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function y(e,t){for(var o,i=0;null!=(o=e[i]);i++)st._data(o,"globalEval",!t||st._data(t[i],"globalEval"))}function $(e,t){if(1===t.nodeType&&st.hasData(e)){var o,i,n,s=st._data(e),a=st._data(t,s),r=s.events;if(r){delete a.handle,a.events={};for(o in r)for(i=0,n=r[o].length;n>i;i++)st.event.add(t,o,r[o][i])}a.data&&(a.data=st.extend({},a.data))}}function k(e,t){var o,i,n;if(1===t.nodeType){if(o=t.nodeName.toLowerCase(),!it.noCloneEvent&&t[st.expando]){n=st._data(t);for(i in n.events)st.removeEvent(t,i,n.handle);t.removeAttribute(st.expando)}"script"===o&&t.text!==e.text?(_(t).text=e.text,w(t)):"object"===o?(t.parentNode&&(t.outerHTML=e.outerHTML),it.html5Clone&&e.innerHTML&&!st.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===o&&At.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===o?t.defaultSelected=t.selected=e.defaultSelected:("input"===o||"textarea"===o)&&(t.defaultValue=e.defaultValue)}}function x(t,o){var i=st(o.createElement(t)).appendTo(o.body),n=e.getDefaultComputedStyle?e.getDefaultComputedStyle(i[0]).display:st.css(i[0],"display");return i.detach(),n}function C(e){var t=ft,o=eo[e];return o||(o=x(e,t),"none"!==o&&o||(Jt=(Jt||st("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Jt[0].contentWindow||Jt[0].contentDocument).document,t.write(),t.close(),o=x(e,t),Jt.detach()),eo[e]=o),o}function R(e,t){return{get:function(){var o=e();if(null!=o)return o?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var o=t.charAt(0).toUpperCase()+t.slice(1),i=t,n=po.length;n--;)if(t=po[n]+o,t in e)return t;return i}function T(e,t){for(var o,i,n,s=[],a=0,r=e.length;r>a;a++)i=e[a],i.style&&(s[a]=st._data(i,"olddisplay"),o=i.style.display,t?(s[a]||"none"!==o||(i.style.display=""),""===i.style.display&&Dt(i)&&(s[a]=st._data(i,"olddisplay",C(i.nodeName)))):s[a]||(n=Dt(i),(o&&"none"!==o||!n)&&st._data(i,"olddisplay",n?o:st.css(i,"display"))));for(a=0;r>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[a]||"":"none"));return e}function D(e,t,o){var i=co.exec(t);return i?Math.max(0,i[1]-(o||0))+(i[2]||"px"):t}function P(e,t,o,i,n){for(var s=o===(i?"border":"content")?4:"width"===t?1:0,a=0;4>s;s+=2)"margin"===o&&(a+=st.css(e,o+Tt[s],!0,n)),i?("content"===o&&(a-=st.css(e,"padding"+Tt[s],!0,n)),"margin"!==o&&(a-=st.css(e,"border"+Tt[s]+"Width",!0,n))):(a+=st.css(e,"padding"+Tt[s],!0,n),"padding"!==o&&(a+=st.css(e,"border"+Tt[s]+"Width",!0,n)));return a}function A(e,t,o){var i=!0,n="width"===t?e.offsetWidth:e.offsetHeight,s=to(e),a=it.boxSizing()&&"border-box"===st.css(e,"boxSizing",!1,s);if(0>=n||null==n){if(n=oo(e,t,s),(0>n||null==n)&&(n=e.style[t]),no.test(n))return n;i=a&&(it.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+P(e,t,o||(a?"border":"content"),i,s)+"px"}function E(e,t,o,i,n){return new E.prototype.init(e,t,o,i,n)}function I(){return setTimeout(function(){fo=void 0}),fo=st.now()}function M(e,t){var o,i={height:e},n=0;for(t=t?1:0;4>n;n+=2-t)o=Tt[n],i["margin"+o]=i["padding"+o]=e;return t&&(i.opacity=i.width=e),i}function j(e,t,o){for(var i,n=(yo[t]||[]).concat(yo["*"]),s=0,a=n.length;a>s;s++)if(i=n[s].call(o,t,e))return i}function O(e,t,o){var i,n,s,a,r,l,c,d,u=this,h={},m=e.style,p=e.nodeType&&Dt(e),f=st._data(e,"fxshow");o.queue||(r=st._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,u.always(function(){u.always(function(){r.unqueued--,st.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(o.overflow=[m.overflow,m.overflowX,m.overflowY],c=st.css(e,"display"),d=C(e.nodeName),"none"===c&&(c=d),"inline"===c&&"none"===st.css(e,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==d?m.zoom=1:m.display="inline-block")),o.overflow&&(m.overflow="hidden",it.shrinkWrapBlocks()||u.always(function(){m.overflow=o.overflow[0],m.overflowX=o.overflow[1],m.overflowY=o.overflow[2]}));for(i in t)if(n=t[i],bo.exec(n)){if(delete t[i],s=s||"toggle"===n,n===(p?"hide":"show")){if("show"!==n||!f||void 0===f[i])continue;p=!0}h[i]=f&&f[i]||st.style(e,i)}if(!st.isEmptyObject(h)){f?"hidden"in f&&(p=f.hidden):f=st._data(e,"fxshow",{}),s&&(f.hidden=!p),p?st(e).show():u.done(function(){st(e).hide()}),u.done(function(){var t;st._removeData(e,"fxshow");for(t in h)st.style(e,t,h[t])});for(i in h)a=j(p?f[i]:0,i,u),i in f||(f[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function F(e,t){var o,i,n,s,a;for(o in e)if(i=st.camelCase(o),n=t[i],s=e[o],st.isArray(s)&&(n=s[1],s=e[o]=s[0]),o!==i&&(e[i]=s,delete e[o]),a=st.cssHooks[i],a&&"expand"in a){s=a.expand(s),delete e[i];for(o in s)o in e||(e[o]=s[o],t[o]=n)}else t[i]=n}function z(e,t,o){var i,n,s=0,a=wo.length,r=st.Deferred().always(function(){delete l.elem}),l=function(){if(n)return!1;for(var t=fo||I(),o=Math.max(0,c.startTime+c.duration-t),i=o/c.duration||0,s=1-i,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(s);return r.notifyWith(e,[c,s,o]),1>s&&l?o:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:st.extend({},t),opts:st.extend(!0,{specialEasing:{}},o),originalProperties:t,originalOptions:o,startTime:fo||I(),duration:o.duration,tweens:[],createTween:function(t,o){var i=st.Tween(e,c.opts,t,o,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var o=0,i=t?c.tweens.length:0;if(n)return this;for(n=!0;i>o;o++)c.tweens[o].run(1);return t?r.resolveWith(e,[c,t]):r.rejectWith(e,[c,t]),this}}),d=c.props;for(F(d,c.opts.specialEasing);a>s;s++)if(i=wo[s].call(c,e,d,c.opts))return i;return st.map(d,j,c),st.isFunction(c.opts.start)&&c.opts.start.call(e,c),st.fx.timer(st.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function L(e){return function(t,o){"string"!=typeof t&&(o=t,t="*");var i,n=0,s=t.toLowerCase().match(wt)||[];if(st.isFunction(o))for(;i=s[n++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(o)):(e[i]=e[i]||[]).push(o)}}function H(e,t,o,i){function n(r){var l;return s[r]=!0,st.each(e[r]||[],function(e,r){var c=r(t,o,i);return"string"!=typeof c||a||s[c]?a?!(l=c):void 0:(t.dataTypes.unshift(c),n(c),!1)}),l}var s={},a=e===Uo;return n(t.dataTypes[0])||!s["*"]&&n("*")}function N(e,t){var o,i,n=st.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:o||(o={}))[i]=t[i]);return o&&st.extend(!0,e,o),e}function B(e,t,o){for(var i,n,s,a,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(a in r)if(r[a]&&r[a].test(n)){l.unshift(a);break}if(l[0]in o)s=l[0];else{for(a in o){if(!l[0]||e.converters[a+" "+l[0]]){s=a;break}i||(i=a)}s=s||i}return s?(s!==l[0]&&l.unshift(s),o[s]):void 0}function W(e,t,o,i){var n,s,a,r,l,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(s=d.shift();s;)if(e.responseFields[s]&&(o[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(a=c[l+" "+s]||c["* "+s],!a)for(n in c)if(r=n.split(" "),r[1]===s&&(a=c[l+" "+r[0]]||c["* "+r[0]])){a===!0?a=c[n]:c[n]!==!0&&(s=r[0],d.unshift(r[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(u){return{state:"parsererror",error:a?u:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function q(e,t,o,i){var n;if(st.isArray(t))st.each(t,function(t,n){o||Xo.test(e)?i(e,n):q(e+"["+("object"==typeof n?t:"")+"]",n,o,i)});else if(o||"object"!==st.type(t))i(e,t);else for(n in t)q(e+"["+n+"]",t[n],o,i)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function V(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Y(e){return st.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var G=[],X=G.slice,Q=G.concat,Z=G.push,K=G.indexOf,J={},et=J.toString,tt=J.hasOwnProperty,ot="".trim,it={},nt="1.11.0",st=function(e,t){return new st.fn.init(e,t)},at=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^-ms-/,lt=/-([\da-z])/gi,ct=function(e,t){return t.toUpperCase()};st.fn=st.prototype={jquery:nt,constructor:st,selector:"",length:0,toArray:function(){return X.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:X.call(this)},pushStack:function(e){var t=st.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return st.each(this,e,t)},map:function(e){return this.pushStack(st.map(this,function(t,o){return e.call(t,o,t)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,o=+e+(0>e?t:0);return this.pushStack(o>=0&&t>o?[this[o]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:G.sort,splice:G.splice},st.extend=st.fn.extend=function(){var e,t,o,i,n,s,a=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[r]||{},r++),"object"==typeof a||st.isFunction(a)||(a={}),r===l&&(a=this,r--);l>r;r++)if(null!=(n=arguments[r]))for(i in n)e=a[i],o=n[i],a!==o&&(c&&o&&(st.isPlainObject(o)||(t=st.isArray(o)))?(t?(t=!1,s=e&&st.isArray(e)?e:[]):s=e&&st.isPlainObject(e)?e:{},a[i]=st.extend(c,s,o)):void 0!==o&&(a[i]=o));return a},st.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===st.type(e)},isArray:Array.isArray||function(e){return"array"===st.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==st.type(e)||e.nodeType||st.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(o){return!1}if(it.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?J[et.call(e)]||"object":typeof e},globalEval:function(t){t&&st.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(rt,"ms-").replace(lt,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var n,s=0,a=e.length,r=o(e);if(i){if(r)for(;a>s&&(n=t.apply(e[s],i),n!==!1);s++);else for(s in e)if(n=t.apply(e[s],i),n===!1)break}else if(r)for(;a>s&&(n=t.call(e[s],s,e[s]),n!==!1);s++);else for(s in e)if(n=t.call(e[s],s,e[s]),n===!1)break;return e},trim:ot&&!ot.call("\ufeff\xa0")?function(e){return null==e?"":ot.call(e)}:function(e){return null==e?"":(e+"").replace(at,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(o(Object(e))?st.merge(i,"string"==typeof e?[e]:e):Z.call(i,e)),i},inArray:function(e,t,o){var i;if(t){if(K)return K.call(t,e,o);for(i=t.length,o=o?0>o?Math.max(0,i+o):o:0;i>o;o++)if(o in t&&t[o]===e)return o}return-1},merge:function(e,t){for(var o=+t.length,i=0,n=e.length;o>i;)e[n++]=t[i++];if(o!==o)for(;void 0!==t[i];)e[n++]=t[i++];return e.length=n,e},grep:function(e,t,o){for(var i,n=[],s=0,a=e.length,r=!o;a>s;s++)i=!t(e[s],s),i!==r&&n.push(e[s]);return n},map:function(e,t,i){var n,s=0,a=e.length,r=o(e),l=[];if(r)for(;a>s;s++)n=t(e[s],s,i),null!=n&&l.push(n);else for(s in e)n=t(e[s],s,i),null!=n&&l.push(n);return Q.apply([],l)},guid:1,proxy:function(e,t){var o,i,n;return"string"==typeof t&&(n=e[t],t=e,e=n),st.isFunction(e)?(o=X.call(arguments,2),i=function(){return e.apply(t||this,o.concat(X.call(arguments)))},i.guid=e.guid=e.guid||st.guid++,i):void 0},now:function(){return+new Date},support:it}),st.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()});var dt=/*!
 * Sizzle CSS Selector Engine v1.10.16
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-13
 */
function(e){function t(e,t,o,i){var n,s,a,r,l,c,u,p,f,g;if((t?t.ownerDocument||t:H)!==E&&A(t),t=t||E,o=o||[],!e||"string"!=typeof e)return o;if(1!==(r=t.nodeType)&&9!==r)return[];if(M&&!i){if(n=vt.exec(e))if(a=n[1]){if(9===r){if(s=t.getElementById(a),!s||!s.parentNode)return o;if(s.id===a)return o.push(s),o}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&z(t,s)&&s.id===a)return o.push(s),o}else{if(n[2])return J.apply(o,t.getElementsByTagName(e)),o;if((a=n[3])&&k.getElementsByClassName&&t.getElementsByClassName)return J.apply(o,t.getElementsByClassName(a)),o}if(k.qsa&&(!j||!j.test(e))){if(p=u=L,f=t,g=9===r&&e,1===r&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(u=t.getAttribute("id"))?p=u.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+m(c[l]);f=_t.test(e)&&d(t.parentNode)||t,g=c.join(",")}if(g)try{return J.apply(o,f.querySelectorAll(g)),o}catch(b){}finally{u||t.removeAttribute("id")}}}return y(e.replace(lt,"$1"),t,o,i)}function o(){function e(o,i){return t.push(o+" ")>x.cacheLength&&delete e[t.shift()],e[o+" "]=i}var t=[];return e}function i(e){return e[L]=!0,e}function n(e){var t=E.createElement("div");try{return!!e(t)}catch(o){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var o=e.split("|"),i=e.length;i--;)x.attrHandle[o[i]]=t}function a(e,t){var o=t&&e,i=o&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(o)for(;o=o.nextSibling;)if(o===t)return-1;return e?1:-1}function r(e){return function(t){var o=t.nodeName.toLowerCase();return"input"===o&&t.type===e}}function l(e){return function(t){var o=t.nodeName.toLowerCase();return("input"===o||"button"===o)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(o,i){for(var n,s=e([],o.length,t),a=s.length;a--;)o[n=s[a]]&&(o[n]=!(i[n]=o[n]))})})}function d(e){return e&&typeof e.getElementsByTagName!==Y&&e}function u(){}function h(e,o){var i,n,s,a,r,l,c,d=q[e+" "];if(d)return o?0:d.slice(0);for(r=e,l=[],c=x.preFilter;r;){(!i||(n=ct.exec(r)))&&(n&&(r=r.slice(n[0].length)||r),l.push(s=[])),i=!1,(n=dt.exec(r))&&(i=n.shift(),s.push({value:i,type:n[0].replace(lt," ")}),r=r.slice(i.length));for(a in x.filter)!(n=pt[a].exec(r))||c[a]&&!(n=c[a](n))||(i=n.shift(),s.push({value:i,type:a,matches:n}),r=r.slice(i.length));if(!i)break}return o?r.length:r?t.error(e):q(e,l).slice(0)}function m(e){for(var t=0,o=e.length,i="";o>t;t++)i+=e[t].value;return i}function p(e,t,o){var i=t.dir,n=o&&"parentNode"===i,s=B++;return t.first?function(t,o,s){for(;t=t[i];)if(1===t.nodeType||n)return e(t,o,s)}:function(t,o,a){var r,l,c=[N,s];if(a){for(;t=t[i];)if((1===t.nodeType||n)&&e(t,o,a))return!0}else for(;t=t[i];)if(1===t.nodeType||n){if(l=t[L]||(t[L]={}),(r=l[i])&&r[0]===N&&r[1]===s)return c[2]=r[2];if(l[i]=c,c[2]=e(t,o,a))return!0}}}function f(e){return e.length>1?function(t,o,i){for(var n=e.length;n--;)if(!e[n](t,o,i))return!1;return!0}:e[0]}function g(e,t,o,i,n){for(var s,a=[],r=0,l=e.length,c=null!=t;l>r;r++)(s=e[r])&&(!o||o(s,i,n))&&(a.push(s),c&&t.push(r));return a}function b(e,t,o,n,s,a){return n&&!n[L]&&(n=b(n)),s&&!s[L]&&(s=b(s,a)),i(function(i,a,r,l){var c,d,u,h=[],m=[],p=a.length,f=i||w(t||"*",r.nodeType?[r]:r,[]),b=!e||!i&&t?f:g(f,h,e,r,l),v=o?s||(i?e:p||n)?[]:a:b;if(o&&o(b,v,r,l),n)for(c=g(v,m),n(c,[],r,l),d=c.length;d--;)(u=c[d])&&(v[m[d]]=!(b[m[d]]=u));if(i){if(s||e){if(s){for(c=[],d=v.length;d--;)(u=v[d])&&c.push(b[d]=u);s(null,v=[],c,l)}for(d=v.length;d--;)(u=v[d])&&(c=s?tt.call(i,u):h[d])>-1&&(i[c]=!(a[c]=u))}}else v=g(v===a?v.splice(p,v.length):v),s?s(null,a,v,l):J.apply(a,v)})}function v(e){for(var t,o,i,n=e.length,s=x.relative[e[0].type],a=s||x.relative[" "],r=s?1:0,l=p(function(e){return e===t},a,!0),c=p(function(e){return tt.call(t,e)>-1},a,!0),d=[function(e,o,i){return!s&&(i||o!==T)||((t=o).nodeType?l(e,o,i):c(e,o,i))}];n>r;r++)if(o=x.relative[e[r].type])d=[p(f(d),o)];else{if(o=x.filter[e[r].type].apply(null,e[r].matches),o[L]){for(i=++r;n>i&&!x.relative[e[i].type];i++);return b(r>1&&f(d),r>1&&m(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(lt,"$1"),o,i>r&&v(e.slice(r,i)),n>i&&v(e=e.slice(i)),n>i&&m(e))}d.push(o)}return f(d)}function _(e,o){var n=o.length>0,s=e.length>0,a=function(i,a,r,l,c){var d,u,h,m=0,p="0",f=i&&[],b=[],v=T,_=i||s&&x.find.TAG("*",c),w=N+=null==v?1:Math.random()||.1,y=_.length;for(c&&(T=a!==E&&a);p!==y&&null!=(d=_[p]);p++){if(s&&d){for(u=0;h=e[u++];)if(h(d,a,r)){l.push(d);break}c&&(N=w)}n&&((d=!h&&d)&&m--,i&&f.push(d))}if(m+=p,n&&p!==m){for(u=0;h=o[u++];)h(f,b,a,r);if(i){if(m>0)for(;p--;)f[p]||b[p]||(b[p]=Z.call(l));b=g(b)}J.apply(l,b),c&&!i&&b.length>0&&m+o.length>1&&t.uniqueSort(l)}return c&&(N=w,T=v),f};return n?i(a):a}function w(e,o,i){for(var n=0,s=o.length;s>n;n++)t(e,o[n],i);return i}function y(e,t,o,i){var n,s,a,r,l,c=h(e);if(!i&&1===c.length){if(s=c[0]=c[0].slice(0),s.length>2&&"ID"===(a=s[0]).type&&k.getById&&9===t.nodeType&&M&&x.relative[s[1].type]){if(t=(x.find.ID(a.matches[0].replace(yt,$t),t)||[])[0],!t)return o;e=e.slice(s.shift().value.length)}for(n=pt.needsContext.test(e)?0:s.length;n--&&(a=s[n],!x.relative[r=a.type]);)if((l=x.find[r])&&(i=l(a.matches[0].replace(yt,$t),_t.test(s[0].type)&&d(t.parentNode)||t))){if(s.splice(n,1),e=i.length&&m(s),!e)return J.apply(o,i),o;break}}return S(e,c)(i,t,!M,o,_t.test(e)&&d(t.parentNode)||t),o}var $,k,x,C,R,S,T,D,P,A,E,I,M,j,O,F,z,L="sizzle"+-new Date,H=e.document,N=0,B=0,W=o(),q=o(),U=o(),V=function(e,t){return e===t&&(P=!0),0},Y="undefined",G=1<<31,X={}.hasOwnProperty,Q=[],Z=Q.pop,K=Q.push,J=Q.push,et=Q.slice,tt=Q.indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(this[t]===e)return t;return-1},ot="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",nt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=nt.replace("w","w#"),at="\\["+it+"*("+nt+")"+it+"*(?:([*^$|!~]?=)"+it+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+it+"*\\]",rt=":("+nt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+at.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),dt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ut=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ht=new RegExp(rt),mt=new RegExp("^"+st+"$"),pt={ID:new RegExp("^#("+nt+")"),CLASS:new RegExp("^\\.("+nt+")"),TAG:new RegExp("^("+nt.replace("w","w*")+")"),ATTR:new RegExp("^"+at),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+ot+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,bt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_t=/[+~]/,wt=/'|\\/g,yt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),$t=function(e,t,o){var i="0x"+t-65536;return i!==i||o?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{J.apply(Q=et.call(H.childNodes),H.childNodes),Q[H.childNodes.length].nodeType}catch(kt){J={apply:Q.length?function(e,t){K.apply(e,et.call(t))}:function(e,t){for(var o=e.length,i=0;e[o++]=t[i++];);e.length=o-1}}}k=t.support={},R=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},A=t.setDocument=function(e){var t,o=e?e.ownerDocument||e:H,i=o.defaultView;return o!==E&&9===o.nodeType&&o.documentElement?(E=o,I=o.documentElement,M=!R(o),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){A()},!1):i.attachEvent&&i.attachEvent("onunload",function(){A()})),k.attributes=n(function(e){return e.className="i",!e.getAttribute("className")}),k.getElementsByTagName=n(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),k.getElementsByClassName=bt.test(o.getElementsByClassName)&&n(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),k.getById=n(function(e){return I.appendChild(e).id=L,!o.getElementsByName||!o.getElementsByName(L).length}),k.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==Y&&M){var o=t.getElementById(e);return o&&o.parentNode?[o]:[]}},x.filter.ID=function(e){var t=e.replace(yt,$t);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(yt,$t);return function(e){var o=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return o&&o.value===t}}),x.find.TAG=k.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var o,i=[],n=0,s=t.getElementsByTagName(e);if("*"===e){for(;o=s[n++];)1===o.nodeType&&i.push(o);return i}return s},x.find.CLASS=k.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&M?t.getElementsByClassName(e):void 0},O=[],j=[],(k.qsa=bt.test(o.querySelectorAll))&&(n(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&j.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+it+"*(?:value|"+ot+")"),e.querySelectorAll(":checked").length||j.push(":checked")}),n(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(k.matchesSelector=bt.test(F=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&n(function(e){k.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),O.push("!=",rt)}),j=j.length&&new RegExp(j.join("|")),O=O.length&&new RegExp(O.join("|")),t=bt.test(I.compareDocumentPosition),z=t||bt.test(I.contains)?function(e,t){var o=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(o.contains?o.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return P=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!k.sortDetached&&t.compareDocumentPosition(e)===i?e===o||e.ownerDocument===H&&z(H,e)?-1:t===o||t.ownerDocument===H&&z(H,t)?1:D?tt.call(D,e)-tt.call(D,t):0:4&i?-1:1)}:function(e,t){if(e===t)return P=!0,0;var i,n=0,s=e.parentNode,r=t.parentNode,l=[e],c=[t];if(!s||!r)return e===o?-1:t===o?1:s?-1:r?1:D?tt.call(D,e)-tt.call(D,t):0;if(s===r)return a(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[n]===c[n];)n++;return n?a(l[n],c[n]):l[n]===H?-1:c[n]===H?1:0},o):E},t.matches=function(e,o){return t(e,null,null,o)},t.matchesSelector=function(e,o){if((e.ownerDocument||e)!==E&&A(e),o=o.replace(ut,"='$1']"),!(!k.matchesSelector||!M||O&&O.test(o)||j&&j.test(o)))try{var i=F.call(e,o);if(i||k.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(n){}return t(o,E,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==E&&A(e),z(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==E&&A(e);var o=x.attrHandle[t.toLowerCase()],i=o&&X.call(x.attrHandle,t.toLowerCase())?o(e,t,!M):void 0;return void 0!==i?i:k.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,o=[],i=0,n=0;if(P=!k.detectDuplicates,D=!k.sortStable&&e.slice(0),e.sort(V),P){for(;t=e[n++];)t===e[n]&&(i=o.push(n));for(;i--;)e.splice(o[i],1)}return D=null,e},C=t.getText=function(e){var t,o="",i=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)o+=C(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[i++];)o+=C(t);return o},x=t.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(yt,$t),e[3]=(e[4]||e[5]||"").replace(yt,$t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,o=!e[5]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:o&&ht.test(o)&&(t=h(o,!0))&&(t=o.indexOf(")",o.length-t)-o.length)&&(e[0]=e[0].slice(0,t),e[2]=o.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(yt,$t).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,o,i){return function(n){var s=t.attr(n,e);return null==s?"!="===o:o?(s+="","="===o?s===i:"!="===o?s!==i:"^="===o?i&&0===s.indexOf(i):"*="===o?i&&s.indexOf(i)>-1:"$="===o?i&&s.slice(-i.length)===i:"~="===o?(" "+s+" ").indexOf(i)>-1:"|="===o?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,o,i,n){var s="nth"!==e.slice(0,3),a="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,o,l){var c,d,u,h,m,p,f=s!==a?"nextSibling":"previousSibling",g=t.parentNode,b=r&&t.nodeName.toLowerCase(),v=!l&&!r;if(g){if(s){for(;f;){for(u=t;u=u[f];)if(r?u.nodeName.toLowerCase()===b:1===u.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&v){for(d=g[L]||(g[L]={}),c=d[e]||[],m=c[0]===N&&c[1],h=c[0]===N&&c[2],u=m&&g.childNodes[m];u=++m&&u&&u[f]||(h=m=0)||p.pop();)if(1===u.nodeType&&++h&&u===t){d[e]=[N,m,h];break}}else if(v&&(c=(t[L]||(t[L]={}))[e])&&c[0]===N)h=c[1];else for(;(u=++m&&u&&u[f]||(h=m=0)||p.pop())&&((r?u.nodeName.toLowerCase()!==b:1!==u.nodeType)||!++h||(v&&((u[L]||(u[L]={}))[e]=[N,h]),u!==t)););return h-=n,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(e,o){var n,s=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[L]?s(o):s.length>1?(n=[e,e,"",o],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,n=s(e,o),a=n.length;a--;)i=tt.call(e,n[a]),e[i]=!(t[i]=n[a])}):function(e){return s(e,0,n)}):s}},pseudos:{not:i(function(e){var t=[],o=[],n=S(e.replace(lt,"$1"));return n[L]?i(function(e,t,o,i){for(var s,a=n(e,null,i,[]),r=e.length;r--;)(s=a[r])&&(e[r]=!(t[r]=s))}):function(e,i,s){return t[0]=e,n(t,null,s,o),!o.pop()}}),has:i(function(e){return function(o){return t(e,o).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return mt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(yt,$t).toLowerCase(),function(t){var o;do if(o=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return o=o.toLowerCase(),o===e||0===o.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var o=e.location&&e.location.hash;return o&&o.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return ft.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,o){return[0>o?o+t:o]}),even:c(function(e,t){for(var o=0;t>o;o+=2)e.push(o);return e}),odd:c(function(e,t){for(var o=1;t>o;o+=2)e.push(o);return e}),lt:c(function(e,t,o){for(var i=0>o?o+t:o;--i>=0;)e.push(i);return e}),gt:c(function(e,t,o){for(var i=0>o?o+t:o;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for($ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[$]=r($);for($ in{submit:!0,reset:!0})x.pseudos[$]=l($);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,S=t.compile=function(e,t){var o,i=[],n=[],s=U[e+" "];if(!s){for(t||(t=h(e)),o=t.length;o--;)s=v(t[o]),s[L]?i.push(s):n.push(s);s=U(e,_(n,i))}return s},k.sortStable=L.split("").sort(V).join("")===L,k.detectDuplicates=!!P,A(),k.sortDetached=n(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),n(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,o){return o?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),k.attributes&&n(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,o){return o||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),n(function(e){return null==e.getAttribute("disabled")})||s(ot,function(e,t,o){var i;return o?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);st.find=dt,st.expr=dt.selectors,st.expr[":"]=st.expr.pseudos,st.unique=dt.uniqueSort,st.text=dt.getText,st.isXMLDoc=dt.isXML,st.contains=dt.contains;var ut=st.expr.match.needsContext,ht=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,mt=/^.[^:#\[\.,]*$/;st.filter=function(e,t,o){var i=t[0];return o&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?st.find.matchesSelector(i,e)?[i]:[]:st.find.matches(e,st.grep(t,function(e){return 1===e.nodeType}))},st.fn.extend({find:function(e){var t,o=[],i=this,n=i.length;if("string"!=typeof e)return this.pushStack(st(e).filter(function(){for(t=0;n>t;t++)if(st.contains(i[t],this))return!0}));for(t=0;n>t;t++)st.find(e,i[t],o);return o=this.pushStack(n>1?st.unique(o):o),o.selector=this.selector?this.selector+" "+e:e,o},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ut.test(e)?st(e):e||[],!1).length}});var pt,ft=e.document,gt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,bt=st.fn.init=function(e,t){var o,i;if(!e)return this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:gt.exec(e),!o||!o[1]&&t)return!t||t.jquery?(t||pt).find(e):this.constructor(t).find(e);if(o[1]){if(t=t instanceof st?t[0]:t,st.merge(this,st.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:ft,!0)),ht.test(o[1])&&st.isPlainObject(t))for(o in t)st.isFunction(this[o])?this[o](t[o]):this.attr(o,t[o]);return this}if(i=ft.getElementById(o[2]),i&&i.parentNode){if(i.id!==o[2])return pt.find(e);this.length=1,this[0]=i}return this.context=ft,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):st.isFunction(e)?"undefined"!=typeof pt.ready?pt.ready(e):e(st):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),st.makeArray(e,this))};bt.prototype=st.fn,pt=st(ft);var vt=/^(?:parents|prev(?:Until|All))/,_t={children:!0,contents:!0,next:!0,prev:!0};st.extend({dir:function(e,t,o){for(var i=[],n=e[t];n&&9!==n.nodeType&&(void 0===o||1!==n.nodeType||!st(n).is(o));)1===n.nodeType&&i.push(n),n=n[t];return i},sibling:function(e,t){for(var o=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&o.push(e);return o}}),st.fn.extend({has:function(e){var t,o=st(e,this),i=o.length;return this.filter(function(){for(t=0;i>t;t++)if(st.contains(this,o[t]))return!0})},closest:function(e,t){for(var o,i=0,n=this.length,s=[],a=ut.test(e)||"string"!=typeof e?st(e,t||this.context):0;n>i;i++)for(o=this[i];o&&o!==t;o=o.parentNode)if(o.nodeType<11&&(a?a.index(o)>-1:1===o.nodeType&&st.find.matchesSelector(o,e))){s.push(o);break}return this.pushStack(s.length>1?st.unique(s):s)},index:function(e){return e?"string"==typeof e?st.inArray(this[0],st(e)):st.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(st.unique(st.merge(this.get(),st(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),st.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return st.dir(e,"parentNode")},parentsUntil:function(e,t,o){return st.dir(e,"parentNode",o)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return st.dir(e,"nextSibling")},prevAll:function(e){return st.dir(e,"previousSibling")},nextUntil:function(e,t,o){return st.dir(e,"nextSibling",o)},prevUntil:function(e,t,o){return st.dir(e,"previousSibling",o)},siblings:function(e){return st.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return st.sibling(e.firstChild)},contents:function(e){return st.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:st.merge([],e.childNodes)}},function(e,t){st.fn[e]=function(o,i){var n=st.map(this,t,o);return"Until"!==e.slice(-5)&&(i=o),i&&"string"==typeof i&&(n=st.filter(i,n)),this.length>1&&(_t[e]||(n=st.unique(n)),vt.test(e)&&(n=n.reverse())),this.pushStack(n)}});var wt=/\S+/g,yt={};st.Callbacks=function(e){e="string"==typeof e?yt[e]||s(e):st.extend({},e);var t,o,i,n,a,r,l=[],c=!e.once&&[],d=function(s){for(o=e.memory&&s,i=!0,a=r||0,r=0,n=l.length,t=!0;l&&n>a;a++)if(l[a].apply(s[0],s[1])===!1&&e.stopOnFalse){o=!1;break}t=!1,l&&(c?c.length&&d(c.shift()):o?l=[]:u.disable())},u={add:function(){if(l){var i=l.length;!function s(t){st.each(t,function(t,o){var i=st.type(o);"function"===i?e.unique&&u.has(o)||l.push(o):o&&o.length&&"string"!==i&&s(o)})}(arguments),t?n=l.length:o&&(r=i,d(o))}return this},remove:function(){return l&&st.each(arguments,function(e,o){for(var i;(i=st.inArray(o,l,i))>-1;)l.splice(i,1),t&&(n>=i&&n--,a>=i&&a--)}),this},has:function(e){return e?st.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],n=0,this},disable:function(){return l=c=o=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,o||u.disable(),this},locked:function(){return!c},fireWith:function(e,o){return!l||i&&!c||(o=o||[],o=[e,o.slice?o.slice():o],t?c.push(o):d(o)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},st.extend({Deferred:function(e){var t=[["resolve","done",st.Callbacks("once memory"),"resolved"],["reject","fail",st.Callbacks("once memory"),"rejected"],["notify","progress",st.Callbacks("memory")]],o="pending",i={state:function(){return o},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return st.Deferred(function(o){st.each(t,function(t,s){var a=st.isFunction(e[t])&&e[t];n[s[1]](function(){var e=a&&a.apply(this,arguments);e&&st.isFunction(e.promise)?e.promise().done(o.resolve).fail(o.reject).progress(o.notify):o[s[0]+"With"](this===i?o.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?st.extend(e,i):i}},n={};return i.pipe=i.then,st.each(t,function(e,s){var a=s[2],r=s[3];i[s[1]]=a.add,r&&a.add(function(){o=r},t[1^e][2].disable,t[2][2].lock),n[s[0]]=function(){return n[s[0]+"With"](this===n?i:this,arguments),this},n[s[0]+"With"]=a.fireWith}),i.promise(n),e&&e.call(n,n),n},when:function(e){var t,o,i,n=0,s=X.call(arguments),a=s.length,r=1!==a||e&&st.isFunction(e.promise)?a:0,l=1===r?e:st.Deferred(),c=function(e,o,i){return function(n){o[e]=this,i[e]=arguments.length>1?X.call(arguments):n,i===t?l.notifyWith(o,i):--r||l.resolveWith(o,i)}};if(a>1)for(t=new Array(a),o=new Array(a),i=new Array(a);a>n;n++)s[n]&&st.isFunction(s[n].promise)?s[n].promise().done(c(n,i,s)).fail(l.reject).progress(c(n,o,t)):--r;return r||l.resolveWith(i,s),l.promise()}});var $t;st.fn.ready=function(e){return st.ready.promise().done(e),this},st.extend({isReady:!1,readyWait:1,holdReady:function(e){e?st.readyWait++:st.ready(!0)},ready:function(e){if(e===!0?!--st.readyWait:!st.isReady){if(!ft.body)return setTimeout(st.ready);st.isReady=!0,e!==!0&&--st.readyWait>0||($t.resolveWith(ft,[st]),st.fn.trigger&&st(ft).trigger("ready").off("ready"))}}}),st.ready.promise=function(t){if(!$t)if($t=st.Deferred(),"complete"===ft.readyState)setTimeout(st.ready);else if(ft.addEventListener)ft.addEventListener("DOMContentLoaded",r,!1),e.addEventListener("load",r,!1);else{ft.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var o=!1;try{o=null==e.frameElement&&ft.documentElement}catch(i){}o&&o.doScroll&&!function n(){if(!st.isReady){try{o.doScroll("left")}catch(e){return setTimeout(n,50)}a(),st.ready()}}()}return $t.promise(t)};var kt,xt="undefined";for(kt in st(it))break;it.ownLast="0"!==kt,it.inlineBlockNeedsLayout=!1,st(function(){var e,t,o=ft.getElementsByTagName("body")[0];o&&(e=ft.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=ft.createElement("div"),o.appendChild(e).appendChild(t),typeof t.style.zoom!==xt&&(t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(it.inlineBlockNeedsLayout=3===t.offsetWidth)&&(o.style.zoom=1)),o.removeChild(e),e=t=null)}),function(){var e=ft.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(t){it.deleteExpando=!1}}e=null}(),st.acceptData=function(e){var t=st.noData[(e.nodeName+" ").toLowerCase()],o=+e.nodeType||1;return 1!==o&&9!==o?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Ct=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Rt=/([A-Z])/g;st.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?st.cache[e[st.expando]]:e[st.expando],!!e&&!c(e)},data:function(e,t,o){return d(e,t,o)},removeData:function(e,t){return u(e,t)},_data:function(e,t,o){return d(e,t,o,!0)},_removeData:function(e,t){return u(e,t,!0)}}),st.fn.extend({data:function(e,t){var o,i,n,s=this[0],a=s&&s.attributes;if(void 0===e){if(this.length&&(n=st.data(s),1===s.nodeType&&!st._data(s,"parsedAttrs"))){for(o=a.length;o--;)i=a[o].name,0===i.indexOf("data-")&&(i=st.camelCase(i.slice(5)),l(s,i,n[i]));st._data(s,"parsedAttrs",!0)}return n}return"object"==typeof e?this.each(function(){st.data(this,e)}):arguments.length>1?this.each(function(){st.data(this,e,t)}):s?l(s,e,st.data(s,e)):void 0},removeData:function(e){return this.each(function(){st.removeData(this,e)})}}),st.extend({queue:function(e,t,o){var i;return e?(t=(t||"fx")+"queue",i=st._data(e,t),o&&(!i||st.isArray(o)?i=st._data(e,t,st.makeArray(o)):i.push(o)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var o=st.queue(e,t),i=o.length,n=o.shift(),s=st._queueHooks(e,t),a=function(){st.dequeue(e,t)};"inprogress"===n&&(n=o.shift(),i--),n&&("fx"===t&&o.unshift("inprogress"),delete s.stop,n.call(e,a,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var o=t+"queueHooks";return st._data(e,o)||st._data(e,o,{empty:st.Callbacks("once memory").add(function(){st._removeData(e,t+"queue"),st._removeData(e,o)})})}}),st.fn.extend({queue:function(e,t){var o=2;return"string"!=typeof e&&(t=e,e="fx",o--),arguments.length<o?st.queue(this[0],e):void 0===t?this:this.each(function(){var o=st.queue(this,e,t);st._queueHooks(this,e),"fx"===e&&"inprogress"!==o[0]&&st.dequeue(this,e)})},dequeue:function(e){return this.each(function(){st.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var o,i=1,n=st.Deferred(),s=this,a=this.length,r=function(){--i||n.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)o=st._data(s[a],e+"queueHooks"),o&&o.empty&&(i++,o.empty.add(r));return r(),n.promise(t)}});var St=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=["Top","Right","Bottom","Left"],Dt=function(e,t){return e=t||e,"none"===st.css(e,"display")||!st.contains(e.ownerDocument,e)},Pt=st.access=function(e,t,o,i,n,s,a){var r=0,l=e.length,c=null==o;if("object"===st.type(o)){n=!0;for(r in o)st.access(e,t,r,o[r],!0,s,a)}else if(void 0!==i&&(n=!0,st.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,o){return c.call(st(e),o)})),t))for(;l>r;r++)t(e[r],o,a?i:i.call(e[r],r,t(e[r],o)));return n?e:c?t.call(e):l?t(e[0],o):s},At=/^(?:checkbox|radio)$/i;!function(){var e=ft.createDocumentFragment(),t=ft.createElement("div"),o=ft.createElement("input");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",it.leadingWhitespace=3===t.firstChild.nodeType,it.tbody=!t.getElementsByTagName("tbody").length,it.htmlSerialize=!!t.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==ft.createElement("nav").cloneNode(!0).outerHTML,o.type="checkbox",o.checked=!0,e.appendChild(o),it.appendChecked=o.checked,t.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){it.noCloneEvent=!1}),t.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(i){it.deleteExpando=!1}}e=t=o=null}(),function(){var t,o,i=ft.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})o="on"+t,(it[t+"Bubbles"]=o in e)||(i.setAttribute(o,"t"),it[t+"Bubbles"]=i.attributes[o].expando===!1);i=null}();var Et=/^(?:input|select|textarea)$/i,It=/^key/,Mt=/^(?:mouse|contextmenu)|click/,jt=/^(?:focusinfocus|focusoutblur)$/,Ot=/^([^.]*)(?:\.(.+)|)$/;st.event={global:{},add:function(e,t,o,i,n){var s,a,r,l,c,d,u,h,m,p,f,g=st._data(e);if(g){for(o.handler&&(l=o,o=l.handler,n=l.selector),o.guid||(o.guid=st.guid++),(a=g.events)||(a=g.events={}),(d=g.handle)||(d=g.handle=function(e){return typeof st===xt||e&&st.event.triggered===e.type?void 0:st.event.dispatch.apply(d.elem,arguments)},d.elem=e),t=(t||"").match(wt)||[""],r=t.length;r--;)s=Ot.exec(t[r])||[],m=f=s[1],p=(s[2]||"").split(".").sort(),m&&(c=st.event.special[m]||{},m=(n?c.delegateType:c.bindType)||m,c=st.event.special[m]||{},u=st.extend({type:m,origType:f,data:i,handler:o,guid:o.guid,selector:n,needsContext:n&&st.expr.match.needsContext.test(n),namespace:p.join(".")},l),(h=a[m])||(h=a[m]=[],h.delegateCount=0,c.setup&&c.setup.call(e,i,p,d)!==!1||(e.addEventListener?e.addEventListener(m,d,!1):e.attachEvent&&e.attachEvent("on"+m,d))),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=o.guid)),n?h.splice(h.delegateCount++,0,u):h.push(u),st.event.global[m]=!0);e=null}},remove:function(e,t,o,i,n){var s,a,r,l,c,d,u,h,m,p,f,g=st.hasData(e)&&st._data(e);if(g&&(d=g.events)){for(t=(t||"").match(wt)||[""],c=t.length;c--;)if(r=Ot.exec(t[c])||[],m=f=r[1],p=(r[2]||"").split(".").sort(),m){for(u=st.event.special[m]||{},m=(i?u.delegateType:u.bindType)||m,h=d[m]||[],r=r[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=s=h.length;s--;)a=h[s],!n&&f!==a.origType||o&&o.guid!==a.guid||r&&!r.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(h.splice(s,1),a.selector&&h.delegateCount--,u.remove&&u.remove.call(e,a));l&&!h.length&&(u.teardown&&u.teardown.call(e,p,g.handle)!==!1||st.removeEvent(e,m,g.handle),delete d[m])}else for(m in d)st.event.remove(e,m+t[c],o,i,!0);st.isEmptyObject(d)&&(delete g.handle,st._removeData(e,"events"))}},trigger:function(t,o,i,n){var s,a,r,l,c,d,u,h=[i||ft],m=tt.call(t,"type")?t.type:t,p=tt.call(t,"namespace")?t.namespace.split("."):[];if(r=d=i=i||ft,3!==i.nodeType&&8!==i.nodeType&&!jt.test(m+st.event.triggered)&&(m.indexOf(".")>=0&&(p=m.split("."),m=p.shift(),p.sort()),a=m.indexOf(":")<0&&"on"+m,t=t[st.expando]?t:new st.Event(m,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),o=null==o?[t]:st.makeArray(o,[t]),c=st.event.special[m]||{},n||!c.trigger||c.trigger.apply(i,o)!==!1)){if(!n&&!c.noBubble&&!st.isWindow(i)){for(l=c.delegateType||m,jt.test(l+m)||(r=r.parentNode);r;r=r.parentNode)h.push(r),d=r;
d===(i.ownerDocument||ft)&&h.push(d.defaultView||d.parentWindow||e)}for(u=0;(r=h[u++])&&!t.isPropagationStopped();)t.type=u>1?l:c.bindType||m,s=(st._data(r,"events")||{})[t.type]&&st._data(r,"handle"),s&&s.apply(r,o),s=a&&r[a],s&&s.apply&&st.acceptData(r)&&(t.result=s.apply(r,o),t.result===!1&&t.preventDefault());if(t.type=m,!n&&!t.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),o)===!1)&&st.acceptData(i)&&a&&i[m]&&!st.isWindow(i)){d=i[a],d&&(i[a]=null),st.event.triggered=m;try{i[m]()}catch(f){}st.event.triggered=void 0,d&&(i[a]=d)}return t.result}},dispatch:function(e){e=st.event.fix(e);var t,o,i,n,s,a=[],r=X.call(arguments),l=(st._data(this,"events")||{})[e.type]||[],c=st.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=st.event.handlers.call(this,e,l),t=0;(n=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,s=0;(i=n.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,o=((st.event.special[i.origType]||{}).handle||i.handler).apply(n.elem,r),void 0!==o&&(e.result=o)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var o,i,n,s,a=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(n=[],s=0;r>s;s++)i=t[s],o=i.selector+" ",void 0===n[o]&&(n[o]=i.needsContext?st(o,this).index(l)>=0:st.find(o,this,null,[l]).length),n[o]&&n.push(i);n.length&&a.push({elem:l,handlers:n})}return r<t.length&&a.push({elem:this,handlers:t.slice(r)}),a},fix:function(e){if(e[st.expando])return e;var t,o,i,n=e.type,s=e,a=this.fixHooks[n];for(a||(this.fixHooks[n]=a=Mt.test(n)?this.mouseHooks:It.test(n)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new st.Event(s),t=i.length;t--;)o=i[t],e[o]=s[o];return e.target||(e.target=s.srcElement||ft),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var o,i,n,s=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||ft,n=i.documentElement,o=i.body,e.pageX=t.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return st.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return st.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,o,i){var n=st.extend(new st.Event,o,{type:e,isSimulated:!0,originalEvent:{}});i?st.event.trigger(n,null,t):st.event.dispatch.call(t,n),n.isDefaultPrevented()&&o.preventDefault()}},st.removeEvent=ft.removeEventListener?function(e,t,o){e.removeEventListener&&e.removeEventListener(t,o,!1)}:function(e,t,o){var i="on"+t;e.detachEvent&&(typeof e[i]===xt&&(e[i]=null),e.detachEvent(i,o))},st.Event=function(e,t){return this instanceof st.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&(e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault())?h:m):this.type=e,t&&st.extend(this,t),this.timeStamp=e&&e.timeStamp||st.now(),void(this[st.expando]=!0)):new st.Event(e,t)},st.Event.prototype={isDefaultPrevented:m,isPropagationStopped:m,isImmediatePropagationStopped:m,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()}},st.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){st.event.special[e]={delegateType:t,bindType:t,handle:function(e){var o,i=this,n=e.relatedTarget,s=e.handleObj;return(!n||n!==i&&!st.contains(i,n))&&(e.type=s.origType,o=s.handler.apply(this,arguments),e.type=t),o}}}),it.submitBubbles||(st.event.special.submit={setup:function(){return st.nodeName(this,"form")?!1:void st.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,o=st.nodeName(t,"input")||st.nodeName(t,"button")?t.form:void 0;o&&!st._data(o,"submitBubbles")&&(st.event.add(o,"submit._submit",function(e){e._submit_bubble=!0}),st._data(o,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&st.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return st.nodeName(this,"form")?!1:void st.event.remove(this,"._submit")}}),it.changeBubbles||(st.event.special.change={setup:function(){return Et.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(st.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),st.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),st.event.simulate("change",this,e,!0)})),!1):void st.event.add(this,"beforeactivate._change",function(e){var t=e.target;Et.test(t.nodeName)&&!st._data(t,"changeBubbles")&&(st.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||st.event.simulate("change",this.parentNode,e,!0)}),st._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return st.event.remove(this,"._change"),!Et.test(this.nodeName)}}),it.focusinBubbles||st.each({focus:"focusin",blur:"focusout"},function(e,t){var o=function(e){st.event.simulate(t,e.target,st.event.fix(e),!0)};st.event.special[t]={setup:function(){var i=this.ownerDocument||this,n=st._data(i,t);n||i.addEventListener(e,o,!0),st._data(i,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this,n=st._data(i,t)-1;n?st._data(i,t,n):(i.removeEventListener(e,o,!0),st._removeData(i,t))}}}),st.fn.extend({on:function(e,t,o,i,n){var s,a;if("object"==typeof e){"string"!=typeof t&&(o=o||t,t=void 0);for(s in e)this.on(s,t,o,e[s],n);return this}if(null==o&&null==i?(i=t,o=t=void 0):null==i&&("string"==typeof t?(i=o,o=void 0):(i=o,o=t,t=void 0)),i===!1)i=m;else if(!i)return this;return 1===n&&(a=i,i=function(e){return st().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=st.guid++)),this.each(function(){st.event.add(this,e,i,o,t)})},one:function(e,t,o,i){return this.on(e,t,o,i,1)},off:function(e,t,o){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,st(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return(t===!1||"function"==typeof t)&&(o=t,t=void 0),o===!1&&(o=m),this.each(function(){st.event.remove(this,e,o,t)})},trigger:function(e,t){return this.each(function(){st.event.trigger(e,t,this)})},triggerHandler:function(e,t){var o=this[0];return o?st.event.trigger(e,t,o,!0):void 0}});var Ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",zt=/ jQuery\d+="(?:null|\d+)"/g,Lt=new RegExp("<(?:"+Ft+")[\\s/>]","i"),Ht=/^\s+/,Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Bt=/<([\w:]+)/,Wt=/<tbody/i,qt=/<|&#?\w+;/,Ut=/<(?:script|style|link)/i,Vt=/checked\s*(?:[^=]|=\s*.checked.)/i,Yt=/^$|\/(?:java|ecma)script/i,Gt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Zt=f(ft),Kt=Zt.appendChild(ft.createElement("div"));Qt.optgroup=Qt.option,Qt.tbody=Qt.tfoot=Qt.colgroup=Qt.caption=Qt.thead,Qt.th=Qt.td,st.extend({clone:function(e,t,o){var i,n,s,a,r,l=st.contains(e.ownerDocument,e);if(it.html5Clone||st.isXMLDoc(e)||!Lt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Kt.innerHTML=e.outerHTML,Kt.removeChild(s=Kt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||st.isXMLDoc(e)))for(i=g(s),r=g(e),a=0;null!=(n=r[a]);++a)i[a]&&k(n,i[a]);if(t)if(o)for(r=r||g(e),i=i||g(s),a=0;null!=(n=r[a]);a++)$(n,i[a]);else $(e,s);return i=g(s,"script"),i.length>0&&y(i,!l&&g(e,"script")),i=r=n=null,s},buildFragment:function(e,t,o,i){for(var n,s,a,r,l,c,d,u=e.length,h=f(t),m=[],p=0;u>p;p++)if(s=e[p],s||0===s)if("object"===st.type(s))st.merge(m,s.nodeType?[s]:s);else if(qt.test(s)){for(r=r||h.appendChild(t.createElement("div")),l=(Bt.exec(s)||["",""])[1].toLowerCase(),d=Qt[l]||Qt._default,r.innerHTML=d[1]+s.replace(Nt,"<$1></$2>")+d[2],n=d[0];n--;)r=r.lastChild;if(!it.leadingWhitespace&&Ht.test(s)&&m.push(t.createTextNode(Ht.exec(s)[0])),!it.tbody)for(s="table"!==l||Wt.test(s)?"<table>"!==d[1]||Wt.test(s)?0:r:r.firstChild,n=s&&s.childNodes.length;n--;)st.nodeName(c=s.childNodes[n],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(st.merge(m,r.childNodes),r.textContent="";r.firstChild;)r.removeChild(r.firstChild);r=h.lastChild}else m.push(t.createTextNode(s));for(r&&h.removeChild(r),it.appendChecked||st.grep(g(m,"input"),b),p=0;s=m[p++];)if((!i||-1===st.inArray(s,i))&&(a=st.contains(s.ownerDocument,s),r=g(h.appendChild(s),"script"),a&&y(r),o))for(n=0;s=r[n++];)Yt.test(s.type||"")&&o.push(s);return r=null,h},cleanData:function(e,t){for(var o,i,n,s,a=0,r=st.expando,l=st.cache,c=it.deleteExpando,d=st.event.special;null!=(o=e[a]);a++)if((t||st.acceptData(o))&&(n=o[r],s=n&&l[n])){if(s.events)for(i in s.events)d[i]?st.event.remove(o,i):st.removeEvent(o,i,s.handle);l[n]&&(delete l[n],c?delete o[r]:typeof o.removeAttribute!==xt?o.removeAttribute(r):o[r]=null,G.push(n))}}}),st.fn.extend({text:function(e){return Pt(this,function(e){return void 0===e?st.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var o,i=e?st.filter(e,this):this,n=0;null!=(o=i[n]);n++)t||1!==o.nodeType||st.cleanData(g(o)),o.parentNode&&(t&&st.contains(o.ownerDocument,o)&&y(g(o,"script")),o.parentNode.removeChild(o));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&st.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&st.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return st.clone(this,e,t)})},html:function(e){return Pt(this,function(e){var t=this[0]||{},o=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(zt,""):void 0;if(!("string"!=typeof e||Ut.test(e)||!it.htmlSerialize&&Lt.test(e)||!it.leadingWhitespace&&Ht.test(e)||Qt[(Bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Nt,"<$1></$2>");try{for(;i>o;o++)t=this[o]||{},1===t.nodeType&&(st.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(n){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,st.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Q.apply([],e);var o,i,n,s,a,r,l=0,c=this.length,d=this,u=c-1,h=e[0],m=st.isFunction(h);if(m||c>1&&"string"==typeof h&&!it.checkClone&&Vt.test(h))return this.each(function(o){var i=d.eq(o);m&&(e[0]=h.call(this,o,i.html())),i.domManip(e,t)});if(c&&(r=st.buildFragment(e,this[0].ownerDocument,!1,this),o=r.firstChild,1===r.childNodes.length&&(r=o),o)){for(s=st.map(g(r,"script"),_),n=s.length;c>l;l++)i=r,l!==u&&(i=st.clone(i,!0,!0),n&&st.merge(s,g(i,"script"))),t.call(this[l],i,l);if(n)for(a=s[s.length-1].ownerDocument,st.map(s,w),l=0;n>l;l++)i=s[l],Yt.test(i.type||"")&&!st._data(i,"globalEval")&&st.contains(a,i)&&(i.src?st._evalUrl&&st._evalUrl(i.src):st.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xt,"")));r=o=null}return this}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){st.fn[e]=function(e){for(var o,i=0,n=[],s=st(e),a=s.length-1;a>=i;i++)o=i===a?this:this.clone(!0),st(s[i])[t](o),Z.apply(n,o.get());return this.pushStack(n)}});var Jt,eo={};!function(){var e,t,o=ft.createElement("div"),i="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=o.getElementsByTagName("a")[0],e.style.cssText="float:left;opacity:.5",it.opacity=/^0.5/.test(e.style.opacity),it.cssFloat=!!e.style.cssFloat,o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===o.style.backgroundClip,e=o=null,it.shrinkWrapBlocks=function(){var e,o,n,s;if(null==t){if(e=ft.getElementsByTagName("body")[0],!e)return;s="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",o=ft.createElement("div"),n=ft.createElement("div"),e.appendChild(o).appendChild(n),t=!1,typeof n.style.zoom!==xt&&(n.style.cssText=i+";width:1px;padding:1px;zoom:1",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t=3!==n.offsetWidth),e.removeChild(o),e=o=n=null}return t}}();var to,oo,io=/^margin/,no=new RegExp("^("+St+")(?!px)[a-z%]+$","i"),so=/^(top|right|bottom|left)$/;e.getComputedStyle?(to=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},oo=function(e,t,o){var i,n,s,a,r=e.style;return o=o||to(e),a=o?o.getPropertyValue(t)||o[t]:void 0,o&&(""!==a||st.contains(e.ownerDocument,e)||(a=st.style(e,t)),no.test(a)&&io.test(t)&&(i=r.width,n=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=a,a=o.width,r.width=i,r.minWidth=n,r.maxWidth=s)),void 0===a?a:a+""}):ft.documentElement.currentStyle&&(to=function(e){return e.currentStyle},oo=function(e,t,o){var i,n,s,a,r=e.style;return o=o||to(e),a=o?o[t]:void 0,null==a&&r&&r[t]&&(a=r[t]),no.test(a)&&!so.test(t)&&(i=r.left,n=e.runtimeStyle,s=n&&n.left,s&&(n.left=e.currentStyle.left),r.left="fontSize"===t?"1em":a,a=r.pixelLeft+"px",r.left=i,s&&(n.left=s)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,o,i=ft.getElementsByTagName("body")[0];i&&(t=ft.createElement("div"),o=ft.createElement("div"),t.style.cssText=c,i.appendChild(t).appendChild(o),o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",st.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){n=4===o.offsetWidth}),s=!0,a=!1,r=!0,e.getComputedStyle&&(a="1%"!==(e.getComputedStyle(o,null)||{}).top,s="4px"===(e.getComputedStyle(o,null)||{width:"4px"}).width),i.removeChild(t),o=i=null)}var o,i,n,s,a,r,l=ft.createElement("div"),c="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",o=l.getElementsByTagName("a")[0],o.style.cssText="float:left;opacity:.5",it.opacity=/^0.5/.test(o.style.opacity),it.cssFloat=!!o.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===l.style.backgroundClip,o=l=null,st.extend(it,{reliableHiddenOffsets:function(){if(null!=i)return i;var e,t,o,n=ft.createElement("div"),s=ft.getElementsByTagName("body")[0];if(s)return n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=ft.createElement("div"),e.style.cssText=c,s.appendChild(e).appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=n.getElementsByTagName("td"),t[0].style.cssText="padding:0;margin:0;border:0;display:none",o=0===t[0].offsetHeight,t[0].style.display="",t[1].style.display="none",i=o&&0===t[0].offsetHeight,s.removeChild(e),n=s=null,i},boxSizing:function(){return null==n&&t(),n},boxSizingReliable:function(){return null==s&&t(),s},pixelPosition:function(){return null==a&&t(),a},reliableMarginRight:function(){var t,o,i,n;if(null==r&&e.getComputedStyle){if(t=ft.getElementsByTagName("body")[0],!t)return;o=ft.createElement("div"),i=ft.createElement("div"),o.style.cssText=c,t.appendChild(o).appendChild(i),n=i.appendChild(ft.createElement("div")),n.style.cssText=i.style.cssText=d,n.style.marginRight=n.style.width="0",i.style.width="1px",r=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight),t.removeChild(o)}return r}})}(),st.swap=function(e,t,o,i){var n,s,a={};for(s in t)a[s]=e.style[s],e.style[s]=t[s];n=o.apply(e,i||[]);for(s in t)e.style[s]=a[s];return n};var ao=/alpha\([^)]*\)/i,ro=/opacity\s*=\s*([^)]*)/,lo=/^(none|table(?!-c[ea]).+)/,co=new RegExp("^("+St+")(.*)$","i"),uo=new RegExp("^([+-])=("+St+")","i"),ho={position:"absolute",visibility:"hidden",display:"block"},mo={letterSpacing:0,fontWeight:400},po=["Webkit","O","Moz","ms"];st.extend({cssHooks:{opacity:{get:function(e,t){if(t){var o=oo(e,"opacity");return""===o?"1":o}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,o,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,s,a,r=st.camelCase(t),l=e.style;if(t=st.cssProps[r]||(st.cssProps[r]=S(l,r)),a=st.cssHooks[t]||st.cssHooks[r],void 0===o)return a&&"get"in a&&void 0!==(n=a.get(e,!1,i))?n:l[t];if(s=typeof o,"string"===s&&(n=uo.exec(o))&&(o=(n[1]+1)*n[2]+parseFloat(st.css(e,t)),s="number"),null!=o&&o===o&&("number"!==s||st.cssNumber[r]||(o+="px"),it.clearCloneStyle||""!==o||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(o=a.set(e,o,i)))))try{l[t]="",l[t]=o}catch(c){}}},css:function(e,t,o,i){var n,s,a,r=st.camelCase(t);return t=st.cssProps[r]||(st.cssProps[r]=S(e.style,r)),a=st.cssHooks[t]||st.cssHooks[r],a&&"get"in a&&(s=a.get(e,!0,o)),void 0===s&&(s=oo(e,t,i)),"normal"===s&&t in mo&&(s=mo[t]),""===o||o?(n=parseFloat(s),o===!0||st.isNumeric(n)?n||0:s):s}}),st.each(["height","width"],function(e,t){st.cssHooks[t]={get:function(e,o,i){return o?0===e.offsetWidth&&lo.test(st.css(e,"display"))?st.swap(e,ho,function(){return A(e,t,i)}):A(e,t,i):void 0},set:function(e,o,i){var n=i&&to(e);return D(e,o,i?P(e,t,i,it.boxSizing()&&"border-box"===st.css(e,"boxSizing",!1,n),n):0)}}}),it.opacity||(st.cssHooks.opacity={get:function(e,t){return ro.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var o=e.style,i=e.currentStyle,n=st.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||o.filter||"";o.zoom=1,(t>=1||""===t)&&""===st.trim(s.replace(ao,""))&&o.removeAttribute&&(o.removeAttribute("filter"),""===t||i&&!i.filter)||(o.filter=ao.test(s)?s.replace(ao,n):s+" "+n)}}),st.cssHooks.marginRight=R(it.reliableMarginRight,function(e,t){return t?st.swap(e,{display:"inline-block"},oo,[e,"marginRight"]):void 0}),st.each({margin:"",padding:"",border:"Width"},function(e,t){st.cssHooks[e+t]={expand:function(o){for(var i=0,n={},s="string"==typeof o?o.split(" "):[o];4>i;i++)n[e+Tt[i]+t]=s[i]||s[i-2]||s[0];return n}},io.test(e)||(st.cssHooks[e+t].set=D)}),st.fn.extend({css:function(e,t){return Pt(this,function(e,t,o){var i,n,s={},a=0;if(st.isArray(t)){for(i=to(e),n=t.length;n>a;a++)s[t[a]]=st.css(e,t[a],!1,i);return s}return void 0!==o?st.style(e,t,o):st.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Dt(this)?st(this).show():st(this).hide()})}}),st.Tween=E,E.prototype={constructor:E,init:function(e,t,o,i,n,s){this.elem=e,this.prop=o,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(st.cssNumber[o]?"":"px")},cur:function(){var e=E.propHooks[this.prop];return e&&e.get?e.get(this):E.propHooks._default.get(this)},run:function(e){var t,o=E.propHooks[this.prop];return this.pos=t=this.options.duration?st.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),o&&o.set?o.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=st.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){st.fx.step[e.prop]?st.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[st.cssProps[e.prop]]||st.cssHooks[e.prop])?st.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},st.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},st.fx=E.prototype.init,st.fx.step={};var fo,go,bo=/^(?:toggle|show|hide)$/,vo=new RegExp("^(?:([+-])=|)("+St+")([a-z%]*)$","i"),_o=/queueHooks$/,wo=[O],yo={"*":[function(e,t){var o=this.createTween(e,t),i=o.cur(),n=vo.exec(t),s=n&&n[3]||(st.cssNumber[e]?"":"px"),a=(st.cssNumber[e]||"px"!==s&&+i)&&vo.exec(st.css(o.elem,e)),r=1,l=20;if(a&&a[3]!==s){s=s||a[3],n=n||[],a=+i||1;do r=r||".5",a/=r,st.style(o.elem,e,a+s);while(r!==(r=o.cur()/i)&&1!==r&&--l)}return n&&(a=o.start=+a||+i||0,o.unit=s,o.end=n[1]?a+(n[1]+1)*n[2]:+n[2]),o}]};st.Animation=st.extend(z,{tweener:function(e,t){st.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var o,i=0,n=e.length;n>i;i++)o=e[i],yo[o]=yo[o]||[],yo[o].unshift(t)},prefilter:function(e,t){t?wo.unshift(e):wo.push(e)}}),st.speed=function(e,t,o){var i=e&&"object"==typeof e?st.extend({},e):{complete:o||!o&&t||st.isFunction(e)&&e,duration:e,easing:o&&t||t&&!st.isFunction(t)&&t};return i.duration=st.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in st.fx.speeds?st.fx.speeds[i.duration]:st.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){st.isFunction(i.old)&&i.old.call(this),i.queue&&st.dequeue(this,i.queue)},i},st.fn.extend({fadeTo:function(e,t,o,i){return this.filter(Dt).css("opacity",0).show().end().animate({opacity:t},e,o,i)},animate:function(e,t,o,i){var n=st.isEmptyObject(e),s=st.speed(t,o,i),a=function(){var t=z(this,st.extend({},e),s);(n||st._data(this,"finish"))&&t.stop(!0)};return a.finish=a,n||s.queue===!1?this.each(a):this.queue(s.queue,a)},stop:function(e,t,o){var i=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof e&&(o=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=st.timers,a=st._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&_o.test(n)&&i(a[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(o),t=!1,s.splice(n,1));(t||!o)&&st.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,o=st._data(this),i=o[e+"queue"],n=o[e+"queueHooks"],s=st.timers,a=i?i.length:0;for(o.finish=!0,st.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete o.finish})}}),st.each(["toggle","show","hide"],function(e,t){var o=st.fn[t];st.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(M(t,!0),e,i,n)}}),st.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){st.fn[e]=function(e,o,i){return this.animate(t,e,o,i)}}),st.timers=[],st.fx.tick=function(){var e,t=st.timers,o=0;for(fo=st.now();o<t.length;o++)e=t[o],e()||t[o]!==e||t.splice(o--,1);t.length||st.fx.stop(),fo=void 0},st.fx.timer=function(e){st.timers.push(e),e()?st.fx.start():st.timers.pop()},st.fx.interval=13,st.fx.start=function(){go||(go=setInterval(st.fx.tick,st.fx.interval))},st.fx.stop=function(){clearInterval(go),go=null},st.fx.speeds={slow:600,fast:200,_default:400},st.fn.delay=function(e,t){return e=st.fx?st.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,o){var i=setTimeout(t,e);o.stop=function(){clearTimeout(i)}})},function(){var e,t,o,i,n=ft.createElement("div");n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],o=ft.createElement("select"),i=o.appendChild(ft.createElement("option")),t=n.getElementsByTagName("input")[0],e.style.cssText="top:1px",it.getSetAttribute="t"!==n.className,it.style=/top/.test(e.getAttribute("style")),it.hrefNormalized="/a"===e.getAttribute("href"),it.checkOn=!!t.value,it.optSelected=i.selected,it.enctype=!!ft.createElement("form").enctype,o.disabled=!0,it.optDisabled=!i.disabled,t=ft.createElement("input"),t.setAttribute("value",""),it.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),it.radioValue="t"===t.value,e=t=o=i=n=null}();var $o=/\r/g;st.fn.extend({val:function(e){var t,o,i,n=this[0];{if(arguments.length)return i=st.isFunction(e),this.each(function(o){var n;1===this.nodeType&&(n=i?e.call(this,o,st(this).val()):e,null==n?n="":"number"==typeof n?n+="":st.isArray(n)&&(n=st.map(n,function(e){return null==e?"":e+""})),t=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))});if(n)return t=st.valHooks[n.type]||st.valHooks[n.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(o=t.get(n,"value"))?o:(o=n.value,"string"==typeof o?o.replace($o,""):null==o?"":o)}}}),st.extend({valHooks:{option:{get:function(e){var t=st.find.attr(e,"value");return null!=t?t:st.text(e)}},select:{get:function(e){for(var t,o,i=e.options,n=e.selectedIndex,s="select-one"===e.type||0>n,a=s?null:[],r=s?n+1:i.length,l=0>n?r:s?n:0;r>l;l++)if(o=i[l],!(!o.selected&&l!==n||(it.optDisabled?o.disabled:null!==o.getAttribute("disabled"))||o.parentNode.disabled&&st.nodeName(o.parentNode,"optgroup"))){if(t=st(o).val(),s)return t;a.push(t)}return a},set:function(e,t){for(var o,i,n=e.options,s=st.makeArray(t),a=n.length;a--;)if(i=n[a],st.inArray(st.valHooks.option.get(i),s)>=0)try{i.selected=o=!0}catch(r){i.scrollHeight}else i.selected=!1;return o||(e.selectedIndex=-1),n}}}}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(e,t){return st.isArray(t)?e.checked=st.inArray(st(e).val(),t)>=0:void 0}},it.checkOn||(st.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ko,xo,Co=st.expr.attrHandle,Ro=/^(?:checked|selected)$/i,So=it.getSetAttribute,To=it.input;st.fn.extend({attr:function(e,t){return Pt(this,st.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){st.removeAttr(this,e)})}}),st.extend({attr:function(e,t,o){var i,n,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===xt?st.prop(e,t,o):(1===s&&st.isXMLDoc(e)||(t=t.toLowerCase(),i=st.attrHooks[t]||(st.expr.match.bool.test(t)?xo:ko)),void 0===o?i&&"get"in i&&null!==(n=i.get(e,t))?n:(n=st.find.attr(e,t),null==n?void 0:n):null!==o?i&&"set"in i&&void 0!==(n=i.set(e,o,t))?n:(e.setAttribute(t,o+""),o):void st.removeAttr(e,t))},removeAttr:function(e,t){var o,i,n=0,s=t&&t.match(wt);if(s&&1===e.nodeType)for(;o=s[n++];)i=st.propFix[o]||o,st.expr.match.bool.test(o)?To&&So||!Ro.test(o)?e[i]=!1:e[st.camelCase("default-"+o)]=e[i]=!1:st.attr(e,o,""),e.removeAttribute(So?o:i)},attrHooks:{type:{set:function(e,t){if(!it.radioValue&&"radio"===t&&st.nodeName(e,"input")){var o=e.value;return e.setAttribute("type",t),o&&(e.value=o),t}}}}}),xo={set:function(e,t,o){return t===!1?st.removeAttr(e,o):To&&So||!Ro.test(o)?e.setAttribute(!So&&st.propFix[o]||o,o):e[st.camelCase("default-"+o)]=e[o]=!0,o}},st.each(st.expr.match.bool.source.match(/\w+/g),function(e,t){var o=Co[t]||st.find.attr;Co[t]=To&&So||!Ro.test(t)?function(e,t,i){var n,s;return i||(s=Co[t],Co[t]=n,n=null!=o(e,t,i)?t.toLowerCase():null,Co[t]=s),n}:function(e,t,o){return o?void 0:e[st.camelCase("default-"+t)]?t.toLowerCase():null}}),To&&So||(st.attrHooks.value={set:function(e,t,o){return st.nodeName(e,"input")?void(e.defaultValue=t):ko&&ko.set(e,t,o)}}),So||(ko={set:function(e,t,o){var i=e.getAttributeNode(o);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(o)),i.value=t+="","value"===o||t===e.getAttribute(o)?t:void 0}},Co.id=Co.name=Co.coords=function(e,t,o){var i;return o?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},st.valHooks.button={get:function(e,t){var o=e.getAttributeNode(t);return o&&o.specified?o.value:void 0},set:ko.set},st.attrHooks.contenteditable={set:function(e,t,o){ko.set(e,""===t?!1:t,o)}},st.each(["width","height"],function(e,t){st.attrHooks[t]={set:function(e,o){return""===o?(e.setAttribute(t,"auto"),o):void 0}}})),it.style||(st.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Do=/^(?:input|select|textarea|button|object)$/i,Po=/^(?:a|area)$/i;st.fn.extend({prop:function(e,t){return Pt(this,st.prop,e,t,arguments.length>1)},removeProp:function(e){return e=st.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),st.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,o){var i,n,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!st.isXMLDoc(e),s&&(t=st.propFix[t]||t,n=st.propHooks[t]),void 0!==o?n&&"set"in n&&void 0!==(i=n.set(e,o,t))?i:e[t]=o:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=st.find.attr(e,"tabindex");return t?parseInt(t,10):Do.test(e.nodeName)||Po.test(e.nodeName)&&e.href?0:-1}}}}),it.hrefNormalized||st.each(["href","src"],function(e,t){st.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),it.optSelected||(st.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this}),it.enctype||(st.propFix.enctype="encoding");var Ao=/[\t\r\n\f]/g;st.fn.extend({addClass:function(e){var t,o,i,n,s,a,r=0,l=this.length,c="string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).addClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(wt)||[];l>r;r++)if(o=this[r],i=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(Ao," "):" ")){for(s=0;n=t[s++];)i.indexOf(" "+n+" ")<0&&(i+=n+" ");a=st.trim(i),o.className!==a&&(o.className=a)}return this
},removeClass:function(e){var t,o,i,n,s,a,r=0,l=this.length,c=0===arguments.length||"string"==typeof e&&e;if(st.isFunction(e))return this.each(function(t){st(this).removeClass(e.call(this,t,this.className))});if(c)for(t=(e||"").match(wt)||[];l>r;r++)if(o=this[r],i=1===o.nodeType&&(o.className?(" "+o.className+" ").replace(Ao," "):"")){for(s=0;n=t[s++];)for(;i.indexOf(" "+n+" ")>=0;)i=i.replace(" "+n+" "," ");a=e?st.trim(i):"",o.className!==a&&(o.className=a)}return this},toggleClass:function(e,t){var o=typeof e;return"boolean"==typeof t&&"string"===o?t?this.addClass(e):this.removeClass(e):this.each(st.isFunction(e)?function(o){st(this).toggleClass(e.call(this,o,this.className,t),t)}:function(){if("string"===o)for(var t,i=0,n=st(this),s=e.match(wt)||[];t=s[i++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else(o===xt||"boolean"===o)&&(this.className&&st._data(this,"__className__",this.className),this.className=this.className||e===!1?"":st._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",o=0,i=this.length;i>o;o++)if(1===this[o].nodeType&&(" "+this[o].className+" ").replace(Ao," ").indexOf(t)>=0)return!0;return!1}}),st.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){st.fn[t]=function(e,o){return arguments.length>0?this.on(t,null,e,o):this.trigger(t)}}),st.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,o){return this.on(e,null,t,o)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,o,i){return this.on(t,e,o,i)},undelegate:function(e,t,o){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",o)}});var Eo=st.now(),Io=/\?/,Mo=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;st.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var o,i=null,n=st.trim(t+"");return n&&!st.trim(n.replace(Mo,function(e,t,n,s){return o&&t&&(i=0),0===i?e:(o=n||t,i+=!s-!n,"")}))?Function("return "+n)():st.error("Invalid JSON: "+t)},st.parseXML=function(t){var o,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,o=i.parseFromString(t,"text/xml")):(o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(t))}catch(n){o=void 0}return o&&o.documentElement&&!o.getElementsByTagName("parsererror").length||st.error("Invalid XML: "+t),o};var jo,Oo,Fo=/#.*$/,zo=/([?&])_=[^&]*/,Lo=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ho=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,No=/^(?:GET|HEAD)$/,Bo=/^\/\//,Wo=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,qo={},Uo={},Vo="*/".concat("*");try{Oo=location.href}catch(Yo){Oo=ft.createElement("a"),Oo.href="",Oo=Oo.href}jo=Wo.exec(Oo.toLowerCase())||[],st.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Oo,type:"GET",isLocal:Ho.test(jo[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vo,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":st.parseJSON,"text xml":st.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?N(N(e,st.ajaxSettings),t):N(st.ajaxSettings,e)},ajaxPrefilter:L(qo),ajaxTransport:L(Uo),ajax:function(e,t){function o(e,t,o,i){var n,d,b,v,w,$=t;2!==_&&(_=2,r&&clearTimeout(r),c=void 0,a=i||"",y.readyState=e>0?4:0,n=e>=200&&300>e||304===e,o&&(v=B(u,y,o)),v=W(u,v,y,n),n?(u.ifModified&&(w=y.getResponseHeader("Last-Modified"),w&&(st.lastModified[s]=w),w=y.getResponseHeader("etag"),w&&(st.etag[s]=w)),204===e||"HEAD"===u.type?$="nocontent":304===e?$="notmodified":($=v.state,d=v.data,b=v.error,n=!b)):(b=$,(e||!$)&&($="error",0>e&&(e=0))),y.status=e,y.statusText=(t||$)+"",n?p.resolveWith(h,[d,$,y]):p.rejectWith(h,[y,$,b]),y.statusCode(g),g=void 0,l&&m.trigger(n?"ajaxSuccess":"ajaxError",[y,u,n?d:b]),f.fireWith(h,[y,$]),l&&(m.trigger("ajaxComplete",[y,u]),--st.active||st.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,s,a,r,l,c,d,u=st.ajaxSetup({},t),h=u.context||u,m=u.context&&(h.nodeType||h.jquery)?st(h):st.event,p=st.Deferred(),f=st.Callbacks("once memory"),g=u.statusCode||{},b={},v={},_=0,w="canceled",y={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=Lo.exec(a);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var o=e.toLowerCase();return _||(e=v[o]=v[o]||e,b[e]=t),this},overrideMimeType:function(e){return _||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)g[t]=[g[t],e[t]];else y.always(e[y.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),o(0,t),this}};if(p.promise(y).complete=f.add,y.success=y.done,y.error=y.fail,u.url=((e||u.url||Oo)+"").replace(Fo,"").replace(Bo,jo[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=st.trim(u.dataType||"*").toLowerCase().match(wt)||[""],null==u.crossDomain&&(i=Wo.exec(u.url.toLowerCase()),u.crossDomain=!(!i||i[1]===jo[1]&&i[2]===jo[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(jo[3]||("http:"===jo[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=st.param(u.data,u.traditional)),H(qo,u,t,y),2===_)return y;l=u.global,l&&0===st.active++&&st.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!No.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(Io.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=zo.test(s)?s.replace(zo,"$1_="+Eo++):s+(Io.test(s)?"&":"?")+"_="+Eo++)),u.ifModified&&(st.lastModified[s]&&y.setRequestHeader("If-Modified-Since",st.lastModified[s]),st.etag[s]&&y.setRequestHeader("If-None-Match",st.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||t.contentType)&&y.setRequestHeader("Content-Type",u.contentType),y.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Vo+"; q=0.01":""):u.accepts["*"]);for(n in u.headers)y.setRequestHeader(n,u.headers[n]);if(u.beforeSend&&(u.beforeSend.call(h,y,u)===!1||2===_))return y.abort();w="abort";for(n in{success:1,error:1,complete:1})y[n](u[n]);if(c=H(Uo,u,t,y)){y.readyState=1,l&&m.trigger("ajaxSend",[y,u]),u.async&&u.timeout>0&&(r=setTimeout(function(){y.abort("timeout")},u.timeout));try{_=1,c.send(b,o)}catch($){if(!(2>_))throw $;o(-1,$)}}else o(-1,"No Transport");return y},getJSON:function(e,t,o){return st.get(e,t,o,"json")},getScript:function(e,t){return st.get(e,void 0,t,"script")}}),st.each(["get","post"],function(e,t){st[t]=function(e,o,i,n){return st.isFunction(o)&&(n=n||i,i=o,o=void 0),st.ajax({url:e,type:t,dataType:n,data:o,success:i})}}),st.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){st.fn[t]=function(e){return this.on(t,e)}}),st._evalUrl=function(e){return st.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},st.fn.extend({wrapAll:function(e){if(st.isFunction(e))return this.each(function(t){st(this).wrapAll(e.call(this,t))});if(this[0]){var t=st(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(st.isFunction(e)?function(t){st(this).wrapInner(e.call(this,t))}:function(){var t=st(this),o=t.contents();o.length?o.wrapAll(e):t.append(e)})},wrap:function(e){var t=st.isFunction(e);return this.each(function(o){st(this).wrapAll(t?e.call(this,o):e)})},unwrap:function(){return this.parent().each(function(){st.nodeName(this,"body")||st(this).replaceWith(this.childNodes)}).end()}}),st.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||st.css(e,"display"))},st.expr.filters.visible=function(e){return!st.expr.filters.hidden(e)};var Go=/%20/g,Xo=/\[\]$/,Qo=/\r?\n/g,Zo=/^(?:submit|button|image|reset|file)$/i,Ko=/^(?:input|select|textarea|keygen)/i;st.param=function(e,t){var o,i=[],n=function(e,t){t=st.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=st.ajaxSettings&&st.ajaxSettings.traditional),st.isArray(e)||e.jquery&&!st.isPlainObject(e))st.each(e,function(){n(this.name,this.value)});else for(o in e)q(o,e[o],t,n);return i.join("&").replace(Go,"+")},st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=st.prop(this,"elements");return e?st.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!st(this).is(":disabled")&&Ko.test(this.nodeName)&&!Zo.test(e)&&(this.checked||!At.test(e))}).map(function(e,t){var o=st(this).val();return null==o?null:st.isArray(o)?st.map(o,function(e){return{name:t.name,value:e.replace(Qo,"\r\n")}}):{name:t.name,value:o.replace(Qo,"\r\n")}}).get()}}),st.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||V()}:U;var Jo=0,ei={},ti=st.ajaxSettings.xhr();e.ActiveXObject&&st(e).on("unload",function(){for(var e in ei)ei[e](void 0,!0)}),it.cors=!!ti&&"withCredentials"in ti,ti=it.ajax=!!ti,ti&&st.ajaxTransport(function(e){if(!e.crossDomain||it.cors){var t;return{send:function(o,i){var n,s=e.xhr(),a=++Jo;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(n in e.xhrFields)s[n]=e.xhrFields[n];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(n in o)void 0!==o[n]&&s.setRequestHeader(n,o[n]+"");s.send(e.hasContent&&e.data||null),t=function(o,n){var r,l,c;if(t&&(n||4===s.readyState))if(delete ei[a],t=void 0,s.onreadystatechange=st.noop,n)4!==s.readyState&&s.abort();else{c={},r=s.status,"string"==typeof s.responseText&&(c.text=s.responseText);try{l=s.statusText}catch(d){l=""}r||!e.isLocal||e.crossDomain?1223===r&&(r=204):r=c.text?200:404}c&&i(r,l,c,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=ei[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),st.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return st.globalEval(e),e}}}),st.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),st.ajaxTransport("script",function(e){if(e.crossDomain){var t,o=ft.head||st("head")[0]||ft.documentElement;return{send:function(i,n){t=ft.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,o){(o||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,o||n(200,"success"))},o.insertBefore(t,o.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var oi=[],ii=/(=)\?(?=&|$)|\?\?/;st.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=oi.pop()||st.expando+"_"+Eo++;return this[e]=!0,e}}),st.ajaxPrefilter("json jsonp",function(t,o,i){var n,s,a,r=t.jsonp!==!1&&(ii.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=st.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(ii,"$1"+n):t.jsonp!==!1&&(t.url+=(Io.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return a||st.error(n+" was not called"),a[0]},t.dataTypes[0]="json",s=e[n],e[n]=function(){a=arguments},i.always(function(){e[n]=s,t[n]&&(t.jsonpCallback=o.jsonpCallback,oi.push(n)),a&&st.isFunction(s)&&s(a[0]),a=s=void 0}),"script"):void 0}),st.parseHTML=function(e,t,o){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(o=t,t=!1),t=t||ft;var i=ht.exec(e),n=!o&&[];return i?[t.createElement(i[1])]:(i=st.buildFragment([e],t,n),n&&n.length&&st(n).remove(),st.merge([],i.childNodes))};var ni=st.fn.load;st.fn.load=function(e,t,o){if("string"!=typeof e&&ni)return ni.apply(this,arguments);var i,n,s,a=this,r=e.indexOf(" ");return r>=0&&(i=e.slice(r,e.length),e=e.slice(0,r)),st.isFunction(t)?(o=t,t=void 0):t&&"object"==typeof t&&(s="POST"),a.length>0&&st.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){n=arguments,a.html(i?st("<div>").append(st.parseHTML(e)).find(i):e)}).complete(o&&function(e,t){a.each(o,n||[e.responseText,t,e])}),this},st.expr.filters.animated=function(e){return st.grep(st.timers,function(t){return e===t.elem}).length};var si=e.document.documentElement;st.offset={setOffset:function(e,t,o){var i,n,s,a,r,l,c,d=st.css(e,"position"),u=st(e),h={};"static"===d&&(e.style.position="relative"),r=u.offset(),s=st.css(e,"top"),l=st.css(e,"left"),c=("absolute"===d||"fixed"===d)&&st.inArray("auto",[s,l])>-1,c?(i=u.position(),a=i.top,n=i.left):(a=parseFloat(s)||0,n=parseFloat(l)||0),st.isFunction(t)&&(t=t.call(e,o,r)),null!=t.top&&(h.top=t.top-r.top+a),null!=t.left&&(h.left=t.left-r.left+n),"using"in t?t.using.call(e,h):u.css(h)}},st.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){st.offset.setOffset(this,e,t)});var t,o,i={top:0,left:0},n=this[0],s=n&&n.ownerDocument;if(s)return t=s.documentElement,st.contains(t,n)?(typeof n.getBoundingClientRect!==xt&&(i=n.getBoundingClientRect()),o=Y(s),{top:i.top+(o.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(o.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,o={top:0,left:0},i=this[0];return"fixed"===st.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),st.nodeName(e[0],"html")||(o=e.offset()),o.top+=st.css(e[0],"borderTopWidth",!0),o.left+=st.css(e[0],"borderLeftWidth",!0)),{top:t.top-o.top-st.css(i,"marginTop",!0),left:t.left-o.left-st.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||si;e&&!st.nodeName(e,"html")&&"static"===st.css(e,"position");)e=e.offsetParent;return e||si})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var o=/Y/.test(t);st.fn[e]=function(i){return Pt(this,function(e,i,n){var s=Y(e);return void 0===n?s?t in s?s[t]:s.document.documentElement[i]:e[i]:void(s?s.scrollTo(o?st(s).scrollLeft():n,o?n:st(s).scrollTop()):e[i]=n)},e,i,arguments.length,null)}}),st.each(["top","left"],function(e,t){st.cssHooks[t]=R(it.pixelPosition,function(e,o){return o?(o=oo(e,t),no.test(o)?st(e).position()[t]+"px":o):void 0})}),st.each({Height:"height",Width:"width"},function(e,t){st.each({padding:"inner"+e,content:t,"":"outer"+e},function(o,i){st.fn[i]=function(i,n){var s=arguments.length&&(o||"boolean"!=typeof i),a=o||(i===!0||n===!0?"margin":"border");return Pt(this,function(t,o,i){var n;return st.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===i?st.css(t,o,a):st.style(t,o,i,a)},t,s?i:void 0,s,null)}})}),st.fn.size=function(){return this.length},st.fn.andSelf=st.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return st});var ai=e.jQuery,ri=e.$;return st.noConflict=function(t){return e.$===st&&(e.$=ri),t&&e.jQuery===st&&(e.jQuery=ai),st},typeof t===xt&&(e.jQuery=e.$=st),st}),/*!
 * jQuery Migrate - v1.2.1 - 2013-05-08
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
function(e,t,o){function i(o){var i=t.console;s[o]||(s[o]=!0,e.migrateWarnings.push(o),i&&i.warn&&!e.migrateMute&&(i.warn("JQMIGRATE: "+o),e.migrateTrace&&i.trace&&i.trace()))}function n(t,o,n,s){if(Object.defineProperty)try{return void Object.defineProperty(t,o,{configurable:!0,enumerable:!0,get:function(){return i(s),n},set:function(e){i(s),n=e}})}catch(a){}e._definePropertyBroken=!0,t[o]=n}var s={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===o&&(e.migrateTrace=!0),e.migrateReset=function(){s={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&i("jQuery is not compatible with Quirks Mode");var a=e("<input/>",{size:1}).attr("size")&&e.attrFn,r=e.attr,l=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return o},d=/^(?:input|button)$/i,u=/^[238]$/,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,m=/^(?:checked|selected)$/i;n(e,"attrFn",a||{},"jQuery.attrFn is deprecated"),e.attr=function(t,n,s,l){var c=n.toLowerCase(),p=t&&t.nodeType;return l&&(r.length<4&&i("jQuery.fn.attr( props, pass ) is deprecated"),t&&!u.test(p)&&(a?n in a:e.isFunction(e.fn[n])))?e(t)[n](s):("type"===n&&s!==o&&d.test(t.nodeName)&&t.parentNode&&i("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&h.test(c)&&(e.attrHooks[c]={get:function(t,i){var n,s=e.prop(t,i);return s===!0||"boolean"!=typeof s&&(n=t.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():o},set:function(t,o,i){var n;return o===!1?e.removeAttr(t,i):(n=e.propFix[i]||i,n in t&&(t[n]=!0),t.setAttribute(i,i.toLowerCase())),i}},m.test(c)&&i("jQuery.fn.attr('"+c+"') may use property instead of attribute")),r.call(e,t,n,s))},e.attrHooks.value={get:function(e,t){var o=(e.nodeName||"").toLowerCase();return"button"===o?l.apply(this,arguments):("input"!==o&&"option"!==o&&i("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var o=(e.nodeName||"").toLowerCase();return"button"===o?c.apply(this,arguments):("input"!==o&&"option"!==o&&i("jQuery.fn.attr('value', val) no longer sets properties"),void(e.value=t))}};var p,f,g=e.fn.init,b=e.parseJSON,v=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,o,n){var s;return t&&"string"==typeof t&&!e.isPlainObject(o)&&(s=v.exec(e.trim(t)))&&s[0]&&("<"!==t.charAt(0)&&i("$(html) HTML strings must start with '<' character"),s[3]&&i("$(html) HTML text after last tag is ignored"),"#"===s[0].charAt(0)&&(i("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),o&&o.context&&(o=o.context),e.parseHTML)?g.call(this,e.parseHTML(s[2],o,!0),o,n):g.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?b.apply(this,arguments):(i("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(p=e.uaMatch(navigator.userAgent),f={},p.browser&&(f[p.browser]=!0,f.version=p.version),f.chrome?f.webkit=!0:f.webkit&&(f.safari=!0),e.browser=f),n(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,o){return new t.fn.init(e,o)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(i,n){return n&&n instanceof e&&!(n instanceof t)&&(n=t(n)),e.fn.init.call(this,i,n,o)},t.fn.init.prototype=t.fn;var o=t(document);return i("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var _=e.fn.data;e.fn.data=function(t){var n,s,a=this[0];return!a||"events"!==t||1!==arguments.length||(n=e.data(a,t),s=e._data(a,t),n!==o&&n!==s||s===o)?_.apply(this,arguments):(i("Use of jQuery.fn.data('events') is deprecated"),s)};var w=/\/(java|ecma)script/i,y=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return i("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),y.apply(this,arguments)},e.clean||(e.clean=function(t,o,n,s){o=o||document,o=!o.nodeType&&o[0]||o,o=o.ownerDocument||o,i("jQuery.clean() is deprecated");var a,r,l,c,d=[];if(e.merge(d,e.buildFragment(t,o).childNodes),n)for(l=function(e){return!e.type||w.test(e.type)?s?s.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e):void 0},a=0;null!=(r=d[a]);a++)e.nodeName(r,"script")&&l(r)||(n.appendChild(r),"undefined"!=typeof r.getElementsByTagName&&(c=e.grep(e.merge([],r.getElementsByTagName("script")),l),d.splice.apply(d,[a+1,0].concat(c)),a+=c.length));return d});var $=e.event.add,k=e.event.remove,x=e.event.trigger,C=e.fn.toggle,R=e.fn.live,S=e.fn.die,T="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",D=new RegExp("\\b(?:"+T+")\\b"),P=/(?:^|\s)hover(\.\S+|)\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(P.test(t)&&i("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(P,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&n(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,o,n,s){e!==document&&D.test(t)&&i("AJAX events should be attached to document: "+t),$.call(this,e,A(t||""),o,n,s)},e.event.remove=function(e,t,o,i,n){k.call(this,e,A(t)||"",o,i,n)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return i("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,o){if(!e.isFunction(t)||!e.isFunction(o))return C.apply(this,arguments);i("jQuery.fn.toggle(handler, handler...) is deprecated");var n=arguments,s=t.guid||e.guid++,a=0,r=function(o){var i=(e._data(this,"lastToggle"+t.guid)||0)%a;return e._data(this,"lastToggle"+t.guid,i+1),o.preventDefault(),n[i].apply(this,arguments)||!1};for(r.guid=s;a<n.length;)n[a++].guid=s;return this.click(r)},e.fn.live=function(t,o,n){return i("jQuery.fn.live() is deprecated"),R?R.apply(this,arguments):(e(this.context).on(t,this.selector,o,n),this)},e.fn.die=function(t,o){return i("jQuery.fn.die() is deprecated"),S?S.apply(this,arguments):(e(this.context).off(t,this.selector||"**",o),this)},e.event.trigger=function(e,t,o,n){return o||D.test(e)||i("Global events are undocumented and deprecated"),x.call(this,e,t,o||document,n)},e.each(T.split("|"),function(t,o){e.event.special[o]={setup:function(){var t=this;return t!==document&&(e.event.add(document,o+"."+e.guid,function(){e.event.trigger(o,null,t,!0)}),e._data(this,o,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,o+"."+e._data(this,o)),!1}}})}(jQuery,window),function(e){var t=null,o=null;e.modal=function(i,n){e.modal.close();var s,a;if(this.$body=e("body"),this.options=e.extend({},e.modal.defaults,n),this.options.maxWidth="960px",e(i).attr("data-maxWidth")&&(this.options.maxWidth=e(i).attr("data-maxWidth")),this.$newBlocker=e('<div class="modal-blocker2">').css({position:"fixed",top:0,right:0,bottom:0,left:0,overflowX:"hidden",overflowY:"auto",background:"rgba(32, 35, 41, .95)",paddingTop:"100px",paddingBottom:"50px",zIndex:this.options.zIndex}),i.is("a"))if(a=i.attr("href"),/^#/.test(a)){if(this.$elm=e(a),this.$elm.length>0?o=this.$elm:this.$elm=o,1!==this.$elm.length)return null;this.$body.append(this.$newBlocker),this.$newBlocker.append(this.$elm),this.open()}else this.$elm=e("<div>"),this.$body.append(this.$newBlocker),this.$newBlocker.append(this.$elm),s=function(e,t){t.elm.remove()},this.showSpinner(),i.trigger(e.modal.AJAX_SEND),e.get(a).done(function(o){t&&(i.trigger(e.modal.AJAX_SUCCESS),t.$elm.empty().append(o).on(e.modal.CLOSE,s),t.hideSpinner(),t.open(),i.trigger(e.modal.AJAX_COMPLETE))}).fail(function(){i.trigger(e.modal.AJAX_FAIL),t.hideSpinner(),i.trigger(e.modal.AJAX_COMPLETE)});else this.$elm=i,this.open()},e.modal.prototype={constructor:e.modal,open:function(){this.block(),this.show(),this.options.escapeClose&&e(document).on("keydown.modal",function(t){27==t.which&&e.modal.close()}),this.options.clickClose&&this.blocker.click(e.modal.close)},close:function(){this.unblock(),this.hide(),e(document).off("keydown.modal")},block:function(){this.$elm.trigger(e.modal.BEFORE_BLOCK,[this._ctx()]),this.blocker=e('<div class="jquery-modal blocker"></div>').css({width:"100%",height:"100%",position:"fixed",right:"20px",top:"0px",zIndex:this.options.zIndex+1}),this.$newBlocker.append(this.blocker),this.$elm.trigger(e.modal.BLOCK,[this._ctx()]),e("body").css("overflow","hidden")},unblock:function(){this.$newBlocker.remove(),this.blocker.remove(),e("body").css("overflow","visible")},show:function(){this.$elm.trigger(e.modal.BEFORE_OPEN,[this._ctx()]),this.options.showClose&&(this.closeButton=e('<a href="#close-modal" rel="modal:close" class="close-modal">'+this.options.closeText+"</a>"),this.$elm.append(this.closeButton)),this.$elm.addClass(this.options.modalClass+" current"),this.center(),this.$elm.show().trigger(e.modal.OPEN,[this._ctx()])},hide:function(){this.$elm.trigger(e.modal.BEFORE_CLOSE,[this._ctx()]),this.closeButton&&this.closeButton.remove(),this.$elm.removeClass("current").hide(),this.$elm.trigger(e.modal.CLOSE,[this._ctx()])},showSpinner:function(){this.options.showSpinner&&(this.spinner=this.spinner||e('<div class="'+this.options.modalClass+'-spinner"><div class="modal-spinner-in"></div></div>').append(this.options.spinnerHtml),this.$body.append(this.spinner),this.spinner.show())},hideSpinner:function(){this.spinner&&this.spinner.remove()},center:function(){this.$elm.css({position:"relative",top:"0px",margin:"0 auto",marginBottom:"50px",overflow:"visible",maxWidth:this.options.maxWidth,zIndex:this.options.zIndex+2})},_ctx:function(){return{elm:this.$elm,blocker:this.blocker,options:this.options}}},e.modal.prototype.resize=e.modal.prototype.center,e.modal.close=function(e){t&&(e&&e.preventDefault(),t.close(),t=null)},e.modal.showSpinner=function(e){t&&(e&&e.preventDefault(),t.showSpinner())},e.modal.hideSpinner=function(e){t&&(e&&e.preventDefault(),t.hideSpinner())},e.modal.getWidget=function(){return t?t.$elm:null},e.modal.resize=function(){t&&t.resize()},e.modal.defaults={overlay:"#000",opacity:.75,zIndex:21,escapeClose:!0,clickClose:!1,closeText:"Close",modalClass:"modal",spinnerHtml:null,showSpinner:!0,showClose:!0},e.modal.BEFORE_BLOCK="modal:before-block",e.modal.BLOCK="modal:block",e.modal.BEFORE_OPEN="modal:before-open",e.modal.OPEN="modal:open",e.modal.BEFORE_CLOSE="modal:before-close",e.modal.CLOSE="modal:close",e.modal.AJAX_SEND="modal:ajax:send",e.modal.AJAX_SUCCESS="modal:ajax:success",e.modal.AJAX_FAIL="modal:ajax:fail",e.modal.AJAX_COMPLETE="modal:ajax:complete",e.fn.modal=function(o){return 1===this.length&&(t=new e.modal(this,o)),this},e(document).on("click",'a[rel="modal:close"]',e.modal.close),e(document).on("click",'a[rel="modal:open"]',function(t){t.preventDefault(),e(this).modal()}),e(document).on("click",'a[rel="modal:open:ajaxpost"]',function(t){return t.preventDefault(),e(this).modal(),e(this).bind(e.modal.AJAX_COMPLETE,function(){e("form").submit(function(){return current_form=e(this),e.modal.showSpinner(),e.ajax({type:this.method,url:this.action+".json",data:e(this).serialize(),dataType:"html",success:function(){e.modal.hideSpinner(),e.modal.close()},error:function(t){e.modal.hideSpinner(),current_form.find(".error").remove();var o=jQuery.parseJSON(t.responseText);e.each(o.errors,function(e,t){current_form.find("#"+current_form.attr("id").split("_").pop()+"_"+e).after('<span class="error">'+t[0]+"</span>")})}}),!1})}),!1})}(jQuery),/*!
 * jQuery UI Core 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function(e,t){function o(t,o){var n,s,a,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,s=n.name,t.href&&s&&"map"===n.nodeName.toLowerCase()?(a=e("img[usemap=#"+s+"]")[0],!!a&&i(a)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||o:o)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(o,i){return"number"==typeof o?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},o)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(o){if(o!==t)return this.css("zIndex",o);if(this.length)for(var i,n,s=e(this[0]);s.length&&s[0]!==document;){if(i=s.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(o){return!!e.data(o,t)}}):function(t,o,i){return!!e.data(t,i[3])},focusable:function(t){return o(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),n=isNaN(i);return(n||i>=0)&&o(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(o,i){function n(t,o,i,n){return e.each(s,function(){o-=parseFloat(e.css(t,"padding"+this))||0,i&&(o-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(o-=parseFloat(e.css(t,"margin"+this))||0)}),o}var s="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(o){return o===t?r["inner"+i].call(this):this.each(function(){e(this).css(a,n(this,o)+"px")})},e.fn["outer"+i]=function(t,o){return"number"!=typeof t?r["outer"+i].call(this,t):this.each(function(){e(this).css(a,n(this,t,!0,o)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(o){return arguments.length?t.call(this,e.camelCase(o)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,o,i){var n,s=e.ui[t].prototype;for(n in i)s.plugins[n]=s.plugins[n]||[],s.plugins[n].push([o,i[n]])},call:function(e,t,o){var i,n=e.plugins[t];if(n&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<n.length;i++)e.options[n[i][0]]&&n[i][1].apply(e.element,o)}},hasScroll:function(t,o){if("hidden"===e(t).css("overflow"))return!1;var i=o&&"left"===o?"scrollLeft":"scrollTop",n=!1;return t[i]>0?!0:(t[i]=1,n=t[i]>0,t[i]=0,n)}})}(jQuery),/*!
 * jQuery UI Widget 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
function(e,t){var o=0,i=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var o,i=0;null!=(o=t[i]);i++)try{e(o).triggerHandler("remove")}catch(s){}n(t)},e.widget=function(t,o,i){var n,s,a,r,l={},c=t.split(".")[0];t=t.split(".")[1],n=c+"-"+t,i||(i=o,o=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[c]=e[c]||{},s=e[c][t],a=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,s,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),r=new o,r.options=e.widget.extend({},r.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return o.prototype[t].apply(this,arguments)},n=function(e){return o.prototype[t].apply(this,e)};return function(){var t,o=this._super,s=this._superApply;return this._super=e,this._superApply=n,t=i.apply(this,arguments),this._super=o,this._superApply=s,t}}()):void(l[t]=i)}),a.prototype=e.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix||t:t},l,{constructor:a,namespace:c,widgetName:t,widgetFullName:n}),s?(e.each(s._childConstructors,function(t,o){var i=o.prototype;e.widget(i.namespace+"."+i.widgetName,a,o._proto)}),delete s._childConstructors):o._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(o){for(var n,s,a=i.call(arguments,1),r=0,l=a.length;l>r;r++)for(n in a[r])s=a[r][n],a[r].hasOwnProperty(n)&&s!==t&&(o[n]=e.isPlainObject(s)?e.isPlainObject(o[n])?e.widget.extend({},o[n],s):e.widget.extend({},s):s);return o},e.widget.bridge=function(o,n){var s=n.prototype.widgetFullName||o;e.fn[o]=function(a){var r="string"==typeof a,l=i.call(arguments,1),c=this;return a=!r&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,this.each(r?function(){var i,n=e.data(this,s);return n?e.isFunction(n[a])&&"_"!==a.charAt(0)?(i=n[a].apply(n,l),i!==n&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+o+" widget instance"):e.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+a+"'")}:function(){var t=e.data(this,s);t?t.option(a||{})._init():e.data(this,s,new n(a,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=o++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(o,i){var n,s,a,r=o;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof o)if(r={},n=o.split("."),o=n.shift(),n.length){for(s=r[o]=e.widget.extend({},this.options[o]),a=0;a<n.length-1;a++)s[n[a]]=s[n[a]]||{},s=s[n[a]];if(o=n.pop(),1===arguments.length)return s[o]===t?null:s[o];s[o]=i}else{if(1===arguments.length)return this.options[o]===t?null:this.options[o];r[o]=i}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,o,i){var n,s=this;"boolean"!=typeof t&&(i=o,o=t,t=!1),i?(o=n=e(o),this.bindings=this.bindings.add(o)):(i=o,o=this.element,n=this.widget()),e.each(i,function(i,a){function r(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?n.delegate(d,c,r):o.bind(c,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function o(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(o,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,o,i){var n,s,a=this.options[t];if(i=i||{},o=e.Event(o),o.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),o.target=this.element[0],s=o.originalEvent)for(n in s)n in o||(o[n]=s[n]);return this.element.trigger(o,i),!(e.isFunction(a)&&a.apply(this.element[0],[o].concat(i))===!1||o.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,o){e.Widget.prototype["_"+t]=function(i,n,s){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?o:n.effect||o:t;n=n||{},"number"==typeof n&&(n={duration:n}),a=!e.isEmptyObject(n),n.complete=s,n.delay&&i.delay(n.delay),a&&e.effects&&e.effects.effect[r]?i[t](n):r!==t&&i[r]?i[r](n.duration,n.easing,s):i.queue(function(o){e(this)[t](),s&&s.call(i[0]),o()})}})}(jQuery),/*!
 * jQuery UI Accordion 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/accordion/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e){var t=0,o={},i={};o.height=o.paddingTop=o.paddingBottom=o.borderTopWidth=o.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var o=e.ui.keyCode,i=this.headers.length,n=this.headers.index(t.target),s=!1;switch(t.keyCode){case o.RIGHT:case o.DOWN:s=this.headers[(n+1)%i];break;case o.LEFT:case o.UP:s=this.headers[(n-1+i)%i];break;case o.SPACE:case o.ENTER:this._eventHandler(t);break;case o.HOME:s=this.headers[0];break;case o.END:s=this.headers[i-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var o,i=this.options,n=i.heightStyle,s=this.element.parent(),a=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var o=e(this),i=o.attr("id"),n=o.next(),s=n.attr("id");i||(i=a+"-header-"+t,o.attr("id",i)),s||(s=a+"-panel-"+t,n.attr("id",s)),o.attr("aria-controls",s),n.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===n?(o=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(o-=t.outerHeight(!0))}),this.headers.each(function(){o-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,o-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===n&&(o=0,this.headers.next().each(function(){o=Math.max(o,e(this).css("height","").height())}).height(o))},_activate:function(t){var o=this._findActive(t)[0];o!==this.active[0]&&(o=o||this.active[0],this._eventHandler({target:o,currentTarget:o,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var o={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){o[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,o),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var o=this.options,i=this.active,n=e(t.currentTarget),s=n[0]===i[0],a=s&&o.collapsible,r=a?e():n.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:a?e():n,newPanel:r};t.preventDefault(),s&&!o.collapsible||this._trigger("beforeActivate",t,c)===!1||(o.active=a?!1:this.headers.index(n),this.active=s?e():n,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),o.icons&&i.children(".ui-accordion-header-icon").removeClass(o.icons.activeHeader).addClass(o.icons.header),s||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),o.icons&&n.children(".ui-accordion-header-icon").removeClass(o.icons.header).addClass(o.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var o=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=o,this.prevHide=i,this.options.animate?this._animate(o,i,t):(i.hide(),o.show(),this._toggleComplete(t)),i.attr({"aria-hidden":"true"}),i.prev().attr("aria-selected","false"),o.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):o.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,n){var s,a,r,l=this,c=0,d=e.length&&(!t.length||e.index()<t.index()),u=this.options.animate||{},h=d&&u.down||u,m=function(){l._toggleComplete(n)};return"number"==typeof h&&(r=h),"string"==typeof h&&(a=h),a=a||h.easing||u.easing,r=r||h.duration||u.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(o,{duration:r,easing:a,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(i,{duration:r,easing:a,complete:m,step:function(e,o){o.now=Math.round(e),"height"!==o.prop?c+=o.now:"content"!==l.options.heightStyle&&(o.now=Math.round(s-t.outerHeight()-c),c=0)}})):t.animate(o,r,a,m):e.animate(i,r,a,m)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),/*!
 * jQuery UI Position 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
function(e,t){function o(e,t,o){return[parseFloat(e[0])*(m.test(e[0])?t/100:1),parseFloat(e[1])*(m.test(e[1])?o/100:1)]}function i(t,o){return parseInt(e.css(t,o),10)||0}function n(t){var o=t[0];return 9===o.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(o)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:o.preventDefault?{width:0,height:0,offset:{top:o.pageY,left:o.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,a=Math.max,r=Math.abs,l=Math.round,c=/left|center|right/,d=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,m=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var o,i,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=n.children()[0];return e("body").append(n),o=a.offsetWidth,n.css("overflow","scroll"),i=a.offsetWidth,o===i&&(i=n[0].clientWidth),n.remove(),s=o-i},getScrollInfo:function(t){var o=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===o||"auto"===o&&t.width<t.element[0].scrollWidth,s="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var o=e(t||window),i=e.isWindow(o[0]),n=!!o[0]&&9===o[0].nodeType;return{element:o,isWindow:i,isDocument:n,offset:o.offset()||{left:0,top:0},scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),width:i?o.width():o.outerWidth(),height:i?o.height():o.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var s,m,f,g,b,v,_=e(t.of),w=e.position.getWithinInfo(t.within),y=e.position.getScrollInfo(w),$=(t.collision||"flip").split(" "),k={};return v=n(_),_[0].preventDefault&&(t.at="left top"),m=v.width,f=v.height,g=v.offset,b=e.extend({},g),e.each(["my","at"],function(){var e,o,i=(t[this]||"").split(" ");1===i.length&&(i=c.test(i[0])?i.concat(["center"]):d.test(i[0])?["center"].concat(i):["center","center"]),i[0]=c.test(i[0])?i[0]:"center",i[1]=d.test(i[1])?i[1]:"center",e=u.exec(i[0]),o=u.exec(i[1]),k[this]=[e?e[0]:0,o?o[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===$.length&&($[1]=$[0]),"right"===t.at[0]?b.left+=m:"center"===t.at[0]&&(b.left+=m/2),"bottom"===t.at[1]?b.top+=f:"center"===t.at[1]&&(b.top+=f/2),s=o(k.at,m,f),b.left+=s[0],b.top+=s[1],this.each(function(){var n,c,d=e(this),u=d.outerWidth(),h=d.outerHeight(),p=i(this,"marginLeft"),v=i(this,"marginTop"),x=u+p+i(this,"marginRight")+y.width,C=h+v+i(this,"marginBottom")+y.height,R=e.extend({},b),S=o(k.my,d.outerWidth(),d.outerHeight());"right"===t.my[0]?R.left-=u:"center"===t.my[0]&&(R.left-=u/2),"bottom"===t.my[1]?R.top-=h:"center"===t.my[1]&&(R.top-=h/2),R.left+=S[0],R.top+=S[1],e.support.offsetFractions||(R.left=l(R.left),R.top=l(R.top)),n={marginLeft:p,marginTop:v},e.each(["left","top"],function(o,i){e.ui.position[$[o]]&&e.ui.position[$[o]][i](R,{targetWidth:m,targetHeight:f,elemWidth:u,elemHeight:h,collisionPosition:n,collisionWidth:x,collisionHeight:C,offset:[s[0]+S[0],s[1]+S[1]],my:t.my,at:t.at,within:w,elem:d})}),t.using&&(c=function(e){var o=g.left-R.left,i=o+m-u,n=g.top-R.top,s=n+f-h,l={target:{element:_,left:g.left,top:g.top,width:m,height:f},element:{element:d,left:R.left,top:R.top,width:u,height:h},horizontal:0>i?"left":o>0?"right":"center",vertical:0>s?"top":n>0?"bottom":"middle"};u>m&&r(o+i)<m&&(l.horizontal="center"),h>f&&r(n+s)<f&&(l.vertical="middle"),l.important=a(r(o),r(i))>a(r(n),r(s))?"horizontal":"vertical",t.using.call(this,e,l)}),d.offset(e.extend(R,{using:c}))})},e.ui.position={fit:{left:function(e,t){var o,i=t.within,n=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,r=e.left-t.collisionPosition.marginLeft,l=n-r,c=r+t.collisionWidth-s-n;t.collisionWidth>s?l>0&&0>=c?(o=e.left+l+t.collisionWidth-s-n,e.left+=l-o):e.left=c>0&&0>=l?n:l>c?n+s-t.collisionWidth:n:l>0?e.left+=l:c>0?e.left-=c:e.left=a(e.left-r,e.left)},top:function(e,t){var o,i=t.within,n=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,l=n-r,c=r+t.collisionHeight-s-n;t.collisionHeight>s?l>0&&0>=c?(o=e.top+l+t.collisionHeight-s-n,e.top+=l-o):e.top=c>0&&0>=l?n:l>c?n+s-t.collisionHeight:n:l>0?e.top+=l:c>0?e.top-=c:e.top=a(e.top-r,e.top)}},flip:{left:function(e,t){var o,i,n=t.within,s=n.offset.left+n.scrollLeft,a=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,c=e.left-t.collisionPosition.marginLeft,d=c-l,u=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,m="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>d?(o=e.left+h+m+p+t.collisionWidth-a-s,(0>o||o<r(d))&&(e.left+=h+m+p)):u>0&&(i=e.left-t.collisionPosition.marginLeft+h+m+p-l,(i>0||r(i)<u)&&(e.left+=h+m+p))},top:function(e,t){var o,i,n=t.within,s=n.offset.top+n.scrollTop,a=n.height,l=n.isWindow?n.scrollTop:n.offset.top,c=e.top-t.collisionPosition.marginTop,d=c-l,u=c+t.collisionHeight-a-l,h="top"===t.my[1],m=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>d?(i=e.top+m+p+f+t.collisionHeight-a-s,e.top+m+p+f>d&&(0>i||i<r(d))&&(e.top+=m+p+f)):u>0&&(o=e.top-t.collisionPosition.marginTop+m+p+f-l,e.top+m+p+f>u&&(o>0||r(o)<u)&&(e.top+=m+p+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,o,i,n,s,a=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in i)t.style[s]=i[s];t.appendChild(r),o=a||document.documentElement,o.insertBefore(t,o.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=e(r).offset().left,e.support.offsetFractions=n>10&&11>n,t.innerHTML="",o.removeChild(t)}()}(jQuery),/*!
 * jQuery UI Menu 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var o=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&o.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),o.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var o=e(t.currentTarget);o.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,o)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var o=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,o)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function o(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,n,s,a,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,n=this.previousFilter||"",s=String.fromCharCode(t.keyCode),a=!1,clearTimeout(this.filterTimer),s===n?a=!0:s=n+s,r=new RegExp("^"+o(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),i=a&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(s=String.fromCharCode(t.keyCode),r=new RegExp("^"+o(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,o=this.options.icons.submenu,i=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev("a"),n=e("<span>").addClass("ui-menu-icon ui-icon "+o).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var o,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),o=t.children(".ui-menu"),o.length&&e&&/^mouse/.test(e.type)&&this._startOpening(o),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var o,i,n,s,a,r;this._hasScroll()&&(o=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-o-i,s=this.activeMenu.scrollTop(),a=this.activeMenu.height(),r=t.height(),0>n?this.activeMenu.scrollTop(s+n):n+r>a&&this.activeMenu.scrollTop(s+n-a+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var o=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(o)},collapseAll:function(t,o){clearTimeout(this.timer),this.timer=this._delay(function(){var i=o?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,o){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(o,i)},nextPage:function(t){var o,i,n;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return o=e(this),o.offset().top-i-n<0}),this.focus(t,o)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var o,i,n;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return o=e(this),o.offset().top-i+n>0}),this.focus(t,o)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var o={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,o)}})}(jQuery),/*!
 * jQuery UI Autocomplete 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 *	jquery.ui.menu.js
 */
function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,o,i,n=this.element[0].nodeName.toLowerCase(),s="textarea"===n,a="input"===n;this.isMultiLine=s?!0:a?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,i=!0,void(o=!0);t=!1,i=!1,o=!1;var s=e.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",n);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case s.UP:t=!0,this._keyEvent("previous",n);break;case s.DOWN:t=!0,this._keyEvent("next",n);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case s.TAB:this.menu.active&&this.menu.select(n);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:o=!0,this._searchTimeout(n)}},keypress:function(i){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault());if(!o){var n=e.ui.keyCode;switch(i.keyCode){case n.PAGE_UP:this._move("previousPage",i);break;case n.PAGE_DOWN:this._move("nextPage",i);break;case n.UP:this._keyEvent("previous",i);break;case n.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var o=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===o||e.contains(o,i.target)||t.close()})})},menufocus:function(t,o){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var i=o.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var o=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=o})),!1!==this._trigger("select",e,{item:o})&&this._value(o.value),this.term=this._value(),this.close(e),this.selectedItem=o}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,o,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(o,i){i(e.ui.autocomplete.filter(t,o.term))}):"string"==typeof this.options.source?(o=this.options.source,this.source=function(t,n){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:o,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var o=this.menu.element.empty();this._renderMenu(o,t),this.isNewMenu=!0,this.menu.refresh(),o.show(),this._resizeMenu(),o.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,o){var i=this;e.each(o,function(e,o){i._renderItemData(t,o)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,o){return e("<li>").append(e("<a>").text(o.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,o){var i=new RegExp(e.ui.autocomplete.escapeRegex(o),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),/*!
 * jQuery UI Button 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e){var t,o="ui-button ui-widget ui-state-default ui-corner-all",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",n=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},s=function(t){var o=t.name,i=t.form,n=e([]);return o&&(o=o.replace(/'/g,"\\'"),n=i?e(i).find("[name='"+o+"']"):e("[name='"+o+"']",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,n),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var i=this,a=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){i.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled)return!1;e(this).addClass("ui-state-active"),i.buttonElement.attr("aria-pressed","true");var t=i.element[0];s(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,void i.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,o;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),o=this.element.is(":checked"),o&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",o)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" ui-state-active "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?s(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(i),o=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,s=n.primary&&n.secondary,a=[];n.primary||n.secondary?(this.options.text&&a.push("ui-button-text-icon"+(s?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(a.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(o)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),/*!
 * jQuery UI Datepicker 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 *
 * Depends:
 *	jquery.ui.core.js
 */
function(e,t){function o(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=i(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(t){var o="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(o,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(o,"mouseover",function(){e.datepicker._isDisabledDatepicker(s.inline?t.parent()[0]:s.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function n(t,o){e.extend(t,o);for(var i in o)null==o[i]&&(t[i]=o[i]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var s,a="datepicker";e.extend(o.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return n(this._defaults,e||{}),this},_attachDatepicker:function(t,o){var i,n,s;i=t.nodeName.toLowerCase(),n="div"===i||"span"===i,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),n),s.settings=e.extend({},o||{}),"input"===i?this._connectDatepicker(t,s):n&&this._inlineDatepicker(t,s)},_newInst:function(t,o){var n=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:n,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:o,dpDiv:o?i(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,o){var i=e(t);o.append=e([]),o.trigger=e([]),i.hasClass(this.markerClassName)||(this._attachments(i,o),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(o),e.data(t,a,o),o.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,o){var i,n,s,a=this._get(o,"appendText"),r=this._get(o,"isRTL");o.append&&o.append.remove(),a&&(o.append=e("<span class='"+this._appendClass+"'>"+a+"</span>"),t[r?"before":"after"](o.append)),t.unbind("focus",this._showDatepicker),o.trigger&&o.trigger.remove(),i=this._get(o,"showOn"),("focus"===i||"both"===i)&&t.focus(this._showDatepicker),("button"===i||"both"===i)&&(n=this._get(o,"buttonText"),s=this._get(o,"buttonImage"),o.trigger=e(this._get(o,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:n,title:n}):n)),t[r?"before":"after"](o.trigger),o.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,o,i,n,s=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(o=0,i=0,n=0;n<e.length;n++)e[n].length>o&&(o=e[n].length,i=n);return i},s.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,o){var i=e(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(o.dpDiv),e.data(t,a,o),this._setDate(o,this._getDefaultDate(o),!0),this._updateDatepicker(o),this._updateAlternate(o),o.settings.disabled&&this._disableDatepicker(t),o.dpDiv.css("display","block"))},_dialogDatepicker:function(t,o,i,s,r){var l,c,d,u,h,m=this._dialogInst;return m||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),m=this._dialogInst=this._newInst(this._dialogInput,!1),m.settings={},e.data(this._dialogInput[0],a,m)),n(m.settings,s||{}),o=o&&o.constructor===Date?this._formatDate(m,o):o,this._dialogInput.val(o),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+u,d/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),m.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],a,m),this},_destroyDatepicker:function(t){var o,i=e(t),n=e.data(t,a);i.hasClass(this.markerClassName)&&(o=t.nodeName.toLowerCase(),e.removeData(t,a),"input"===o?(n.append.remove(),n.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===o||"span"===o)&&i.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var o,i,n=e(t),s=e.data(t,a);n.hasClass(this.markerClassName)&&(o=t.nodeName.toLowerCase(),"input"===o?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===o||"span"===o)&&(i=n.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var o,i,n=e(t),s=e.data(t,a);n.hasClass(this.markerClassName)&&(o=t.nodeName.toLowerCase(),"input"===o?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===o||"span"===o)&&(i=n.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,a)}catch(o){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(o,i,s){var a,r,l,c,d=this._getInst(o);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):d?"all"===i?e.extend({},d.settings):this._get(d,i):null:(a=i||{},"string"==typeof i&&(a={},a[i]=s),void(d&&(this._curInst===d&&this._hideDatepicker(),r=this._getDateDatepicker(o,!0),l=this._getMinMaxDate(d,"min"),c=this._getMinMaxDate(d,"max"),n(d.settings,a),null!==l&&a.dateFormat!==t&&a.minDate===t&&(d.settings.minDate=this._formatDate(d,l)),null!==c&&a.dateFormat!==t&&a.maxDate===t&&(d.settings.maxDate=this._formatDate(d,c)),"disabled"in a&&(a.disabled?this._disableDatepicker(o):this._enableDatepicker(o)),this._attachments(e(o),d),this._autoSize(d),this._setDate(d,r),this._updateAlternate(d),this._updateDatepicker(d))))},_changeDatepicker:function(e,t,o){this._optionDatepicker(e,t,o)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var o=this._getInst(e);o&&(this._setDate(o,t),this._updateDatepicker(o),this._updateAlternate(o))},_getDateDatepicker:function(e,t){var o=this._getInst(e);return o&&!o.inline&&this._setDateFromField(o,t),o?this._getDate(o):null},_doKeyDown:function(t){var o,i,n,s=e.datepicker._getInst(t.target),a=!0,r=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),a=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),n[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,n[0]),o=e.datepicker._get(s,"onSelect"),o?(i=e.datepicker._formatDate(s),o.apply(s.input?s.input[0]:null,[i,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),a=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),a=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),a=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),a=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),a=t.ctrlKey||t.metaKey;break;default:a=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):a=!1;a&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var o,i,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(o=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),i=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">i||!o||o.indexOf(i)>-1):void 0},_doKeyUp:function(t){var o,i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{o=e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i)),o&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var o,i,s,a,r,l,c;o=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==o&&(e.datepicker._curInst.dpDiv.stop(!0,!0),o&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),i=e.datepicker._get(o,"beforeShow"),s=i?i.apply(t,[t,o]):{},s!==!1&&(n(o.settings,s),o.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(o),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),a=!1,e(t).parents().each(function(){return a|="fixed"===e(this).css("position"),!a}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,o.dpDiv.empty(),o.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(o),r=e.datepicker._checkOffset(o,r,a),o.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":a?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),o.inline||(l=e.datepicker._get(o,"showAnim"),c=e.datepicker._get(o,"duration"),o.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?o.dpDiv.show(l,e.datepicker._get(o,"showOptions"),c):o.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(o)&&o.input.focus(),e.datepicker._curInst=o))}},_updateDatepicker:function(t){this.maxRows=4,s=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var o,i=this._getNumberOfMonths(t),n=i[1],a=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(o=t.yearshtml,setTimeout(function(){o===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),o=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,o,i){var n=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(i?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(i?0:e(document).scrollTop());return o.left-=this._get(t,"isRTL")?n-a:0,o.left-=i&&o.left===t.input.offset().left?e(document).scrollLeft():0,o.top-=i&&o.top===t.input.offset().top+r?e(document).scrollTop():0,o.left-=Math.min(o.left,o.left+n>l&&l>n?Math.abs(o.left+n-l):0),o.top-=Math.min(o.top,o.top+s>c&&c>s?Math.abs(s+r):0),o},_findPos:function(t){for(var o,i=this._getInst(t),n=this._get(i,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return o=e(t).offset(),[o.left,o.top]},_hideDatepicker:function(t){var o,i,n,s,r=this._curInst;!r||t&&r!==e.data(t,a)||this._datepickerShowing&&(o=this._get(r,"showAnim"),i=this._get(r,"duration"),n=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[o]||e.effects[o])?r.dpDiv.hide(o,e.datepicker._get(r,"showOptions"),i,n):r.dpDiv["slideDown"===o?"slideUp":"fadeIn"===o?"fadeOut":"hide"](o?i:null,n),o||n(),this._datepickerShowing=!1,s=this._get(r,"onClose"),s&&s.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var o=e(t.target),i=e.datepicker._getInst(o[0]);(o[0].id!==e.datepicker._mainDivId&&0===o.parents("#"+e.datepicker._mainDivId).length&&!o.hasClass(e.datepicker.markerClassName)&&!o.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||o.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==i)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,o,i){var n=e(t),s=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(s,o+("M"===i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(t){var o,i=e(t),n=this._getInst(i[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(o=new Date,n.selectedDay=o.getDate(),n.drawMonth=n.selectedMonth=o.getMonth(),n.drawYear=n.selectedYear=o.getFullYear()),this._notifyChange(n),this._adjustDate(i)},_selectMonthYear:function(t,o,i){var n=e(t),s=this._getInst(n[0]);s["selected"+("M"===i?"Month":"Year")]=s["draw"+("M"===i?"Month":"Year")]=parseInt(o.options[o.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(n)},_selectDay:function(t,o,i,n){var s,a=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(a[0])||(s=this._getInst(a[0]),s.selectedDay=s.currentDay=e("a",n).html(),s.selectedMonth=s.currentMonth=o,s.selectedYear=s.currentYear=i,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var o=e(t);this._selectDate(o,"")},_selectDate:function(t,o){var i,n=e(t),s=this._getInst(n[0]);o=null!=o?o:this._formatDate(s),s.input&&s.input.val(o),this._updateAlternate(s),i=this._get(s,"onSelect"),i?i.apply(s.input?s.input[0]:null,[o,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var o,i,n,s=this._get(t,"altField");s&&(o=this._get(t,"altFormat")||this._get(t,"dateFormat"),i=this._getDate(t),n=this.formatDate(o,i,this._getFormatConfig(t)),e(s).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,o=new Date(e.getTime());return o.setDate(o.getDate()+4-(o.getDay()||7)),t=o.getTime(),o.setMonth(0),o.setDate(1),Math.floor(Math.round((t-o)/864e5)/7)+1},parseDate:function(t,o,i){if(null==t||null==o)throw"Invalid arguments";if(o="object"==typeof o?o.toString():o+"",""===o)return null;var n,s,a,r,l=0,c=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),u=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,h=(i?i.dayNames:null)||this._defaults.dayNames,m=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,p=(i?i.monthNames:null)||this._defaults.monthNames,f=-1,g=-1,b=-1,v=-1,_=!1,w=function(e){var o=n+1<t.length&&t.charAt(n+1)===e;return o&&n++,o},y=function(e){var t=w(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n=new RegExp("^\\d{1,"+i+"}"),s=o.substring(l).match(n);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},$=function(t,i,n){var s=-1,a=e.map(w(t)?n:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(a,function(e,t){var i=t[1];return o.substr(l,i.length).toLowerCase()===i.toLowerCase()?(s=t[0],l+=i.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+l},k=function(){if(o.charAt(l)!==t.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;n<t.length;n++)if(_)"'"!==t.charAt(n)||w("'")?k():_=!1;else switch(t.charAt(n)){case"d":b=y("d");break;case"D":$("D",u,h);break;case"o":v=y("o");break;case"m":g=y("m");break;case"M":g=$("M",m,p);break;case"y":f=y("y");break;case"@":r=new Date(y("@")),f=r.getFullYear(),g=r.getMonth()+1,b=r.getDate();break;case"!":r=new Date((y("!")-this._ticksTo1970)/1e4),f=r.getFullYear(),g=r.getMonth()+1,b=r.getDate();break;case"'":w("'")?k():_=!0;break;default:k()}if(l<o.length&&(a=o.substr(l),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===f?f=(new Date).getFullYear():100>f&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=f?0:-100)),v>-1)for(g=1,b=v;;){if(s=this._getDaysInMonth(f,g-1),s>=b)break;g++,b-=s}if(r=this._daylightSavingAdjust(new Date(f,g-1,b)),r.getFullYear()!==f||r.getMonth()+1!==g||r.getDate()!==b)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,o){if(!t)return"";var i,n=(o?o.dayNamesShort:null)||this._defaults.dayNamesShort,s=(o?o.dayNames:null)||this._defaults.dayNames,a=(o?o.monthNamesShort:null)||this._defaults.monthNamesShort,r=(o?o.monthNames:null)||this._defaults.monthNames,l=function(t){var o=i+1<e.length&&e.charAt(i+1)===t;return o&&i++,o},c=function(e,t,o){var i=""+t;if(l(e))for(;i.length<o;)i="0"+i;return i},d=function(e,t,o,i){return l(e)?i[t]:o[t]},u="",h=!1;if(t)for(i=0;i<e.length;i++)if(h)"'"!==e.charAt(i)||l("'")?u+=e.charAt(i):h=!1;else switch(e.charAt(i)){case"d":u+=c("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),n,s);break;case"o":u+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=c("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),a,r);break;case"y":u+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?u+="'":h=!0;break;default:u+=e.charAt(i)}return u},_possibleChars:function(e){var t,o="",i=!1,n=function(o){var i=t+1<e.length&&e.charAt(t+1)===o;return i&&t++,i};for(t=0;t<e.length;t++)if(i)"'"!==e.charAt(t)||n("'")?o+=e.charAt(t):i=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":o+="0123456789";break;case"D":case"M":return null;case"'":n("'")?o+="'":i=!0;break;default:o+=e.charAt(t)}return o},_get:function(e,o){return e.settings[o]!==t?e.settings[o]:this._defaults[o]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var o=this._get(e,"dateFormat"),i=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),s=n,a=this._getFormatConfig(e);try{s=this.parseDate(o,i,a)||n}catch(r){i=t?"":i}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=i?s.getDate():0,e.currentMonth=i?s.getMonth():0,e.currentYear=i?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,o,i){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(o){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),o,e.datepicker._getFormatConfig(t))}catch(i){}for(var n=(o.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=n.getFullYear(),a=n.getMonth(),r=n.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(o);c;){switch(c[2]||"d"){case"d":case"D":r+=parseInt(c[1],10);break;case"w":case"W":r+=7*parseInt(c[1],10);break;case"m":case"M":a+=parseInt(c[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(s,a));break;case"y":case"Y":s+=parseInt(c[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(s,a))}c=l.exec(o)}return new Date(s,a,r)},a=null==o||""===o?i:"string"==typeof o?s(o):"number"==typeof o?isNaN(o)?i:n(o):new Date(o.getTime());return a=a&&"Invalid Date"===a.toString()?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,o){var i=!t,n=e.selectedMonth,s=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),n===e.selectedMonth&&s===e.selectedYear||o||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var o=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(i,-o,"M")},next:function(){e.datepicker._adjustDate(i,+o,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(i)},selectDay:function(){return e.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,o,i,n,s,a,r,l,c,d,u,h,m,p,f,g,b,v,_,w,y,$,k,x,C,R,S,T,D,P,A,E,I,M,j,O,F,z,L,H=new Date,N=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),B=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),q=this._get(e,"hideIfNoPrevNext"),U=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),X=1!==V[0]||1!==V[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(e,"min"),K=this._getMinMaxDate(e,"max"),J=e.drawMonth-Y,et=e.drawYear;if(0>J&&(J+=12,et--),K)for(t=this._daylightSavingAdjust(new Date(K.getFullYear(),K.getMonth()-V[0]*V[1]+1,K.getDate())),t=Z&&Z>t?Z:t;this._daylightSavingAdjust(new Date(et,J,1))>t;)J--,0>J&&(J=11,et--);for(e.drawMonth=J,e.drawYear=et,o=this._get(e,"prevText"),o=U?this.formatDate(o,this._daylightSavingAdjust(new Date(et,J-G,1)),this._getFormatConfig(e)):o,i=this._canAdjustMonth(e,-1,et,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+o+"</span></a>":q?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"e":"w")+"'>"+o+"</span></a>",n=this._get(e,"nextText"),n=U?this.formatDate(n,this._daylightSavingAdjust(new Date(et,J+G,1)),this._getFormatConfig(e)):n,s=this._canAdjustMonth(e,1,et,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>":q?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(B?"w":"e")+"'>"+n+"</span></a>",a=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?Q:N,a=U?this.formatDate(a,r,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(B?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(B?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,u=this._get(e,"showWeek"),h=this._get(e,"dayNames"),m=this._get(e,"dayNamesMin"),p=this._get(e,"monthNames"),f=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),b=this._get(e,"showOtherMonths"),v=this._get(e,"selectOtherMonths"),_=this._getDefaultDate(e),w="",$=0;$<V[0];$++){for(k="",this.maxRows=4,x=0;x<V[1];x++){if(C=this._daylightSavingAdjust(new Date(et,J,e.selectedDay)),R=" ui-corner-all",S="",X){if(S+="<div class='ui-datepicker-group",V[1]>1)switch(x){case 0:S+=" ui-datepicker-group-first",R=" ui-corner-"+(B?"right":"left");break;case V[1]-1:S+=" ui-datepicker-group-last",R=" ui-corner-"+(B?"left":"right");break;default:S+=" ui-datepicker-group-middle",R=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+R+"'>"+(/all|left/.test(R)&&0===$?B?s:i:"")+(/all|right/.test(R)&&0===$?B?i:s:"")+this._generateMonthYearHeader(e,J,et,Z,K,$>0||x>0,p,f)+"</div><table class='ui-datepicker-calendar'><thead><tr>",T=u?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",y=0;7>y;y++)D=(y+d)%7,T+="<th"+((y+d+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[D]+"'>"+m[D]+"</span></th>";for(S+=T+"</tr></thead><tbody>",P=this._getDaysInMonth(et,J),et===e.selectedYear&&J===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,P)),A=(this._getFirstDayOfMonth(et,J)-d+7)%7,E=Math.ceil((A+P)/7),I=X&&this.maxRows>E?this.maxRows:E,this.maxRows=I,M=this._daylightSavingAdjust(new Date(et,J,1-A)),j=0;I>j;j++){for(S+="<tr>",O=u?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(M)+"</td>":"",y=0;7>y;y++)F=g?g.apply(e.input?e.input[0]:null,[M]):[!0,""],z=M.getMonth()!==J,L=z&&!v||!F[0]||Z&&Z>M||K&&M>K,O+="<td class='"+((y+d+6)%7>=5?" ui-datepicker-week-end":"")+(z?" ui-datepicker-other-month":"")+(M.getTime()===C.getTime()&&J===e.selectedMonth&&e._keyEvent||_.getTime()===M.getTime()&&_.getTime()===C.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(z&&!b?"":" "+F[1]+(M.getTime()===Q.getTime()?" "+this._currentClass:"")+(M.getTime()===N.getTime()?" ui-datepicker-today":""))+"'"+(z&&!b||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+M.getMonth()+"' data-year='"+M.getFullYear()+"'")+">"+(z&&!b?"&#xa0;":L?"<span class='ui-state-default'>"+M.getDate()+"</span>":"<a class='ui-state-default"+(M.getTime()===N.getTime()?" ui-state-highlight":"")+(M.getTime()===Q.getTime()?" ui-state-active":"")+(z?" ui-priority-secondary":"")+"' href='#'>"+M.getDate()+"</a>")+"</td>",M.setDate(M.getDate()+1),M=this._daylightSavingAdjust(M);S+=O+"</tr>"}J++,J>11&&(J=0,et++),S+="</tbody></table>"+(X?"</div>"+(V[0]>0&&x===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=S}w+=k}return w+=c,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,o,i,n,s,a,r){var l,c,d,u,h,m,p,f,g=this._get(e,"changeMonth"),b=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),_="<div class='ui-datepicker-title'>",w="";if(s||!g)w+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=i&&i.getFullYear()===o,c=n&&n.getFullYear()===o,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;12>d;d++)(!l||d>=i.getMonth())&&(!c||d<=n.getMonth())&&(w+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+r[d]+"</option>");w+="</select>"}if(v||(_+=w+(!s&&g&&b?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!b)_+="<span class='ui-datepicker-year'>"+o+"</span>";else{for(u=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),m=function(e){var t=e.match(/c[+\-].*/)?o+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},p=m(u[0]),f=Math.max(p,m(u[1]||"")),p=i?Math.max(p,i.getFullYear()):p,f=n?Math.min(f,n.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f>=p;p++)e.yearshtml+="<option value='"+p+"'"+(p===o?" selected='selected'":"")+">"+p+"</option>";e.yearshtml+="</select>",_+=e.yearshtml,e.yearshtml=null}return _+=this._get(e,"yearSuffix"),v&&(_+=(!s&&g&&b?"":"&#xa0;")+w),_+="</div>"},_adjustInstDate:function(e,t,o){var i=e.drawYear+("Y"===o?t:0),n=e.drawMonth+("M"===o?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(i,n))+("D"===o?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,n,s)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),("M"===o||"Y"===o)&&this._notifyChange(e)
},_restrictMinMax:function(e,t){var o=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),n=o&&o>t?o:t;return i&&n>i?i:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,o,i){var n=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(o,i+(0>t?t:n[0]*n[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var o,i,n=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),a=null,r=null,l=this._get(e,"yearRange");return l&&(o=l.split(":"),i=(new Date).getFullYear(),a=parseInt(o[0],10),r=parseInt(o[1],10),o[0].match(/[+\-].*/)&&(a+=i),o[1].match(/[+\-].*/)&&(r+=i)),(!n||t.getTime()>=n.getTime())&&(!s||t.getTime()<=s.getTime())&&(!a||t.getFullYear()>=a)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,o,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,o,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var o=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(o)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(o)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(o))},e.datepicker=new o,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),/*!
 * jQuery UI Mouse 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(o){return!0===e.data(o.target,t.widgetName+".preventClickEvent")?(e.removeData(o.target,t.widgetName+".preventClickEvent"),o.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(o){if(!t){this._mouseStarted&&this._mouseUp(o),this._mouseDownEvent=o;var i=this,n=1===o.which,s="string"==typeof this.options.cancel&&o.target.nodeName?e(o.target).closest(this.options.cancel).length:!1;return n&&!s&&this._mouseCapture(o)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(o)!==!1,!this._mouseStarted)?(o.preventDefault(),!0):(!0===e.data(o.target,this.widgetName+".preventClickEvent")&&e.removeData(o.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),o.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),/*!
 * jQuery UI Draggable 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var o=this.options;return this.helper||o.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var o=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,o){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!o){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var o=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){o._trigger("stop",t)!==!1&&o._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var o=this.options,i=e.isFunction(o.helper)?e(o.helper.apply(this.element[0],[t])):"clone"===o.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===o.appendTo?this.element[0].parentNode:o.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,o,i,n=this.options;return n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),o=e(n.containment),i=o[0],void(i&&(t="hidden"!==o.css("overflow"),this.containment=[(parseInt(o.css("borderLeftWidth"),10)||0)+(parseInt(o.css("paddingLeft"),10)||0),(parseInt(o.css("borderTopWidth"),10)||0)+(parseInt(o.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(o.css("borderRightWidth"),10)||0)-(parseInt(o.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(o.css("borderBottomWidth"),10)||0)-(parseInt(o.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=o))):void(this.containment=null)},_convertPositionTo:function(t,o){o||(o=this.position);var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:o.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:o.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(t){var o,i,n,s,a=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),o=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):o=this.containment,t.pageX-this.offset.click.left<o[0]&&(l=o[0]+this.offset.click.left),t.pageY-this.offset.click.top<o[1]&&(c=o[1]+this.offset.click.top),t.pageX-this.offset.click.left>o[2]&&(l=o[2]+this.offset.click.left),t.pageY-this.offset.click.top>o[3]&&(c=o[3]+this.offset.click.top)),a.grid&&(n=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=o?n-this.offset.click.top>=o[1]||n-this.offset.click.top>o[3]?n:n-this.offset.click.top>=o[1]?n-a.grid[1]:n+a.grid[1]:n,s=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=o?s-this.offset.click.left>=o[0]||s-this.offset.click.left>o[2]?s:s-this.offset.click.left>=o[0]?s-a.grid[0]:s+a.grid[0]:s)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,o,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[o,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,o,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,o){var i=e(this).data("ui-draggable"),n=i.options,s=e.extend({},o,{item:i.element});i.sortables=[],e(n.connectToSortable).each(function(){var o=e.data(this,"ui-sortable");o&&!o.options.disabled&&(i.sortables.push({instance:o,shouldRevert:o.options.revert}),o.refreshPositions(),o._trigger("activate",t,s))})},stop:function(t,o){var i=e(this).data("ui-draggable"),n=e.extend({},o,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,o){var i=e(this).data("ui-draggable"),n=this;e.each(i.sortables,function(){var s=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return o.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),o=e(this).data("ui-draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,o){var i=e(o.helper),n=e(this).data("ui-draggable").options;i.css("opacity")&&(n._opacity=i.css("opacity")),i.css("opacity",n.opacity)},stop:function(t,o){var i=e(this).data("ui-draggable").options;i._opacity&&e(o.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var o=e(this).data("ui-draggable"),i=o.options,n=!1;o.scrollParent[0]!==document&&"HTML"!==o.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(o.overflowOffset.top+o.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?o.scrollParent[0].scrollTop=n=o.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-o.overflowOffset.top<i.scrollSensitivity&&(o.scrollParent[0].scrollTop=n=o.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(o.overflowOffset.left+o.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?o.scrollParent[0].scrollLeft=n=o.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-o.overflowOffset.left<i.scrollSensitivity&&(o.scrollParent[0].scrollLeft=n=o.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(o,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),o=t.options;t.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var o=e(this),i=o.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:o.outerWidth(),height:o.outerHeight(),top:i.top,left:i.left})})},drag:function(t,o){var i,n,s,a,r,l,c,d,u,h,m=e(this).data("ui-draggable"),p=m.options,f=p.snapTolerance,g=o.offset.left,b=g+m.helperProportions.width,v=o.offset.top,_=v+m.helperProportions.height;for(u=m.snapElements.length-1;u>=0;u--)r=m.snapElements[u].left,l=r+m.snapElements[u].width,c=m.snapElements[u].top,d=c+m.snapElements[u].height,r-f>b||g>l+f||c-f>_||v>d+f||!e.contains(m.snapElements[u].item.ownerDocument,m.snapElements[u].item)?(m.snapElements[u].snapping&&m.options.snap.release&&m.options.snap.release.call(m.element,t,e.extend(m._uiHash(),{snapItem:m.snapElements[u].item})),m.snapElements[u].snapping=!1):("inner"!==p.snapMode&&(i=Math.abs(c-_)<=f,n=Math.abs(d-v)<=f,s=Math.abs(r-b)<=f,a=Math.abs(l-g)<=f,i&&(o.position.top=m._convertPositionTo("relative",{top:c-m.helperProportions.height,left:0}).top-m.margins.top),n&&(o.position.top=m._convertPositionTo("relative",{top:d,left:0}).top-m.margins.top),s&&(o.position.left=m._convertPositionTo("relative",{top:0,left:r-m.helperProportions.width}).left-m.margins.left),a&&(o.position.left=m._convertPositionTo("relative",{top:0,left:l}).left-m.margins.left)),h=i||n||s||a,"outer"!==p.snapMode&&(i=Math.abs(c-v)<=f,n=Math.abs(d-_)<=f,s=Math.abs(r-g)<=f,a=Math.abs(l-b)<=f,i&&(o.position.top=m._convertPositionTo("relative",{top:c,left:0}).top-m.margins.top),n&&(o.position.top=m._convertPositionTo("relative",{top:d-m.helperProportions.height,left:0}).top-m.margins.top),s&&(o.position.left=m._convertPositionTo("relative",{top:0,left:r}).left-m.margins.left),a&&(o.position.left=m._convertPositionTo("relative",{top:0,left:l-m.helperProportions.width}).left-m.margins.left)),!m.snapElements[u].snapping&&(i||n||s||a||h)&&m.options.snap.snap&&m.options.snap.snap.call(m.element,t,e.extend(m._uiHash(),{snapItem:m.snapElements[u].item})),m.snapElements[u].snapping=i||n||s||a||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,o=this.data("ui-draggable").options,i=e.makeArray(e(o.stack)).sort(function(t,o){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(o).css("zIndex"),10)||0)});i.length&&(t=parseInt(e(i[0]).css("zIndex"),10)||0,e(i).each(function(o){e(this).css("zIndex",t+o)}),this.css("zIndex",t+i.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,o){var i=e(o.helper),n=e(this).data("ui-draggable").options;i.css("zIndex")&&(n._zIndex=i.css("zIndex")),i.css("zIndex",n.zIndex)},stop:function(t,o){var i=e(this).data("ui-draggable").options;i._zIndex&&e(o.helper).css("zIndex",i._zIndex)}})}(jQuery),/*!
 * jQuery UI Resizable 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){function t(e){return parseInt(e,10)||0}function o(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,o,i,n,s,a=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},o=0;o<t.length;o++)i=e.trim(t[o]),s="ui-resizable-"+i,n=e("<div class='ui-resizable-handle "+s+"'></div>"),n.css({zIndex:r.zIndex}),"se"===i&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(n);this._renderAxis=function(t){var o,i,n,s;t=t||this.element;for(o in this.handles)this.handles[o].constructor===String&&(this.handles[o]=e(this.handles[o],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[o],this.element),s=/sw|ne|nw|se|n|s/.test(o)?i.outerHeight():i.outerWidth(),n=["padding",/ne|nw|n/.test(o)?"Top":/se|sw|s/.test(o)?"Bottom":/^e$/.test(o)?"Right":"Left"].join(""),t.css(n,s),this._proportionallyResize()),e(this.handles[o]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,o=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(o(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),o(this.originalElement),this},_mouseCapture:function(t){var o,i,n=!1;for(o in this.handles)i=e(this.handles[o])[0],(i===t.target||e.contains(i,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(o){var i,n,s,a=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),i=t(this.helper.css("left")),n=t(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,n+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:n},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:o.pageX,top:o.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",o),!0},_mouseDrag:function(t){var o,i=this.helper,n={},s=this.originalMousePosition,a=this.axis,r=this.position.top,l=this.position.left,c=this.size.width,d=this.size.height,u=t.pageX-s.left||0,h=t.pageY-s.top||0,m=this._change[a];return m?(o=m.apply(this,[t,u,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(o=this._updateRatio(o,t)),o=this._respectSize(o,t),this._updateCache(o),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==l&&(n.left=this.position.left+"px"),this.size.width!==c&&(n.width=this.size.width+"px"),this.size.height!==d&&(n.height=this.size.height+"px"),i.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var o,i,n,s,a,r,l,c=this.options,d=this;return this._helper&&(o=this._proportionallyResizeElements,i=o.length&&/textarea/i.test(o[0].nodeName),n=i&&e.ui.hasScroll(o[0],"left")?0:d.sizeDiff.height,s=i?0:d.sizeDiff.width,a={width:d.helper.width()-s,height:d.helper.height()-n},r=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(a,{top:l,left:r})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,n,s,a,r=this.options;a={minWidth:o(r.minWidth)?r.minWidth:0,maxWidth:o(r.maxWidth)?r.maxWidth:1/0,minHeight:o(r.minHeight)?r.minHeight:0,maxHeight:o(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,n=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,s=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),n>a.minHeight&&(a.minHeight=n),i<a.maxWidth&&(a.maxWidth=i),s<a.maxHeight&&(a.maxHeight=s)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),o(e.left)&&(this.position.left=e.left),o(e.top)&&(this.position.top=e.top),o(e.height)&&(this.size.height=e.height),o(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return o(e.height)?e.width=e.height*this.aspectRatio:o(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=o(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=o(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=o(e.width)&&t.minWidth&&t.minWidth>e.width,r=o(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,d=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),a&&d&&(e.left=l-t.minWidth),n&&d&&(e.left=l-t.maxWidth),r&&u&&(e.top=c-t.minHeight),s&&u&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,o,i,n,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],o=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],i=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;t<o.length;t++)this.borderDif[t]=(parseInt(o[t],10)||0)+(parseInt(i[t],10)||0);n.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,o=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var o=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:o.width-t}},n:function(e,t,o){var i=this.originalSize,n=this.originalPosition;return{top:n.top+o,height:i.height-o}},s:function(e,t,o){return{height:this.originalSize.height+o}},se:function(t,o,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,o,i]))},sw:function(t,o,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,o,i]))},ne:function(t,o,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,o,i]))},nw:function(t,o,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,o,i]))}},_propagate:function(t,o){e.ui.plugin.call(this,t,[o,this.ui()]),"resize"!==t&&this._trigger(t,o,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var o=e(this).data("ui-resizable"),i=o.options,n=o._proportionallyResizeElements,s=n.length&&/textarea/i.test(n[0].nodeName),a=s&&e.ui.hasScroll(n[0],"left")?0:o.sizeDiff.height,r=s?0:o.sizeDiff.width,l={width:o.size.width-r,height:o.size.height-a},c=parseInt(o.element.css("left"),10)+(o.position.left-o.originalPosition.left)||null,d=parseInt(o.element.css("top"),10)+(o.position.top-o.originalPosition.top)||null;o.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(o.element.css("width"),10),height:parseInt(o.element.css("height"),10),top:parseInt(o.element.css("top"),10),left:parseInt(o.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:i.width,height:i.height}),o._updateCache(i),o._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var o,i,n,s,a,r,l,c=e(this).data("ui-resizable"),d=c.options,u=c.element,h=d.containment,m=h instanceof e?h.get(0):/parent/.test(h)?u.parent().get(0):h;m&&(c.containerElement=e(m),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(o=e(m),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=t(o.css("padding"+n))}),c.containerOffset=o.offset(),c.containerPosition=o.position(),c.containerSize={height:o.innerHeight()-i[3],width:o.innerWidth()-i[1]},n=c.containerOffset,s=c.containerSize.height,a=c.containerSize.width,r=e.ui.hasScroll(m,"left")?m.scrollWidth:a,l=e.ui.hasScroll(m)?m.scrollHeight:s,c.parentData={element:m,left:n.left,top:n.top,width:r,height:l}))},resize:function(t){var o,i,n,s,a=e(this).data("ui-resizable"),r=a.options,l=a.containerOffset,c=a.position,d=a._aspectRatio||t.shiftKey,u={top:0,left:0},h=a.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),c.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-u.left),d&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=r.helper?l.left:0),c.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),d&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?l.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,o=Math.abs((a._helper?a.offset.left-u.left:a.offset.left-u.left)+a.sizeDiff.width),i=Math.abs((a._helper?a.offset.top-u.top:a.offset.top-l.top)+a.sizeDiff.height),n=a.containerElement.get(0)===a.element.parent().get(0),s=/relative|absolute/.test(a.containerElement.css("position")),n&&s&&(o-=Math.abs(a.parentData.left)),o+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-o,d&&(a.size.height=a.size.width/a.aspectRatio)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,d&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),o=t.options,i=t.containerOffset,n=t.containerPosition,s=t.containerElement,a=e(t.helper),r=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!o.animate&&/relative/.test(s.css("position"))&&e(this).css({left:r.left-n.left-i.left,width:l,height:c}),t._helper&&!o.animate&&/static/.test(s.css("position"))&&e(this).css({left:r.left-n.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),o=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof o.alsoResize||o.alsoResize.parentNode?i(o.alsoResize):o.alsoResize.length?(o.alsoResize=o.alsoResize[0],i(o.alsoResize)):e.each(o.alsoResize,function(e){i(e)})},resize:function(t,o){var i=e(this).data("ui-resizable"),n=i.options,s=i.originalSize,a=i.originalPosition,r={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0},l=function(t,i){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),s={},a=i&&i.length?i:t.parents(o.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var o=(n[t]||0)+(r[t]||0);o&&o>=0&&(s[t]=o||null)}),t.css(s)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?l(n.alsoResize):e.each(n.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),o=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof o.ghost?o.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),o=t.options,i=t.size,n=t.originalSize,s=t.originalPosition,a=t.axis,r="number"==typeof o.grid?[o.grid,o.grid]:o.grid,l=r[0]||1,c=r[1]||1,d=Math.round((i.width-n.width)/l)*l,u=Math.round((i.height-n.height)/c)*c,h=n.width+d,m=n.height+u,p=o.maxWidth&&o.maxWidth<h,f=o.maxHeight&&o.maxHeight<m,g=o.minWidth&&o.minWidth>h,b=o.minHeight&&o.minHeight>m;o.grid=r,g&&(h+=l),b&&(m+=c),p&&(h-=l),f&&(m-=c),/^(se|s|e)$/.test(a)?(t.size.width=h,t.size.height=m):/^(ne)$/.test(a)?(t.size.width=h,t.size.height=m,t.position.top=s.top-u):/^(sw)$/.test(a)?(t.size.width=h,t.size.height=m,t.position.left=s.left-d):(m-c>0?(t.size.height=m,t.position.top=s.top-u):(t.size.height=c,t.position.top=s.top+n.height-c),h-l>0?(t.size.width=h,t.position.left=s.left-d):(t.size.width=l,t.position.left=s.left+n.width-l))}})}(jQuery),/*!
 * jQuery UI Dialog 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var o=e(this).css(t).offset().top;0>o&&e(this).css("top",t.top-o)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var o,i=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{o=this.document[0].activeElement,o&&"body"!==o.nodeName.toLowerCase()&&e(o).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var o=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return o&&!t&&this._trigger("focus",e),o},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function o(){var t=this.document[0].activeElement,o=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);o||this._focusTabbable()}t.preventDefault(),o.call(this),this._delay(o)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var o=this.uiDialog.find(":tabbable"),i=o.filter(":first"),n=o.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(n.focus(1),t.preventDefault()):(i.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,o=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(o)||e.isArray(o)&&!o.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(o,function(o,i){var n,s;i=e.isFunction(i)?{click:i,text:o}:i,i=e.extend({type:"button"},i),n=i.click,i.click=function(){n.apply(t.element[0],arguments)},s={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var o=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,n){e(this).addClass("ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",i,t(n))},drag:function(e,i){o._trigger("drag",e,t(i))},stop:function(n,s){i.position=[s.position.left-o.document.scrollLeft(),s.position.top-o.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",n,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var o=this,i=this.options,n=i.resizable,s=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:a,start:function(i,n){e(this).addClass("ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",i,t(n))},resize:function(e,i){o._trigger("resize",e,t(i))},stop:function(n,s){i.height=e(this).height(),i.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",n,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(i){var n=this,s=!1,a={};e.each(i,function(e,i){n._setOption(e,i),e in t&&(s=!0),e in o&&(a[e]=i)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,t){var o,i,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(o=n.is(":data(ui-draggable)"),o&&!t&&n.draggable("destroy"),!o&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(i=n.is(":data(ui-resizable)"),i&&!t&&n.resizable("destroy"),i&&"string"==typeof t&&n.resizable("option","handles",t),i||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,o,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),o="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:o,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,o=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){t._allowInteraction(i)||(i.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(o)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,o=this.options.position,i=[],n=[0,0];o?(("string"==typeof o||"object"==typeof o&&"0"in o)&&(i=o.split?o.split(" "):[o[0],o[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(n[e]=i[e],i[e]=t)}),o={my:i[0]+(n[0]<0?n[0]:"+"+n[0])+" "+i[1]+(n[1]<0?n[1]:"+"+n[1]),at:i.join(" ")}),o=e.extend({},e.ui.dialog.prototype.options.position,o)):o=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(o),t||this.uiDialog.hide()}})}(jQuery),/*!
 * jQuery UI Droppable 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
function(e){function t(e,t,o){return e>t&&t+o>e}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,o=this.options,i=o.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},e.ui.ddmanager.droppables[o.scope]=e.ui.ddmanager.droppables[o.scope]||[],e.ui.ddmanager.droppables[o.scope].push(this),o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,o=e.ui.ddmanager.droppables[this.options.scope];t<o.length;t++)o[t]===this&&o.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,o){"accept"===t&&(this.accept=e.isFunction(o)?o:function(e){return e.is(o)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var o=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),o&&this._trigger("activate",t,this.ui(o))},_deactivate:function(t){var o=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),o&&this._trigger("deactivate",t,this.ui(o))},_over:function(t){var o=e.ui.ddmanager.current;o&&(o.currentItem||o.element)[0]!==this.element[0]&&this.accept.call(this.element[0],o.currentItem||o.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(o)))},_out:function(t){var o=e.ui.ddmanager.current;o&&(o.currentItem||o.element)[0]!==this.element[0]&&this.accept.call(this.element[0],o.currentItem||o.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(o)))},_drop:function(t,o){var i=o||e.ui.ddmanager.current,n=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,o,i){if(!o.offset)return!1;var n,s,a=(e.positionAbs||e.position.absolute).left,r=(e.positionAbs||e.position.absolute).top,l=a+e.helperProportions.width,c=r+e.helperProportions.height,d=o.offset.left,u=o.offset.top,h=d+o.proportions().width,m=u+o.proportions().height;switch(i){case"fit":return a>=d&&h>=l&&r>=u&&m>=c;case"intersect":return d<a+e.helperProportions.width/2&&l-e.helperProportions.width/2<h&&u<r+e.helperProportions.height/2&&c-e.helperProportions.height/2<m;case"pointer":return n=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(s,u,o.proportions().height)&&t(n,d,o.proportions().width);case"touch":return(r>=u&&m>=r||c>=u&&m>=c||u>r&&c>m)&&(a>=d&&h>=a||l>=d&&h>=l||d>a&&l>h);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,o){var i,n,s=e.ui.ddmanager.droppables[t.options.scope]||[],a=o?o.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<s.length;i++)if(!(s[i].options.disabled||t&&!s[i].accept.call(s[i].element[0],t.currentItem||t.element))){for(n=0;n<r.length;n++)if(r[n]===s[i].element[0]){s[i].proportions().height=0;continue e}s[i].visible="none"!==s[i].element.css("display"),s[i].visible&&("mousedown"===a&&s[i]._activate.call(s[i],o),s[i].offset=s[i].element.offset(),s[i].proportions({width:s[i].element[0].offsetWidth,height:s[i].element[0].offsetHeight}))}},drop:function(t,o){var i=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,o)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,o)))}),i},dragStart:function(t,o){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,o)})},drag:function(t,o){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,o),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,n,s,a=e.ui.intersect(t,this,this.options.tolerance),r=!a&&this.isover?"isout":a&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===n}),s.length&&(i=e.data(s[0],"ui-droppable"),i.greedyChild="isover"===r)),i&&"isover"===r&&(i.isover=!1,i.isout=!0,i._out.call(i,o)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,o),i&&"isout"===r&&(i.isout=!1,i.isover=!0,i._over.call(i,o)))}})},dragStop:function(t,o){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,o)}}}(jQuery),/*!
 * jQuery UI Effects 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */
function(e,t){var o="ui-effects-";e.effects={effect:{}},/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(e,t){function o(e,t,o){var i=u[t.type]||{};return null==e?o||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function i(t){var o=c(),i=o._rgba=[];return t=t.toLowerCase(),p(l,function(e,n){var s,a=n.re.exec(t),r=a&&n.parse(a),l=n.space||"rgba";return r?(s=o[l](r),o[d[l].cache]=s[d[l].cache],i=o._rgba=s._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&e.extend(i,s.transparent),o):s[t]}function n(e,t,o){return o=(o+1)%1,1>6*o?e+(t-e)*o*6:1>2*o?t:2>3*o?e+(t-e)*(2/3-o)*6:e}var s,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,o,i,n){return new e.Color.fn.parse(t,o,i,n)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},m=e("<p>")[0],p=e.each;m.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=m.style.backgroundColor.indexOf("rgba")>-1,p(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(n,a,r,l){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(a),a=t);var u=this,h=e.type(n),m=this._rgba=[];return a!==t&&(n=[n,a,r,l],h="array"),"string"===h?this.parse(i(n)||s._default):"array"===h?(p(d.rgba.props,function(e,t){m[t.idx]=o(n[t.idx],t)}),this):"object"===h?(n instanceof c?p(d,function(e,t){n[t.cache]&&(u[t.cache]=n[t.cache].slice())}):p(d,function(t,i){var s=i.cache;p(i.props,function(e,t){if(!u[s]&&i.to){if("alpha"===e||null==n[e])return;u[s]=i.to(u._rgba)}u[s][t.idx]=o(n[e],t,!0)}),u[s]&&e.inArray(null,u[s].slice(0,3))<0&&(u[s][3]=1,i.from&&(u._rgba=i.from(u[s])))}),this):void 0},is:function(e){var t=c(e),o=!0,i=this;return p(d,function(e,n){var s,a=t[n.cache];return a&&(s=i[n.cache]||n.to&&n.to(i._rgba)||[],p(n.props,function(e,t){return null!=a[t.idx]?o=a[t.idx]===s[t.idx]:void 0})),o}),o},_space:function(){var e=[],t=this;return p(d,function(o,i){t[i.cache]&&e.push(o)}),e.pop()},transition:function(e,t){var i=c(e),n=i._space(),s=d[n],a=0===this.alpha()?c("transparent"):this,r=a[s.cache]||s.to(a._rgba),l=r.slice();return i=i[s.cache],p(s.props,function(e,n){var s=n.idx,a=r[s],c=i[s],d=u[n.type]||{};null!==c&&(null===a?l[s]=c:(d.mod&&(c-a>d.mod/2?a+=d.mod:a-c>d.mod/2&&(a-=d.mod)),l[s]=o((c-a)*t+a,n)))}),this[n](l)},blend:function(t){if(1===this._rgba[3])return this;var o=this._rgba.slice(),i=o.pop(),n=c(t)._rgba;return c(e.map(o,function(e,t){return(1-i)*n[t]+i*e}))},toRgbaString:function(){var t="rgba(",o=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===o[3]&&(o.pop(),t="rgb("),t+o.join()+")"},toHslaString:function(){var t="hsla(",o=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===o[3]&&(o.pop(),t="hsl("),t+o.join()+")"},toHexString:function(t){var o=this._rgba.slice(),i=o.pop();return t&&o.push(~~(255*i)),"#"+e.map(o,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,o,i=e[0]/255,n=e[1]/255,s=e[2]/255,a=e[3],r=Math.max(i,n,s),l=Math.min(i,n,s),c=r-l,d=r+l,u=.5*d;return t=l===r?0:i===r?60*(n-s)/c+360:n===r?60*(s-i)/c+120:60*(i-n)/c+240,o=0===c?0:.5>=u?c/d:c/(2-d),[Math.round(t)%360,o,u,null==a?1:a]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,o=e[1],i=e[2],s=e[3],a=.5>=i?i*(1+o):i+o-i*o,r=2*i-a;return[Math.round(255*n(r,a,t+1/3)),Math.round(255*n(r,a,t)),Math.round(255*n(r,a,t-1/3)),s]},p(d,function(i,n){var s=n.props,a=n.cache,l=n.to,d=n.from;c.fn[i]=function(i){if(l&&!this[a]&&(this[a]=l(this._rgba)),i===t)return this[a].slice();var n,r=e.type(i),u="array"===r||"object"===r?i:arguments,h=this[a].slice();return p(s,function(e,t){var i=u["object"===r?e:t.idx];null==i&&(i=h[t.idx]),h[t.idx]=o(i,t)}),d?(n=c(d(h)),n[a]=h,n):c(h)},p(s,function(t,o){c.fn[t]||(c.fn[t]=function(n){var s,a=e.type(n),l="alpha"===t?this._hsla?"hsla":"rgba":i,c=this[l](),d=c[o.idx];return"undefined"===a?d:("function"===a&&(n=n.call(this,d),a=e.type(n)),null==n&&o.empty?this:("string"===a&&(s=r.exec(n),s&&(n=d+parseFloat(s[2])*("+"===s[1]?1:-1))),c[o.idx]=n,this[l](c)))})})}),c.hook=function(t){var o=t.split(" ");p(o,function(t,o){e.cssHooks[o]={set:function(t,n){var s,a,r="";if("transparent"!==n&&("string"!==e.type(n)||(s=i(n)))){if(n=c(s||n),!h.rgba&&1!==n._rgba[3]){for(a="backgroundColor"===o?t.parentNode:t;(""===r||"transparent"===r)&&a&&a.style;)try{r=e.css(a,"backgroundColor"),a=a.parentNode}catch(l){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{t.style[o]=n}catch(l){}}},e.fx.step[o]=function(t){t.colorInit||(t.start=c(t.elem,o),t.end=c(t.end),t.colorInit=!0),e.cssHooks[o].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(a),e.cssHooks.borderColor={expand:function(e){var t={};return p(["Top","Right","Bottom","Left"],function(o,i){t["border"+i+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function o(t){var o,i,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)o=n[i],"string"==typeof n[o]&&(s[e.camelCase(o)]=n[o]);else for(o in n)"string"==typeof n[o]&&(s[o]=n[o]);return s}function i(t,o){var i,n,a={};for(i in o)n=o[i],t[i]!==n&&(s[i]||(e.fx.step[i]||!isNaN(parseFloat(n)))&&(a[i]=n));return a}var n=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,o){e.fx.step[o]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,o,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,a,r){var l=e.speed(s,a,r);return this.queue(function(){var s,a=e(this),r=a.attr("class")||"",c=l.children?a.find("*").addBack():a;c=c.map(function(){var t=e(this);return{el:t,start:o(this)}}),s=function(){e.each(n,function(e,o){t[o]&&a[o+"Class"](t[o])})},s(),c=c.map(function(){return this.end=o(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",r),c=c.map(function(){var t=this,o=e.Deferred(),i=e.extend({},l,{queue:!1,complete:function(){o.resolve(t)}});return this.el.animate(this.diff,i),o.promise()}),e.when.apply(e,c.get()).done(function(){s(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(a[0])})})},e.fn.extend({addClass:function(t){return function(o,i,n,s){return i?e.effects.animateClass.call(this,{add:o},i,n,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(o,i,n,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:o},i,n,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(o){return function(i,n,s,a,r){return"boolean"==typeof n||n===t?s?e.effects.animateClass.call(this,n?{add:i}:{remove:i},s,a,r):o.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},n,s,a)}}(e.fn.toggleClass),switchClass:function(t,o,i,n,s){return e.effects.animateClass.call(this,{add:o,remove:t},i,n,s)}})}(),function(){function i(t,o,i,n){return e.isPlainObject(t)&&(o=t,t=t.effect),t={effect:t},null==o&&(o={}),e.isFunction(o)&&(n=o,i=null,o={}),("number"==typeof o||e.fx.speeds[o])&&(n=i,i=o,o={}),e.isFunction(i)&&(n=i,i=null),o&&e.extend(t,o),i=i||o.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=n||o.complete,t}function n(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"1.10.4",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(o+t[i],e[0].style[t[i]])},restore:function(e,i){var n,s;for(s=0;s<i.length;s++)null!==i[s]&&(n=e.data(o+i[s]),n===t&&(n=""),e.css(i[s],n))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var o,i;switch(e[0]){case"top":o=0;break;case"middle":o=.5;break;case"bottom":o=1;break;default:o=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:o}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var o={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(a){s=document.body}return t.wrap(i),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(o,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){o[i]=t.css(i),isNaN(parseInt(o[i],10))&&(o[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(n),i.css(o).show()},removeWrapper:function(t){var o=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===o||e.contains(t[0],o))&&e(o).focus()),t},setTransition:function(t,o,i,n){return n=n||{},e.each(o,function(e,o){var s=t.cssUnit(o);s[0]>0&&(n[o]=s[0]*i+s[1])}),n}}),e.fn.extend({effect:function(){function t(t){function i(){e.isFunction(s)&&s.call(n[0]),e.isFunction(t)&&t()}var n=e(this),s=o.complete,r=o.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),i()):a.call(n[0],o,i)}var o=i.apply(this,arguments),n=o.mode,s=o.queue,a=e.effects.effect[o.effect];return e.fx.off||!a?n?this[n](o.duration,o.complete):this.each(function(){o.complete&&o.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},show:function(e){return function(t){if(n(t))return e.apply(this,arguments);var o=i.apply(this,arguments);return o.mode="show",this.effect.call(this,o)}}(e.fn.show),hide:function(e){return function(t){if(n(t))return e.apply(this,arguments);var o=i.apply(this,arguments);return o.mode="hide",this.effect.call(this,o)}}(e.fn.hide),toggle:function(e){return function(t){if(n(t)||"boolean"==typeof t)return e.apply(this,arguments);var o=i.apply(this,arguments);return o.mode="toggle",this.effect.call(this,o)}}(e.fn.toggle),cssUnit:function(t){var o=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){o.indexOf(t)>0&&(i=[parseFloat(o),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,o){t[o]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,o=4;e<((t=Math.pow(2,--o))-1)/11;);return 1/Math.pow(4,3-o)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,o){e.easing["easeIn"+t]=o,e.easing["easeOut"+t]=function(e){return 1-o(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?o(2*e)/2:1-o(-2*e+2)/2}})}()}(jQuery),/*!
 * jQuery UI Effects Blind 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){var t=/up|down|vertical/,o=/up|left|vertical|horizontal/;e.effects.effect.blind=function(i,n){var s,a,r,l=e(this),c=["position","top","bottom","left","right","height","width"],d=e.effects.setMode(l,i.mode||"hide"),u=i.direction||"up",h=t.test(u),m=h?"height":"width",p=h?"top":"left",f=o.test(u),g={},b="show"===d;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),s=e.effects.createWrapper(l).css({overflow:"hidden"}),a=s[m](),r=parseFloat(s.css(p))||0,g[m]=b?a:0,f||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[p]=b?r:a+r),b&&(s.css(m,0),f||s.css(p,r+a)),s.animate(g,{duration:i.duration,easing:i.easing,queue:!1,complete:function(){"hide"===d&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),n()}})}}(jQuery),/*!
 * jQuery UI Effects Bounce 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/bounce-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.bounce=function(t,o){var i,n,s,a=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"effect"),c="hide"===l,d="show"===l,u=t.direction||"up",h=t.distance,m=t.times||5,p=2*m+(d||c?1:0),f=t.duration/p,g=t.easing,b="up"===u||"down"===u?"top":"left",v="up"===u||"left"===u,_=a.queue(),w=_.length;for((d||c)&&r.push("opacity"),e.effects.save(a,r),a.show(),e.effects.createWrapper(a),h||(h=a["top"===b?"outerHeight":"outerWidth"]()/3),d&&(s={opacity:1},s[b]=0,a.css("opacity",0).css(b,v?2*-h:2*h).animate(s,f,g)),c&&(h/=Math.pow(2,m-1)),s={},s[b]=0,i=0;m>i;i++)n={},n[b]=(v?"-=":"+=")+h,a.animate(n,f,g).animate(s,f,g),h=c?2*h:h/2;c&&(n={opacity:0},n[b]=(v?"-=":"+=")+h,a.animate(n,f,g)),a.queue(function(){c&&a.hide(),e.effects.restore(a,r),e.effects.removeWrapper(a),o()}),w>1&&_.splice.apply(_,[1,0].concat(_.splice(w,p+1))),a.dequeue()}}(jQuery),/*!
 * jQuery UI Effects Clip 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/clip-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.clip=function(t,o){var i,n,s,a=e(this),r=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(a,t.mode||"hide"),c="show"===l,d=t.direction||"vertical",u="vertical"===d,h=u?"height":"width",m=u?"top":"left",p={};e.effects.save(a,r),a.show(),i=e.effects.createWrapper(a).css({overflow:"hidden"}),n="IMG"===a[0].tagName?i:a,s=n[h](),c&&(n.css(h,0),n.css(m,s/2)),p[h]=c?s:0,p[m]=c?0:s/2,n.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||a.hide(),e.effects.restore(a,r),e.effects.removeWrapper(a),o()}})}}(jQuery),/*!
 * jQuery UI Effects Drop 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/drop-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.drop=function(t,o){var i,n=e(this),s=["position","top","bottom","left","right","opacity","height","width"],a=e.effects.setMode(n,t.mode||"hide"),r="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l?"pos":"neg",u={opacity:r?1:0};e.effects.save(n,s),n.show(),e.effects.createWrapper(n),i=t.distance||n["top"===c?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(c,"pos"===d?-i:i),u[c]=(r?"pos"===d?"+=":"-=":"pos"===d?"-=":"+=")+i,n.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&n.hide(),e.effects.restore(n,s),e.effects.removeWrapper(n),o()}})}}(jQuery),/*!
 * jQuery UI Effects Explode 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/explode-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.explode=function(t,o){function i(){_.push(this),_.length===u*h&&n()}function n(){m.css({visibility:"visible"}),e(_).remove(),f||m.hide(),o()}var s,a,r,l,c,d,u=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=u,m=e(this),p=e.effects.setMode(m,t.mode||"hide"),f="show"===p,g=m.show().css("visibility","hidden").offset(),b=Math.ceil(m.outerWidth()/h),v=Math.ceil(m.outerHeight()/u),_=[];for(s=0;u>s;s++)for(l=g.top+s*v,d=s-(u-1)/2,a=0;h>a;a++)r=g.left+a*b,c=a-(h-1)/2,m.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*b,top:-s*v}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:b,height:v,left:r+(f?c*b:0),top:l+(f?d*v:0),opacity:f?0:1}).animate({left:r+(f?0:c*b),top:l+(f?0:d*v),opacity:f?1:0},t.duration||500,t.easing,i)}}(jQuery),/*!
 * jQuery UI Effects Fade 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.fade=function(t,o){var i=e(this),n=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:o})}}(jQuery),/*!
 * jQuery UI Effects Fold 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fold-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.fold=function(t,o){var i,n,s=e(this),a=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(s,t.mode||"hide"),l="show"===r,c="hide"===r,d=t.size||15,u=/([0-9]+)%/.exec(d),h=!!t.horizFirst,m=l!==h,p=m?["width","height"]:["height","width"],f=t.duration/2,g={},b={};e.effects.save(s,a),s.show(),i=e.effects.createWrapper(s).css({overflow:"hidden"}),n=m?[i.width(),i.height()]:[i.height(),i.width()],u&&(d=parseInt(u[1],10)/100*n[c?0:1]),l&&i.css(h?{height:0,width:d}:{height:d,width:0}),g[p[0]]=l?n[0]:d,b[p[1]]=l?n[1]:0,i.animate(g,f,t.easing).animate(b,f,t.easing,function(){c&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),o()})}}(jQuery),/*!
 * jQuery UI Effects Highlight 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.highlight=function(t,o){var i=e(this),n=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===s&&(a.opacity=0),e.effects.save(i,n),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&i.hide(),e.effects.restore(i,n),o()}})}}(jQuery),/*!
 * jQuery UI Effects Pulsate 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/pulsate-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.pulsate=function(t,o){var i,n=e(this),s=e.effects.setMode(n,t.mode||"show"),a="show"===s,r="hide"===s,l=a||"hide"===s,c=2*(t.times||5)+(l?1:0),d=t.duration/c,u=0,h=n.queue(),m=h.length;for((a||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),i=1;c>i;i++)n.animate({opacity:u},d,t.easing),u=1-u;n.animate({opacity:u},d,t.easing),n.queue(function(){r&&n.hide(),o()}),m>1&&h.splice.apply(h,[1,0].concat(h.splice(m,c+1))),n.dequeue()}}(jQuery),/*!
 * jQuery UI Effects Scale 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.puff=function(t,o){var i=e(this),n=e.effects.setMode(i,t.mode||"hide"),s="hide"===n,a=parseInt(t.percent,10)||150,r=a/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:n,complete:o,percent:s?a:100,from:s?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),i.effect(t)},e.effects.effect.scale=function(t,o){var i=e(this),n=e.extend(!0,{},t),s=e.effects.setMode(i,t.mode||"effect"),a=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),r=t.direction||"both",l=t.origin,c={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},d={y:"horizontal"!==r?a/100:1,x:"vertical"!==r?a/100:1};n.effect="size",n.queue=!1,n.complete=o,"effect"!==s&&(n.origin=l||["middle","center"],n.restore=!0),n.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),n.to={height:c.height*d.y,width:c.width*d.x,outerHeight:c.outerHeight*d.y,outerWidth:c.outerWidth*d.x},n.fade&&("show"===s&&(n.from.opacity=0,n.to.opacity=1),"hide"===s&&(n.from.opacity=1,n.to.opacity=0)),i.effect(n)},e.effects.effect.size=function(t,o){var i,n,s,a=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],d=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],m=e.effects.setMode(a,t.mode||"effect"),p=t.restore||"effect"!==m,f=t.scale||"both",g=t.origin||["middle","center"],b=a.css("position"),v=p?r:l,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===m&&a.show(),i={height:a.height(),width:a.width(),outerHeight:a.outerHeight(),outerWidth:a.outerWidth()},"toggle"===t.mode&&"show"===m?(a.from=t.to||_,a.to=t.from||i):(a.from=t.from||("show"===m?_:i),a.to=t.to||("hide"===m?_:i)),s={from:{y:a.from.height/i.height,x:a.from.width/i.width},to:{y:a.to.height/i.height,x:a.to.width/i.width}},("box"===f||"both"===f)&&(s.from.y!==s.to.y&&(v=v.concat(u),a.from=e.effects.setTransition(a,u,s.from.y,a.from),a.to=e.effects.setTransition(a,u,s.to.y,a.to)),s.from.x!==s.to.x&&(v=v.concat(h),a.from=e.effects.setTransition(a,h,s.from.x,a.from),a.to=e.effects.setTransition(a,h,s.to.x,a.to))),("content"===f||"both"===f)&&s.from.y!==s.to.y&&(v=v.concat(d).concat(c),a.from=e.effects.setTransition(a,d,s.from.y,a.from),a.to=e.effects.setTransition(a,d,s.to.y,a.to)),e.effects.save(a,v),a.show(),e.effects.createWrapper(a),a.css("overflow","hidden").css(a.from),g&&(n=e.effects.getBaseline(g,i),a.from.top=(i.outerHeight-a.outerHeight())*n.y,a.from.left=(i.outerWidth-a.outerWidth())*n.x,a.to.top=(i.outerHeight-a.to.outerHeight)*n.y,a.to.left=(i.outerWidth-a.to.outerWidth)*n.x),a.css(a.from),("content"===f||"both"===f)&&(u=u.concat(["marginTop","marginBottom"]).concat(d),h=h.concat(["marginLeft","marginRight"]),c=r.concat(u).concat(h),a.find("*[width]").each(function(){var o=e(this),i={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()};p&&e.effects.save(o,c),o.from={height:i.height*s.from.y,width:i.width*s.from.x,outerHeight:i.outerHeight*s.from.y,outerWidth:i.outerWidth*s.from.x},o.to={height:i.height*s.to.y,width:i.width*s.to.x,outerHeight:i.height*s.to.y,outerWidth:i.width*s.to.x},s.from.y!==s.to.y&&(o.from=e.effects.setTransition(o,u,s.from.y,o.from),o.to=e.effects.setTransition(o,u,s.to.y,o.to)),s.from.x!==s.to.x&&(o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to)),o.css(o.from),o.animate(o.to,t.duration,t.easing,function(){p&&e.effects.restore(o,c)})})),a.animate(a.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity),"hide"===m&&a.hide(),e.effects.restore(a,v),p||("static"===b?a.css({position:"relative",top:a.to.top,left:a.to.left}):e.each(["top","left"],function(e,t){a.css(t,function(t,o){var i=parseInt(o,10),n=e?a.to.left:a.to.top;return"auto"===o?n+"px":i+n+"px"})})),e.effects.removeWrapper(a),o()}})}}(jQuery),/*!
 * jQuery UI Effects Shake 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/shake-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.shake=function(t,o){var i,n=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(n,t.mode||"effect"),r=t.direction||"left",l=t.distance||20,c=t.times||3,d=2*c+1,u=Math.round(t.duration/d),h="up"===r||"down"===r?"top":"left",m="up"===r||"left"===r,p={},f={},g={},b=n.queue(),v=b.length;for(e.effects.save(n,s),n.show(),e.effects.createWrapper(n),p[h]=(m?"-=":"+=")+l,f[h]=(m?"+=":"-=")+2*l,g[h]=(m?"-=":"+=")+2*l,n.animate(p,u,t.easing),i=1;c>i;i++)n.animate(f,u,t.easing).animate(g,u,t.easing);n.animate(f,u,t.easing).animate(p,u/2,t.easing).queue(function(){"hide"===a&&n.hide(),e.effects.restore(n,s),e.effects.removeWrapper(n),o()}),v>1&&b.splice.apply(b,[1,0].concat(b.splice(v,d+1))),n.dequeue()}}(jQuery),/*!
 * jQuery UI Effects Slide 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.slide=function(t,o){var i,n=e(this),s=["position","top","bottom","left","right","width","height"],a=e.effects.setMode(n,t.mode||"show"),r="show"===a,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",d="up"===l||"left"===l,u={};e.effects.save(n,s),n.show(),i=t.distance||n["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(c,d?isNaN(i)?"-"+i:-i:i),u[c]=(r?d?"+=":"-=":d?"-=":"+=")+i,n.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===a&&n.hide(),e.effects.restore(n,s),e.effects.removeWrapper(n),o()}})}}(jQuery),/*!
 * jQuery UI Effects Transfer 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 *
 * Depends:
 *	jquery.ui.effect.js
 */
function(e){e.effects.effect.transfer=function(t,o){var i=e(this),n=e(t.to),s="fixed"===n.css("position"),a=e("body"),r=s?a.scrollTop():0,l=s?a.scrollLeft():0,c=n.offset(),d={top:c.top-r,left:c.left-l,height:n.innerHeight(),width:n.innerWidth()},u=i.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:u.top-r,left:u.left-l,height:i.innerHeight(),width:i.innerWidth(),position:s?"fixed":"absolute"}).animate(d,t.duration,t.easing,function(){h.remove(),o()})}}(jQuery),/*!
 * jQuery UI Progressbar 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */
function(e,t){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,o=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(o.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),/*!
 * jQuery UI Selectable 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,o=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(o.options.filter,o.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),o=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:o.left,top:o.top,right:o.left+t.outerWidth(),bottom:o.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var o=this,i=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,o._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().addBack().each(function(){var i,n=e.data(this,"selectable-item");return n?(i=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),n.unselecting=!i,n.selecting=i,n.selected=i,i?o._trigger("selecting",t,{selecting:n.element}):o._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var o,i=this,n=this.options,s=this.opos[0],a=this.opos[1],r=t.pageX,l=t.pageY;return s>r&&(o=r,r=s,s=o),a>l&&(o=l,l=a,a=o),this.helper.css({left:s,top:a,width:r-s,height:l-a}),this.selectees.each(function(){var o=e.data(this,"selectable-item"),c=!1;o&&o.element!==i.element[0]&&("touch"===n.tolerance?c=!(o.left>r||o.right<s||o.top>l||o.bottom<a):"fit"===n.tolerance&&(c=o.left>s&&o.right<r&&o.top>a&&o.bottom<l),c?(o.selected&&(o.$element.removeClass("ui-selected"),o.selected=!1),o.unselecting&&(o.$element.removeClass("ui-unselecting"),o.unselecting=!1),o.selecting||(o.$element.addClass("ui-selecting"),o.selecting=!0,i._trigger("selecting",t,{selecting:o.element}))):(o.selecting&&((t.metaKey||t.ctrlKey)&&o.startselected?(o.$element.removeClass("ui-selecting"),o.selecting=!1,o.$element.addClass("ui-selected"),o.selected=!0):(o.$element.removeClass("ui-selecting"),o.selecting=!1,o.startselected&&(o.$element.addClass("ui-unselecting"),o.unselecting=!0),i._trigger("unselecting",t,{unselecting:o.element}))),o.selected&&(t.metaKey||t.ctrlKey||o.startselected||(o.$element.removeClass("ui-selected"),o.selected=!1,o.$element.addClass("ui-unselecting"),o.unselecting=!0,i._trigger("unselecting",t,{unselecting:o.element})))))}),!1}},_mouseStop:function(t){var o=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,o._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,o._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),/*!
 * jQuery UI Slider 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,o,i=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(o=i.values&&i.values.length||1,n.length>o&&(n.slice(o).remove(),n=n.slice(0,o)),t=n.length;o>t;t++)a.push(s);this.handles=n.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,o="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),o="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(o+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var o,i,n,s,a,r,l,c,d=this,u=this.options;return u.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),o={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(o),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var o=Math.abs(i-d.values(t));(n>o||n===o&&(t===d._lastChangedValue||d.values(t)===u.min))&&(n=o,s=e(this),a=t)}),r=this._start(t,a),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=a,s.addClass("ui-state-active").focus(),l=s.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-s.width()/2,top:t.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},o=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,o),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,o,i,n,s;return"horizontal"===this.orientation?(t=this.elementSize.width,o=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,o=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=o/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),n=this._valueMax()-this._valueMin(),s=this._valueMin()+i*n,this._trimAlignValue(s)},_start:function(e,t){var o={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(o.value=this.values(t),o.values=this.values()),this._trigger("start",e,o)},_slide:function(e,t,o){var i,n,s;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&o>i||1===t&&i>o)&&(o=i),o!==this.values(t)&&(n=this.values(),n[t]=o,s=this._trigger("slide",e,{handle:this.handles[t],value:o,values:n}),i=this.values(t?0:1),s!==!1&&this.values(t,o))):o!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:o}),s!==!1&&this.value(o))},_stop:function(e,t){var o={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(o.value=this.values(t),o.values=this.values()),this._trigger("stop",e,o)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var o={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(o.value=this.values(t),o.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,o)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,o){var i,n,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(o),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,n=arguments[0],s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(n[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,o){var i,n=0;switch("range"===t&&this.options.range===!0&&("min"===o?(this.options.value=this._values(0),this.options.values=null):"max"===o&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;n>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,o,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(o=this.options.values.slice(),i=0;i<o.length;i+=1)o[i]=this._trimAlignValue(o[i]);return o}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,o=(e-this._valueMin())%t,i=e-o;return 2*Math.abs(o)>=t&&(i+=o>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,o,i,n,s,a=this.options.range,r=this.options,l=this,c=this._animateOff?!1:r.animate,d={};this.options.values&&this.options.values.length?this.handles.each(function(i){o=(l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())*100,d["horizontal"===l.orientation?"left":"bottom"]=o+"%",e(this).stop(1,1)[c?"animate":"css"](d,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:o+"%"},r.animate),1===i&&l.range[c?"animate":"css"]({width:o-t+"%"},{queue:!1,duration:r.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:o+"%"},r.animate),1===i&&l.range[c?"animate":"css"]({height:o-t+"%"},{queue:!1,duration:r.animate}))),t=o}):(i=this.value(),n=this._valueMin(),s=this._valueMax(),o=s!==n?(i-n)/(s-n)*100:0,d["horizontal"===this.orientation?"left":"bottom"]=o+"%",this.handle.stop(1,1)[c?"animate":"css"](d,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:o+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-o+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:o+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-o+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(o){var i,n,s,a,r=e(o.target).data("ui-slider-handle-index");switch(o.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(o.target).addClass("ui-state-active"),i=this._start(o,r),i===!1))return}switch(a=this.options.step,n=s=this.options.values&&this.options.values.length?this.values(r):this.value(),o.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===this._valueMax())return;s=this._trimAlignValue(n+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===this._valueMin())return;s=this._trimAlignValue(n-a)}this._slide(o,r,s)},click:function(e){e.preventDefault()},keyup:function(t){var o=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,o),this._change(t,o),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),/*!
 * jQuery UI Sortable 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e){function t(e,t,o){return e>t&&t+o>e}function o(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||o(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,o){"disabled"===t?(this.options[t]=o,this.widget().toggleClass("ui-sortable-disabled",!!o)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,o){var i=null,n=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(i=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(i=e(t.target)),i&&(!this.options.handle||o||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,o,i){var n,s,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(s)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var o,i,n,s,a=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),o=this.items.length-1;o>=0;o--)if(i=this.items[o],n=i.item[0],s=this._intersectsWithPointer(i),s&&i.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,o){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,n=this.placeholder.offset(),s=this.options.axis,a={};s&&"x"!==s||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,o);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var o=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(o).each(function(){var o=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);o&&i.push((t.key||o[1]+"[]")+"="+(t.key&&t.expression?o[1]:o[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var o=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},o.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,o=t+this.helperProportions.width,i=this.positionAbs.top,n=i+this.helperProportions.height,s=e.left,a=s+e.width,r=e.top,l=r+e.height,c=this.offset.click.top,d=this.offset.click.left,u="x"===this.options.axis||i+c>r&&l>i+c,h="y"===this.options.axis||t+d>s&&a>t+d,m=u&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?m:s<t+this.helperProportions.width/2&&o-this.helperProportions.width/2<a&&r<i+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var o="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=o&&i,s=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var o=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&i||"left"===s&&!i:n&&("down"===n&&o||"up"===n&&!o)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function o(){r.push(this)}var i,n,s,a,r=[],l=[],c=this._connectWith();if(c&&t)for(i=c.length-1;i>=0;i--)for(s=e(c[i]),n=s.length-1;n>=0;n--)a=e.data(s[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(o);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var o=0;o<t.length;o++)if(t[o]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var o,i,n,s,a,r,l,c,d=this.items,u=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(o=h.length-1;o>=0;o--)for(n=e(h[o]),i=n.length-1;i>=0;i--)s=e.data(n[i],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(u.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(o=u.length-1;o>=0;o--)for(a=u[o][1],r=u[o][0],i=0,c=r.length;c>i;i++)l=e(r[i]),l.data(this.widgetName+"-item",a),d.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var o,i,n,s;for(o=this.items.length-1;o>=0;o--)i=this.items[o],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=n.outerWidth(),i.height=n.outerHeight()),s=n.offset(),i.left=s.left,i.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(o=this.containers.length-1;o>=0;o--)s=this.containers[o].element.offset(),this.containers[o].containerCache.left=s.left,this.containers[o].containerCache.top=s.top,this.containers[o].containerCache.width=this.containers[o].element.outerWidth(),this.containers[o].containerCache.height=this.containers[o].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var o,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(o=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+i+">",t.document[0]).addClass(o||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}):"img"===i&&n.attr("src",t.currentItem.attr("src")),o||n.css("visibility","hidden"),n},update:function(e,n){(!o||i.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var n,s,a,r,l,c,d,u,h,m,p=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(p&&e.contains(this.containers[n].element[0],p.element[0]))continue;p=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",i,this._uiHash(this)),this.containers[n].containerCache.over=0);if(p)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",i,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(a=1e4,r=null,m=p.floating||o(this.currentItem),l=m?"left":"top",c=m?"width":"height",d=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)e.contains(this.containers[f].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!m||t(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(u=this.items[s].item.offset()[l],h=!1,Math.abs(u-d)>Math.abs(u+this.items[s][c]-d)&&(h=!0,u+=this.items[s][c]),Math.abs(u-d)<a&&(a=Math.abs(u-d),r=this.items[s],this.direction=h?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return;r?this._rearrange(i,r,null,!0):this._rearrange(i,null,this.containers[f].element,!0),this._trigger("change",i,this._uiHash()),this.containers[f]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",i,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(t){var o=this.options,i=e.isFunction(o.helper)?e(o.helper.apply(this.element[0],[t,this.currentItem])):"clone"===o.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==o.appendTo?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||o.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||o.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,o,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],o=e(n.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[o.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,o.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,o.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,o.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,o){o||(o=this.position);var i="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName);return{top:o.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop())*i,left:o.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())*i}},_generatePosition:function(t){var o,i,n=this.options,s=t.pageX,a=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(o=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?o-this.offset.click.top>=this.containment[1]&&o-this.offset.click.top<=this.containment[3]?o:o-this.offset.click.top>=this.containment[1]?o-n.grid[1]:o+n.grid[1]:o,i=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0],s=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,o,i){o?o[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){function o(e,t,o){return function(i){o._trigger(e,i,t._uiHash(t))}}this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var o=t||this;return{helper:o.helper,placeholder:o.placeholder||e([]),position:o.position,originalPosition:o.originalPosition,offset:o.positionAbs,item:o.currentItem,sender:t?t.element:null}}})}(jQuery),/*!
 * jQuery UI Spinner 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 *  jquery.ui.button.js
 */
function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},o=this.element;return e.each(["min","max","step"],function(e,i){var n=o.attr(i);void 0!==n&&n.length&&(t[i]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function o(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),o.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,o.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var o=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,o.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-o.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,o){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,o)},e),this._spin(t*this.options.step,o)},_spin:function(e,t){var o=this.value()||0;this.counter||(this.counter=1),o=this._adjustValue(o+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:o})===!1||(this._value(o),this.counter++)},_increment:function(t){var o=this.options.incremental;return o?e.isFunction(o)?o(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),o=t.indexOf(".");return-1===o?0:t.length-o-1},_adjustValue:function(e){var t,o,i=this.options;return t=null!==i.min?i.min:0,o=e-t,o=Math.round(o/i.step)*i.step,e=t+o,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var o=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(o))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var o;""!==e&&(o=this._parse(e),null!==o&&(t||(o=this._adjustValue(o)),e=this._format(o))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),/*!
 * jQuery UI Tabs 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){function o(){return++n}function i(e){return e=e.cloneNode(!1),e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var n=0,s=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,o=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",o.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),o.active=this._initialActive(),e.isArray(o.disabled)&&(o.disabled=e.unique(o.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(o.active):e(),this._refresh(),this.active.length&&this.load(o.active)},_initialActive:function(){var t=this.options.active,o=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each(function(o,n){return e(n).attr("aria-controls")===i?(t=o,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=o?!1:0)),!o&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var o=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(o),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i===this.options.active?!1:i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,n),t.ctrlKey||(o.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,o){function i(){return t>n&&(t=0),0>t&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=o?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+o()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,o=this.tablist.children(":has(a[href])");t.disabled=e.map(o.filter(".ui-state-disabled"),function(e){return o.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(o,n){var s,a,r,l=e(n).uniqueId().attr("id"),c=e(n).closest("li"),d=c.attr("aria-controls");i(n)?(s=n.hash,a=t.element.find(t._sanitizeSelector(s))):(r=t._tabId(c),s="#"+r,a=t.element.find(s),a.length||(a=t._createPanel(r),a.insertAfter(t.panels[o-1]||t.tablist)),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var o,i=0;o=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(o).addClass("ui-state-disabled").attr("aria-disabled","true"):e(o).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var o={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){o[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,o),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var o,i=this.element.parent();"fill"===t?(o=i.height(),o-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(o-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){o-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,o-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(o=0,this.panels.each(function(){o=Math.max(o,e(this).height("").height())}).height(o))},_eventHandler:function(t){var o=this.options,i=this.active,n=e(t.currentTarget),s=n.closest("li"),a=s[0]===i[0],r=a&&o.collapsible,l=r?e():this._getPanelForTab(s),c=i.length?this._getPanelForTab(i):e(),d={oldTab:i,oldPanel:c,newTab:r?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||a&&!o.collapsible||this._trigger("beforeActivate",t,d)===!1||(o.active=r?!1:this.tabs.index(s),this.active=a?e():s,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,d))},_toggle:function(t,o){function i(){s.running=!1,s._trigger("activate",t,o)}function n(){o.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&s.options.show?s._show(a,s.options.show,i):(a.show(),i())}var s=this,a=o.newPanel,r=o.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){o.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(o.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),o.oldTab.attr("aria-selected","false"),a.length&&r.length?o.oldTab.attr("tabIndex",-1):a.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}),o.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var o,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),o=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:o,currentTarget:o,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),o=t.data("ui-tabs-aria-controls");o?t.attr("aria-controls",o).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(o){var i=this.options.disabled;i!==!1&&(o===t?i=!1:(o=this._getIndex(o),i=e.isArray(i)?e.map(i,function(e){return e!==o?e:null}):e.map(this.tabs,function(e,t){return t!==o?t:null})),this._setupDisabled(i))},disable:function(o){var i=this.options.disabled;if(i!==!0){if(o===t)i=!0;else{if(o=this._getIndex(o),-1!==e.inArray(o,i))return;i=e.isArray(i)?e.merge([o],i).sort():[o]}this._setupDisabled(i)}},load:function(t,o){t=this._getIndex(t);var n=this,s=this.tabs.eq(t),a=s.find(".ui-tabs-anchor"),r=this._getPanelForTab(s),l={tab:s,panel:r};i(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,o,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),n._trigger("load",o,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&n.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(t,o,i){var n=this;return{url:t.attr("href"),beforeSend:function(t,s){return n._trigger("beforeLoad",o,e.extend({jqXHR:t,ajaxSettings:s},i))}}},_getPanelForTab:function(t){var o=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+o))}})}(jQuery),/*!
 * jQuery UI Tooltip 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e){function t(t,o){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(o),t.data("ui-tooltip-id",o).attr("aria-describedby",e.trim(i.join(" ")))}function o(t){var o=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(o,i);-1!==n&&i.splice(n,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var i=0;e.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,o){var i=this;return"disabled"===t?(this[o?"_disable":"_enable"](),void(this.options[t]=o)):(this._super(t,o),void("content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(o,i){var n=e.Event("blur");n.target=n.currentTarget=i[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var o=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,o.close(t,!0)),i.attr("title")&&(i.uniqueId(),o.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(e,t){var o,i=this.options.content,n=this,s=t?t.type:null;return"string"==typeof i?this._open(t,e,i):(o=i.call(e[0],function(o){e.data("ui-tooltip-open")&&n._delay(function(){t&&(t.type=s),this._open(t,e,o)})}),void(o&&this._open(t,e,o)))},_open:function(o,i,n){function s(e){c.of=e,a.is(":hidden")||a.position(c)}var a,r,l,c=e.extend({},this.options.position);if(n){if(a=this._find(i),a.length)return void a.find(".ui-tooltip-content").html(n);i.is("[title]")&&(o&&"mouseover"===o.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),t(i,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&o&&/^mouse/.test(o.type)?(this._on(this.document,{mousemove:s}),s(o)):a.position(e.extend({of:i},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){a.is(":visible")&&(s(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",o,{tooltip:a}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var o=e.Event(t);o.currentTarget=i[0],this.close(o,!0)}},remove:function(){this._removeTooltip(a)}},o&&"mouseover"!==o.type||(r.mouseleave="close"),o&&"focusin"!==o.type||(r.focusout="close"),this._on(!0,i,r)}},close:function(t){var i=this,n=e(t?t.currentTarget:this.element),s=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),o(n),s.stop(!0),this._hide(s,this.options.hide,function(){i._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,o){e(o.element).attr("title",o.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1)},_tooltip:function(t){var o="ui-tooltip-"+i++,n=e("<div>").attr({id:o,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[o]=t,n},_find:function(t){var o=t.data("ui-tooltip-id");return o?e("#"+o):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(o,i){var n=e.Event("blur");n.target=n.currentTarget=i[0],t.close(n,!0),e("#"+o).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))})}})}(jQuery),function(e){var t;t=function(){function e(){}return e.prototype.setup=function(e,t,o,i){var n,s;return null==o&&(o=1),s=t.w/e.w,n=t.h/e.h,this.minZoom="fit"===(null!=i?i.minZoom:void 0)?n>s?s:n:n>s?n:s,this.maxZoom=this.minZoom<1/o?1/o:this.minZoom},e.prototype.getZoom=function(e){return this.minZoom&&this.maxZoom?e*(this.maxZoom-this.minZoom)+this.minZoom:null},e.prototype.getSliderPos=function(e){return this.minZoom&&this.maxZoom?this.minZoom===this.maxZoom?0:(e-this.minZoom)/(this.maxZoom-this.minZoom):null},e.prototype.isZoomable=function(){return this.minZoom&&this.maxZoom?this.minZoom!==this.maxZoom:null},e.prototype.fixZoom=function(e){return e<this.minZoom?this.minZoom:e>this.maxZoom?this.maxZoom:e},e}();var o;o=function(){function o(t,i){var n;this.element=t,this.$el=e(this.element),n={$fileInput:this.$("input.cropit-image-input"),$preview:this.$(".cropit-image-preview"),$zoomSlider:this.$("input.cropit-image-zoom-input"),$previewContainer:this.$(".cropit-image-preview-container")},this.options=e.extend({},o._DEFAULTS,n,i),this.init()}return o._DEFAULTS={exportZoom:1,imageBackground:!1,imageBackgroundBorderWidth:0,imageState:null,allowCrossOrigin:!1,allowDragNDrop:!0,freeMove:!1,minZoom:"fill"},o.PREVIEW_EVENTS=function(){return["mousedown","mouseup","mouseleave","touchstart","touchend","touchcancel","touchleave"].map(function(e){return""+e+".cropit"}).join(" ")}(),o.PREVIEW_MOVE_EVENTS="mousemove.cropit touchmove.cropit",o.ZOOM_INPUT_EVENTS=function(){return["mousemove","touchmove","change"].map(function(e){return""+e+".cropit"}).join(" ")}(),o.prototype.init=function(){var o,i,n,s;return this.image=new Image,this.options.allowCrossOrigin&&(this.image.crossOrigin="Anonymous"),this.$fileInput=this.options.$fileInput.attr({accept:"image/*"}),this.$preview=this.options.$preview.css({backgroundRepeat:"no-repeat"}),this.$zoomSlider=this.options.$zoomSlider.attr({min:0,max:1,step:.01}),this.previewSize={w:this.options.width||this.$preview.width(),h:this.options.height||this.$preview.height()},this.options.width&&this.$preview.width(this.previewSize.w),this.options.height&&this.$preview.height(this.previewSize.h),this.options.imageBackground&&(e.isArray(this.options.imageBackgroundBorderWidth)?this.imageBgBorderWidthArray=this.options.imageBackgroundBorderWidth:(this.imageBgBorderWidthArray=[],[0,1,2,3].forEach(function(e){return function(t){return e.imageBgBorderWidthArray[t]=e.options.imageBackgroundBorderWidth}}(this))),o=this.options.$previewContainer,this.$imageBg=e("<img />").addClass("cropit-image-background").attr("alt","").css("position","absolute"),this.$imageBgContainer=e("<div />").addClass("cropit-image-background-container").css({position:"absolute",zIndex:0,left:-this.imageBgBorderWidthArray[3]+window.parseInt(this.$preview.css("border-left-width")),top:-this.imageBgBorderWidthArray[0]+window.parseInt(this.$preview.css("border-top-width")),width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]}).append(this.$imageBg),this.imageBgBorderWidthArray[0]>0&&this.$imageBgContainer.css({overflow:"hidden"}),o.css("position","relative").prepend(this.$imageBgContainer),this.$preview.css("position","relative"),this.$preview.hover(function(e){return function(){return e.$imageBg.addClass("cropit-preview-hovered")}}(this),function(e){return function(){return e.$imageBg.removeClass("cropit-preview-hovered")}}(this))),this.initialOffset={x:0,y:0},this.initialZoom=0,this.initialZoomSliderPos=0,this.imageLoaded=!1,this.moveContinue=!1,this.zoomer=new t,this.options.allowDragNDrop&&jQuery.event.props.push("dataTransfer"),this.bindListeners(),this.$zoomSlider.val(this.initialZoomSliderPos),this.setOffset((null!=(i=this.options.imageState)?i.offset:void 0)||this.initialOffset),this.zoom=(null!=(n=this.options.imageState)?n.zoom:void 0)||this.initialZoom,this.loadImage((null!=(s=this.options.imageState)?s.src:void 0)||null)},o.prototype.bindListeners=function(){return this.$fileInput.on("change.cropit",this.onFileChange.bind(this)),this.$preview.on(o.PREVIEW_EVENTS,this.onPreviewEvent.bind(this)),this.$zoomSlider.on(o.ZOOM_INPUT_EVENTS,this.onZoomSliderChange.bind(this)),this.options.allowDragNDrop?(this.$preview.on("dragover.cropit dragleave.cropit",this.onDragOver.bind(this)),this.$preview.on("drop.cropit",this.onDrop.bind(this))):void 0},o.prototype.unbindListeners=function(){return this.$fileInput.off("change.cropit"),this.$preview.off(o.PREVIEW_EVENTS),this.$preview.off("dragover.cropit dragleave.cropit drop.cropit"),this.$zoomSlider.off(o.ZOOM_INPUT_EVENTS)},o.prototype.reset=function(){return this.zoom=this.initialZoom,this.offset=this.initialOffset},o.prototype.onFileChange=function(){var e;return"function"==typeof(e=this.options).onFileChange&&e.onFileChange(),this.loadFileReader(this.$fileInput.get(0).files[0])},o.prototype.loadFileReader=function(e){var t;return t=new FileReader,(null!=e?e.type.match("image"):void 0)?(this.setImageLoadingClass(),t.readAsDataURL(e),t.onload=this.onFileReaderLoaded.bind(this),t.onerror=this.onFileReaderError.bind(this)):null!=e?this.onFileReaderError():void 0},o.prototype.onFileReaderLoaded=function(e){return this.reset(),this.loadImage(e.target.result)},o.prototype.onFileReaderError=function(){var e;return"function"==typeof(e=this.options).onFileReaderError?e.onFileReaderError():void 0},o.prototype.onDragOver=function(e){return e.preventDefault(),e.dataTransfer.dropEffect="copy",this.$preview.toggleClass("cropit-drag-hovered","dragover"===e.type)},o.prototype.onDrop=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=Array.prototype.slice.call(e.dataTransfer.files,0),t.some(function(e){return function(t){return t.type.match("image")?(e.loadFileReader(t),!0):void 0}}(this)),this.$preview.removeClass("cropit-drag-hovered")},o.prototype.loadImage=function(e){var t;return this.imageSrc=e,this.imageSrc?("function"==typeof(t=this.options).onImageLoading&&t.onImageLoading(),this.setImageLoadingClass(),this.image.onload=this.onImageLoaded.bind(this),this.image.onerror=this.onImageError.bind(this),this.image.src=this.imageSrc):void 0},o.prototype.onImageLoaded=function(){var e;return this.setImageLoadedClass(),this.setOffset(this.offset),this.$preview.css("background-image","url("+this.imageSrc+")"),this.options.imageBackground&&this.$imageBg.attr("src",this.imageSrc),this.imageSize={w:this.image.width,h:this.image.height},this.setupZoomer(),this.imageLoaded=!0,"function"==typeof(e=this.options).onImageLoaded?e.onImageLoaded():void 0},o.prototype.onImageError=function(){var e;return"function"==typeof(e=this.options).onImageError?e.onImageError():void 0},o.prototype.setImageLoadingClass=function(){return this.$preview.removeClass("cropit-image-loaded").addClass("cropit-image-loading")},o.prototype.setImageLoadedClass=function(){return this.$preview.removeClass("cropit-image-loading").addClass("cropit-image-loaded")},o.prototype.getEventPosition=function(e){var t,o,i,n;return(null!=(t=e.originalEvent)&&null!=(o=t.touches)?o[0]:void 0)&&(e=null!=(i=e.originalEvent)&&null!=(n=i.touches)?n[0]:void 0),e.clientX&&e.clientY?{x:e.clientX,y:e.clientY}:void 0},o.prototype.onPreviewEvent=function(t){return this.imageLoaded?(this.moveContinue=!1,this.$preview.off(o.PREVIEW_MOVE_EVENTS),"mousedown"===t.type||"touchstart"===t.type?(this.origin=this.getEventPosition(t),this.moveContinue=!0,this.$preview.on(o.PREVIEW_MOVE_EVENTS,this.onMove.bind(this))):e(document.body).focus(),t.stopPropagation(),!1):void 0},o.prototype.onMove=function(e){var t;return t=this.getEventPosition(e),this.moveContinue&&t&&this.setOffset({x:this.offset.x+t.x-this.origin.x,y:this.offset.y+t.y-this.origin.y}),this.origin=t,e.stopPropagation(),!1},o.prototype.setOffset=function(e){return this.offset=this.fixOffset(e),this.$preview.css("background-position",""+this.offset.x+"px "+this.offset.y+"px"),this.options.imageBackground?this.$imageBg.css({left:this.offset.x+this.imageBgBorderWidthArray[3],top:this.offset.y+this.imageBgBorderWidthArray[0]}):void 0},o.prototype.fixOffset=function(e){var t;return this.imageLoaded?(t={x:e.x,y:e.y},this.options.freeMove||(t.x=this.imageSize.w*this.zoom>=this.previewSize.w?Math.min(0,Math.max(t.x,this.previewSize.w-this.imageSize.w*this.zoom)):Math.max(0,Math.min(t.x,this.previewSize.w-this.imageSize.w*this.zoom)),t.y=this.imageSize.h*this.zoom>=this.previewSize.h?Math.min(0,Math.max(t.y,this.previewSize.h-this.imageSize.h*this.zoom)):Math.max(0,Math.min(t.y,this.previewSize.h-this.imageSize.h*this.zoom))),t.x=this.round(t.x),t.y=this.round(t.y),t):e},o.prototype.onZoomSliderChange=function(){var e;if(this.imageLoaded)return this.zoomSliderPos=Number(this.$zoomSlider.val()),e=this.zoomer.getZoom(this.zoomSliderPos),this.setZoom(e)},o.prototype.enableZoomSlider=function(){var e;return this.$zoomSlider.removeAttr("disabled"),"function"==typeof(e=this.options).onZoomEnabled?e.onZoomEnabled():void 0},o.prototype.disableZoomSlider=function(){var e;return this.$zoomSlider.attr("disabled",!0),"function"==typeof(e=this.options).onZoomDisabled?e.onZoomDisabled():void 0},o.prototype.setupZoomer=function(){return this.zoomer.setup(this.imageSize,this.previewSize,this.options.exportZoom,this.options),this.zoom=this.fixZoom(this.zoom),this.setZoom(this.zoom),this.isZoomable()?this.enableZoomSlider():this.disableZoomSlider()},o.prototype.setZoom=function(e){var t,o,i,n,s;return e=this.fixZoom(e),s=this.round(this.imageSize.w*e),n=this.round(this.imageSize.h*e),i=this.zoom,t=this.previewSize.w/2-(this.previewSize.w/2-this.offset.x)*e/i,o=this.previewSize.h/2-(this.previewSize.h/2-this.offset.y)*e/i,this.zoom=e,this.setOffset({x:t,y:o}),this.zoomSliderPos=this.zoomer.getSliderPos(this.zoom),this.$zoomSlider.val(this.zoomSliderPos),this.$preview.css("background-size",""+s+"px "+n+"px"),this.options.imageBackground?this.$imageBg.css({width:s,height:n}):void 0},o.prototype.fixZoom=function(e){return this.zoomer.fixZoom(e)},o.prototype.isZoomable=function(){return this.zoomer.isZoomable()},o.prototype.getCroppedImageData=function(t){var o,i,n,s,a;return this.imageSrc?(s={type:"image/png",quality:.75,originalSize:!1,fillBg:"#fff"},t=e.extend({},s,t),n={w:this.previewSize.w,h:this.previewSize.h},a=t.originalSize?1/this.zoom:this.options.exportZoom,o=e("<canvas />").attr({width:n.w*a,height:n.h*a}).get(0),i=o.getContext("2d"),"image/jpeg"===t.type&&(i.fillStyle=t.fillBg,i.fillRect(0,0,o.width,o.height)),i.drawImage(this.image,this.offset.x*a,this.offset.y*a,this.zoom*a*this.imageSize.w,this.zoom*a*this.imageSize.h),o.toDataURL(t.type,t.quality)):null},o.prototype.getImageState=function(){return{src:this.imageSrc,offset:this.offset,zoom:this.zoom}},o.prototype.getImageSrc=function(){return this.imageSrc},o.prototype.getOffset=function(){return this.offset},o.prototype.getZoom=function(){return this.zoom},o.prototype.getImageSize=function(){return this.imageSize?{width:this.imageSize.w,height:this.imageSize.h}:null},o.prototype.getPreviewSize=function(){return{width:this.previewSize.w,height:this.previewSize.h}},o.prototype.setPreviewSize=function(e){return(null!=e?e.width:void 0)>0&&(null!=e?e.height:void 0)>0?(this.previewSize={w:e.width,h:e.height},this.$preview.css({width:this.previewSize.w,height:this.previewSize.h}),this.options.imageBackground&&this.$imageBgContainer.css({width:this.previewSize.w+this.imageBgBorderWidthArray[1]+this.imageBgBorderWidthArray[3],height:this.previewSize.h+this.imageBgBorderWidthArray[0]+this.imageBgBorderWidthArray[2]}),this.imageLoaded?this.setupZoomer():void 0):void 0},o.prototype.disable=function(){return this.unbindListeners(),this.disableZoomSlider(),this.$el.addClass("cropit-disabled")},o.prototype.reenable=function(){return this.bindListeners(),this.enableZoomSlider(),this.$el.removeClass("cropit-disabled")},o.prototype.round=function(e){return+(Math.round(100*e)+"e-2")},o.prototype.$=function(e){return this.$el?this.$el.find(e):null},o}();var i,n;i="cropit",n={init:function(t){return this.each(function(){var n;return e.data(this,i)?void 0:(n=new o(this,t),e.data(this,i,n))})},destroy:function(){return this.each(function(){return e.removeData(this,i)})},isZoomable:function(){var e;return e=this.first().data(i),null!=e?e.isZoomable():void 0},"export":function(e){var t;return t=this.first().data(i),null!=t?t.getCroppedImageData(e):void 0},imageState:function(){var e;return e=this.first().data(i),null!=e?e.getImageState():void 0},imageSrc:function(t){var o;return null!=t?this.each(function(){var o;return o=e.data(this,i),null!=o&&o.reset(),null!=o?o.loadImage(t):void 0}):(o=this.first().data(i),null!=o?o.getImageSrc():void 0)},offset:function(t){var o;return null!=t&&null!=t.x&&null!=t.y?this.each(function(){var o;return o=e.data(this,i),null!=o?o.setOffset(t):void 0}):(o=this.first().data(i),null!=o?o.getOffset():void 0)},zoom:function(t){var o;return null!=t?this.each(function(){var o;return o=e.data(this,i),null!=o?o.setZoom(t):void 0}):(o=this.first().data(i),null!=o?o.getZoom():void 0)},imageSize:function(){var e;return e=this.first().data(i),null!=e?e.getImageSize():void 0},previewSize:function(t){var o;return null!=t?this.each(function(){var o;return o=e.data(this,i),null!=o?o.setPreviewSize(t):void 0}):(o=this.first().data(i),null!=o?o.getPreviewSize():void 0)},disable:function(){return this.each(function(){var t;return t=e.data(this,i),t.disable()})},reenable:function(){return this.each(function(){var t;return t=e.data(this,i),t.reenable()})}},e.fn.cropit=function(e){return n[e]?n[e].apply(this,[].slice.call(arguments,1)):n.init.apply(this,arguments)}}(window.jQuery),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var o,i=e(document);e.rails=o={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var o=e('meta[name="csrf-token"]').attr("content");o&&t.setRequestHeader("X-CSRF-Token",o)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),o=e("meta[name=csrf-param]").attr("content");e('form input[name="'+o+'"]').val(t)},fire:function(t,o,i){var n=e.Event(o);return t.trigger(n,i),n.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var n,s,a,r,l,c,d,u;if(o.fire(i,"ajax:before")){if(r=i.data("cross-domain"),l=r===t?null:r,c=i.data("with-credentials")||null,d=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){n=i.attr("method"),s=i.attr("action"),a=i.serializeArray();var h=i.data("ujs:submit-button");h&&(a.push(h),i.data("ujs:submit-button",null))}else i.is(o.inputChangeSelector)?(n=i.data("method"),s=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(o.buttonClickSelector)?(n=i.data("method")||"get",s=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(n=i.data("method"),s=o.href(i),a=i.data("params")||null);u={type:n||"GET",data:a,dataType:d,beforeSend:function(e,n){return n.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+n.accepts.script),o.fire(i,"ajax:beforeSend",[e,n])},success:function(e,t,o){i.trigger("ajax:success",[e,t,o])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,o){i.trigger("ajax:error",[e,t,o])},crossDomain:l},c&&(u.xhrFields={withCredentials:c}),s&&(u.url=s);var m=o.ajax(u);return i.trigger("ajax:send",m),m}return!1},handleMethod:function(i){var n=o.href(i),s=i.data("method"),a=i.attr("target"),r=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+n+'"></form>'),d='<input name="_method" value="'+s+'" type="hidden" />';l!==t&&r!==t&&(d+='<input name="'+l+'" value="'+r+'" type="hidden" />'),a&&c.attr("target",a),c.hide().append(d).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(o.disableSelector).each(function(){var t=e(this),o=t.is("button")?"html":"val";t.data("ujs:enable-with",t[o]()),t[o](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(o.enableSelector).each(function(){var t=e(this),o=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[o](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),n=!1;return i?(o.fire(e,"confirm")&&(n=o.confirm(i),t=o.fire(e,"confirm:complete",[n])),n&&t):!0},blankInputs:function(t,o,i){var n,s,a=e(),r=o||"input,textarea",l=t.find(r);return l.each(function(){if(n=e(this),s=n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):n.val(),!s==!i){if(n.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+n.attr("name")+'"]').length)return!0;a=a.add(n)}}),a.length?a:!1},nonBlankInputs:function(e,t){return o.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return o.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},o.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||o.CSRFProtection(i)}),i.delegate(o.linkDisableSelector,"ajax:complete",function(){o.enableElement(e(this))}),i.delegate(o.linkClickSelector,"click.rails",function(i){var n=e(this),s=n.data("method"),a=n.data("params"),r=i.metaKey||i.ctrlKey;if(!o.allowAction(n))return o.stopEverything(i);if(!r&&n.is(o.linkDisableSelector)&&o.disableElement(n),n.data("remote")!==t){if(r&&(!s||"GET"===s)&&!a)return!0;var l=o.handleRemote(n);return l===!1?o.enableElement(n):l.error(function(){o.enableElement(n)}),!1}return n.data("method")?(o.handleMethod(n),!1):void 0}),i.delegate(o.buttonClickSelector,"click.rails",function(t){var i=e(this);return o.allowAction(i)?(o.handleRemote(i),!1):o.stopEverything(t)}),i.delegate(o.inputChangeSelector,"change.rails",function(t){var i=e(this);return o.allowAction(i)?(o.handleRemote(i),!1):o.stopEverything(t)}),i.delegate(o.formSubmitSelector,"submit.rails",function(i){var n=e(this),s=n.data("remote")!==t,a=o.blankInputs(n,o.requiredInputSelector),r=o.nonBlankInputs(n,o.fileInputSelector);if(!o.allowAction(n))return o.stopEverything(i);if(a&&n.attr("novalidate")==t&&o.fire(n,"ajax:aborted:required",[a]))return o.stopEverything(i);if(s){if(r){setTimeout(function(){o.disableFormElements(n)},13);var l=o.fire(n,"ajax:aborted:file",[r]);return l||setTimeout(function(){o.enableFormElements(n)},13),l}return o.handleRemote(n),!1}setTimeout(function(){o.disableFormElements(n)},13)}),i.delegate(o.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!o.allowAction(i))return o.stopEverything(t);var n=i.attr("name"),s=n?{name:n,value:i.val()}:null;i.closest("form").data("ujs:submit-button",s)}),i.delegate(o.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&o.disableFormElements(e(this))}),i.delegate(o.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&o.enableFormElements(e(this))}),e(function(){o.refreshCSRFTokens()}))}(jQuery),function(e){e.fn.idle=function(t){var o={idle:6e4,events:"mousemove keypress mousedown",onIdle:function(){},onActive:function(){},onHide:function(){},onShow:function(){},keepTracking:!1},i=!1,n=!0,s=e.extend({},o,t),a=function(e,t){i&&(t.onActive.call(),i=!1);var o=t.keepTracking?clearInterval:clearTimeout;return o(e),r(t)},r=function(e){var t=e.keepTracking?setInterval:setTimeout,o=t(function(){i=!0,e.onIdle.call()},e.idle);return o};return this.each(function(){var o=r(s);e(this).on(s.events,function(){o=a(o,s)}),(t.onShow||t.onHide)&&e(document).on("visibilitychange webkitvisibilitychange mozvisibilitychange msvisibilitychange",function(){document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?n&&(n=!1,s.onHide.call()):n||(n=!0,s.onShow.call())})})}}(jQuery),eval(function(e,t,o,i,n,s){if(n=function(e){return(t>e?"":n(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;o--;)s[n(o)]=i[o]||n(o);i=[function(e){return s[e]}],n=function(){return"\\w+"},o=1}for(;o--;)i[o]&&(e=e.replace(new RegExp("\\b"+n(o)+"\\b","g"),i[o]));return e}('4 1H=1H||{};(8($){1H={4e:{2O:\'3.3\'},3Y:"6I 6j",3j:20,41:8(v){6(v!==14){$(".2Q").1m({1u:\'3G\',2h:\'5c\'})}1d{$(".2Q").1m({1u:\'58\',2h:\'3A\'})}},3x:\'\',3w:8(a,b,c){c=c||"43";4 d;25(c.2p()){1i"43":1i"4F":d=$(a).2O(b).1b("1Y");1j}15 d}};$.3r={};$.2O={};$.2S(12,$.3r,1H);$.2S(12,$.2O,1H);6($.1S.1Z===1B){$.1S.1Z=$.1S.5P}6($.1S.18===1B){$.1S.18=$.1S.5N;$.1S.1v=$.1S.6h}6(1A $.3p.4G===\'8\'){$.3p[\':\'].4B=$.3p.4G(8(b){15 8(a){15 $(a).1o().3K().3H(b.3K())>=0}})}1d{$.3p[\':\'].4B=8(a,i,m){15 $(a).1o().3K().3H(m[3].3K())>=0}}8 1Y(q,t){4 u=$.2S(12,{1L:{1b:1g,1n:0,3y:1g,2d:0,1O:14,3d:6a},3D:\'1Y\',1u:5K,26:7,3k:0,3c:12,1J:5I,23:14,3J:\'5u\',2P:\'1R\',3g:\'3G\',2i:12,1D:\'\',3m:0.7,4v:12,3o:0,1z:14,3s:\'5A\',28:\'\',29:\'\',18:{3w:1g,2N:1g,3E:1g,21:1g,1G:1g,32:1g,2K:1g,1R:1g,4t:1g,4r:1g,2r:1g,2J:1g,34:1g,2u:1g,2v:1g}},t);4 x=1a;4 y={4q:\'5C\',1P:\'5H\',4p:\'5J\',2b:\'5M\',1l:\'5O\'};4 z={1Y:u.3D,2T:\'2T\',4k:\'4k 6q\',4j:\'4j\',3P:\'3P\',2C:\'2C\',1p:\'1p\',2Q:\'2Q\',4H:\'4H\',4P:\'4P\',19:\'19\',4i:\'4i\',3l:"3l",4h:"4h",1h:"1h",36:"5W",2Y:\'2Y\',3q:\'3q\'};4 A={11:\'5y\',2q:\'2q\',4Y:\'5D 50\',3u:"3u"};4 B=14,1W=14,1k=14,3B={},9,3b={},2X=14;4 C=40,4g=38,4C=37,4d=39,4I=27,4c=13,3h=47,4a=16,49=17;4 D=14,2c=14,3f=1g,2F=14,35,5L=14;4 E=30,2V=48.5R.5U,5b=2V.5Y(/60/i);4 F=8(){4 a=2V.3H("62");6(a>0){15 2w(2V.6b(a+5,2V.3H(".",a)))}1d{15 0}};4 G=8(){u.3D=$("#"+9).1b("6k")||u.3D;u.26=$("#"+9).1b("6l")||u.26;6($("#"+9).1b("5k")==14){u.3c=$("#"+9).1b("5k")};u.23=$("#"+9).1b("4D")||u.23;u.3J=$("#"+9).1b("6z")||u.3J;u.2P=$("#"+9).1b("2P")||u.2P;u.3g=$("#"+9).1b("6D")||u.3g;u.2i=$("#"+9).1b("6E")||u.2i;u.3m=$("#"+9).1b("6H")||u.3m;u.3o=$("#"+9).1b("4E")||u.3o;u.1z=$("#"+9).1b("5q")||u.1z;u.3s=$("#"+9).1b("5s")||u.3s;u.28=$("#"+9).1b("28")||u.28;u.29=$("#"+9).1b("29")||u.29};4 H=8(a){6(3B[a]===1B){3B[a]=E.5v(a)}15 3B[a]};4 I=8(a){4 b=L("1l");15 $("#"+b+" 11."+A.11).1w(a)};4 J=8(){6(u.1L.1b){4 a=["1h","1C","1r"];2G{6(!q.1F){q.1F="43"+1H.3j};u.1L.1b=51(u.1L.1b);4 b="5F"+(1H.3j++);4 c={};c.1F=b;c.3y=u.1L.3y||q.1F;6(u.1L.2d>0){c.2d=u.1L.2d};c.1O=u.1L.1O;4 d=O("4F",c);22(4 i=0;i<u.1L.1b.1c;i++){4 f=u.1L.1b[i];4 g=3R 42(f.1o,f.1f);22(4 p 3N f){6(p.2p()!=\'1o\'){4 h=($.5T(p.2p(),a)!=-1)?"1b-":"";g.5V(h+p,f[p])}};d.1I[i]=g};H(q.1F).1q(d);d.1n=u.1L.1n;$(d).1m({3d:u.1L.3d+\'2E\'});q=d}2z(e){63"64 65 68 69 3N 6O 1b.";}}};4 K=8(){J();6(!q.1F){q.1F="6d"+(1H.3j++)};9=q.1F;x.9=9;G();1k=H(9).2C;4 a=u.1z;6(6e(a)===12){H(9).1O=12;u.1z=12};B=(H(9).2d>1||H(9).1O==12)?12:14;6(B){1W=H(9).1O};5o();4V();1t("4X",2j());1t("4Z",$("#"+9+" 1T:19"));4 b=L("1l");35=$("#"+b+" 11."+z.19)};4 L=8(a){15 9+y[a]};4 M=8(a){4 s=(a.1D===1B)?"":a.1D.56;15 s};4 N=8(a){4 b=\'\',1r=\'\',1h=\'\',1f=-1,1o=\'\',1e=\'\',1x=\'\';6(a!==1B){4 c=a.1r||"";6(c!=""){4 d=/^\\{.*\\}$/;4 e=d.5p(c);6(e&&u.2i){4 f=51("["+c+"]")};1r=(e&&u.2i)?f[0].1r:1r;1h=(e&&u.2i)?f[0].1h:1h;b=(e&&u.2i)?f[0].1C:c;1x=(e&&u.2i)?f[0].1x:1x};1o=a.1o||\'\';1f=a.1f||\'\';1e=a.1e||"";1r=$(a).1Z("1b-1r")||$(a).1b("1r")||(1r||"");1h=$(a).1Z("1b-1h")||$(a).1b("1h")||(1h||"");b=$(a).1Z("1b-1C")||$(a).1b("1C")||(b||"");1x=$(a).1Z("1b-1x")||$(a).1b("1x")||(1x||"")};4 o={1C:b,1r:1r,1h:1h,1f:1f,1o:1o,1e:1e,1x:1x};15 o};4 O=8(a,b,c){4 d=E.5r(a);6(b){22(4 i 3N b){25(i){1i"1D":d.1D.56=b[i];1j;2y:d[i]=b[i];1j}}};6(c){d.5t=c};15 d};4 P=8(){4 a=L("4q");6($("#"+a).1c==0){4 b={1D:\'1u: 58;3X: 2s;2h: 3A;\',1e:z.2Q};b.1F=a;4 c=O("2H",b);$("#"+9).5h(c);$("#"+9).5z($("#"+a))}1d{$("#"+a).1m({1u:0,3X:\'2s\',2h:\'3A\'})};H(9).2U=-1};4 Q=8(){4 a={1e:z.1Y+" 5j 2I"};4 b=M(H(9));4 w=$("#"+9).5E();a.1D="3d: "+w+"2E;";6(b.1c>0){a.1D=a.1D+""+b};a.1F=L("1P");a.2U=H(9).2U;4 c=O("2H",a);15 c};4 R=8(){4 a;6(H(9).1n>=0){a=H(9).1I[H(9).1n]}1d{a={1f:\'\',1o:\'\'}}4 b="",3W="";4 c=$("#"+9).1b("4D");6(c){u.23=c};6(u.23!=14){b=" "+u.23;3W=" "+a.1e};4 d=O("2H",{1e:z.2T+b+" "+A.2q});4 e=O("2f",{1e:z.4i});4 f=O("2f",{1e:z.4k});4 g=L("4p");4 h=O("2f",{1e:z.3P+3W,1F:g});4 i=N(a);4 j=i.1C;4 k=i.1o||"";6(j!=""&&u.3c){4 l=O("3z");l.3V=j;6(i.1x!=""){l.1e=i.1x+" "}};4 m=O("2f",{1e:z.36},k);d.1q(e);d.1q(f);6(l){h.1q(l)};h.1q(m);d.1q(h);4 n=O("2f",{1e:z.1h},i.1h);h.1q(n);15 d};4 S=8(){4 a=L("2b");4 b=O("31",{1F:a,4Q:\'1o\',1f:\'\',5Q:\'1v\',1e:\'1o 50 2I\',1D:\'1X: 2o\'});15 b};4 T=8(a){4 b={};4 c=M(a);6(c.1c>0){b.1D=c};4 d=(a.2C)?z.2C:z.1p;d=(a.19)?(d+" "+z.19):d;d=d+" "+A.11;b.1e=d;6(u.23!=14){b.1e=d+" "+a.1e};4 e=O("11",b);4 f=N(a);6(f.1r!=""){e.1r=f.1r};4 g=f.1C;6(g!=""&&u.3c){4 h=O("3z");h.3V=g;6(f.1x!=""){h.1e=f.1x+" "}};6(f.1h!=""){4 i=O("2f",{1e:z.1h},f.1h)};4 j=a.1o||"";4 k=O("2f",{1e:z.36},j);6(u.1z===12){4 l=O("31",{4Q:\'4U\',3y:9+u.3s+\'[]\',1f:a.1f||""});e.1q(l);6(u.1z===12){l.2M=(a.19)?12:14}};6(h){e.1q(h)};e.1q(k);6(i){e.1q(i)}1d{6(h){h.1e=h.1e+A.3u}};4 m=O("2H",{1e:\'5X\'});e.1q(m);15 e};4 U=8(){4 a=L("1l");4 b={1e:z.4j+" 5Z "+A.4Y,1F:a};6(B==14){b.1D="z-1w: "+u.1J}1d{b.1D="z-1w:1"};4 c=$("#"+9).1b("4E")||u.3o;6(c){b.1D=(b.1D||"")+";3d:"+c};4 d=O("2H",b);4 e=O("3T");6(u.23!=14){e.1e=u.23};4 f=H(9).1U;22(4 i=0;i<f.1c;i++){4 g=f[i];4 h;6(g.3S.2p()=="3l"){h=O("11",{1e:z.3l});4 k=O("2f",{1e:z.4h},g.36);h.1q(k);4 l=g.1U;4 m=O("3T");22(4 j=0;j<l.1c;j++){4 n=T(l[j]);m.1q(n)};h.1q(m)}1d{h=T(g)};e.1q(h)};d.1q(e);15 d};4 V=8(a){4 b=L("1l");6(a){6(a==-1){$("#"+b).1m({1u:"3G",3X:"3G"})}1d{$("#"+b).1m("1u",a+"2E")};15 14};4 c;6(H(9).1I.1c>u.26){4 d=2w($("#"+b+" 11:4f").1m("52-67"))+2w($("#"+b+" 11:4f").1m("52-24"));6(u.3k===0){$("#"+b).1m({55:\'2s\',1X:\'3L\'});u.3k=3M.6c($("#"+b+" 11:4f").1u());$("#"+b).1m({55:\'1Q\'});6(!B||u.1z===12){$("#"+b).1m({1X:\'2o\'})}};c=((u.3k+d)*u.26)}1d 6(B){c=$("#"+9).1u()};15 c};4 W=8(){4 j=L("1l");$("#"+j).18("1R",8(e){6(1k===12)15 14;e.1N();e.2a();6(B){3O()}});$("#"+j+" 11."+z.1p).18("1R",8(e){6(e.5f.3S.2p()!=="31"){2n(1a)}});$("#"+j+" 11."+z.1p).18("2u",8(e){6(1k===12)15 14;35=$("#"+j+" 11."+z.19);3f=1a;e.1N();e.2a();6(u.1z===12){6(e.5f.3S.2p()==="31"){2c=12}};6(B===12){6(1W){6(D===12){$(1a).1s(z.19);4 a=$("#"+j+" 11."+z.19);4 b=I(1a);6(a.1c>1){4 c=$("#"+j+" 11."+A.11);4 d=I(a[0]);4 f=I(a[1]);6(b>f){d=(b);f=f+1};22(4 i=3M.6o(d,f);i<=3M.6p(d,f);i++){4 g=c[i];6($(g).3F(z.1p)){$(g).1s(z.19)}}}}1d 6(2c===12){$(1a).6y(z.19);6(u.1z===12){4 h=1a.3U[0];h.2M=!h.2M}}1d{$("#"+j+" 11."+z.19).1E(z.19);$("#"+j+" 31:4U").1Z("2M",14);$(1a).1s(z.19);6(u.1z===12){1a.3U[0].2M=12}}}1d{$("#"+j+" 11."+z.19).1E(z.19);$(1a).1s(z.19)}}1d{$("#"+j+" 11."+z.19).1E(z.19);$(1a).1s(z.19)}});$("#"+j+" 11."+z.1p).18("2W",8(e){6(1k===12)15 14;e.1N();e.2a();6(3f!=1g){6(1W){$(1a).1s(z.19);6(u.1z===12){1a.3U[0].2M=12}}}});$("#"+j+" 11."+z.1p).18("2r",8(e){6(1k===12)15 14;$(1a).1s(z.2Y)});$("#"+j+" 11."+z.1p).18("2J",8(e){6(1k===12)15 14;$("#"+j+" 11."+z.2Y).1E(z.2Y)});$("#"+j+" 11."+z.1p).18("2v",8(e){6(1k===12)15 14;e.1N();e.2a();6(u.1z===12){2c=14};4 a=$("#"+j+" 11."+z.19).1c;2F=(35.1c!=a||a==0)?12:14;2R();3a();3O();3f=1g});6(u.4v==14){$("#"+j+" 11."+A.11).18("1R",8(e){6(1k===12)15 14;2t(1a,"1R")});$("#"+j+" 11."+A.11).18("2W",8(e){6(1k===12)15 14;2t(1a,"2W")});$("#"+j+" 11."+A.11).18("2r",8(e){6(1k===12)15 14;2t(1a,"2r")});$("#"+j+" 11."+A.11).18("2J",8(e){6(1k===12)15 14;2t(1a,"2J")});$("#"+j+" 11."+A.11).18("2u",8(e){6(1k===12)15 14;2t(1a,"2u")});$("#"+j+" 11."+A.11).18("2v",8(e){6(1k===12)15 14;2t(1a,"2v")})}};4 X=8(){4 a=L("1l");$("#"+a).1v("1R");$("#"+a+" 11."+z.1p).1v("2W");$("#"+a+" 11."+z.1p).1v("1R");$("#"+a+" 11."+z.1p).1v("2r");$("#"+a+" 11."+z.1p).1v("2J");$("#"+a+" 11."+z.1p).1v("2u");$("#"+a+" 11."+z.1p).1v("2v")};4 Y=8(a,b,c){$("#"+a).1v(b,c);$("#"+a).3Z(b);$("#"+a).18(b,c)};4 Z=8(){4 a=L("1P");4 b=L("2b");4 c=L("1l");$("#"+a).18(u.2P,8(e){6(1k===12)15 14;1M("1R");e.1N();e.2a();3I(e)});$("#"+a).18("2A",8(e){4 k=e.5w;6(!2X&&(k==4c||k==4g||k==C||k==4C||k==4d||(k>=3h&&!B))){3I(e);6(k>=3h){44()}1d{e.1N();e.5x()}}});$("#"+a).18("34",45);$("#"+a).18("2K",46);$("#"+b).18("2K",8(e){Y(a,"34",45)});W();$("#"+a).18("4t",4J);$("#"+a).18("4r",4K);$("#"+a).18("2W",4L);$("#"+a).18("5B",4M);$("#"+a).18("2u",4N);$("#"+a).18("2v",4O)};4 45=8(e){1M("34")};4 46=8(e){1M("2K")};4 3t=8(){4 a=L("1P");4 b=L("1l");6(B===12&&u.1z===14){$("#"+a+" ."+z.2T).33();$("#"+b).1m({1X:\'3L\',2h:\'5c\'})}1d{6(u.1z===14){1W=14};$("#"+a+" ."+z.2T).2l();$("#"+b).1m({1X:\'2o\',2h:\'3A\'});4 c=$("#"+b+" 11."+z.19)[0];$("#"+b+" 11."+z.19).1E(z.19);4 d=I($(c).1s(z.19));2g(d)};V(V())};4 4b=8(){4 a=L("1P");4 b=(1k==12)?u.3m:1;6(1k===12){$("#"+a).1s(z.3q)}1d{$("#"+a).1E(z.3q)}};4 4S=8(){4 a=L("2b");$("#"+a).18("2L",4T);3t();4b()};4 4V=8(){4 a=Q();4 b=R();a.1q(b);4 c=S();a.1q(c);4 d=U();a.1q(d);$("#"+9).5h(a);P();4S();Z();4 e=L("1l");6(u.28!=\'\'){$("#"+e).28(u.28)};6(u.29!=\'\'){$("#"+e).29(u.29)};6(1A u.18.3w=="8"){u.18.3w.1V(x,1y)}};4 4W=8(a){4 b=L("1l");4 c=a||$("#"+b+" 11."+z.19);22(4 i=0;i<c.1c;i++){4 d=I(c[i]);H(9).1I[d].19="19"};2g(c)};4 2R=8(){4 a=L("1l");4 b=$("#"+a+" 11."+z.19);6(1W&&(D||2c)||2F){H(9).1n=-1};4 c;6(b.1c==0){c=-1}1d 6(b.1c>1){4W(b)}1d{c=I($("#"+a+" 11."+z.19))};6((H(9).1n!=c||2F)&&b.1c<=1){2F=14;4 e=3e("32");H(9).1n=c;2g(c);6(1A u.18.32=="8"){4 d=2j();u.18.32(d.1b,d.1K)};$("#"+9).3Z("32")}};4 2g=8(a,b){6(a!==1B){4 c,1f,2k;6(a==-1){c=-1;1f="";2k="";2x(-1)}1d{6(1A a!="5S"){4 d=H(9).1I[a];H(9).1n=a;c=a;1f=N(d);2k=(a>=0)?H(9).1I[a].1o:"";2x(1B,1f);1f=1f.1f}1d{c=(b&&b.1w)||H(9).1n;1f=(b&&b.1f)||H(9).1f;2k=(b&&b.1o)||H(9).1I[H(9).1n].1o||"";2x(c)}};1t("1n",c);1t("1f",1f);1t("2k",2k);1t("1U",H(9).1U);1t("4X",2j());1t("4Z",$("#"+9+" 1T:19"))}};4 3e=8(a){4 b={2B:14,2D:14,2e:14};4 c=$("#"+9);2G{6(c.1Z("18"+a)!==1g){b.2e=12;b.2B=12}}2z(e){}4 d;6(1A $.53=="8"){d=$.53(c[0],"4l")}1d{d=c.1b("4l")};6(d&&d[a]){b.2e=12;b.2D=12};15 b};4 3O=8(){3a();$("54").18("1R",2n);$(30).18("2A",4m);$(30).18("2L",4n)};4 3a=8(){$("54").1v("1R",2n);$(30).1v("2A",4m);$(30).1v("2L",4n)};4 4T=8(){4 a=L("1l");4 b=L("2b");4 c=H(b).1f;6(c.1c==0){$("#"+a+" 11:2s").2l();V(V())}1d{$("#"+a+" 11").33();4 d=$("#"+a+" 11:4B(\'"+c+"\')").2l();6($("#"+a+" 11:1Q").1c<=u.26){V(-1)};6(d.1c>0&&!B||!1W){$("#"+a+" ."+z.19).1E(z.19);$(d[0]).1s(z.19)}}};4 44=8(){4 a=L("1P");4 b=L("2b");6($("#"+b+":2s").1c>0&&2c==14){$("#"+b+":2s").2l().61("");Y(a,"2K",46);H(b).34()}};4 57=8(){4 a=L("2b");6($("#"+a+":1Q").1c>0){$("#"+a+":1Q").33();H(a).2K()}};4 4m=8(a){4 b=L("2b");4 c=L("1l");25(a.4o){1i C:1i 4d:a.1N();a.2a();59();1j;1i 4g:1i 4C:a.1N();a.2a();5a();1j;1i 4I:1i 4c:a.1N();a.2a();2n();4 d=$("#"+c+" 11."+z.19).1c;2F=(35.1c!=d||d==0)?12:14;2R();3a();3f=1g;1j;1i 4a:D=12;1j;1i 49:2c=12;1j;2y:6(a.4o>=3h&&B===14){44()};1j};6(1k===12)15 14;1M("2A")};4 4n=8(a){25(a.4o){1i 4a:D=14;1j;1i 49:2c=14;1j};6(1k===12)15 14;1M("2L")};4 4J=8(a){6(1k===12)15 14;1M("4t")};4 4K=8(a){6(1k===12)15 14;1M("4r")};4 4L=8(a){6(1k===12)15 14;a.1N();1M("2r")};4 4M=8(a){6(1k===12)15 14;a.1N();1M("2J")};4 4N=8(a){6(1k===12)15 14;1M("2u")};4 4O=8(a){6(1k===12)15 14;1M("2v")};4 3C=8(a,b){4 c={2B:14,2D:14,2e:14};6($(a).1Z("18"+b)!=1B){c.2e=12;c.2B=12};4 d=$(a).1b("4l");6(d&&d[b]){c.2e=12;c.2D=12};15 c};4 2t=8(a,b){6(u.4v==14){4 c=H(9).1I[I(a)];6(3C(c,b).2e===12){6(3C(c,b).2B===12){c["18"+b]()};6(3C(c,b).2D===12){25(b){1i"2A":1i"2L":1j;2y:$(c).3Z(b);1j}};15 14}}};4 1M=8(a){6(1A u.18[a]=="8"){u.18[a].1V(1a,1y)};6(3e(a).2e===12){6(3e(a).2B===12){H(9)["18"+a]()}1d 6(3e(a).2D===12){25(a){1i"2A":1i"2L":1j;2y:$("#"+9).66(a);1j}};15 14}};4 3v=8(a){4 b=L("1l");a=(a!==1B)?a:$("#"+b+" 11."+z.19);6(a.1c>0){4 c=2w(($(a).2h().24));4 d=2w($("#"+b).1u());6(c>d){4 e=c+$("#"+b).2Z()-(d/2);$("#"+b).5d({2Z:e},5e)}}};4 59=8(){4 b=L("1l");4 c=$("#"+b+" 11:1Q."+A.11);4 d=$("#"+b+" 11:1Q."+z.19);d=(d.1c==0)?c[0]:d;4 e=$("#"+b+" 11:1Q."+A.11).1w(d);6((e<c.1c-1)){e=4s(e);6(e<c.1c){6(!D||!B||!1W){$("#"+b+" ."+z.19).1E(z.19)};$(c[e]).1s(z.19);2x(e);6(B==12){2R()};3v($(c[e]))};6(!B){3i()}};8 4s(a){a=a+1;6(a>c.1c){15 a};6($(c[a]).3F(z.1p)===12){15 a};15 a=4s(a)}};4 5a=8(){4 b=L("1l");4 c=$("#"+b+" 11:1Q."+z.19);4 d=$("#"+b+" 11:1Q."+A.11);4 e=$("#"+b+" 11:1Q."+A.11).1w(c[0]);6(e>=0){e=4u(e);6(e>=0){6(!D||!B||!1W){$("#"+b+" ."+z.19).1E(z.19)};$(d[e]).1s(z.19);2x(e);6(B==12){2R()};6(2w(($(d[e]).2h().24+$(d[e]).1u()))<=0){4 f=($("#"+b).2Z()-$("#"+b).1u())-$(d[e]).1u();$("#"+b).5d({2Z:f},5e)}};6(!B){3i()}};8 4u(a){a=a-1;6(a<0){15 a};6($(d[a]).3F(z.1p)===12){15 a};15 a=4u(a)}};4 3i=8(){4 a=L("1P");4 b=L("1l");4 c=$("#"+a).5g();4 d=$("#"+a).1u();4 e=$(48).1u();4 f=$(48).2Z();4 g=$("#"+b).1u();4 h=$("#"+a).1u();6((e+f)<3M.6f(g+d+c.24)||u.3g.2p()==\'6g\'){h=g;$("#"+b).1m({24:"-"+h+"2E",1X:\'3L\',1J:u.1J});$("#"+a).1E("2I 2q").1s("3n");4 h=$("#"+b).5g().24;6(h<-10){$("#"+b).1m({24:(2w($("#"+b).1m("24"))-h+20+f)+"2E",1J:u.1J});$("#"+a).1E("3n 2q").1s("2I")}}1d{$("#"+b).1m({24:h+"2E",1J:u.1J});$("#"+a).1E("2I 3n").1s("2q")};6(5b){6(F()<=7){$(\'2H.5j\').1m("1J",u.1J-10);$("#"+a).1m("1J",u.1J+5)}}};4 3I=8(e){6(1k===12)15 14;4 a=L("1P");4 b=L("1l");6(!2X){2X=12;6(1H.3x!=\'\'){$("#"+1H.3x).1m({1X:"2o"})};1H.3x=b;$("#"+b+" 11:2s").2l();3i();4 c=u.3J;6(c==""||c=="2o"){$("#"+b).1m({1X:"3L"});3v();6(1A u.18.2N=="8"){4 d=2j();u.18.2N(d.1b,d.1K)}}1d{$("#"+b)[c]("6i",8(){3v();6(1A u.18.2N=="8"){4 d=2j();u.18.2N(d.1b,d.1K)}})};3O()}1d{6(u.2P!==\'2r\'){2n()}}};4 2n=8(e){2X=14;4 a=L("1P");4 b=L("1l");6(B===14||u.1z===12){$("#"+b).1m({1X:"2o"});$("#"+a).1E("2q 3n").1s("2I")};3a();6(1A u.18.3E=="8"){4 d=2j();u.18.3E(d.1b,d.1K)};57();V(V());$("#"+b).1m({1J:1});2x(H(9).1n)};4 5o=8(){2G{3b=$.2S(12,{},H(9));22(4 i 3N 3b){6(1A 3b[i]!="8"){x[i]=3b[i]}}}2z(e){};x.2k=(H(9).1n>=0)?H(9).1I[H(9).1n].1o:"";x.4e=1H.4e.2O;x.3Y=1H.3Y};4 4w=8(a){6(a!=1g&&1A a!="1B"){4 b=L("1l");4 c=N(a);4 d=$("#"+b+" 11."+A.11+":4x("+(a.1w)+")");15{1b:c,1K:d,1T:a,1w:a.1w}};15 1g};4 2j=8(){4 a=L("1l");4 b=H(9);4 c,1K,1T,1w;6(b.1n==-1){c=1g;1K=1g;1T=1g;1w=-1}1d{1K=$("#"+a+" 11."+z.19);6(1K.1c>1){4 d=[],4y=[],6m=[];22(4 i=0;i<1K.1c;i++){4 e=I(1K[i]);d.5i(e);4y.5i(b.1I[e])};c=d;1T=4y;1w=d}1d{1T=b.1I[b.1n];c=N(1T);1w=b.1n}};15{1b:c,1K:1K,1w:1w,1T:1T}};4 2x=8(a,b){4 c=L("4p");4 d={};6(a==-1){d.1o="&6n;";d.1e="";d.1h="";d.1C=""}1d 6(1A a!="1B"){4 e=H(9).1I[a];d=N(e)}1d{d=b};$("#"+c).3Q("."+z.36).4z(d.1o);H(c).1e=z.3P+" "+d.1e;6(d.1h!=""){$("#"+c).3Q("."+z.1h).4z(d.1h).2l()}1d{$("#"+c).3Q("."+z.1h).4z("").33()};4 f=$("#"+c).3Q("3z");6(f.1c>0){$(f).1G()};6(d.1C!=""&&u.3c){f=O("3z",{3V:d.1C});$("#"+c).29(f);6(d.1x!=""){f.1e=d.1x+" "};6(d.1h==""){f.1e=f.1e+A.3u}}};4 1t=8(p,v){x[p]=v};4 4A=8(a,b,i){4 c=L("1l");4 d=14;25(a){1i"21":4 e=T(b||H(9).1I[i]);4 f;6(1y.1c==3){f=i}1d{f=$("#"+c+" 11."+A.11).1c-1};6(f<0||!f){$("#"+c+" 3T").28(e)}1d{4 g=$("#"+c+" 11."+A.11)[f];$(g).6r(e)};X();W();6(u.18.21!=1g){u.18.21.1V(1a,1y)};1j;1i"1G":d=$($("#"+c+" 11."+A.11)[i]).3F(z.19);$("#"+c+" 11."+A.11+":4x("+i+")").1G();4 h=$("#"+c+" 11."+z.1p);6(d==12){6(h.1c>0){$(h[0]).1s(z.19);4 j=$("#"+c+" 11."+A.11).1w(h[0]);2g(j)}};6(h.1c==0){2g(-1)};6($("#"+c+" 11."+A.11).1c<u.26&&!B){V(-1)};6(u.18.1G!=1g){u.18.1G.1V(1a,1y)};1j}};1a.6s=8(){4 a=1y[0];6t.6u.6v.6w(1y);25(a){1i"21":x.21.1V(1a,1y);1j;1i"1G":x.1G.1V(1a,1y);1j;2y:2G{H(9)[a].1V(H(9),1y)}2z(e){};1j}};1a.21=8(){4 a,1f,1r,1C,1h;4 b=1y[0];6(1A b=="6x"){a=b;1f=a;2m=3R 42(a,1f)}1d{a=b.1o||\'\';1f=b.1f||a;1r=b.1r||\'\';1C=b.1C||\'\';1h=b.1h||\'\';2m=3R 42(a,1f);$(2m).1b("1h",1h);$(2m).1b("1C",1C);$(2m).1b("1r",1r)};1y[0]=2m;H(9).21.1V(H(9),1y);1t("1U",H(9)["1U"]);1t("1c",H(9).1c);4A("21",2m,1y[1])};1a.1G=8(i){H(9).1G(i);1t("1U",H(9)["1U"]);1t("1c",H(9).1c);4A("1G",1B,i)};1a.5l=8(a,b){6(1A a=="1B"||1A b=="1B")15 14;a=a.6A();2G{1t(a,b)}2z(e){};25(a){1i"2d":H(9)[a]=b;6(b==0){H(9).1O=14};B=(H(9).2d>1||H(9).1O==12)?12:14;3t();1j;1i"1O":H(9)[a]=b;B=(H(9).2d>1||H(9).1O==12)?12:14;1W=H(9).1O;3t();1t(a,b);1j;1i"2C":H(9)[a]=b;1k=b;4b();1j;1i"1n":1i"1f":H(9)[a]=b;4 c=L("1l");$("#"+c+" 11."+A.11).1E(z.19);$($("#"+c+" 11."+A.11)[H(9).1n]).1s(z.19);2g(H(9).1n);1j;1i"1c":4 c=L("1l");6(b<H(9).1c){H(9)[a]=b;6(b==0){$("#"+c+" 11."+A.11).1G();2g(-1)}1d{$("#"+c+" 11."+A.11+":6B("+(b-1)+")").1G();6($("#"+c+" 11."+z.19).1c==0){$("#"+c+" 11."+z.1p+":4x(0)").1s(z.19)}};1t(a,b);1t("1U",H(9)["1U"])};1j;1i"1F":1j;2y:2G{H(9)[a]=b;1t(a,b)}2z(e){};1j}};1a.6C=8(a){15 x[a]||H(9)[a]};1a.1Q=8(a){4 b=L("1P");6(a===12){$("#"+b).2l()}1d 6(a===14){$("#"+b).33()}1d{15($("#"+b).1m("1X")=="2o")?14:12}};1a.41=8(v){1H.41(v)};1a.3E=8(){2n()};1a.2N=8(){3I()};1a.5m=8(r){6(1A r=="1B"||r==0){15 14};u.26=r;V(V())};1a.26=1a.5m;1a.18=8(a,b){$("#"+9).18(a,b)};1a.1v=8(a,b){$("#"+9).1v(a,b)};1a.6F=1a.18;1a.6G=8(){15 2j()};1a.5n=8(){4 a=H(9).5n.1V(H(9),1y);15 4w(a)};1a.4R=8(){4 a=H(9).4R.1V(H(9),1y);15 4w(a)};1a.6J=8(a){1a.5l("1f",a)};1a.6K=8(){4 a=L("4q");4 b=L("1P");$("#"+b+", #"+b+" *").1v();H(9).2U=H(b).2U;$("#"+b).1G();$("#"+9).6L().6M($("#"+9));$("#"+9).1b("1Y",1g)};K()};$.1S.2S({3r:8(b){15 1a.6N(8(){6(!$(1a).1b(\'1Y\')){4 a=3R 1Y(1a,b);$(1a).1b(\'1Y\',a)}})}});$.1S.2O=$.1S.3r})(5G);',62,423,"||||var||if||function|_element||||||||||||||||||||||||||||||||||||||||||||||||||||||li|true||false|return|||on|selected|this|data|length|else|className|value|null|description|case|break|_isDisabled|postChildID|css|selectedIndex|text|enabled|appendChild|title|addClass|cw|height|off|index|imagecss|arguments|enableCheckbox|typeof|undefined|image|style|removeClass|id|remove|msBeautify|options|zIndex|ui|byJson|cl|preventDefault|multiple|postID|visible|click|fn|option|children|apply|_isMultiple|display|dd|prop||add|for|useSprite|top|switch|visibleRows||append|prepend|stopPropagation|postTitleTextID|_controlHolded|size|hasEvent|span|bU|position|jsonTitle|cu|selectedText|show|opt|cr|none|toLowerCase|borderRadiusTp|mouseover|hidden|ck|mousedown|mouseup|parseInt|cv|default|catch|keydown|byElement|disabled|byJQuery|px|_forcedTrigger|try|div|borderRadius|mouseout|blur|keyup|checked|open|msDropdown|event|ddOutOfVision|bT|extend|ddTitle|tabIndex|_ua|mouseenter|_isOpen|hover|scrollTop|document|input|change|hide|focus|_oldSelected|label||||bX|_orginial|showIcon|width|bV|_lastTarget|openDirection|ALPHABETS_START|cp|counter|rowHeight|optgroup|disabledOpacity|borderRadiusBtm|childWidth|expr|disabledAll|msDropDown|checkboxNameSuffix|bO|fnone|cm|create|oldDiv|name|img|absolute|_cacheElement|cj|mainCSS|close|hasClass|auto|indexOf|cq|animStyle|toUpperCase|block|Math|in|bW|ddTitleText|find|new|nodeName|ul|childNodes|src|selectedClass|overflow|author|trigger||debug|Option|dropdown|bZ|bM|bN||window|CONTROL|SHIFT|bP|ENTER|RIGHT_ARROW|version|first|UP_ARROW|optgroupTitle|divider|ddChild|arrow|events|cb|cc|keyCode|postTitleID|postElementHolder|mousemove|getNext|dblclick|getPrev|disabledOptionEvents|ct|eq|op|html|cx|Contains|LEFT_ARROW|usesprite|childwidth|select|createPseudo|borderTop|ESCAPE|cd|ce|cf|cg|ch|ci|noBorderTop|type|item|bQ|bY|checkbox|bR|bS|uiData|ddChildMore|selectedOptions|shadow|eval|padding|_data|body|visibility|cssText|ca|0px|cn|co|_isIE|relative|animate|500|target|offset|after|push|ddcommon|showicon|set|showRows|namedItem|cs|test|enablecheckbox|createElement|checkboxnamesuffix|innerHTML|slideDown|getElementById|which|stopImmediatePropagation|_msddli_|appendTo|_mscheck|mouseleave|_msddHolder|border|outerWidth|msdropdown|jQuery|_msdd|9999|_title|120|_isCreated|_titleText|bind|_child|attr|autocomplete|navigator|object|inArray|userAgent|setAttribute|ddlabel|clear|match|ddchild_|msie|val|MSIE|throw|There|is|triggerHandler|bottom|an|error|250|substring|round|msdrpdd|Boolean|floor|alwaysup|unbind|fast|Suleman|maincss|visiblerows|ind|nbsp|min|max|arrowoff|before|act|Array|prototype|shift|call|string|toggleClass|animstyle|toString|gt|get|opendirection|jsontitle|addMyEvent|getData|disabledopacity|Marghoob|setIndexByValue|destroy|parent|replaceWith|each|json".split("|"),0,{})),function(){window.Paloma={callbacks:{},filterScopes:{},locals:{},variableContainer:{}};
var e={},t=["BEFORE","AFTER","AROUND"],o={};e.BEFORE=0,e.AFTER=1,e.AROUND=2,o.ALL=3,o.ONLY=4,o.EXCEPT=5,Paloma.inheritLocals=function(e){var t=Paloma.locals[e.from],o=Paloma.locals[e.to];for(var i in t)o.hasOwnProperty(i)||(o[i]=t[i])},Paloma.FilterScope=function(o){this.name=o,this.filters={},this.skippers={};for(var i=0,n=t.length;n>i;i++){var s=t[i].toUpperCase();this.filters[e[s]]=[],this.skippers[e[s]]=[]}Paloma.filterScopes[o]=this},Paloma.FilterScope.prototype.as=function(e){return new Paloma.Filter(this,e)},function(){for(var o=0,i=t.length;i>o;o++){var n=t[o],s="skip_"+n.toLowerCase()+"_filter",a=s+"s",r=function(t){return function(){return new Paloma.Skipper(this,e[t],arguments)}};Paloma.FilterScope.prototype[s]=new r(n),Paloma.FilterScope.prototype[a]=Paloma.FilterScope.prototype[s]}}(),Paloma.Skipper=function(e,t,i){this.scope=e,this.type=t,this.filters=Array.prototype.slice.call(i),this.inclusionType=o.ALL,this.actions=[],this.scope.skippers[this.type].push(this)},Paloma.Skipper.prototype.skip=function(e,t){if(-1==this.filters.indexOf(e.name))return!1;var i=-1!=this.actions.indexOf(t),n=this.inclusionType==o.ALL,s=this.inclusionType==o.ONLY&&i,a=this.inclusionType==o.EXCEPT&&!i;return n||s||a},Paloma.Skipper.prototype.only=function(){this.inclusionType=o.ONLY,this.actions=Array.prototype.slice.call(arguments)},Paloma.Skipper.prototype.except=function(){this.inclusionType=o.EXCEPT,this.actions=Array.prototype.slice.call(arguments)},Paloma.Filter=function(e,t){this.scope=e,this.name=t,this.type=void 0,this.inclusionType=o.ONLY,this.actions=[],this.method=void 0},function(){for(var i=function(e){return function(){return this.setProperties(e,o.ONLY,arguments)}},n=function(e){return function(){return this.setProperties(e,o.ALL,[])}},s=function(e){return function(){return this.setProperties(e,o.EXCEPT,arguments)}},a=0,r=t.length;r>a;a++){var l=t[a].toLowerCase(),c=e[l.toUpperCase()];Paloma.Filter.prototype[l]=new i(c),Paloma.Filter.prototype[l+"_all"]=new n(c),Paloma.Filter.prototype["except_"+l]=new s(c)}}(),Paloma.Filter.prototype.perform=function(e){return this.method=e,this.scope.filters[this.type].push(this),this},Paloma.Filter.prototype.isApplicable=function(e){var t=-1!=this.actions.indexOf(e),i=this.inclusionType==o.ALL,n=this.inclusionType==o.ONLY&&t,s=this.inclusionType==o.EXCEPT&&!t;return i||n||s},Paloma.Filter.prototype.setProperties=function(e,t,o){return this.type=e,this.inclusionType=t,this.actions=Array.prototype.slice.call(o),this},Paloma.execute=function(t,o,s){var a=!0,r=Paloma.callbacks[t];a=void 0!=r,a&&(r=r[o],a=void 0!=r),s=s||{};var l=s.controller_path.split("/");s.controller=l.pop(),s.namespace=l.join("/");var c=t.split("/");s.callback_controller=c.pop(),s.callback_namespace=c.join("/"),s.callback_controller_path=t,s.callback_action=o;var d=i(e.BEFORE,s.callback_namespace,t,o),u=i(e.AFTER,s.callback_namespace,t,o);n(d,s),a&&r(s),n(u,s),Paloma.variableContainer=[]};var i=function(t,o,i,n){for(var s=[],a=[],r=[],l=[Paloma.filterScopes["/"],Paloma.filterScopes[o],Paloma.filterScopes[i]],c=0,d=l.length;d>c;c++){var u=l[c];if(void 0!=u){var h=u.filters[t],m=u.filters[e.AROUND];void 0!=h&&(s=s.concat(h)),void 0!=m&&(s=s.concat(m)),r=r.concat(u.skippers[t],u.skippers[e.AROUND])}}for(var c=0,d=s.length;d>c;c++){for(var p=s[c],f=p.isApplicable(n),g=!0,b=0,v=r.length;v>b;b++)if(r[b].skip(p,n)){g=!1;break}f&&g&&a.push(p)}return a},n=function(e,t){for(var o=0,i=e.length;i>o;o++)e[o].method(t)}}(),function(){var e=Paloma.locals["/"]={};e.importEmailsFromLocalFile=function(e,t){function o(){if(t){var e=s.select2("data"),o=e.indexOf(u);o>-1&&e.splice(o,1),s.select2("data",e)}else s.val("");""!=$("#import-emails-result").html()?$(".create-button input").attr("disabled",!1):$(".create-button input").attr("disabled",!0)}function i(e){if(1>r)alert("Please select a correct file.");else if(1>m)o();else if(!e){var i="import|";if(i+=m+"|",i+=p+"|",i+=f+"|",i+=g+"|",i+=l+"|",i+=c+"|",i+=d+"|",t){var n=[{id:i,text:d+" ("+r+")"}];u=n[0];var a=s.select2("data").concat(n);s.select2("data",a)}else s.val(i);$(".create-button input").attr("disabled",!1)}}function n(){var e=-1;$("#import-emails-result table th > select").each(function(){"email"==$(this).val()&&(e=parseInt($(this).data("index")))}),$("#assign_field_note").html("Checking your email column..."),$(".create-button input").attr("disabled",!0);var t=e-1;if(t>-1){var o=0;return $.each(fileContent.content,function(e,i){a.test(i[t])||o++}),5>o?($("#assign_field_note").hide(),$(".create-button input").attr("disabled",!1),!0):($("#assign_field_note").html("Please check the email column.").show(),$(".create-button input").attr("disabled",!0),!1)}return $(".create-button input").attr("disabled",!0),!1}var s=$(e);fileContent=null;var a=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);$("#import-emails-button").on("click",function(){$("#import-emails-file").trigger("click")}),$("#import-social-select").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});var r=0,l="",c="",d="",u={},h=!1;$("#import-emails-file").fileupload({dataType:"json",add:function(e,t){o(),$("#import-emails-result").html(""),$("#import-emails-progress .bar").css("width","0%");var i=t.originalFiles[0];$("#import-emails-filename").html(i.name),d=i.name,t.submit()},progressall:function(e,t){var o=parseInt(t.loaded/t.total*100,10);$("#import-emails-progress .bar").css("width",o+"%")},done:function(e,t){if(r=t.result.total,l=t.result.basename,c=t.result.extname,r&&t.result.content.length){var o=$('<table class="results" />'),n=t.result.content;if(fileContent=t.result,n.length){for(var s=$("<tr />"),a=0;a<n[0].length;a++){var d=$("<th />"),u=$('<select data-index="'+(a+1)+'" />'),m=$("<option />");m.html("-- Ignore --"),m.val("null"),m.appendTo(u),m.val("null");var m=$("<option />");m.html("Email"),m.val("email"),m.appendTo(u);var m=$("<option />");m.html("First Name"),m.val("firstname"),m.appendTo(u);var m=$("<option />");m.html("Last Name"),m.val("lastname"),m.appendTo(u),u.appendTo(d),d.appendTo(s)}s.appendTo(o),$.each(t.result.content,function(e,t){var i=$("<tr />");0===e&&i.addClass("first-tr"),$.each(t,function(t,o){if(0===e){var n=/email|firstname|lastname/i;n.test(o)&&(h=!0)}var s=$("<td />");s.html(o),s.appendTo(i)}),i.appendTo(o)})}o.appendTo("#import-emails-result"),h&&$(".first-tr").hide(),$("#import-emails-final").show(),h?$("#import-emails-ifheader").prop("checked",!0):$("#import-emails-ifheader").prop("checked",!1),i(!0),$(".create-button input").attr("disabled",!0),$("#assign_field_note").show()}else{var p="The file you upload is not correct, please select again! ";p+=t.result.error_message,$("#import-emails-result").html(p)}}});var m=1,p=2,f=3;$(document).on("change","#import-emails-result th > select",function(){o(),"email"==$("option:selected",this).val()&&$("#import-emails-result select option:selected[value=email]").parent("select").not(this).val("null"),"firstname"==$("option:selected",this).val()&&$("#import-emails-result select option:selected[value=firstname]").parent("select").not(this).val("null"),"lastname"==$("option:selected",this).val()&&$("#import-emails-result select option:selected[value=lastname]").parent("select").not(this).val("null"),m=0,p=0,f=0,$("#import-emails-result th > select").each(function(e){"email"==$("option:selected",this).val()&&(m=e+1),"firstname"==$("option:selected",this).val()&&(p=e+1),"lastname"==$("option:selected",this).val()&&(f=e+1)}),i();var e=n();e?($(".create-button input").attr("disabled",!1),$("#assign_field_note").hide()):($(".create-button input").attr("disabled",!0),$("#assign_field_note").html("Please Assign A Field For Each Column").show(),e||$("#assign_field_note").html("Please check the email column.").show())});var g=h?1:0;$(document).on("click","#import-emails-ifheader",function(){o(),this.checked?($("#import-emails-result .first-tr").hide(),g=0):(g=1,$("#import-emails-result .first-tr").show()),i()}),$(document).off("click","#import-emails-confirm"),$(document).on("click","#import-emails-confirm",function(){o(),i()})}}(),function(){new Paloma.FilterScope("/"),Paloma.variableContainer}(),function(){Paloma.callbacks.calendar={};Paloma.locals.calendar={};Paloma.inheritLocals({from:"/",to:"calendar"})}(),function(){new Paloma.FilterScope("calendar"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.calendar}Paloma.callbacks.calendar.edit=function(){$("#calendar_event_start_time").datepicker({minDate:0,dateFormat:"MM d, yy"}),$("#calendar_event_end_time").datepicker({minDate:0,dateFormat:"MM d, yy"}),$(".create-button").find("input")[0].value="Update",$(".create-button").find("input").attr("data-disable-with","Updating...")}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.calendar}Paloma.callbacks.calendar.index=function(e){"modal_invite"==e.source&&$("#invite_link").click();{var t=new Date;t.getDate(),t.getMonth(),t.getFullYear()}$("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d, yyyy}",day:"dddd, MMM d, yyyy"},ignoreTimezone:!1,eventClick:function(t){$.ajax({type:"GET",url:"/communities/"+e.club_id+"/calendar_events/"+t.id+"/show_event_detail?top="+$(this).css("top")+"&left="+$(this).css("left")+"&height="+$(this).css("height")+"&width="+$(this).css("width")})},eventDrop:function(t){$.ajax({type:"GET",url:"/communities/"+e.club_id+"/calendar_events/"+t.id+"/drag_event?id="+t.id+"&start_time="+t.start+"&end_time="+t.end})},eventResize:function(t,o,i){$.ajax({type:"GET",url:"/communities/"+e.club_id+"/calendar_events/"+t.id+"/resize_event?id="+t.id+"&start_time="+t.start+"&end_time="+t.end+"&dayDelta="+o+"&minuteDelta="+i})}}),0!=$("#calendar").length&&($(".fc-button.fc-button-agendaDay.fc-state-default.fc-corner-right")[0].innerHTML="list",$(".fc-button.fc-button-agendaDay.fc-state-default.fc-corner-right").click(),$(".fc-button.fc-button-month.fc-state-default.fc-corner-left").click(),$(".fc-view.fc-view-agendaDay.fc-agenda")[0].innerHTML="<ul class='fc-calendar-list'></ul>");var o=$("#calendar").fullCalendar("getView");$.ajax({type:"GET",url:"/communities/"+e.club_id+"/calendar_events/0/search?view_start="+o.visStart+"&view_end=view.visEnd"})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.calendar}Paloma.callbacks.calendar["new"]=function(){$("#calendar_event_start_time").datepicker({minDate:0,dateFormat:"MM d, yy"}),$("#calendar_event_end_time").datepicker({minDate:0,dateFormat:"MM d, yy"})}}(),function(){Paloma.callbacks.clubs={};Paloma.locals.clubs={};Paloma.inheritLocals({from:"/",to:"clubs"})}(),function(){new Paloma.FilterScope("clubs"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.clubs}Paloma.callbacks.clubs.about=function(e){"modal_invite"==e.source&&$("#invite_link").click(),$(document).on("click",".edit-overview-link",function(e){$(".club-overview-form").removeClass("close"),$(".club-overview-display").addClass("close"),$(".club-overview-textarea").autoGrow(),e.preventDefault()}),$(document).on("click",".edit-description-link",function(e){$(".club-description-form").removeClass("close"),$(".club-description-display").addClass("close"),$(".club-description-textarea").autoGrow(),e.preventDefault()}),$(document).on("click",".edit-contacts-link",function(e){return $(".club-contacts-form").show(),$(".club-contacts-display").hide(),e.preventDefault(),!1}),$("#club_overview").keyup(function(){var e=200,t=$(this).val(),o=t.length;if(o>e){var i=t.substr(0,e+1);$(".club-overview-error-message").html("Please enter fewer than 200 characters."),$(".club-overview-error-box").removeClass("close"),$(this).val(i)}else 1>o?($(".club-overview-error-message").html("Please provide a brief description of your community."),$(".club-overview-error-box").removeClass("close")):($(".club-overview-error-box").addClass("close"),$(".club-overview-error-message").html(""))})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.clubs}Paloma.callbacks.clubs.add_credit_card=function(){function e(){$("#credit_card_expiration_month").val().length>0&&$("#credit_card_expiration_year").val().length>0?$(".expiration").addClass("valid").removeClass("errors"):$(".expiration").removeClass("valid")}$("#credit_card_expiration_month").customSelect(),$("#credit_card_expiration_year").customSelect(),$("#credit_card_raw_card_number").keyup(function(){var e=GetCreditCardTypeByNumber($("#credit_card_raw_card_number").val());"?"==e?$(this).parents(".card-number").removeClass("valid"):$(this).parents(".card-number").addClass("valid").removeClass("errors")}),$("#credit_card_raw_card_verification_code").keyup(function(){$("#credit_card_raw_card_verification_code").val().length>=3?$(this).parents(".secrity-code").addClass("valid").removeClass("errors"):$(this).parents(".secrity-code").removeClass("valid")}),$("#credit_card_expiration_month").change(function(){e()}),$("#credit_card_expiration_year").change(function(){e()}),$(".check-existence-errors").keyup(function(){$(this).val().length>0&&$(this).parents("li").removeClass("errors")})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.clubs}Paloma.callbacks.clubs.bulletin=function(e){function t(e,t,o){e.preventDefault(),t.addClass("onactive"),t.siblings().removeClass("onactive"),$("#kudo_badge").val(o)}$(function(){$("#comment-btu").click(function(){$("#comment-btu").addClass("onactive"),$("#file-btu,#kudos-btu,#poll-btu").removeClass("onactive"),$("#addfile,#givekudos,#poll").addClass("close"),$("#comment").removeClass("close")}),$("#file-btu").click(function(){$("#file-btu").addClass("onactive"),$("#comment-btu,#kudos-btu,#poll-btu").removeClass("onactive"),$("#comment,#givekudos,#poll").addClass("close"),$("#addfile").removeClass("close"),jQuery.browser.msie&&"onactive"==$("#file-btu")[0].className&&($("#addfile-box").css("display","none"),$("#content_object_shared_file").css("display",""))}),$("#kudos-btu").click(function(){$("#kudos-btu").addClass("onactive"),$("#comment-btu,#file-btu,#poll-btu").removeClass("onactive"),$("#comment,#addfile,#poll").addClass("close"),$("#givekudos").removeClass("close")}),$("#poll-btu").click(function(){$("#poll-btu").addClass("onactive"),$("#comment-btu,#kudos-btu,#file-btu").removeClass("onactive"),$("#comment,#givekudos,#addfile").addClass("close"),$("#poll").removeClass("close")}),"modal_invite"==e.source&&$("#invite_link").click()}),$("#kudo-amazing").click(function(e){t(e,$("#kudo-amazing"),"amazing")}),$("#kudo-thebest").click(function(e){t(e,$("#kudo-thebest"),"thebest")}),$("#kudo-oodles").click(function(e){t(e,$("#kudo-oodles"),"oodles")}),$("#kudo-inspiring").click(function(e){t(e,$("#kudo-inspiring"),"inspiring")}),$("#kudo-blowing").click(function(e){t(e,$("#kudo-blowing"),"blowing")}),$("#addfile_button").click(function(){"File name"!=$("#shared-file-name-display").html()&&($("#addfile_form").css("display","none"),$("#loading-addfile").removeClass("close"))}),addInputFocusStyle(),$(document).on("click",".loadmore",function(){$(".loadmore").css("display","none"),$("#loading-next-page").removeClass("close")}),$(document).on("change",".post_receiver_club_profile_ids",function(){$(".post_receiver_club_profile_ids.select2-offscreen").val().length>0?$("#pin-post-section").css("display","none"):$("#pin-post-section").css("display","block")}),$(document).on("click",".mobile-reply-link",function(e){return $(".comment-form-"+$(this).attr("contentid")).siblings(".newpost-button").removeClass("close"),$(".comment-form-"+$(this).attr("contentid")).parents(".post-detail").removeClass("m-close"),$(".comment-form-"+$(this).attr("contentid")).autoGrow(),e.preventDefault(),!1}),$(document).on("click",".pin-to-top-link",function(e){"true"==$("#content_object_pinned").val()?($("#content_object_pinned").val(!1),$(".pin-to-top-link").children("i").attr("class","pinnedoff-icon"),$("#pin-post-section").css("width","30%"),$(".pin-post-name-text-field").addClass("close")):($("#content_object_pinned").val(!0),$(".pin-to-top-link").children("i").attr("class","pinned-icon"),$("#pin-post-section").css("width","70%"),$(".pin-post-name-text-field").removeClass("close")),e.preventDefault()}),$(document).on("click","#view-more-filter-options-link",function(e){return $(".advanced-filter-options").removeClass("close"),$("#view-more-filter-options-link").parent().addClass("close"),$("#hide-filter-options-link").parent().removeClass("close"),e.preventDefault(),!1}),$(document).on("click","#hide-filter-options-link",function(e){return $(".advanced-filter-options").addClass("close"),$("#view-more-filter-options-link").parent().removeClass("close"),$("#hide-filter-options-link").parent().addClass("close"),e.preventDefault(),!1}),$(function(){$("#poll_close_date").datepicker({minDate:0,dateFormat:"MM d, yy"}),$("#kudo_receiver_club_profile_id").select2({placeholder:"Select who would you like to send Kudos to?",allowClear:!0,ajax:{url:"/communities/"+$("#community_username").html()+"/profiles.json",dataType:"json",data:function(e,t){return{query:e,page:t}},results:function(e){return{results:$.map(e.community_profiles,function(e){return{id:e.id,text:e.display_name}}),more:e.more}}}}),$(".receiver_club_profile_ids").select2({placeholder:"Share with everyone, or click to change",multiple:!0,allowClear:!0,closeOnSelect:!1,ajax:{url:"/communities/"+$("#community_username").html()+"/profiles.json",dataType:"json",data:function(e,t){return{query:e,page:t}},results:function(e){return{results:$.map(e.community_profiles,function(e){return{id:e.id,text:e.display_name}}),more:e.more}}}}),$(".post_receiver_club_profile_ids").select2({placeholder:"Share with everyone or click here to select private message recipients",multiple:!0,allowClear:!0,closeOnSelect:!1,ajax:{url:"/communities/"+$("#community_username").html()+"/profiles.json",dataType:"json",data:function(e,t){return{query:e,page:t}},results:function(e){return{results:$.map(e.community_profiles,function(e){return{id:e.id,text:e.display_name}}),more:e.more}}}}),$.ajax({url:"/content_threads/"+$("#content_thread_obfuscated_id").html()+"/content_objects/"+$("#community_username").html()+"/search"}),$.ajax({url:"/clubs/"+$("#community_username").html()+"/bulletin_partials"})})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.clubs}Paloma.callbacks.clubs["new"]=function(){$(document).on("click",".js-select-public",function(e){return $(".js-select-private").removeClass("onactive"),$(".js-select-public").addClass("onactive"),$("#club_view_permission").val("public"),e.preventDefault(),!1}),$(document).on("click",".js-select-private",function(e){return $(".js-select-public").removeClass("onactive"),$(".js-select-private").addClass("onactive"),$("#club_view_permission").val("private"),e.preventDefault(),!1})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.clubs}Paloma.callbacks.clubs.upgrade=function(e){function t(e,t,o,s,a,r,l){$(".js-choose-upgrade-button").html("<a href='javascript:void(0);'>CHOOSE PLAN</a>"),$(".js-choose-upgrade-button").removeClass("js-current-plan"),$.inArray(e,n)>=0&&("true"!=s||"true"==a)&&($(".js-"+e).find(".js-choose-upgrade-button").html("Current Plan"),$(".js-"+e).find(".js-choose-upgrade-button").addClass("js-current-plan")),$("#currently_in_trial").val("true"==s?"yes":"no"),t>0?$(".js-remaining-credit-section").removeClass("close"):$(".js-remaining-credit-section").addClass("close"),t=Math.round(100*t)/100,$("#remaining_credit").val(t),$("#js_next_due_date").val(o),$("#channel_username").val($("#club_username").val()),i($("#current_plan").val()),"monthly"==r?$(".js-display-monthly-rates").click():$(".js-display-annual-rates").click(),"true"==l?($(".js-choose-billing-cycle-price").addClass("close"),$(".js-billing-cycle-in-contract").removeClass("close")):($(".js-choose-billing-cycle-price").removeClass("close"),$(".js-billing-cycle-in-contract").addClass("close"))}function o(){$(".js-display-annual-rates").hasClass("onactive")?($(".js-monthly-price-display0").html("$"+Math.round(e.plan0_yearly_price/12)+"<span>/month</span>"),$(".js-monthly-price-display1").html("$"+Math.round(e.plan1_yearly_price/12)+"<span>/month</span>"),$(".js-monthly-price-display2").html("$"+Math.round(e.plan2_yearly_price/12)+"<span>/month</span>"),$(".js-monthly-price-display3").html("$"+Math.round(e.plan3_yearly_price/12)+"<span>/month</span>"),$(".js-monthly-price-display6").html("$"+Math.round(e.plan6_yearly_price/12)+"<span>/month</span>"),$("#billing_cycle").val("annual")):($(".js-monthly-price-display0").html("$"+Math.round(e.plan0_monthly_price)+"<span>/month</span>"),$(".js-monthly-price-display1").html("$"+Math.round(e.plan1_monthly_price)+"<span>/month</span>"),$(".js-monthly-price-display2").html("$"+Math.round(e.plan2_monthly_price)+"<span>/month</span>"),$(".js-monthly-price-display3").html("$"+Math.round(e.plan3_monthly_price)+"<span>/month</span>"),$(".js-monthly-price-display6").html("$"+Math.round(e.plan6_monthly_price)+"<span>/month</span>"),$("#billing_cycle").val("monthly"))}function i(t){$("#current_plan").val(t),current_plan=t,current_plan_name=e[t+"_name"],current_plan_code=e[t+"_code"],current_plan_monthly_price=e[t+"_monthly_price"],current_plan_yearly_price=e[t+"_yearly_price"],current_plan_conference_size=e[t+"_conference_size"],save_amount=12*current_plan_monthly_price-current_plan_yearly_price,$(".js-chosen-monthly-display").html("<span>Month-to-month</span> \xb7 $"+current_plan_monthly_price+"/month"),$(".js-chosen-annual-display").html("<span>Annual Plan</span> \xb7 $"+Math.round(current_plan_yearly_price)/12+"/month"),$(".js-annual-save-text").html("Save $"+save_amount+"!"),$(".js-chosen-plan-name").html("New Plan: "+current_plan_name),$("#billing_plan_type").val(current_plan_code),"monthly"==$("#billing_cycle").val()?($(".js-chosen-plan-price").html("$"+current_plan_monthly_price+"/month"),$(".js-chosen-plan-billing-cycle").html("Monthly"),$("#regular_price").val(current_plan_monthly_price),calculateTodayPrice()):(annual_monthly_price=Math.round(current_plan_yearly_price/12),$(".js-chosen-plan-price").html("$"+annual_monthly_price+"/month"),$(".js-chosen-plan-billing-cycle").html("1 year commitment"),$("#regular_price").val(annual_monthly_price),calculateTodayPrice())}var n=[e.plan0_code,e.plan1_code,e.plan2_code,e.plan3_code,e.plan6_code];$("#club_username").msDropdown(),$("#channel_n_hosts").msDropdown(),$("#club_username").on("change",function(){t(this.options[this.selectedIndex].getAttribute("current-plan-code"),this.options[this.selectedIndex].getAttribute("credit-remaining"),this.options[this.selectedIndex].getAttribute("next-due-date"),this.options[this.selectedIndex].getAttribute("in-trial"),this.options[this.selectedIndex].getAttribute("cc-entered"),this.options[this.selectedIndex].getAttribute("billing-cycle"),this.options[this.selectedIndex].getAttribute("in-contract"))}),$(document).on("click",".js-change-display-rate",function(){$(".js-change-display-rate").removeClass("onactive"),$(this).addClass("onactive"),o()}),$(document).on("click",".js-choose-upgrade-button",function(){if(!$(this).hasClass("js-current-plan")){$(".js-choose-upgrade-button").removeClass("onactive"),$(".js-choose-upgrade-button").not(".js-current-plan").html("<a href='javascript:void(0);'>CHOOSE PLAN</a>"),$(".js-payment-section").removeClass("close");var e=$(".js-payment-section").offset().top;$("html, body").animate({scrollTop:e},1e3),i($(this).parents("li").attr("planname")),$(this).addClass("onactive"),$(this).html("<span><span><svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' width='512' height='512' viewBox='0 0 512 512'><path d='M432 64l-240 240-112-112-80 80 192 192 320-320z'></path></svg> </span>SELECTED </span>"),$(".js-display-monthly-rates").hasClass("onactive")?$(".js-chose-monthly-link").click():$(".js-chose-annual-link").click()}}),$(document).on("click",".js-choose-time-rate",function(){$(".js-choose-time-rate").removeClass("onactive"),$(this).addClass("onactive"),$(".js-change-display-rate").removeClass("onactive"),$(".js-chose-monthly-link").hasClass("onactive")?$(".js-display-monthly-rates").addClass("onactive"):$(".js-display-annual-rates").addClass("onactive"),o(),i($("#current_plan").val())}),$("#club_username").trigger("change"),$("#credit-card-select").msDropdown(),$("#credit_card_used, #credit_card_new").click(function(){"onactive"!=this.className&&($("#credit_card_used, #credit_card_new").toggleClass("onactive"),$("#saved_credit_card_form, #credit-card-form").toggle()),$("#credit_card_usage").val("credit_card_used"==this.id?$("#credit-card-select").val():"")})}}(),function(){Paloma.callbacks.conferences={};Paloma.locals.conferences={};Paloma.inheritLocals({from:"/",to:"conferences"})}(),function(){new Paloma.FilterScope("conferences"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.edit=function(e){function t(e){e="undefined"==typeof e?!0:!1,e&&$("#enable-knock-to-enter-radio-button").is(":checked")&&$('label[for="enable-knock-to-enter-radio-button"]').trigger("click");var t=$("#no-privacy").prop("checked"),o="premium"==$("#conference_pricing_type").val()||"chip_in"==$("#conference_pricing_type").val(),i=$("#add-a-pwd-input").is(":checked"),n=t||o||i;n?$("#knock-knock-privacy").hide():$("#knock-knock-privacy").show()}function o(){$("#add-privacy").prop("checked")?$("#add-privacy-content").show():($("#add-privacy-content").hide(),$("#link-enter-private").click().next().addClass("checked"),$("#no-private").next().removeClass("checked"),$("#add-private").next().removeClass("checked"),$("#add-a-pwd-content").hide(),$("#add-a-pwd").show(),$("#add-a-pwd-input").prop("checked",!1).next().removeClass("checked"))}function i(){var e=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i),t=$("#temp_new_presenter_email")[0].value;return e.test(t)?!0:!1}function n(e){var t=$('option[value="'+e+'"]');t.attr("data-drop",t.html()).html(e.substring(0,e.indexOf(" ("))||e)}function s(e){var t=93/e.w,o=93/e.h;$("#presenter_icon_preview").css({width:t*$("#presenter-icon-image").width()+"px",height:o*$("#presenter-icon-image").height()+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(o*e.y)+"px"})}function a(e){var t=$("#presenter-icon-image").naturalWidth()/$("#presenter-icon-image").width();e.x<0&&(e.x=0),e.y<0&&(e.y=0),$("#new_presenter_crop_x").val(e.x*t),$("#new_presenter_crop_y").val(e.y*t),$("#new_presenter_crop_w").val(e.w*t),$("#new_presenter_crop_h").val(e.h*t),s(e)}function r(){"undefined"!=typeof jcrop_api&&jcrop_api.destroy(),$("#presenter_image_dialog").attr("data-icon-original")&&($("#presenter-icon-target").html(""),$('<img id="presenter-icon-image" />').attr("src",$("#presenter_image_dialog").attr("data-icon-original")).appendTo("#presenter-icon-target"),$("#presenter-icon-image").Jcrop({onChange:a,onSelect:a,boxWidth:$("#presenter_image_dialog").width(),boxHeight:380,aspectRatio:1,setSelect:[0,0,520,520]},function(){jcrop_api=this}))}function l(){$("#js-schedule-type-24-hour-room").prop("checked")&&$("#registration-required-to-enter-24-hour-room-checkbox").prop("checked")?($("#guest-access-radio-button").parent().addClass("disabled"),$("#guest-access-radio-button").attr("disabled","disabled"),$("#conference_will_be_recorded").parent().addClass("disabled"),$("#conference_will_be_recorded").attr("disabled","disabled"),$("#conference_will_be_recorded").siblings("label").text("24 hour events cannot be recorded")):($("#guest-access-radio-button").parent().removeClass("disabled"),$("#guest-access-radio-button").removeAttr("disabled"),$("#conference_will_be_recorded").parent().removeClass("disabled"),$("#conference_will_be_recorded").removeAttr("disabled"),$("#conference_will_be_recorded").siblings("label").text("Yes, this event will be recorded"))}$(document).on("click",".js-choose-new-presenter-photo",function(e){return $("#new_presenter_photo").click(),e.preventDefault(),!1}),$(document).on("click",".js-choose-edit-presenter-photo",function(e){return $("#presenter_photo").click(),e.preventDefault(),!1}),$(document).on("change","#presenter_photo",function(){$("#edit_presenter_icon_preview").attr("src",window.URL.createObjectURL(this.files[0])),$("#edit_presenter_icon_preview").parent().removeClass("close"),$("#js-choose-edit-presenter-photo-link").hide()}),$(document).on("change","#new_presenter_photo",function(){$("#presenter_icon_preview").attr("src",window.URL.createObjectURL(this.files[0])),$("#presenter_icon_preview").parent().removeClass("close"),$("#upload_presenter_icon").hide(),$("#js-choose-new-presenter-photo-link").hide()}),$(document).on("change","#conference_facebook_image",function(){$("#js-facebook-image-preview").attr("src",window.URL.createObjectURL(this.files[0]))}),$(document).on("change","#conference_twitter_image",function(){$("#js-twitter-image-preview").attr("src",window.URL.createObjectURL(this.files[0]))}),$("#top-nav-host-conference-link").hide(),$("#conf_creation_head_control_btn").removeClass("close"),$(".conf-creation-head-menu li a").removeClass("onactive"),$("#landing_header_edit").addClass("onactive"),$("#landing_header").show(),$("#landing_header_for_dashboard").hide(),$("input:checkbox").not(".do-not-decorate").prettyCheckable({color:"green"}),$("input:radio").prettyCheckable({color:"green"}),$(".expand").autoGrow(),$("#conference_start_date").datepicker({minDate:0,dateFormat:"mm/dd/yy"}),$("#conference_timezone_change").click(function(){$("#conference_timezone_area").show(),$("#timezhone_show_area").hide()}),$("#timezhone_show").text($("#conference_time_zone option:checked").text()),$("#edit_webinar_url").click(function(){$("#webinar_url_area").toggle()}),$("#conf_creation_left_nav > ul > li > a").click(function(){$("#conf_creation_left_nav > ul > li > a").removeClass("onactive");var e=$("#"+$(this).attr("id")+"_area").offset().top-62-49;$("html,body").animate({scrollTop:e},1e3)}),$(document).scroll(function(){var e=$(window).scrollTop();if($(".conf-creation-mainbox").length>0){var t=$(".conf-creation-mainbox").offset().top;e>t-62-49?3660>e-t+62+49+10?$("#conf_creation_left_nav").css("top",e-t+62+49+10):$("#conf_creation_left_nav").css("bottom","420px;"):$("#conf_creation_left_nav").css("top",10)}$(window).scrollTop()>575?$(".conf-creation-social-sider").addClass("share-fixed"):$(".conf-creation-social-sider").removeClass("share-fixed");var e=$(window).scrollTop();if($("#conf_creation_head_menubox").hasClass("lockednav")?e<=$("#conf_creation_head_menubox_holder").offset().top&&($("#conf_creation_head_menubox").removeClass("lockednav"),$("#conf_creation_head_menubox_holder").hide()):$("#conf_creation_head_menubox").length>0&&e>$("#conf_creation_head_menubox").offset().top&&($("#conf_creation_head_menubox").addClass("lockednav"),$("#conf_creation_head_menubox_holder").show()),$("#conf_creation_left_nav").length>0){var e=$(window).scrollTop(),o=($("#conf_details_area").offset().top,$("#conf_presenter_area").offset().top),i=$("#conf_size_area").offset().top,n=$("#conf_tickets_area").offset().top,s=$("#conf_privacy_area").offset().top,a=$("#conf_chat_qa_poll_area").offset().top,r=$("#conf_dialin_area").offset().top,l=$("#conf_settings_area").offset().top,c=$("#conf_delete_area").offset().top,d=115;
e>=0&&o-d>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_details").addClass("onactive")):e>=o-d&&i-d>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_presenter").addClass("onactive")):e>=i-d&&n-d>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_size").addClass("onactive")):e>=n-d&&s-d>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_tickets").addClass("onactive")):e>=s-d&&a-d>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_privacy").addClass("onactive")):e>=a-d&&r-d>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_chat_qa_poll").addClass("onactive")):e>=r-d&&l-d>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_dialin").addClass("onactive")):e>=l-d&&c-d-300>e?($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_settings").addClass("onactive")):($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_delete").addClass("onactive")),$(window).scrollTop()+$(window).height()>$(document).height()-100&&($("#conf_creation_left_nav > ul > li > a").removeClass("onactive"),$("#conf_delete").addClass("onactive"))}}),t(!1),$('#no-privacy, #add-privacy, input[name="conference[private_type]"]').change(function(){t()}),$("#conference_title").keyup(function(){$(".conf-creation-input-wordlimit").html(this.value.length+"/100"),this.value.length>90&&this.value.length<100?$(".conf-creation-input-wordlimit").addClass("text-full").removeClass("text-exceed"):this.value.length>=100?$(".conf-creation-input-wordlimit").removeClass("text-full").addClass("text-exceed"):$(".conf-creation-input-wordlimit").removeClass("text-full").removeClass("text-exceed")});var c=function(){$("#agenda_area .conf-creation-input-box-about input[type=text]").each(function(e){var t=e+1;$(this).attr("placeholder","Agenda Topic "+t),$(this).addClass("do-not-submit-on-enter")})};$(document).on("click","#add_another_topic",function(e){if($("#conference_topics .conf-creation-input-box").length<5){e.preventDefault();var t=(new Date).getTime(),o="conference[coverings_attributes]["+t+"][title]",i='<div class="conf-creation-input-box" style="margin:10px 0 0 0">';i+='<div class="conf-creation-agenda-delete">',i+='<a href="/conferences/'+t+'/delete_topic" data-remote="true" id="delete_topic_'+t+'">',i+='<span class="icon-err"></span>',i+="</a></div>",i+='<div class="conf-creation-input-box-about">',i+='<input name="'+o+'" type="text">',i+="</div></div>",$(i).appendTo("#conference_topics_form"),c(),$("#conference_topics .conf-creation-input-box").length>=5&&$("#add_another_topic_div").addClass("close")}}),$(document).on("click","#add_another_presenter",function(){$(this).slideUp(),$(".conference-presenter-list").slideUp(),$("#add_presenter_form").slideDown()}),$(document).on("click","#close_add_another_presenter, #cancel_add_another_presenter",function(){$("#add_another_presenter").slideDown(),$(".conference-presenter-list").slideDown(),$("#add_presenter_form").slideUp(),"cancel_add_another_presenter"==this.id}),$(".conf-creation-ticket > a").bind("click",function(){switch($(this).addClass("onactive").siblings().removeClass("onactive"),$("#ticket-paid-1-content, #ticket-paid-2-content").hide(),$("#"+$(this).prop("id")+"-content").show(),this.id){case"ticket-paid-0":$("#conference_pricing_type").val("free"),$("#input-password")[0].disabled=!1;break;case"ticket-paid-1":"true"==$("#can_sell_tickets").val()&&($("#conference_pricing_type").val("premium"),$("#input-password").val(""),$("#input-password")[0].disabled=!0);break;case"ticket-paid-2":"true"==$("#can_sell_tickets").val()&&($("#conference_pricing_type").val("chip_in"),$("#input-password")[0].disabled=!1)}t()}),$(".show-limit-content").change(function(){$("#add-limit").prop("checked")?($("#add-limit-content").show(),$("#conference-max-attendance").val($("#conference-max-attendance-limit").val())):($("#add-limit-content").hide(),$("#conference-max-attendance").val($("#max-conference-limit").val()))}),$(document).on("keyup","#conference-max-attendance-limit",function(){$("#conference-max-attendance").val($("#conference-max-attendance-limit").val())}),$(".show-privacy-content").change(function(){o()}),$("#conference_is_test").change(function(){$("#conference_is_test").prop("checked")?($("#add-privacy").click().next().addClass("checked"),$("#no-privacy").next().removeClass("checked"),$("#add-private").click().next().addClass("checked"),$("#no-private").next().removeClass("checked"),$("#no-privacy").attr("disabled",!0).siblings("label").css("color","#848585"),$("#add-privacy").attr("disabled",!0).siblings("label").css("color","#848585"),$("#no-private").attr("disabled",!0).siblings("label").css("color","#848585"),$("#add-private").attr("disabled",!0).siblings("label").css("color","#848585")):($("#no-privacy").attr("disabled",!1).siblings("label").removeAttr("style"),$("#add-privacy").attr("disabled",!1).siblings("label").removeAttr("style"),$("#no-private").attr("disabled",!1).siblings("label").removeAttr("style"),$("#add-private").attr("disabled",!1).siblings("label").removeAttr("style"))}),$(document).on("click","#invite_new_presenter",function(e){e.preventDefault();var t=!1;$("#temp_new_presenter_first_name")[0].value.length>0?(t=!0,$("#temp_new_presenter_first_name").closest(".conf-creation-input-box").removeClass("conferror")):(t=!1,$("#temp_new_presenter_first_name").closest(".conf-creation-input-box").addClass("conferror")),i()?(t=t&&!0,$("#temp_new_presenter_email").closest(".conf-creation-input-box").removeClass("conferror")):(t=!1,$("#temp_new_presenter_email").closest(".conf-creation-input-box").addClass("conferror")),t&&($("#new_presenter_first_name").val($("#temp_new_presenter_first_name").val()),$("#new_presenter_title").val($("#temp_new_presenter_title").val()),$("#new_presenter_email").val($("#temp_new_presenter_email").val()),$("#new_presenter_bio").val($("#temp_new_presenter_bio").val()),$("#new_presenter_facebook").val($("#temp_new_presenter_facebook").val()),$("#new_presenter_twitter").val($("#temp_new_presenter_twitter").val()),$("#new_presenter_linkedin").val($("#temp_new_presenter_linkedin").val()),$("#save_conference_edit").attr("disabled",!0),$("#save_conference_edit").text("Saving..."),$("#new_presenter_form").submit())}),newfetchPresenterforCommunity(e.obfuscated_id),n($("#conference_time_zone").val()),$(document).on("click","#conference_time_zone",function(){var e=$('option[value="'+$(this).val()+'"]');e.html(e.attr("data-drop"))}),$(document).on("change","#conference_time_zone",function(){console.log($(this).val()),n($(this).val())}),$(document).on("change","#start_time_hour, #date_start_time, #start_time_ampm",function(){var e=(parseInt($("#start_time_hour").val())+1)%12;0==e&&(e=12),$("#end_time_hour").val(e),$("#date_end_time").val($("#date_start_time").val()),$("#end_time_ampm").val($("#start_time_ampm").val())});var d=new Clipboard("#copy_coupon_code");if(d.on("success",function(e){e.clearSelection(),$("#copy_coupon_code").text("Coupon Code copied to your clipboard")}),new Clipboard("#copy-password"),$("#add-a-pwd").click(function(){$("#add-a-pwd-content").toggle(),$("#add-a-pwd-content").is(":visible")?($(this).hide(),$("#input-password").val(""),$("#add-a-pwd-input").prop("checked",!0).next().addClass("checked")):$(this).show()}),$("#add-a-pwd-input").change(function(){$(this).prop("checked")?($("#privacy-change-note-1").hide(),$("#privacy-change-note-2").hide(),$("#privacy-change-note-3").hide(),$("#privacy-change-note-4").show(),$("#add-a-pwd-content").show()):($("#input-password").val(""),$("#add-a-pwd-content").hide(),$("#add-a-pwd").show())}),$("#no-private").change(function(){$(this).prop("checked")&&($("#privacy-change-note-1").show(),$("#privacy-change-note-2").hide(),$("#privacy-change-note-3").hide(),$("#privacy-change-note-4").hide(),$("#add-a-pwd-content").hide())}),$("#add-private").change(function(){$(this).prop("checked")&&($("#privacy-change-note-1").hide(),$("#privacy-change-note-2").show(),$("#privacy-change-note-3").hide(),$("#privacy-change-note-4").hide(),$("#add-a-pwd-content").hide())}),$("#link-enter-private").change(function(){$(this).prop("checked")&&($("#privacy-change-note-1").hide(),$("#privacy-change-note-2").hide(),$("#privacy-change-note-3").show(),$("#privacy-change-note-4").hide(),$("#add-a-pwd-content").hide())}),$("#add-email-reminder-input").change(function(){$(this).prop("checked")?$("#add-email-reminder-content").show():$("#add-email-reminder-content").hide()}),$("#add_custom_reminder").click(function(){!$("#custom_reminder").is(":hidden")&&$("#custom_reminder_1").is(":hidden")&&($("#custom_reminder_1").show(),$("#custom_reminder_1 a").trigger("click")),$("#custom_reminder").is(":hidden")&&($("#custom_reminder").show(),$("#custom_reminder a").trigger("click")),$("#custom_reminder").is(":visible")&&$("#custom_reminder_1").is(":visible")&&$(this).parent().hide()}),$("#input-password").val().length>0&&($("#add-a-pwd").hide(),$("#add-a-pwd-content").show()),$("#input-password").on("change keyup paste mouseup",function(){""!=$(this).val()?$("#copy-password").show():$("#copy-password").hide()}),$("#presenter_image_dialog").dialog({modal:!0,autoOpen:!1,width:"98%",resizable:!1,position:["center",100],show:{duration:100},hide:{duration:100},open:r}),$("#upload_presenter_icon, #edit_presenter_icon").on("click",function(){$("#new_presenter_profile_image").click()}),$("#new_presenter_profile_image").on("change",function(){$("#presenter_icon_preview").attr("src",window.URL.createObjectURL(this.files[0])),$("#presenter_icon_preview").parent().removeClass("close"),$("#upload_presenter_icon").hide()}),$("#presenter-icon-crop-button").click(function(){$("#presenter_image_dialog").dialog("close")}),$("#new_presenter_form").submit(function(){$("#invite_new_presenter").attr("disabled","disabled")}),$(document).on("click","#use_previous_description",function(){$(this).hide(),$("#use_previous_description_list").show()}),$(document).on("change","#conference_copy_from",function(){$(".schedule-title-copy-loader").show(),$.get("/conferences/"+e.obfuscated_id+"/use_previous_description.js?copy_from="+$(this).val())}),$(document).on("click","#show_agenda_area",function(){$("#agenda_area").show(),$(this).hide()}),$(document).on("click","#conf_delete_process",function(){$("#conf_delete_area").hide(),$("#delete_confirm_area").show()}),$(document).on("click","#conf_cancle",function(){$("#conf_delete_area").show(),$("#delete_confirm_area").hide()}),$("#category-ids-select").select2(),$("#save_conference_edit").click(function(t){t.preventDefault(),$(this).text("Saving..."),"block"!=$("#add-a-pwd-content").css("display")&&($("#input-password")[0].value=null),$("#edit_conference_"+e.conference_id).submit()}),$("#conference_enable_twitter").change(function(){$("#conference_enable_twitter").prop("checked")?$("#add_new_twitter_hashtag").show():$("#add_new_twitter_hashtag").hide()}),$("#twilio-call-content .prettycheckbox").click(function(){$("#enabled-twilio-call").is(":checked")?$("#add-twilio-password").show():$("#add-twilio-password").hide()}),"#conf_dialin"==window.location.hash&&setTimeout(function(){$("html, body").animate({scrollTop:$("#conf_dialin_area").offset().top-60},500)},2e3),$("#twilio-call-content .prettycheckbox").click(function(){$("#enabled-dialin-checkbox").is(":checked")?$(".js-dial-in-details").show():$(".js-dial-in-details").hide()}),e.edit_presenter&&$("#conf_presenter").click(),e.edit_ticket&&$("#conf_tickets").click(),"#event_description"==window.location.hash){var u=$("#event_description").offset().top-62-49;$("html,body").animate({scrollTop:u},1e3)}$(document).on("change",".js-schedule-type",function(){$("#js-schedule-type-24-hour-room").prop("checked")?($("#js-conference-one-time-start-time").addClass("close"),$("label[for='add-privacy']").trigger("click"),$("#no-privacy").parent().addClass("disabled"),$("#no-privacy").attr("disabled","disabled"),$(".js-disable-for-24-hour-room").addClass("close"),$(".js-disable-for-24-hour-room-display").removeClass("close"),$("#add-privacy").siblings("label").text("Private - Do not list event publicly. 24 hour events must be private")):($("#no-privacy").parent().removeClass("disabled"),$("#no-privacy").removeAttr("disabled"),$("#js-conference-one-time-start-time").removeClass("close"),$(".js-disable-for-24-hour-room").removeClass("close"),$(".js-disable-for-24-hour-room-display").addClass("close"),$("#conference_duration_time").val("60"),$("#add-privacy").siblings("label").text("Private - Do not list event publicly")),l()}),$(document).on("change","#registration-required-to-enter-24-hour-room-checkbox",function(){l()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.edit_conference=function(){$(".create-button").find("input")[0].value="Update",$(".create-button").find("input").attr("data-disable-with","Updating..."),switchType($("#conference_meet_later")[0],null),changeMeetingTime("later",!0),$("#conference_meet_time_li").css("display","none"),$("#edit_url").click(),$("#conference_start_time").datepicker({minDate:0,dateFormat:"MM d, yy"}),applySelect2EmailField("#club_profile_invitations"),$("input:radio").prettyCheckable({color:"green"}),$("input:checkbox").prettyCheckable({color:"green"})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.edit_presenter=function(){$(document).on("keyup","#presenter_name",function(){$("#presenter_name")[0].value.length>0?$("#presenter_name").closest(".conf-creation-input-box").removeClass("conferror"):$("#presenter_name").closest(".conf-creation-input-box").addClass("conferror")}),$("#presenter_bio").autoGrow(),$("input:checkbox").not(".do-not-decorate").prettyCheckable({color:"green"})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.edit_webinar=function(){}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.embed_full_event=function(){new Clipboard("#js-copy-embed-button")}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.ended_conference_show=function(){}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.first_webinar=function(){$(document).on("change","#conference_icon",function(){var e=this.files[0],t=window.URL||window.webkitURL,o=t.createObjectURL(e);$("#conference-icon-preview").attr("src",o)}),$(document).on("click","#next-step-link",function(){$("#conference_title").val().length?"false"==$(".is-new-club").attr("is_new_club")?$(".is-new-club").closest("form").submit():($("#first_webinar_form").addClass("close"),$("#first_club_form").removeClass("close")):$("#conference_title").parents(".create-td").addClass("errors")}),newClubSetup(),$("#conference_start_time").datepicker({minDate:0,dateFormat:"MM d, yy"})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.index=function(e){"modal_invite"==e.source&&$("#invite_link").click();var t=window.location.hash.substring(1);"create_video_conference"==t?$("#video_conference_link").click():"create_webinar"==t&&$("#webinar_link").click()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.invite_people=function(){}}(),function(){var e=(Paloma.variableContainer,Paloma.locals),t=e.conferences;Paloma.callbacks.conferences.invite_to_conference=function(){$("input:checkbox").prettyCheckable({color:"green"}),applySelect2EmailField("#club_profile_invitations_modal"),$(".expand").autoGrow(),$(document).on("click",".import-contacts-link",function(){$(".import-section").removeClass("close"),$(".import-contacts-link").addClass("close")}),$("#import-social-select").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),t.importEmailsFromLocalFile("#club_profile_invitations_modal",!0)}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences["new"]=function(){if($("#conference_start_date").datepicker({minDate:0,dateFormat:"MM d, yy"}),$("#changeTicketType .schedule-type").text("chip_in"==$("#conference_pricing_type").val()?$("#changeTicketType .capsule-last").attr("data-tips"):$("#changeTicketType .capsule-1").attr("data-tips")),$(document).on("change","#conference_view_permission_open_to_public, #conference_view_permission_invitation_only",function(e){return $("#conference_view_permission_invitation_only").is(":checked")?($("#uploadYouTube").removeClass("onactive"),$("#conference_upload_to_youtube_bigmarker_channel").val("false"),$(".invitation-only-checkbox").removeClass("close"),"premium"!=$("#conference_pricing_type").val()&&($("#allow-chip-in-switch").removeClass("onactive"),$("#conference_pricing_type").val("free"))):($(".invitation-only-checkbox").addClass("close"),$("#conference_invitation_only").siblings("a").attr("class",""),$("#conference_invitation_only").parent().siblings().val("0"),$("#conference_invitation_only").val("0")),e.preventDefault(),!1}),$(document).on("click",".social-sign-in-link",function(e){return $("#social_login_provider").val($(this).attr("social-provider")),$(this).closest("form").submit(),$(this).closest("form").submit(),e.preventDefault(),!1}),$("#conference-obfuscated-id")&&$.trim($("#conference-obfuscated-id").html())){var e=$.trim($("#conference-obfuscated-id").html());$("#conference_copy_from").val(e),newfetchPresenterforCommunity(e)}else newfetchPresenterforCommunity();$("input:checkbox").prettyCheckable({color:"green"}),$("#creating_new_club").length&&newHostingClubSetup(),$("#conference_time_zone").set_timezone(),$("#new_member_time_zone").set_timezone(),$(document).on("click",".tabbed-new-member-link",function(){$(".tabbed-popup-new-member-form").removeClass("close"),$(".tabbed-popup-login-form").addClass("close"),$(".tabbed-login-link").removeClass("onactive"),$(this).addClass("onactive")}),$(document).on("click",".tabbed-login-link",function(){$(".tabbed-popup-new-member-form").addClass("close"),$(".tabbed-popup-login-form").removeClass("close"),$(".tabbed-new-member-link").removeClass("onactive"),$(this).addClass("onactive")}),$(document).on("click",".new-advanced-conference-link",function(e){return $(".choose-conference-type").addClass("close"),$(".advanced_conference_form1").removeClass("close"),e.preventDefault(),!1}),$(document).on("click",".new-basic-conference-link",function(e){return $(".choose-conference-type").addClass("close"),$(".advanced_conference_form1").removeClass("close"),e.preventDefault(),!1}),$(document).on("click",".conference-back-button",function(e){return $(this).parents(".create-body").addClass("close").prev(".create-body").removeClass("close"),$("#current_step").val($("#current_step").val()-1),e.preventDefault(),!1}),$(document).on("change","#conference_club_username",function(){newfetchPresenterforCommunity()}),$(document).on("change","#conference_icon",function(){var e=this.files[0],t=window.URL||window.webkitURL,o=t.createObjectURL(e);$("#conference-icon-preview").attr("src",o)}),$(document).on("click",".switch-type",function(){$(this).addClass("onactive").siblings().removeClass("onactive"),$("#"+$(this).attr("field")).val($(this).attr("field-value")),$(this).attr("tip-class")&&$("."+$(this).attr("tip-class")).removeClass("close").siblings(".capsule-tip").addClass("close"),$("#room-type-name-title").html("2"==$(this).attr("field-value")?"Webinar":"Meeting")}),$(document).on("click",".switch-type2",function(){$(this).addClass("onactive").siblings().removeClass("onactive"),$("#"+$(this).attr("field")).val($(this).attr("field-value")),$(this).attr("tip-class")&&$("."+$(this).attr("tip-class")).removeClass("close").siblings(".capsule-tip").addClass("close")}),$("#conference_title").val().length>0&&($(".new-advanced-conference-link").click(),$("#create-conference-step-1-next-button").click()),$("#conference_post_facebook_event").parent().siblings().val("post"),$("#conference_post_facebook_event").val("post");var t=function(e){var t=(0|e)%100;return e+(t>3&&21>t?"th":["th","st","nd","rd"][t%10]||"th")},o=function(){$(".schedule-agenda input[type=text]").each(function(e){i=e+1,$(this).attr("placeholder",t(i)+" agenda topic")})};o(),$(document).on("click",".schedule-agenda-add",function(e){if($(".schedule-covering-list").children("schedule-agenda").length<5){e.preventDefault();var t=(new Date).getTime(),i="conference[coverings_attributes]["+t+"][title]",n='<div class="schedule-agenda">';n+='<input name="'+i+'" type="text">',n+='<span class="schedule-err icon-err"></span>',n+="</div>",$(".schedule-covering-list").append(n),o(),$(".schedule-covering-list").children(".schedule-agenda").length>=5&&$(".schedule-agenda-add").addClass("close")}}),$(document).on("click",".schedule-covering-list .schedule-err",function(){$(this).parent().next("input[type=hidden]").val("true"),$(this).parent().remove(),o(),$(".schedule-covering-list").children(".schedule-agenda").length<5&&$(".schedule-agenda-add").removeClass("close")}),$("#category-ids-select").select2();var n=!0;$("#conference_sub_url").val().length>0&&(n=!1),$("#conference_title").keyup(function(){n&&(url=$("#conference_title").val().toLowerCase().replace(/\W/g,"-").replace(/-+/g,"-"),$("#conference-sub-url-display").html(url),$("#conference_sub_url").val(url),$("#conference-sub-url-display").hasClass("close")||$("#edit-conference-sub-url-link").removeClass("close"))}),$(document).on("keydown","#conference_sub_url",function(){n=!1}),$(document).on("click","#edit-conference-sub-url-link",function(e){return $("#conference_sub_url").css("display",""),$(this).addClass("close"),$("#conference-sub-url-display").addClass("close"),e.preventDefault(),!1}),$(document).on("click","#schedule-social-login-link",function(e){return e.preventDefault(),$(".schedule-email-signup").hide(),$(".schedule-social-login").show(),$(".schedule-email-login").hide(),$("input[name=host_by]").val("social_login"),$("#social_login_provider").val(""),$("#"+$(this).attr("data-id")).submit(),e.preventDefault(),!1}),$(document).on("click","#schedule-email-signup-link",function(e){return e.preventDefault(),$(".schedule-email-signup").show(),$(".schedule-social-login").hide(),$(".schedule-email-login").hide(),$("input[name=host_by]").val("email_signup"),$("#"+$(this).attr("data-id")).submit(),e.preventDefault(),!1}),$(document).on("click",".edit-presenter-link",function(e){return $("#"+$(this).attr("data-id")+" .schedule-presenter-edit").show(),$("#"+$(this).attr("data-id")+" .schedule-presenter-show").hide(),$(".expand").autoGrow(),e.preventDefault(),!1}),$(document).on("click",".schedule-create-cancel",function(e){return e.preventDefault(),$("#"+$(this).attr("data-id")+" .schedule-presenter-edit").hide(),$("#"+$(this).attr("data-id")+" .schedule-presenter-show").show(),$("#"+$(this).attr("data-id")).submit(),e.preventDefault(),!1}),$(document).on("click","#uploadYouTube",function(){$(this).hasClass("slider-disabled")||($(this).toggleClass("onactive"),$("#conference_upload_to_youtube_bigmarker_channel").val("true"==$("#conference_upload_to_youtube_bigmarker_channel").val()?"false":"true"))}),$(document).on("click","#changeAdmission",function(e){return $(this).toggleClass("onactive"),"premium"==$("#conference_pricing_type").val()?($("#conference_pricing_type").val($("#allow-chip-in-switch").hasClass("onactive")?"chip_in":"free"),$(".schedule-price").addClass("close"),$(".ticket-price-field").addClass("close"),$(".chip-in-section").removeClass("close")):($("#conference_pricing_type").val("premium"),$(".schedule-price").removeClass("close"),$(".ticket-price-field").removeClass("close"),$(".chip-in-section").addClass("close")),e.preventDefault(),!1}),$(document).on("click","#allow-chip-in-switch",function(e){return $(this).toggleClass("onactive"),$("#conference_pricing_type").val("chip_in"==$("#conference_pricing_type").val()?"free":"chip_in"),e.preventDefault(),!1}),$(document).on("click",".schedule-create-save",function(e){return $("#"+$(this).attr("data-id")).submit(),e.preventDefault(),!1}),$(document).on("change","#conference_copy_from",function(){$(".schedule-title-copy-loader").show(),$(this).hide(),$.get($(this).val()?"/conferences/new.js?copy_from="+$(this).val():"/conferences/new.js")}),$(document).on("click",".schedule-title-copy-icon",function(){$("#conference_copy_from").show(),$(this).hide()}),$(document).on("mouseenter",".schedule-title-copy-icon",function(){$(".schedule-title-copy-icon-tips").show()}),$(document).on("mouseleave",".schedule-title-copy-icon",function(){$(".schedule-title-copy-icon-tips").hide()}),$(document).on("click","#standard_room, #web_rtc_room",function(){$(this).children(".creation-room-choose").addClass("onactive"),$(".room-choose-section").not("#"+this.id).children(".creation-room-choose").removeClass("onactive"),$("#conference_meeting_room_type").val("standard_room"==this.id?1:2)})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.new_24_hour_room=function(e){e.channel_count>1&&$("#conference_club_username").msDropdown()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.new_conference=function(){setPrettyCheckableValue($("#conference_schedule_type_one_time"),!0),$("#conference_start_time").datepicker({minDate:0,dateFormat:"MM d, yy"}),applySelect2EmailField("#club_profile_invitations"),$("input:radio").prettyCheckable({color:"green"}),$("input:checkbox").prettyCheckable({color:"green"}),$(".expand").autoGrow(),newfetchPresenterforCommunity(),$(document).on("change","#conference_view_permission",function(){"invitation_only"==$("#conference_view_permission").val()&&$("#conference_upload_to_youtube_bigmarker_channel").val(!1)}),$(document).on("keyup","#new_club_username,#conference_club_name",function(){$("#hosting-club-username").html($("#new_club_username").val())}),$(".meet-later-details").css("display","none");var e=!1;$(document).on("keyup","#conference_title",function(t){return e=!0,t.preventDefault(),!1}),$(document).on("change","#conference_start_time",function(t){return e||$("#conference_title").val($("#conference_start_time").val()+" meeting"),t.preventDefault(),!1}),$("#conference_post_facebook_event").parent().siblings().val("post"),$("#conference_post_facebook_event").val("post")}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.new_short_modal=function(e){function t(e){var t=$('option[value="'+e+'"]');t.attr("data-drop",t.html()).html(e.substring(0,e.indexOf(" ("))||e)}function o(e){var t="/conference_schedule/get_club";t+="?username="+e,$.getJSON(t,function(e){$("#category-ids-select").select2("val",e.category_ids),e.public?$("#js-choose-public-privacy").click():$("#js-choose-private-privacy").click(),e.can_record?($("#js-can-record").removeClass("close"),$("#js-can-not-record").addClass("close")):($("#js-can-record").addClass("close"),$("#js-can-not-record").removeClass("close"))})}$("#conference_timezone_change").click(function(){$("#conference_timezone_area").show(),$("#timezhone_show_area").hide()}),$(document).on("change","#conference_copy_from",function(){$(".schedule-title-copy-loader").show(),$.get($(this).val()?"/conferences/new.js?copy_from="+$(this).val()+"&source=new_short_modal":"/conferences/new.js&source=new_short_modal")}),$("input:checkbox").prettyCheckable({color:"green"}),$("input:radio").prettyCheckable({color:"green"}),$("#conference_start_date").datepicker({minDate:0,dateFormat:"MM d, yy"}),$(this).width()<768&&$("#test-meta-id").attr("content","width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no "),$(document).ready(function(){$("#public_conference").hasClass("onactive")&&$("#public_conference").click(),$("#private_conference").hasClass("onactive")&&$("#private_conference").click(),$("#test_conference").hasClass("onactive")&&$("#test_conference").click()}),$(document).on("click","#js-choose-public-privacy",function(e){return $("#js-choose-private-privacy").removeClass("onactive"),$("#js-choose-public-privacy").addClass("onactive"),$("#conference_view_permission").val("open_to_public"),$("#conference_auto_invite_all_channel_members").prop("checked",!0).siblings("a").addClass("checked"),e.preventDefault(),!1}),$(document).on("click","#js-choose-private-privacy",function(e){return $("#js-choose-public-privacy").removeClass("onactive"),$("#js-choose-private-privacy").addClass("onactive"),$("#conference_view_permission").val("invitation_only"),$("#conference_auto_invite_all_channel_members").prop("checked",!1).siblings("a").removeClass("checked"),e.preventDefault(),!1}),$(".conf-creation-popup-type-box > a").bind("click",function(){switch($(this).addClass("onactive").siblings().removeClass("onactive"),this.id){case"public_conference":$("#conference_view_permission").val("open_to_public"),$("#conference_is_test").val(!1),$("#conference_type_description").html("Public Conference: Anyone can attend; your conference will be searchable. </br></br>");break;case"private_conference":$("#conference_view_permission").val("invitation_only"),$("#conference_is_test").val(!1),$("#conference_type_description").html("Private Conference: Private conferences can only be attended by people that are invited or part of the community.");break;case"test_conference":$("#conference_view_permission").val("invitation_only"),$("#conference_is_test").val(!0),$("#conference_type_description").html("Test Conference: A private conference auto-filled with test content to try BigMarker. </br></br>"),0==$("#conference_title").val().length&&$("#conference_title").val("Test Conference");break;default:$("#conference_view_permission").val(e.conference_view_permission),$("#conference_is_test").val(e.conference_is_test)}}),$("#schedule_short_modal_conference").click(function(){var t=!1;$("#conference_title")[0].value.length>0?($("#conference_title").removeClass("errors"),t=!0):($("#conference_title").addClass("errors"),t=!1);var o=new Date($("#conference_start_date")[0].value+" "+$("#conference_start_time_4i").val()+":"+$("#conference_start_time_5i").val()+" "+e.time_zone),i=new Date(new Date-18e5);o>=i?($("#conference_start_date").removeClass("errors"),$("#conference_start_time_4i").removeClass("errors"),$("#conference_start_time_5i").removeClass("errors"),t=t&&!0):($("#conference_start_date").addClass("errors"),$("#conference_start_time_4i").addClass("errors"),$("#conference_start_time_5i").addClass("errors"),t=!1),t&&($("#short_modal_creation").hide(),$("#short_modal_signup").show())}),$(document).on("click",".short_modal_social_signin",function(e){return $("#social_login_provider").val($(this).attr("social-provider")),$(this).closest("form").submit(),$(this).closest("form").submit(),e.preventDefault(),!1}),$(document).on("click","#short_modal_email_signup",function(e){return e.preventDefault(),$("input[name=host_by]").val("email_signup"),e.preventDefault(),!1}),t($("#conference_time_zone").val()),$(document).on("click","#conference_time_zone",function(){var e=$('option[value="'+$(this).val()+'"]');e.html(e.attr("data-drop"))}),$(document).on("change","#conference_time_zone",function(){t($(this).val())}),$("#category-ids-select").select2(),e.community_count>1?($("#conference_club_username").msDropdown(),$("#conference_club_username").on("change",function(){o($("option:selected",this).val())})):o($("#conference_club_username").val()),$("#conference_club_username").trigger("change")}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.new_webinar=function(e){$("input:checkbox").prettyCheckable({color:"green"}),applySelect2EmailField("#club_profile_invitations"),$(".expand").autoGrow(),$("#conference_club_profile_ids_"+e.current_presenter_id)[0].value=e.current_presenter_id,$(document).on("change","#conference_icon",function(){var e=this.files[0],t=window.URL||window.webkitURL,o=t.createObjectURL(e);$("#conference-icon-preview").attr("src",o)}),$("#free").click(function(){switchType(this,"conference_pricing_type"),displayBanner("free_banner"),$("#conference_billing_plan_one_time_attributes_price")[0].value="",$("#conference_billing_plan_one_time_attributes_price").attr("disabled",!0),$("#submit_webinar_form").attr("disabled",!1)}),$("#premium").click(function(){switchType(this,"conference_pricing_type"),displayBanner("premium_banner"),$("#conference_billing_plan_one_time_attributes_price").attr("disabled",!1),$("#submit_webinar_form").attr("disabled",!0)
}),$("#chip_in").click(function(){switchType(this,"conference_pricing_type"),displayBanner("chip_in_banner"),$("#conference_billing_plan_one_time_attributes_price")[0].value="",$("#conference_billing_plan_one_time_attributes_price").attr("disabled",!0),$("#submit_webinar_form").attr("disabled",!1)}),$("#conference_billing_plan_one_time_attributes_price").keyup(function(){$.isNumeric(this.value)||(this.value=this.value.substring(0,this.value.length-1),$("#price_error_message")[0].innerHTML="Price amount can only be numeric. Minimum amount is $2."),$("#conference_billing_plan_one_time_attributes_price").val()>=2?$("#submit_webinar_form").attr("disabled",!1):$("#submit_webinar_form").attr("disabled",!0)}),$("#submit_webinar_form").click(function(){"premium"!=$("#conference_pricing_type").val()&&($("#conference_billing_plan_one_time_attributes_price")[0].value="",$("#conference_billing_plan_one_time_attributes_price").attr("disabled",!0)),$("#conference_billing_plan_one_time_attributes_price").val()<2&&!$("#conference_billing_plan_one_time_attributes_price").attr("disabled")?(this.disabled=!0,$("#conference_billing_plan_one_time_attributes_price").parent().parent().addClass("errors"),$("#price_error_message")[0].innerHTML="Minimum amount is $2."):$(this).attr("disabled",!1)})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.registration_modal=function(){$("input:radio").prettyCheckable({color:"green"}),$("input:checkbox").prettyCheckable({color:"green"}),$("#conference-registration-link-attend").on("click",function(){if($("#enter_room_password_field #room_password").length>0){var e=$("#enter_room_password_field #room_password").val(),t=$("#submit-conference-registration-link-attend").attr("href").split("&room_password")[0];$("#submit-conference-registration-link-attend").attr("href",t+"&room_password="+e)}$("#submit-conference-registration-link-attend").click()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.show=function(e){function t(t){$.ajax({url:"/tour_trackers",type:"POST",data:{tour_tracker:{conference_obfuscated_id:e.conference_obfuscated_id,last_step:t}},success:function(){}})}function o(e){var t=Date.parse(e)-Date.parse(new Date),o=Math.floor(t/1e3%60),i=Math.floor(t/1e3/60%60),n=Math.floor(t/36e5%24),s=Math.floor(t/864e5);return{total:t,days:s,hours:n,minutes:i,seconds:o}}function i(e,t){function i(){var e=o(t);s.innerHTML=e.days,a.innerHTML=("0"+e.hours).slice(-2),r.innerHTML=("0"+e.minutes).slice(-2),l.innerHTML=("0"+e.seconds).slice(-2),e.total<=0&&(refreshIntervalId=setInterval(function(){refresh_enter_button()},1e3),clearInterval(c))}var n=document.getElementById(e),s=n.querySelector(".days"),a=n.querySelector(".hours"),r=n.querySelector(".minutes"),l=n.querySelector(".seconds");i();var c=setInterval(i,1e3)}new Clipboard("#copy_link"),$(document).on("click","#js-pay-for-shar-for-freer-button",function(e){return $("html, body").animate({scrollTop:$(".conf-creation-landing-body").offset().top},"500","swing",function(){}),$("#js-new-registration-panel").slideDown(),e.preventDefault(),!1}),$(document).on("click","#show-reviews-link",function(e){return $("#conference-reviews-box").toggleClass("close"),e.preventDefault(),!1}),$("#poll_close_date").datepicker({minDate:0,dateFormat:"MM d, yy"}),$("#club_profile_invitations").length>0&&applySelect2EmailField("#club_profile_invitations"),$(document).on("click",".import-contacts-link",function(){return $(".import-section").removeClass("close"),$(".import-contacts-link").addClass("close"),!1}),$(document).on("click","#show-add-to-calendar-links",function(e){return $("#add-to-calendar-links").show(),$("#show-add-to-calendar-links").hide(),e.preventDefault(),!1}),$(document).on("click","#import-excel-link",function(e){return $(".email-invite-link").click(),e.preventDefault(),!1}),$(".conf-creation-social-show-add > a").click(function(){$(".conf-creation-after-recording-share").toggle("onactive")}),$(window).scroll(function(){$(window).scrollTop()>575?$(".conf-creation-social-sider").addClass("share-fixed"):$(".conf-creation-social-sider").removeClass("share-fixed");var e=$(window).scrollTop();$("#conf_creation_head_menubox").hasClass("lockednav")?e<=$("#conf_creation_head_menubox_holder").offset().top&&($("#conf_creation_head_menubox").removeClass("lockednav"),$("#conf_creation_head_menubox_holder").hide()):$("#conf_creation_head_menubox").length>0&&e>$("#conf_creation_head_menubox").offset().top&&($("#conf_creation_head_menubox").addClass("lockednav"),$("#conf_creation_head_menubox_holder").show())});var n=function(){$(".cl-left-box-wrapper1").length&&($(window).width()>750?($(".cl-left-box-wrapper1").html().length&&$(".cl-left-box-wrapper1 .cl-right-box").appendTo($(".cl-right-box-wrapper1")),$(".cl-left-box-wrapper2").html().length&&$(".cl-left-box-wrapper2 .cl-right-box").appendTo($(".cl-right-box-wrapper2"))):($(".cl-right-box-wrapper1").html().length&&$(".cl-right-box-wrapper1 .cl-right-box").appendTo($(".cl-left-box-wrapper1")),$(".cl-right-box-wrapper2").html().length&&$(".cl-right-box-wrapper2 .cl-right-box").appendTo($(".cl-left-box-wrapper2"))))};if($(window).on("resize",n),n(),$(".invited_presenter_link").length>0&&$(".invited_presenter_link").click(),"modal_invite"==e.source&&$("#invite_link").click(),"invite_people"==e.source&&$("#landing_header_invite").click(),"switch_account"==window.location.hash.substring(1)&&$(".header-user-login").children().children().click(),"#click_rsvp"==location.hash&&$(".rsvp-link").length>0&&$(".rsvp-link")[0].click(),"#enter_password"==location.hash&&$("#enter-conference-button-link").length>0&&$("#enter-conference-button-link")[0].click(),"#click_invite"==location.hash&&$(".email-invite-link").length>0&&$(".email-invite-link")[0].click(),$(document).on("change","#share_email",function(){$("#conference-registration-link").length>0&&(original_url=$("#conference-registration-link").attr("href").split("?")[0],$("#share_email").is(":checked")?$("#conference-registration-link").attr("href",original_url+"?share_email=true"):$("#conference-registration-link").attr("href",original_url))}),$(document).on("click","#show-add-to-calendar-links",function(e){return $("#add-to-calendar-links").show(),$("#show-add-to-calendar-links").hide(),e.preventDefault(),!1}),$(document).on("click","#yes-chip-in-link",function(e){return $("#chip-in-choices-link").addClass("close"),$("#chip-in-box").removeClass("close"),$("#will_chip_in").val("yes"),$(".review-chip-in-title").html("Thank you for your support!"),setUpCreditCardForm(),e.preventDefault(),!1}),$(document).on("click","#sign-in-with-email-link",function(e){return $(".sign-in-with-social").addClass("close"),$(".sign-in-with-email").removeClass("close"),e.preventDefault(),!1}),$(document).on("click","#sign-in-with-social-link",function(e){return $(".sign-in-with-social").removeClass("close"),$(".sign-in-with-email").addClass("close"),e.preventDefault(),!1}),$(document).on("click","#show-system-requirements",function(e){return $("#system-requirements").toggleClass("close"),$(this).html("View"==$(this).html()?"Hide":"View"),e.preventDefault(),!1}),$(document).on("click","#toggle-webinars-vs-video-conference",function(e){return $("#webinars-vs-video-conference").toggleClass("close"),e.preventDefault(),!1}),$(this).width()<768&&$("#test-meta-id").attr("content","width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no "),$("#comment-btu").click(function(){$("#comment-btu").addClass("onactive"),$("#file-btu,#kudos-btu,#poll-btu").removeClass("onactive"),$("#addfile,#givekudos,#poll").addClass("close"),$("#comment").removeClass("close")}),$("#file-btu").click(function(){$("#file-btu").addClass("onactive"),$("#comment-btu,#kudos-btu,#poll-btu").removeClass("onactive"),$("#comment,#givekudos,#poll").addClass("close"),$("#addfile").removeClass("close")}),$("#kudos-btu").click(function(){$("#kudos-btu").addClass("onactive"),$("#comment-btu,#file-btu,#poll-btu").removeClass("onactive"),$("#comment,#addfile,#poll").addClass("close"),$("#givekudos").removeClass("close")}),$("#poll-btu").click(function(){$("#poll-btu").addClass("onactive"),$("#comment-btu,#kudos-btu,#file-btu").removeClass("onactive"),$("#comment,#givekudos,#addfile").addClass("close"),$("#poll").removeClass("close")}),$("#topCommunityselect").click(function(){$("#topselectBox,#topCommunityselect").toggleClass("onactive")}),$("#user-ctrol").click(function(){$("#user-ctrol-box").toggleClass("onactive"),$("#userMailbox,#userNotificationbox, #userMail, #userNotificaton").removeClass("onactive")}),$("#userMail").click(function(){$("#userMailbox, #userMail").toggleClass("onactive"),$("#user-ctrol-box, #userNotificationbox, #userNotificaton").removeClass("onactive")}),$("#userNotificaton").click(function(){$("#userNotificationbox, #userNotificaton").toggleClass("onactive"),$("#user-ctrol-box, #userMailbox, #userMail").removeClass("onactive")}),$("input:checkbox, input:radio").prettyCheckable({color:"green"}),$("#promotion-teaser").length>0&&setTimeout(function(){$("#promotion-teaser").slideToggle({direction:"up"},300)},3e3),$(document).on("click","#promotion-teaser",function(){$("#promotion-teaser").slideToggle({direction:"up",done:function(){$("#promotion-expanded").slideToggle({direction:"up",done:function(){setUpCreditCardForm()}},300)}},300)}),$(document).on("click","#close-promotion-expanded-box",function(e){return $("#promotion-expanded").slideToggle({direction:"up",done:function(){$("#promotion-teaser").slideToggle({direction:"up"},300)}},300),e.preventDefault(),!1}),$(document).on("click","#close-promotion-teaser-box",function(e){return $("#promotion-teaser").slideToggle({direction:"up"},300),e.preventDefault(),!1}),"#invite"==window.location.hash&&$("#logged-out-top-nav .header-user-login a").length>0&&$("#logged-out-top-nav .header-user-login a").click(),$(".conf-creation-head-menubox").length>0)switch(window.location.hash){case"#edit":$("#landing_header_edit").click();break;case"#invite":$("#landing_header_invite").click();break;case"#preview":$("#landing_header_preview").click();break;case"#send_email":case"#import_contacts":case"#social_promotion":case"#invited_list":case"#wait_list":case"#try_demo":case"#manage_mp4":case"#widget":case"#analyze":case"#boost":case"#add_logo":case"#email_attendees":case"#custom_fields":case"#get_help":case"#download_recording":case"#upgrade":var s=window.location.hash;$("#landing_header_invite").click(),window.location.hash=s}if($("#top-nav-host-conference-link").show(),$(document).on("blur","[id^=conference_registration_pre_conference_responses_attributes_][id$=_response]",function(){check_required_pre_conference_question(this)}),$(document).on("click","#submit_pre_question",function(e){checkPreConferenceQuestionSubmit(e,this)}),$("[id^=landing_header_]").on("click",function(e){switch(this.id){case"landing_header_edit":window.location.hash="edit",e.hasOwnProperty("originalEvent")&&"undefined"!=typeof hopscotch&&hopscotch.endTour();break;case"landing_header_invite":window.location.hash="invite",e.hasOwnProperty("originalEvent")&&"undefined"!=typeof hopscotch&&hopscotch.endTour();break;case"landing_header_show":e.hasOwnProperty("originalEvent")&&"undefined"!=typeof hopscotch&&hopscotch.endTour();break;case"landing_header_preview":window.location.hash="preview",e.hasOwnProperty("originalEvent")&&"undefined"!=typeof hopscotch&&hopscotch.endTour()}}),$(document).on("click","#enter_registration_coupon",function(){$(this).hide(),$("#enter_registration_coupon_form").show()}),$(document).on("click","#enter_registration_coupon_form button",function(e){return e.preventDefault(),$.ajax({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/conference_registrations/apply_coupon_code?coupon_code="+$("#conference_coupon_code").val()}),!1}),$(document).on("click","#email_invite_on_show",function(){$("#email_invite_form_on_show").show(),applySelect2EmailField("#club_profile_invitations")}),$(document).on("click","#cancel_email_invite_form",function(e){return e.preventDefault(),$("#email_invite_form_on_show").hide(),$("#email_invite_on_show").closest(".conf-creation-landing-left-border").show(),!1}),$(document).on("click","#upload_youtube",function(){$(this).html('Processing Recording To <img alt="Youtubeicon" src="/assets/youtubeicon.png">')}),e.is_end&&(new Clipboard("#copy_youtube_url"),$("#crembedtextarea").attr("data-recording-id")&&$.ajax({url:"/recordings/embed_code/"+$("#crembedtextarea").attr("data-recording-id")}),new Clipboard("#copy_embed_recording_code")),e.message_presenter&&$("#message-"+e.message_presenter).click(),$(document).scroll(function(){var e=$(window).scrollTop();$("#conf_creation_head_menubox").hasClass("lockednav")?e<=$("#conf_creation_head_menubox_holder").offset().top-$("#logged-in-top-nav").height()&&($("#conf_creation_head_menubox").removeClass("lockednav"),$("#conf_creation_head_menubox_holder").hide()):$("#conf_creation_head_menubox").length>0&&$("#logged-in-top-nav").length>0&&e>$("#conf_creation_head_menubox").offset().top-$("#logged-in-top-nav").height()&&($("#conf_creation_head_menubox").addClass("lockednav"),$("#conf_creation_head_menubox_holder").show())}),$(document).on("keyup","#room_password",function(){if($("#conference-registration-link").length>0){var e=$("#conference-registration-link").attr("href").split("?")[0];$("#conference-registration-link").attr("href",e+"?share_email=true&room_password="+$(this).val())}}),$("#clockdiv").length>0){var a=new Date(Date.parse(new Date)+1e3*$("#clockdiv").attr("countdown-seconds"));i("clockdiv",a)}e.review_star&&($("#review-conference-link")[0].href+="?bmid="+e.member_id+"&review_star="+e.review_star,$("#review-conference-link").click()),newHostTour={id:"new-host-tour",steps:[{title:"Welcome to Your Event Page",content:"This is your event's live page -- where people will come to register, attend, and then where the recording will live once the event has ended.",target:"landing_header_show",placement:"top",xOffset:-120,arrowOffset:135,nextBtn:"Next",onNext:function(){t(1)}},{title:"Edit Your Event Here",content:"Add a description to tell people why they should attend, add presenters, and fine tune your event in the advanced settings.",target:"landing_header_edit",placement:"top",xOffset:-140,arrowOffset:135,showPrevButton:!0,prevBtn:"Back",nextBtn:"Next",onNext:function(){t(2)}},{title:"Add Your Logo & Images",content:"Put your best foot forward by adding an image and cover photo to your event page, and uploading your logo to the conference room.",target:"landing_header_preview",placement:"top",xOffset:-130,arrowOffset:135,showPrevButton:!0,prevBtn:"Back",nextBtn:"Next",onNext:function(){t(3)}},{title:"Promote Your Event",content:"Once your page is ready, use the tools here to invite people, promote socially, and choose what data to collect on the registration form.",target:"landing_header_invite",placement:"top",xOffset:-100,arrowOffset:135,showPrevButton:!0,prevBtn:"Back",nextBtn:"Next",onNext:function(){t(4)}}],onStart:function(){$(".hopscotch-bubble")[0].className="hopscotch-bubble-white animated"}},e.show_tour&&(hopscotch.startTour(newHostTour,0),t(0))}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conferences}Paloma.callbacks.conferences.upgrade=function(){$(document).on("click",".plan-selection-link",function(e){return $(this).siblings().removeClass("onactive"),$(this).addClass("onactive"),$("#selected-plan-footer-name").html("Selected Plan: "+$(this).attr("plan_name")),e.preventDefault(),!1}),$(document).on("click",".js-checkout-link",function(e){return $(".js-upgrade-step1").addClass("close"),$(".js-upgrade-step2").removeClass("close"),e.preventDefault(),!1})}}(),function(){var e=(Paloma.variableContainer,Paloma.locals),t=e.conferences;Paloma.callbacks.conferences.webinar_created_confirmation=function(){applySelect2EmailField("#club_profile_invitations_modal"),$(".expand").autoGrow(),$(document).on("click",".import-contacts-link",function(){$(".import-section").removeClass("close"),$(".import-contacts-link").addClass("close")}),$("#import-social-select").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),t.importEmailsFromLocalFile("#club_profile_invitations_modal",!0)}}(),function(){Paloma.callbacks.club_manager={};Paloma.locals.club_manager={};Paloma.inheritLocals({from:"/",to:"club_manager"})}(),function(){new Paloma.FilterScope("club_manager"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.billing=function(e){e.login_member&&$.ajax({url:"/community_settings/"+e.club_username+"/refresh_billing_page"})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.change_billing_plan=function(e){function t(t){current_plan=t,current_plan_name=e[t+"_name"],current_plan_code=e[t+"_code"],current_plan_monthly_price=e[t+"_monthly_price"],current_plan_yearly_price=e[t+"_yearly_price"],current_plan_conference_size=e[t+"_conference_size"],save_amount=12*current_plan_monthly_price-current_plan_yearly_price,$(".js-room-size").html(current_plan_conference_size),$("#billing_plan_type").val(current_plan_code),$(".js-chosen-plan-name").html("New Plan: "+current_plan_name),"monthly"==$("#billing_cycle").val()?($(".js-monthly-price-display").html("$"+e[t+"_monthly_price"]+"<span>/month</span>"),$(".js-chosen-plan-price").html("$"+current_plan_monthly_price+"/month"),$(".js-chosen-plan-billing-cycle").html("Monthly"),$("#regular_price").val(current_plan_monthly_price)):"annual"==$("#billing_cycle").val()?($(".js-monthly-price-display").html("$"+Math.round(e[t+"_yearly_price"]/12)+"<span>/month</span>"),annual_monthly_price=Math.round(current_plan_yearly_price/12),$(".js-chosen-plan-price").html("$"+annual_monthly_price+"/month"),$(".js-chosen-plan-billing-cycle").html("1 year commitment"),$("#regular_price").val(annual_monthly_price)):($(".js-monthly-price-display").html("$"+Math.round(e[t+"_yearly_price"]/12)+"<span>/month</span>"),$(".js-chosen-plan-price").html("$"+current_plan_yearly_price+"/year"),$(".js-chosen-plan-billing-cycle").html("Annual"),$("#regular_price").val(current_plan_yearly_price)),$(".js-monthly-price-display2").html("<span>Month-to-month</span> \xb7 $"+e[t+"_monthly_price"]+" billed monthly. No commitment, cancel anytime"),$(".js-annual-price-display2").html("<span>Annual Plan</span> \xb7 $"+Math.round(e[t+"_yearly_price"]/12)+" billed monthly for 12 months <span class='js-save-amount green'></span>"),$(".js-full-annual-price-display2").html("<span>Annual Plan</span> \xb7 $"+e[t+"_yearly_price"]+" billed annually"),$(".js-save-amount").html("Save $"+(12*e[t+"_monthly_price"]-e[t+"_yearly_price"])+"!"),calculateTodayPrice()}$(document).on("change","#channel_billing_plan",function(){t(this.options[this.selectedIndex].getAttribute("temp_plan_name")),$("#chosen_plan").val(this.options[this.selectedIndex].getAttribute("temp_plan_name"))}),$(document).on("click",".js-continue-to-checkout",function(e){return $("#js-select-plan-section").addClass("close"),$("#js-make-payment-section").removeClass("close"),setUpCreditCardForm(),e.preventDefault(),!1}),$(document).on("click",".js-choose-monthly-plan",function(e){return $(".js-choose-annual-plan").removeClass("onactive"),$(".js-choose-full-annual-plan").removeClass("onactive"),$(".js-choose-monthly-plan").addClass("onactive"),$("#billing_cycle").val("monthly"),t($("#chosen_plan").val()),e.preventDefault(),!1}),$(document).on("click",".js-choose-annual-plan",function(e){return($(this).hasClass("js-choose-annual-plan-both")&&"monthly"==$("#billing_cycle").val()||!$(this).hasClass("js-choose-annual-plan-both"))&&($(".js-choose-monthly-plan").removeClass("onactive"),$(".js-choose-full-annual-plan").removeClass("onactive"),$(".js-choose-annual-plan").addClass("onactive"),$("#billing_cycle").val("annual"),t($("#chosen_plan").val())),e.preventDefault(),!1}),$(document).on("click",".js-choose-full-annual-plan",function(e){return $(".js-choose-monthly-plan").removeClass("onactive"),$(".js-choose-annual-plan").removeClass("onactive"),$(".js-choose-full-annual-plan").addClass("onactive"),$(".js-choose-annual-plan-both").addClass("onactive"),$("#billing_cycle").val("full_annual"),t($("#chosen_plan").val()),e.preventDefault(),!1}),$("#channel_billing_plan").trigger("change"),$("#credit-card-select").msDropdown(),$("#credit_card_used, #credit_card_new").click(function(){"onactive"!=this.className&&($("#credit_card_used, #credit_card_new").toggleClass("onactive"),$("#saved_credit_card_form, #credit-card-form").toggle()),$("#credit_card_usage").val("credit_card_used"==this.id?$("#credit-card-select").val():"")})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.edit_credit_card=function(){setUpCreditCardForm()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.members=function(){setUpMemberProfileEdit()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.membership_dues=function(){$("#require-membership-link").click(function(e){return $("#does-not-require-membership-link").removeClass("onactive"),$(this).addClass("onactive"),$("#membership-dues-form").removeClass("close"),$("#club_club_membership_type_attributes_membership_amount").val(0),e.preventDefault(),!1}),$("#does-not-require-membership-link").click(function(e){return $("#require-membership-link").removeClass("onactive"),$(this).addClass("onactive"),$("#membership-dues-form").addClass("close"),$("#club_club_membership_type_attributes_membership_amount").val(0),e.preventDefault(),!1})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.privacy=function(){$(function(){$("#set-public-link").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_view_permission").val("public"),e.preventDefault(),!1}),$("#set-private-link").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_view_permission").val("private"),e.preventDefault(),!1}),$("#set-top-secret-link").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_view_permission").val("top_secret"),e.preventDefault(),!1}),$("#community_application_optioin_yes").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_require_application").val(!0),$("#application_question_link").css("display",""),e.preventDefault(),!1}),$("#community_application_optioin_no").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_require_application").val(!1),$("#application_question_link").css("display","none"),e.preventDefault(),!1}),$("#only-organizers-can-invite-link").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_who_can_invite").val("admins"),e.preventDefault(),!1}),$("#all-members-can-invite-link").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_who_can_invite").val("all_members"),e.preventDefault(),!1}),$("#member-profile-visible-link-yes").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_member_profile_visible").val(!0),e.preventDefault(),!1}),$("#member-profile-visible-link-no").click(function(e){return $(this).addClass("onactive").siblings().removeClass("onactive"),$("#club_manager_member_profile_visible").val(!1),e.preventDefault(),!1})})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.show=function(e){$("#club_category_ids").select2({tags:e.categories,placeholder:"Click to select a category",maximumSelectionSize:4})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_manager}Paloma.callbacks.club_manager.update=function(){$("select.category-select").select2({closeOnSelect:!1,placeholder:"Click to select a category"})}}(),function(){Paloma.callbacks.tasks={};Paloma.locals.tasks={};Paloma.inheritLocals({from:"/",to:"tasks"})}(),function(){new Paloma.FilterScope("tasks"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.tasks}Paloma.callbacks.tasks.edit=function(e){$("#task_worker_ids").select2({placeholder:"Select who would you like to send Kudos to?",allowClear:!0,ajax:{url:"/communities/"+e.community_username+"/tasks/0/task_assignee",dataType:"json",data:function(e,t){return{query:e,page:t}},results:function(e){return{results:$.map(e.community_profiles,function(e){return{id:e.id,text:e.display_name}}),more:e.more}}}}),$("#task_worker_ids").select2("data",{id:e.default_select_id,text:e.default_select_name})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.tasks}Paloma.callbacks.tasks["new"]=function(e){$("#task_worker_ids").select2({placeholder:"Select who would you like to send Kudos to?",allowClear:!0,ajax:{url:"/communities/"+e.community_username+"/tasks/0/task_assignee",dataType:"json",data:function(e,t){return{query:e,page:t}},results:function(e){return{results:$.map(e.community_profiles,function(e){return{id:e.id,text:e.display_name}}),more:e.more}}}}),$("#task_worker_ids").select2("data",{id:e.default_select_id,text:e.default_select_name})}}(),function(){Paloma.callbacks.account_settings={};Paloma.locals.account_settings={};Paloma.inheritLocals({from:"/",to:"account_settings"})}(),function(){new Paloma.FilterScope("account_settings"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.account_settings}Paloma.callbacks.account_settings.index=function(){function e(e){var t=140/e.w,o=140/e.h;$("#member-photo-preview").css({width:t*$("#member-photo-image").width()+"px",height:o*$("#member-photo-image").height()+"px",marginLeft:"-"+Math.round(t*e.x)+"px",marginTop:"-"+Math.round(o*e.y)+"px"})}function t(t){var o=$("#member-photo-image").naturalWidth()/$("#member-photo-image").width();t.x<0&&(t.x=0),t.y<0&&(t.y=0),$("#member_crop_x").val(t.x*o),$("#member_crop_y").val(t.y*o),$("#member_crop_w").val(t.w*o),$("#member_crop_h").val(t.h*o),e(t)}function o(e){"undefined"!=typeof jcrop_api&&jcrop_api.destroy();var o=$('<img id="member-photo-image" />').attr("src",e);$(".member-photo-upload-original").html(o),$("#member-photo-image").Jcrop({onChange:t,onSelect:t,boxHeight:380,aspectRatio:1,setSelect:[0,0,520,520]},function(){jcrop_api=this})}$("#delete-photo-link").click(function(){$(".cover-logo").html('<img id="member-photo-preview" src="/assets/default-profile-picture.jpg">'),$("#member_delete_my_photo").val(!0),"undefined"!=typeof jcrop_api&&jcrop_api.destroy()}),$("#member_time_zone, #member_region_id, #member_language_id").customSelect(),$("#member_photo").on("change",function(){}),$(".member-photo-upload-original").attr("data-original")&&o($(".member-photo-upload-original").attr("data-original")),$("select.category-select").select2({closeOnSelect:!1,placeholder:"Click to select interests"})}}(),function(){var e=(Paloma.variableContainer,Paloma.locals),t=e.account_settings;Paloma.callbacks.account_settings.my_contacts=function(){t.importEmailsFromLocalFile("#my_contact_improt_emails",!1)}}(),function(){Paloma.callbacks.guide={};Paloma.locals.guide={};Paloma.inheritLocals({from:"/",to:"guide"})}(),function(){new Paloma.FilterScope("guide"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.guide}Paloma.callbacks.guide.step1=function(){}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.guide}Paloma.callbacks.guide.step2=function(){}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.guide}Paloma.callbacks.guide.step3=function(){$("select").customSelect()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.guide}Paloma.callbacks.guide.step4=function(){}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.guide}Paloma.callbacks.guide.step5=function(){}}(),function(){Paloma.callbacks.conference_declines={};Paloma.locals.conference_declines={};Paloma.inheritLocals({from:"/",to:"conference_declines"})}(),function(){new Paloma.FilterScope("conference_declines"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conference_declines}Paloma.callbacks.conference_declines.create=function(){}}(),function(){Paloma.callbacks.content_objects={};Paloma.locals.content_objects={};Paloma.inheritLocals({from:"/",to:"content_objects"})}(),function(){new Paloma.FilterScope("content_objects"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.content_objects}Paloma.callbacks.content_objects.show=function(){addInputFocusStyle(),addSubmissionOnEnterBehavior(".submission-on-enter"),$("input:checkbox").prettyCheckable({color:"green"}),$("input:radio").prettyCheckable({color:"green"})}}(),function(){Paloma.callbacks.login={};Paloma.locals.login={};Paloma.inheritLocals({from:"/",to:"login"})}(),function(){new Paloma.FilterScope("login"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.login}Paloma.callbacks.login.modal_login=function(){$("input:checkbox").not(".do-not-decorate").prettyCheckable({color:"green"}),$("#show_signin_form").on("click",function(){$("#modal_signin_form").show(),$("#modal_signup_form").hide(),$("#show_signin_form").parent().hide(),$("#show_signup_form").parent().show(),$("#show_signin_text").hide(),$("#show_signup_text").show(),$(".conf-popup-title").text("Log in to watch the recording")}),$("#show_signup_form").on("click",function(){$("#modal_signin_form").hide(),$("#modal_signup_form").show(),$("#show_signup_form").parent().hide(),$("#show_signin_form").parent().show(),$("#show_signin_text").show(),$("#show_signup_text").hide(),$(".conf-popup-title").text("Sign up for BigMarker to watch the recording")})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.login}Paloma.callbacks.login.popup_login=function(){checkNewMemberFields(),checkPasswordChange(),setFormInput(),$(".sign-up-link").click(function(){$("#popup-password-reset").addClass("close"),$("#popup-login").addClass("close"),$("#popup-register").removeClass("close")}),$(".reset-password-link").click(function(){$("#popup-login").addClass("close"),$("#popup-register").addClass("close"),$("#popup-password-reset").removeClass("close")}),$(".login-link").click(function(){$("#popup-register,#popup-new-password-sent").addClass("close"),$("#popup-login").removeClass("close")}),$(function(){$(window).width()<768&&($("#popup-login").hasClass("close")?($("#popup-register").addClass("close"),window.location="/register"):($("#popup-login").addClass("close"),window.location="/login"))})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.login}Paloma.callbacks.login.simple_popup_login=function(){function e(){$("#attendee_name").val().length>0&&$("#attendee_email").val().length>0?($("#enter-as-guest-button").parent().removeClass("disabled-guest-joinbox-btu"),$("#enter-as-guest-button").attr("disabled",!1)):($("#enter-as-guest-button").parent().addClass("disabled-guest-joinbox-btu"),$("#enter-as-guest-button").attr("disabled",!0))}$("#attendee_name").length>0&&e(),$(document).on("click",".open-email-sign-in-link",function(e){return $("#login-choice-box").addClass("close"),$("#email-login-box").removeClass("close"),$("#email-signup-box").addClass("close"),$("#simple-login-sub-title").html("Sign in with email"),e.preventDefault(),!1}),$(document).on("click",".open-email-sign-up-link",function(e){return $("#login-choice-box").addClass("close"),$("#email-login-box").addClass("close"),$("#email-signup-box").removeClass("close"),$("#simple-login-sub-title").html("Sign up with email"),e.preventDefault(),!1}),$(document).on("click","#social-signin-link",function(e){return $("#email-signup-box").addClass("close"),$("#login-choice-box").removeClass("close"),$("#simple-login-sub-title").html("Please sign in"),e.preventDefault(),!1}),$(document).on("keyup","#attendee_name, #attendee_email",function(){e()}),$("input:checkbox").prettyCheckable({color:"green"}),"#invite"==window.location.hash&&$(".link_signinemail").click()}}(),function(){Paloma.callbacks.conference_registrations={};Paloma.locals.conference_registrations={};Paloma.inheritLocals({from:"/",to:"conference_registrations"})}(),function(){new Paloma.FilterScope("conference_registrations"),Paloma.variableContainer
}(),function(){var e=(Paloma.variableContainer,Paloma.locals),t=e.conference_registrations;Paloma.callbacks.conference_registrations.add_registers=function(){function e(e){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);clubUsername=$("#conference_club_username").val(),$(e).select2({createSearchChoice:function(e){return e=e.replace(/\s+/g,""),t.test(e)?{id:e,text:e}:void 0},allowClear:!0,multiple:!0,tokenSeparators:[",",";"," "],selectOnBlur:!1,closeOnSelect:!0,tags:$(e).data("tags"),ajax:{url:"/communities/"+clubUsername+"/conferences/0/all_friends.json",dataType:"json",data:function(e,t){return{query:e,page:t,all_members:!1,all_contacts:!1}},results:function(e){var t=new Array;t=$.map(e.tags,function(e){return{id:e.id,text:e.text,children:e.children}});var o=e.more_contacts;return{results:t,more:o}}}})}function o(){if(select2){var e=inputArea.select2("data"),t=e.indexOf(original_selection);t>-1&&e.splice(t,1),inputArea.select2("data",e)}else inputArea.val("");""!=$("#import-emails-result").html()?$(".create-button input").attr("disabled",!1):$(".create-button input").attr("disabled",!0)}$(".expand").autoGrow(),t.importEmailsFromLocalFile("#add_registers_data",!0),e("#add_registers_data"),$("#import-file").fileupload({dataType:"json",add:function(e,t){o(),$("#import-emails-result").html(""),$("#import-emails-progress .bar").css("width","0%");var i=t.originalFiles[0];$("#import-emails-filename").html(i.name),original_file=i.name,t.submit()},progressall:function(e,t){var o=parseInt(t.loaded/t.total*100,10);$("#import-emails-progress .bar").css("width",o+"%")},done:function(e,t){if(import_num=t.result.total,import_basename=t.result.basename,import_extname=t.result.extname,import_num&&t.result.content.length){var o=$('<table class="results" />'),i=t.result.content;if(fileContent=t.result,i.length){for(var n=$("<tr />"),s=0;s<i[0].length;s++){var a=$("<th />"),r=$('<select data-index="'+(s+1)+'" />'),l=$("<option />");l.html("-- Ignore --"),l.val("null"),l.appendTo(r),l.val("null");var l=$("<option />");l.html("Email"),l.val("email"),l.appendTo(r);var l=$("<option />");l.html("First Name"),l.val("firstname"),l.appendTo(r);var l=$("<option />");l.html("Last Name"),l.val("lastname"),l.appendTo(r),r.appendTo(a),a.appendTo(n)}n.appendTo(o),$.each(t.result.content,function(e,t){var i=$("<tr />");0===e&&i.addClass("first-tr"),$.each(t,function(t,o){if(0===e){var n=/email|firstname|lastname/i;n.test(o)&&(isFirstlineTitle=!0)}var s=$("<td />");s.html(o),s.appendTo(i)}),i.appendTo(o)})}o.appendTo("#import-emails-result"),isFirstlineTitle&&$(".first-tr").hide(),$("#import-emails-final").show(),isFirstlineTitle?$("#import-emails-ifheader").prop("checked",!0):$("#import-emails-ifheader").prop("checked",!1),addImportSelection(!0),$(".create-button input").attr("disabled",!0),$("#assign_field_note").show()}else{var c="The file you upload is not correct, please select again! ";c+=t.result.error_message,$("#import-emails-result").html(c)}}})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conference_registrations}Paloma.callbacks.conference_registrations.confirmation=function(){new Clipboard("#copy_link")}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conference_registrations}Paloma.callbacks.conference_registrations["new"]=function(){$("#next-step-link").length<1&&setUpCreditCardForm(),$("[id^=conference_registration_pre_conference_responses_attributes_][id$=_response]").blur(function(){check_required_pre_conference_question(this)}),$("#register_with_pre_response").on("click",function(e){if($("[id^=conference_registration_pre_conference_responses_attributes_][id$=_response]").length>0){e.preventDefault();var t=!0;$.each($("[id^=conference_registration_pre_conference_responses_attributes_][id$=_response]"),function(e,o){t=t&&check_required_pre_conference_question(o)}),t&&$(this).closest("form").submit()}})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conference_registrations}Paloma.callbacks.conference_registrations.share_for_free=function(){$(document).on("click",".js-share-for-free",function(e){return $("#share-for-free-start").hide(),$("#share-for-free-end").show(),e.preventDefault(),!1}),Dropzone.autoDiscover=!1;var e=new Dropzone("#screen-shot-upload-for-free",{paramName:"conference_registration_screen_shot",autoProcessQueue:!1,dictDefaultMessage:"your custom message",previewsContainer:"#js-preview-box",clickable:".js-dropzone-clickable",uploadMultiple:!1,success:function(e,t){$("#share-for-free-end").hide(),$("#js-share-for-free-registration").show(),$("#screen_shot_id").val(t.fileID),t.returnURL&&window.location.replace(t.returnURL)}});$(".dz-message").css("background-image","none"),$(".dropzone").css("padding","30px");var t="blah";e.on("addedfile",function(o){$(".js-pre-file-selection").hide(),$(".js-post-file-selection").show(),"blah"!=t&&e.removeFile(t),t=o}),$(document).on("click","#js-upload-screenshot-button",function(){e.processQueue()})}}(),function(){Paloma.callbacks.club_profiles={};Paloma.locals.club_profiles={};Paloma.inheritLocals({from:"/",to:"club_profiles"})}(),function(){new Paloma.FilterScope("club_profiles"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_profiles}Paloma.callbacks.club_profiles.edit_credit_card=function(){setUpCreditCardForm()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_profiles}Paloma.callbacks.club_profiles.index=function(e){"modal_invite"==e.source&&$("#invite_link").click()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.club_profiles}Paloma.callbacks.club_profiles.show=function(){var e=window.location.hash.substring(1);"send_message"==e&&$("#send_message_link").click()}}(),function(){Paloma.callbacks.club_invitations={};Paloma.locals.club_invitations={};Paloma.inheritLocals({from:"/",to:"club_invitations"})}(),function(){new Paloma.FilterScope("club_invitations"),Paloma.variableContainer}(),function(){var e=(Paloma.variableContainer,Paloma.locals),t=e.club_invitations;Paloma.callbacks.club_invitations["new"]=function(){applySelect2EmailFieldForClub("#group_club_invitation_member_input"),$(".expand").autoGrow(),t.importEmailsFromLocalFile("#group_club_invitation_member_input",!0)}}(),function(){Paloma.callbacks.home={};Paloma.locals.home={};Paloma.inheritLocals({from:"/",to:"home"})}(),function(){new Paloma.FilterScope("home"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.home}Paloma.callbacks.home.buy_now=function(e){function t(t){o=t,i=e[t+"_name"],n=e[t+"_code"],s=e[t+"_monthly_price"],a=e[t+"_yearly_price"],r=e[t+"_conference_size"],$("#billing_plan_type").val(n),$("#js-current-plan-name").html(i),$("#js-current-plan-conference-size").html(r),$("#js-billing-cycle-monthly-per-month-price").html("<span>$</span>"+s+"<i>/mo</i>"),$("#js-billing-cycle-annual-per-month-price").html("<span>$</span>"+a/12+"<i>/mo</i>"),$("#js-"+t+"-selector").siblings().removeClass("onactive"),$("#js-"+t+"-selector").addClass("onactive"),$("#js-annual-save-amount-circle").html("<span><i></i></span>Annual Plan (Save $"+(12*s-a)+")"),"monthly"==$("#billing_cycle").val()?($("#js-billing-plan-type").html(i+" Monthly Plan"),$(".js-billing-plan-price").html("$"+s+".00"),$("#js-free-trial-off").html("($"+s+".00)"),$("#js-billing-cycle").html("month")):($("#js-billing-plan-type").html(i+" Annual Plan"),$(".js-billing-plan-price").html("$"+a/12+".00"),$("#js-free-trial-off").html("($"+a/12+".00)"),$("#js-billing-cycle").html("month with 1 year commitment.")),"plan4"==o?($(".js-billing-section").hide(),$(".js-free-section").show()):($(".js-billing-section").show(),$(".js-free-section").hide(),$(".js-registration-features-no").hide(),$(".js-registration-features-yes").show())}var o="plan1",i=e.plan1_name,n=e.plan1_code,s=e.plan1_monthly_price,a=e.plan1_yearly_price,r=e.plan1_conference_size;$(document).on("keyup","#confirm_password",function(){$("#new_member_password").val().substring(0,$(this).val().length)!=$(this).val()?($(this).parent().addClass("error"),$(this).siblings(".nbilling-sp-error-text").text("Passwords do not match")):($(this).parent().removeClass("error"),$(this).siblings(".nbilling-sp-error-text").text(""))}),$(document).on("change","#chosen_billing_plan",function(e){return t($("#chosen_billing_plan").val()),e.preventDefault(),!1}),$(document).on("change","#billing_cycle_monthly, #billing_cycle_annual",function(){}),$(document).on("click","#js-annual-billing-li",function(){$("#js-annual-billing-li").addClass("onactive"),$("#js-monthly-billing-li").removeClass("onactive"),$("#billing_cycle").val("annual"),t(o)}),$(document).on("click","#js-monthly-billing-li",function(){$("#js-monthly-billing-li").addClass("onactive"),$("#js-annual-billing-li").removeClass("onactive"),$("#billing_cycle").val("monthly"),t(o)}),$(document).on("click","#js-coupon-code-link",function(){$("#js-coupon-code-link").hide(),$("#js-coupon-code-section").show()}),t($("#chosen_billing_plan").val()),$(document).on("click",".js-billing-plan-selector",function(){t($(this).attr("plan"))})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.home}Paloma.callbacks.home.discover=function(e){$("#category_id").html(e.show_home_search_name),""==$("#category_id").text()?$(".body-discover-tips").hide():$(".body-discover-tips").show(),$(".header-search-border").removeClass("onactive")}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.home}Paloma.callbacks.home.host_dashboard=function(e){function t(e){currentStep=e-1,$(".js-host-tour-step"+currentStep).hide(),$(".js-host-tour-step"+e).show(),e>0?$(".js-host-tour-step-count").html(e+" of 4").show():4==e&&$(".js-host-tour-step-count").html(e+" of 4").hide()}$(document).on("click",".js-enter-button",function(e){return document.location=$(".js-enter-link-"+$(this).attr("event_id")).attr("href"),e.preventDefault(),!1}),$(document).on("click",".js-action-arrow",function(e){return $(this).parents(".actions-btn,.liveon-btn").toggleClass("onactive"),e.preventDefault(),!1}),$(document).on("click",".js-start-host-tour",function(e){return $(".host-mask-box-out").show(),$(".js-host-tour-step-count").hide(),$(".js-host-tour-step1,.js-host-tour-step2,.js-host-tour-step3,.js-host-tour-step4").hide(),$(".js-host-tour-step0").show(),e.preventDefault(),!1}),$(document).on("click",".js-exist-host-tour",function(e){return $(".host-mask-box-out").hide(),e.preventDefault(),!1}),$(document).on("click",".js-to-next-host-step",function(e){return t($(this).attr("next_step")),e.preventDefault(),!1}),$(window).on("scroll",function(){load_more_past_host_event_data&&$(window).scrollTop()+$("#js-footer").height()+400>=$(document).height()-$(window).height()&&(load_more_past_host_event_data=!1,$.ajax({url:"/home/load_more_host_events?timing=past&page="+$("#past-event-page").val()}))}).scroll(),$(document).on("click",".js-toggle-system-check",function(e){return $(".js-system-check-section").toggleClass("onactive"),e.preventDefault(),!1}),$(function(){function t(e){$.ajax({url:"/save_speed_test_results?from_page=host_dashboard&result="+encodeURIComponent(JSON.stringify(e))});var t=e.download;1>=t?($(".js-speed-fail").removeClass("close"),$(".js-speed-pass").addClass("close"),$(".js-speed-message").text("Slow internet speed"),$("#js-speed-description").text("Download: "+t+". Upload: "+e.upload),i=!1):t>1&&5>=t?($(".js-speed-fail").removeClass("close"),$(".js-speed-pass").addClass("close"),$(".js-speed-message").text("Medium internet speed"),$("#js-speed-description").text("Download: "+t+". Upload: "+e.upload),i=!1):($(".js-speed-pass").removeClass("close"),$(".js-speed-fail").addClass("close"),$(".js-speed-message").text("High speed internet"),$("#js-speed-description").text("Yours looks good")),i?($(".bh-fail").hide(),$(".bh-pass").show(),$(".js-system-check-section").removeClass("onactive")):($(".bh-pass").hide(),$(".bh-fail").show(),$(".js-hide-in-unsupported-browser").hide(),$(".js-system-check-section").addClass("onactive"))}function o(e){$.ajax({url:"/save_speed_test_results?error="+encodeURIComponent(JSON.stringify(e))}),$(".js-speed-fail").removeClass("close"),$(".js-speed-pass").addClass("close"),$(".js-speed-message").text("We have trouble while testing your speed")}var i=!0;DetectRTC.load(function(){$("#js-os-version").html(DetectRTC.osName),$(".js-browser-name").html(DetectRTC.browser.name),$(".js-browser-version").html(DetectRTC.browser.fullVersion),"iOS"==DetectRTC.osName?($(".js-os-fail").removeClass("close"),$(".js-os-pass").addClass("close"),i=!1):($(".js-os-fail").addClass("close"),$(".js-os-pass").removeClass("close")),DetectRTC.browser.isChrome?DetectRTC.browser.version<48?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Chrome browser out of date."),i=!1):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Chrome browser up to date")):DetectRTC.browser.isFirefox?DetectRTC.browser.version<39?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Chrome browser out of date."),i=!1):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Firefox browser up to date.")):DetectRTC.browser.isOpera?DetectRTC.browser.version<37?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Opera out of date."),i=!1):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Opera up to date.")):($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Unsupported Browser"),i=!1),i?($(".bh-fail").hide(),$(".bh-pass").show()):($(".bh-pass").hide(),$(".bh-fail").show(),$(".js-hide-in-unsupported-browser").hide(),$(".js-system-check-section").addClass("onactive"))}),SomApi.account="SOM5763022da6bf4",SomApi.domainName="*.bigmarker.com",SomApi.config.sustainTime=4,SomApi.onTestCompleted=t,SomApi.onError=o,e.run_speed_test&&SomApi.startTest()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.home}Paloma.callbacks.home.index=function(e){$(document).on("focus",".home-comment-form",function(){$(this).find(".newpost-button").removeClass("close"),$(this).find(".home-right-border-5").addClass("onactive"),$(this).find(".home-comment-text-area").autoGrow()}),$(document).on("submit",".home-comment-form",function(){$(this).find(".home-right-border-5").removeClass("onactive"),$(this).find(".newpost-button").addClass("close")}),$(document).on("click","#load-more-new-link",function(){$(".home-load").addClass("close"),$("#loading-next-page").removeClass("close")}),e.new_short_modal_conference_params&&$("#top-nav-host-conference-link").click()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.home}Paloma.callbacks.home.my_webinar=function(e){("1"==e.page||null==e.page)&&$("#recording-conference .previous_page").hide()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.home}Paloma.callbacks.home.stream_view=function(){$(document).on("focus",".home-comment-form",function(){$(this).find(".newpost-button").removeClass("close"),$(this).find(".home-right-border-5").addClass("onactive"),$(this).find(".home-comment-text-area").autoGrow()}),$(document).on("submit",".home-comment-form",function(){$(this).find(".home-right-border-5").removeClass("onactive"),$(this).find(".newpost-button").addClass("close")}),$.ajax({url:"/home/stream_activities"}),$(document).on("click","#load-more-new-link",function(){$(".home-load").addClass("close"),$("#loading-next-page").removeClass("close")})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.home}Paloma.callbacks.home.welcome=function(){$.ajax({url:"/home/generate_future_sample_event"}),$.ajax({url:"/home/generate_past_sample_event"})}}(),function(){Paloma.callbacks.sponsorships={};Paloma.locals.sponsorships={};Paloma.inheritLocals({from:"/",to:"sponsorships"})}(),function(){new Paloma.FilterScope("sponsorships"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.sponsorships}Paloma.callbacks.sponsorships.edit_credit_card=function(){setUpCreditCardForm()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.sponsorships}Paloma.callbacks.sponsorships["new"]=function(){$(document).on("click","#start-sponsorhip-link",function(e){return $("#sponsorship-info").addClass("close"),$("#sponsorship-step-1").removeClass("close"),$(".expand").autoGrow(),e.preventDefault(),!1}),$(document).on("change","#sponsorship_logo",function(e){var t=this.files[0],o=window.URL||window.webkitURL,i=o.createObjectURL(t);return $("#sponsorship-logo-preview").attr("src",i),e.preventDefault(),!1})}}(),function(){Paloma.callbacks.payment_requests={};Paloma.locals.payment_requests={};Paloma.inheritLocals({from:"/",to:"payment_requests"})}(),function(){new Paloma.FilterScope("payment_requests"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.payment_requests}Paloma.callbacks.payment_requests["new"]=function(){$("#payment_request_paypal_email").customSelect()}}(),function(){Paloma.callbacks.widget={};Paloma.locals.widget={};Paloma.inheritLocals({from:"/",to:"widget"})}(),function(){new Paloma.FilterScope("widget"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.widget}Paloma.callbacks.widget.generate=function(e){$(function(){$("#bw-bigsmall-checkbox input").prettyCheckable({color:"green"}),$(".bw-colors li").each(function(){var e="#"+$(this).attr("data-color");$("div",this).css("background-color",e)});var t=function(t){"undefined"==typeof t&&(t=!0);var o="";$("input[name=bw-conferences]").each(function(){$.trim($(this).val())&&(o.length>0&&(o+=","),o+=$.trim($(this).val().trim()))});var i="";$("input[name=bw-club]").val()&&(i=$("input[name=bw-club]").val());var n="";$(".bw-colors li.onactive").attr("data-color")&&(n=$(".bw-colors li.onactive").attr("data-color"));var s="480x270";$("input[name=bw-size]").val()&&(s=$("input[name=bw-size]").val());var a=e.btext;$(".bw-button-text").attr("placeholder",a),$(".bw-button-text").val()&&(a=$(".bw-button-text").val());var r="";if($("#bw-bigsmall-checkbox input:checked").val()&&(r=$("#bw-bigsmall-checkbox input:checked").val()),i&&n&&s){var l=e.root_url;l+="widget/script.js?",l+="club="+i,l+="&style=club",l+="&color="+n,l+="&size="+s,l+="&cid="+e.club_id;var c="";c+='<div id="bigmarker-club-widget-container'+e.club_id+'">',c+="</div>",c+='<script src="'+l+'"',c+=' type="text/javascript"></script>',$("#bw-code-club").val(c),t&&$("#bw-preview-club").html(c);var l=e.root_url;l+="widget/script.js?",l+="club="+i,l+="&style=conference",l+="&color="+n,l+="&btext="+a,l+="&bs="+r,l+="&cid="+e.club_id,o&&(l+="&conferences="+o);var c="";c+='<div id="bigmarker-conference-widget-container'+e.club_id+'">',c+="</div>",c+='<script src="'+l+'"',c+=' type="text/javascript"></script>',$("#bw-code-conference").val(c),t&&$("#bw-preview-conference").html(c);var l=e.root_url;l+="widget/script.js?",l+="club="+i,l+="&style=conferences",l+="&color="+n,o&&(l+="&conferences="+o),l+="&cid="+e.club_id;var c="";c+='<div id="bigmarker-conferences-widget-container'+e.club_id+'">',c+="</div>",c+='<script src="'+l+'"',c+=' type="text/javascript"></script>',$("#bw-code-conferences").val(c),t&&$("#bw-preview-conferences").html(c)}};t();var o={source:"/widget/club_usernames",minLength:2,select:function(e,o){$(this).val(o.item.value),t()}};$("input[name=bw-club]").autocomplete(o),$(".bw-colors li").on("click",function(){$(".bw-colors li").removeClass("onactive"),$(this).addClass("onactive"),t()}),$(".embed-conference-size-choose li").on("click",function(){var e=$(".bw-width",this).val(),o=$(".bw-height",this).val();$("input[name=bw-size]").val(e+"x"+o),$(".embed-conference-size-choose li").removeClass("onactive"),$(this).addClass("onactive"),t(!1)}),$(".bw-custom input[type=text]").on("blur\xb4\xb4\xb4\xb4\xb4\xb4\xb4\xb4\xb4\xb4\xb4\xb4",function(){var e=$(".bw-custom .bw-width").val(),o=$(".bw-custom .bw-height").val();$("input[name=bw-size]").val(e+"x"+o),t(!1)}),$(".bw-button-text").on("keyup",function(){$(".bw-button a").text($(this).val()),t(!1)}),$(".bw-button-text").on("blur",function(){}),$("#bw-bigsmall-checkbox li a").on("click",function(){t()}),new Clipboard("#bw-code-conference-copy")})}}(),function(){Paloma.callbacks.conference_schedule={};Paloma.locals.conference_schedule={};Paloma.inheritLocals({from:"/",to:"conference_schedule"})}(),function(){new Paloma.FilterScope("conference_schedule"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.conference_schedule}Paloma.callbacks.conference_schedule["new"]=function(){var e=function(e){var t=(0|e)%100;return e+(t>3&&21>t?"th":["th","st","nd","rd"][t%10]||"th")},t=function(){$(".schedule-agenda input[type=text]").each(function(t){i=t+1,$(this).attr("name","conference[coverings_attributes]["+i+"][title]"),$(this).attr("placeholder",e(i)+" agenda topic")})};t(),$(".schedule-agenda-add").on("click",function(){if($(".schedule-covering-list").children().length<5){var e='<div class="schedule-agenda">';e+='<input name="" type="text">',e+='<span class="schedule-agenda-close">x</span>',e+="</div>",$(".schedule-covering-list").append(e),t()}else $(".schedule-agenda-add").addClass("close")}),$(document).on("click",".schedule-agenda-close",function(){$(this).parent().remove(),t()}),$("#conference_start_time").datepicker({minDate:0,dateFormat:"MM d, yy"}),$("#category-ids-select").select2(),$("#conference_club_username").on("change",function(){var e="/conference_schedule/get_club";e+="?username="+$("option:selected",this).val(),$.getJSON(e,function(e){console.log(e),$("#category-ids-select").select2("val",e.category_ids)})}),$("#conference_club_username").trigger("change")}}(),function(){Paloma.callbacks.reviews={};Paloma.locals.reviews={};Paloma.inheritLocals({from:"/",to:"reviews"})}(),function(){new Paloma.FilterScope("reviews"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.reviews}Paloma.callbacks.reviews["new"]=function(e){var t=!0;switch($(document).on("click",".rating-star",function(e){return $("#review_question1_rating").val($(this).attr("star-value")),$(this).parent("li").siblings().removeClass("onactive"),$(this).parent("li").addClass("onactive"),$(".review-chip-in-section").removeClass("close"),t=!1,e.preventDefault(),!1}),$(document).on("mouseover",".rating-star",function(e){return t&&($(this).parent("li").siblings().removeClass("onactive"),$(this).parent("li").addClass("onactive"),$("#review_question1_rating").val($(this).attr("star-value"))),e.preventDefault(),!1}),$(document).on("click","#no-chipin-link",function(){$("#no-chipin-link").parents("form").submit()}),e.review_star){case"1":$("#1-star-link").click();break;case"2":$("#2-star-link").click();break;case"3":$("#3-star-link").click();break;case"4":$("#4-star-link").click();break;case"5":$("#5-star-link").click()}}}(),function(){Paloma.callbacks.credit_cards={};Paloma.locals.credit_cards={};Paloma.inheritLocals({from:"/",to:"credit_cards"})}(),function(){new Paloma.FilterScope("credit_cards"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.credit_cards}Paloma.callbacks.credit_cards["new"]=function(){setUpCreditCardForm()}}(),function(){Paloma.callbacks.web_summit_registrations={};Paloma.locals.web_summit_registrations={};Paloma.inheritLocals({from:"/",to:"web_summit_registrations"})}(),function(){new Paloma.FilterScope("web_summit_registrations"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.web_summit_registrations}Paloma.callbacks.web_summit_registrations.register=function(){}}(),function(){Paloma.callbacks.registration_custom_fields={};Paloma.locals.registration_custom_fields={};Paloma.inheritLocals({from:"/",to:"registration_custom_fields"})}(),function(){new Paloma.FilterScope("registration_custom_fields"),Paloma.variableContainer}(),function(){Paloma.callbacks.register={};Paloma.locals.register={};Paloma.inheritLocals({from:"/",to:"register"})}(),function(){new Paloma.FilterScope("register"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.onboarding_basic_info=function(){function e(){var e=$("#club_name").val().trim()&&$("#club_username").val().trim()&&$("#club_conference_alias").val().trim()&&$("#club_member_name").val().trim();e?$("#submit_button").removeClass("disabledbtn"):$("#submit_button").addClass("disabledbtn")}function t(){return/^[a-zA-Z0-9\_\-]{2,32}$/.test($("#club_username").val())}function o(){t($("#club_username").val())?$.post("/communities/check_username/"+$("#club_username").val()+"?source=onboarding_basic_info"):($("#edit_url_error").addClass("error"),$("#url_error_message").html("Needs to be 2 to 32 characters, can use letters, numbers, hyphens and underscores."))}$(".onboarding-body-info").on("mouseover",function(){$(".onboarding-body-tips").hide(),$(this).siblings("div").show()}),$(".onboarding-body-tips-close").on("click",function(){$(this).parent().hide()}),e(),$("#club_name").keyup(function(){$("#community_name_preview").text($("#club_name").val()),$("#club_name").val().length>0&&!$("#edit_url_box").is(":visible")?$(".onboarding-body-url-box").show():$(".onboarding-body-url-box").hide(),$("#club_username").val($("#club_name").val().toLowerCase().replace(/\W+/g,"-")),$("#club_username_preview").text("www.bigmarker.com/"+$("#club_name").val().toLowerCase().replace(/\W+/g,"-")),$("#url_preview").text($("#club_name").val().toLowerCase().replace(/\W+/g,"-")),e()}),$("#club_name").on("blur",function(){o()}),$("#edit_url").on("click",function(){$("#edit_url_box").show(),$(".onboarding-body-url-box").hide()}),$("#club_conference_alias").on("blur",function(){$(this).val().trim()||($(this).val("Conferences"),$(this).trigger("keyup"))}),$("#club_member_name").on("blur",function(){$(this).val().trim()||($(this).val("Members"),$(this).trigger("keyup"))}),$("#club_conference_alias").keyup(function(){$("#conference_alias_preview").text($("#club_conference_alias").val()),e()}),$("#club_member_name").keyup(function(){$("#member_name_preview").text($("#club_member_name").val()),e()}),$("#club_username").on("blur",function(){o()}),$("#club_username").keyup(function(){t($("#club_username").val())?($("#edit_url_error").removeClass("error"),$("#url_preview").text($("#club_name").val().toLowerCase().replace(/\W+/g,"-")),$("#club_username_preview").text("www.bigmarker.com/"+$("#club_username").val().toLowerCase().replace(/\W+/g,"-"))):($("#edit_url_error").addClass("error"),$("#url_error_message").html("Needs to be 2 to 32 characters, can use letters, numbers, hyphens and underscores.")),e()}),$("#submit_button").on("click",function(){$(this).hasClass("disabledbtn")||($(this).closest("form").submit(),$("#submit_button").addClass("disabledbtn"))}),$("html").click(function(){$(".onboarding-body-tips").hide()}),$(".onboarding-body-tips").click(function(e){e.stopPropagation()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.onboarding_billing=function(e){function t(t){i=t,n=e[t+"_name"],s=e[t+"_code"],a=e[t+"_monthly_price"],r=e[t+"_yearly_price"],l=e[t+"_conference_size"],$("#billing_plan_type").val(s)}function o(e){$("[id^=monthly_plan][id$=_box]").removeClass("onactive"),$("[id^=monthly_plan] input").prop("checked",!1).parent().find("a").removeClass("checked"),$(e).addClass("onactive"),$("#"+e.id.replace("_box","")).prop("checked",!0).parent().find("a").addClass("checked"),$("#"+e.id.replace("_box","")).trigger("change")}var i="plan1",n=e.plan1_name,s=e.plan1_code,a=e.plan1_monthly_price,r=e.plan1_yearly_price,l=e.plan1_conference_size;$(document).ready(function(){$("#js-plan"+e.chosen_billing_plan+"-selector").click()}),$(document).on("focus","#new_member_full_name",function(){$(this).parents(".nbilling-input-in").removeClass("onactive")}),$("[name=monthly_plan]").on("change",function(){$("#billing_cycle").val(this.value)}),$("#submit_price_plan").on("click",function(){"plan4"==i?$("#submit_billing_payment").click():($("#billing_plan_left").hide(),$("#billing_credit_card_left").show(),$("#selected_plan").html("monthly"==$("#billing_cycle").val()?"Great choice! BigMarker "+n+" ($"+a+"/mo billed monthly)":"Great choice! BigMarker "+n+" ($"+r+" billed annually)"))}),$("#back_to_plan").on("click",function(){$("#billing_plan_left").show(),$("#billing_credit_card_left").hide()}),$("#submit_billing_payment").on("click",function(){$("#submit_billing_payment").hasClass("disabledbtn")||($("#submit_billing_payment").addClass("disabledbtn"),$(this).closest("form").submit())}),$(".onboarding-session>li").on("click",function(){$(".onboarding-session>li").removeClass("onactive"),$(".onboarding-session>li>ul").hide(),$("[id^=chosen_billing_plan]").prop("checked",!1).parent().find("a").removeClass("checked"),$(this).addClass("onactive"),$(this).find("[id^=chosen_billing_plan]").prop("checked",!0).parent().find("a").addClass("checked");var i=$(this).find("[id^=chosen_billing_plan]").attr("plan");"plan4"==i||$("#monthly_"+i+"_true").prop("checked")||$("#monthly_"+i+"_false").prop("checked")||o($(this).find("ul>li")[0]),$("#submit_price_plan").html("plan4"==i?"Get Started Today":"Start Your 14-day Free Trial"),t(i),e.discount_percent>0&&(a>0?$(".js-coupon-bar").show():$(".js-coupon-bar").hide(),after_coupon_price=a*(1-e.discount_percent/100),after_coupon_price=Math.round(100*after_coupon_price)/100,$(".js-coupon-display-normal-price").html("$"+a+"/mo"),$(".js-coupon-display-discount-price").html("$"+after_coupon_price+"/mo"))}),$("[id^=monthly_plan][id$=_box]").on("click",function(){o(this)}),$(document).on("click",".js-billing-plan-selector",function(o){$(".js-billing-plan-selector").removeClass("onactive"),$(this).addClass("onactive"),$(".js-billing-plan-details").hide(),$(this).siblings(".js-billing-plan-details").show(),o.preventDefault(),$("#chosen_billing_plan").val($(this).attr("plan_id"));var i=$(this).attr("plan");return t(i),e.discount_percent>0&&(a>0?$(".js-coupon-bar").show():$(".js-coupon-bar").hide(),after_coupon_price=a*(1-e.discount_percent/100),after_coupon_price=Math.round(100*after_coupon_price)/100,$(".js-coupon-display-normal-price").html("$"+a+"/mo"),$(".js-coupon-display-discount-price").html("$"+after_coupon_price+"/mo")),!1})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.onboarding_categories=function(){$(document).on("click","#club-categories-list li, #club-categories-list li a",function(){"A"==this.tagName?$(this).siblings("input").prop("checked")?($(this).removeClass("checked"),$(this).siblings("input").prop("checked",!1)):($(this).addClass("checked"),$(this).siblings("input").prop("checked",!0)):$("input[type=checkbox]",this).prop("checked")?($("a",this).removeClass("checked"),$("input[type=checkbox]",this).prop("checked",!1),$("#club-categories-list li a.checked").length<1&&$("#submit_categories").addClass("disabledbtn")):$("#club-categories-list li a.checked").length<4&&($("a",this).addClass("checked"),$("input[type=checkbox]",this).prop("checked",!0),$("#submit_categories").removeClass("disabledbtn"))}),$("#submit_categories").on("click",function(){$("#submit_categories").hasClass("disabledbtn")||$("#submit_categories").closest("form").submit()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.onboarding_payment=function(){$(document).on("change","#billing_cycle_monthly, #billing_cycle_annual",function(e){return $("#billing_cycle_annual").is(":checked")?($(".js-monthly-price-display").addClass("close"),$(".js-annual-price-display").removeClass("close")):($(".js-monthly-price-display").removeClass("close"),$(".js-annual-price-display").addClass("close")),e.preventDefault,!1
})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.onboarding_profile=function(){$("#club_description").keyup(function(){$("#club_description").val().length>100||($("#club_description").val().match(/\r?\n/g)||[]).length>3?$("#description_preview").html().indexOf("...")<0&&$("#description_preview").html($("#description_preview").html()+"..."):$("#description_preview").html($("#club_description").val().replace(/\r?\n/g,"<br />"))}),$("#submit_onboarding_profile").on("click",function(){$(this).closest("form").submit(),$("#submit_onboarding_profile").addClass("disabledbtn")})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.onboarding_test_conference=function(){$(".icon-info").on("mouseover",function(){$(".onboarding-body-tips").hide(),$(this).siblings("div").show()}),$("html").click(function(){$(".onboarding-body-tips").hide()}),$(".onboarding-body-tips").click(function(e){e.stopPropagation()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.onboarding_training_session=function(){$("#submit_training_session").on("click",function(){$(this).closest("form").submit()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.popup_register=function(){$(document).on("click","#js-switch-to-login",function(){$("#js-popup-login").show(),$("#js-popup-signup").hide()}),$(document).on("click","#js-switch-to-signup",function(){$("#js-popup-login").hide(),$("#js-popup-signup").show()})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.register_presenter_for_conference=function(){$(document).on("click","#js-edit-photo-link",function(e){return $("#presenter_member_photo").click(),e.preventDefault(),!1}),$(document).on("change","#presenter_member_photo",function(){$("#js-presenter-photo-preview").attr("src",window.URL.createObjectURL(this.files[0]))})}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.setup_billing=function(e){function t(t){o=t,i=e[t+"_name"],n=e[t+"_code"],s=e[t+"_monthly_price"],a=e[t+"_yearly_price"],r=e[t+"_conference_size"],$("#billing_plan_type").val(n),$("#js-current-plan-name").html(i),$("#js-current-plan-conference-size").html(r),$("#js-billing-cycle-monthly-per-month-price").html("$"+s),$("#js-billing-cycle-annual-per-month-price").html("$"+a/12),$("#js-annual-save-amount-circle").html("SAVE $"+(12*s-a)),"monthly"==$("#billing_cycle").val()?($("#js-billing-plan-type").html(i+" Monthly Plan"),$(".js-billing-plan-price").html("$"+s+".00"),$("#js-free-trial-off").html("($"+s+".00)"),$("#js-billing-cycle").html("month")):($("#js-billing-plan-type").html(i+" Annual Plan"),$(".js-billing-plan-price").html("$"+a/12+".00"),$("#js-free-trial-off").html("($"+a/12+".00)"),$("#js-billing-cycle").html("month with 1 year commitment.")),"plan4"==o?($(".js-billing-section").hide(),$(".js-free-section").show()):($(".js-billing-section").show(),$(".js-free-section").hide(),$(".js-registration-features-no").hide(),$(".js-registration-features-yes").show())}var o="plan1",i=e.plan1_name,n=e.plan1_code,s=e.plan1_monthly_price,a=e.plan1_yearly_price,r=e.plan1_conference_size;$(document).on("keyup","#confirm_password",function(){$("#new_member_password").val().substring(0,$(this).val().length)!=$(this).val()?($(this).parent().addClass("error"),$(this).siblings(".nbilling-sp-error-text").text("Passwords do not match")):($(this).parent().removeClass("error"),$(this).siblings(".nbilling-sp-error-text").text(""))}),$(document).on("change","#chosen_billing_plan",function(e){return t($("#chosen_billing_plan").val()),e.preventDefault(),!1}),$(document).on("change","#billing_cycle_monthly, #billing_cycle_annual",function(){}),$(document).on("click","#js-annual-billing-li",function(){$("#js-annual-billing-li").addClass("onactive"),$("#js-monthly-billing-li").removeClass("onactive"),$("#billing_cycle").val("annual"),t(o)}),$(document).on("click","#js-monthly-billing-li",function(){$("#js-monthly-billing-li").addClass("onactive"),$("#js-annual-billing-li").removeClass("onactive"),$("#billing_cycle").val("monthly"),t(o)}),$(document).on("click","#js-coupon-code-link",function(){$("#js-coupon-code-link").hide(),$("#js-coupon-code-section").show()}),t($("#chosen_billing_plan").val())}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.signup2=function(e){function t(t){o=t,i=e[t+"_name"],n=e[t+"_code"],s=e[t+"_monthly_price"],a=e[t+"_yearly_price"],r=e[t+"_conference_size"],$("#billing_plan_type").val(n),$("#js-current-plan-name").html(i),$("#js-current-plan-conference-size").html(r),$("#js-billing-cycle-monthly-per-month-price").html("$"+s),$("#js-billing-cycle-annual-per-month-price").html("$"+a/12),$("#js-annual-save-amount-circle").html("SAVE $"+(12*s-a)),$("#billing_cycle_monthly").is(":checked")?($("#js-billing-plan-type").html(i+" Monthly Plan"),$(".js-billing-plan-price").html("$"+s+".00"),$("#js-free-trial-off").html("($"+s+".00)"),$("#js-billing-cycle").html("month")):($("#js-billing-plan-type").html(i+" Annual Plan"),$(".js-billing-plan-price").html("$"+a/12+".00"),$("#js-free-trial-off").html("($"+a/12+".00)"),$("#js-billing-cycle").html("month with 1 year commitment.")),"plan4"==o?($(".js-billing-section").hide(),$(".js-free-section").show()):($(".js-billing-section").show(),$(".js-free-section").hide(),$(".js-registration-features-no").hide(),$(".js-registration-features-yes").show())}var o="plan1",i=e.plan1_name,n=e.plan1_code,s=e.plan1_monthly_price,a=e.plan1_yearly_price,r=e.plan1_conference_size;$(document).on("keyup","#confirm_password",function(){$("#new_member_password").val().substring(0,$(this).val().length)!=$(this).val()?($(this).parent().addClass("error"),$(this).siblings(".nbilling-sp-error-text").text("Passwords do not match")):($(this).parent().removeClass("error"),$(this).siblings(".nbilling-sp-error-text").text(""))}),$(document).on("change","#chosen_billing_plan",function(e){return t($("#chosen_billing_plan").val()),e.preventDefault(),!1}),$(document).on("change","#billing_cycle_monthly, #billing_cycle_annual",function(){}),$(document).on("click","#js-annual-billing-li",function(){$("#js-annual-billing-li").addClass("onactive"),$("#js-monthly-billing-li").removeClass("onactive"),$("#billing_cycle_annual").prop("checked",!0).siblings("a").addClass("checked"),$("#billing_cycle_monthly").prop("checked",!1).siblings("a").removeClass("checked"),t(o)}),$(document).on("click","#js-monthly-billing-li",function(){$("#js-monthly-billing-li").addClass("onactive"),$("#js-annual-billing-li").removeClass("onactive"),$("#billing_cycle_annual").prop("checked",!1).siblings("a").removeClass("checked"),$("#billing_cycle_monthly").prop("checked",!0).siblings("a").addClass("checked"),t(o)}),$(document).on("click","#js-coupon-code-link",function(){$("#js-coupon-code-link").hide(),$("#js-coupon-code-section").show()}),t($("#chosen_billing_plan").val())}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.register}Paloma.callbacks.register.update_basic_info=function(){}}(),function(){Paloma.callbacks.polls={};Paloma.locals.polls={};Paloma.inheritLocals({from:"/",to:"polls"})}(),function(){new Paloma.FilterScope("polls"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.polls}Paloma.callbacks.polls.new_in_bigroom=function(){function e(e){var o="<li>";return o+='<div class="clroom-option-name">'+t[e]+")</div>",o+='<div class="clroom-option-input">',o+='<input id="poll_poll_choices_attributes_'+e+'_choice" maxlength="60" name="poll[poll_choices_attributes]['+e+'][choice]" placeholder="Answer Choice '+t[e]+'" size="60" type="text">',o+='<div class="clroom-option-delete"><a href="javascript:void(0);"><span class="room-delete"></span></a></div>',o+="</div>",o+="</li>"}var t=["A","B","C","D","E","F"];$("input:checkbox, input:radio").prettyCheckable({color:"green"}),$("#add_more_choice").on("click",function(){2==$(".clroom-popup-poll-option input[id^=poll_poll_choices_attributes_]").length?$("#poll_options").append(e(2)):3==$(".clroom-popup-poll-option input[id^=poll_poll_choices_attributes_]").length?$("#poll_options").append(e(3)):4==$(".clroom-popup-poll-option input[id^=poll_poll_choices_attributes_]").length?$("#poll_options").append(e(4)):5==$(".clroom-popup-poll-option input[id^=poll_poll_choices_attributes_]").length&&($("#poll_options").append(e(5)),$(this).hide()),$(".clroom-option-delete").on("click",function(){$(this).parent().parent().remove(),$(".clroom-popup-poll-option #poll_poll_choices_attributes_3_choice").parent().siblings().text("C)"),$(".clroom-popup-poll-option #poll_poll_choices_attributes_3_choice").attr("placeholder","Answer Choice C"),$(".clroom-popup-poll-option #poll_poll_choices_attributes_3_choice").attr("name","poll[poll_choices_attributes][2][choice]"),$(".clroom-popup-poll-option #poll_poll_choices_attributes_3_choice").attr("id","poll_poll_choices_attributes_2_choice"),$("#add_more_choice").show()})})}}(),function(){Paloma.callbacks.browse={};Paloma.locals.browse={};Paloma.inheritLocals({from:"/",to:"browse"})}(),function(){new Paloma.FilterScope("browse"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.browse}Paloma.callbacks.browse.index=function(){$("#js-typed-event-type").typed({strings:["EVENTS","WORKSHOPS","WEBINARS","CLASSES","PRESENTATIONS","PRODUCT DEMOS"],typeSpeed:100,startDelay:0,backDelay:2e3,loop:!0})}}(),function(){Paloma.callbacks.pages={};Paloma.locals.pages={};Paloma.inheritLocals({from:"/",to:"pages"})}(),function(){new Paloma.FilterScope("pages"),Paloma.variableContainer}(),function(){Paloma.callbacks.system_check={};Paloma.locals.system_check={};Paloma.inheritLocals({from:"/",to:"system_check"})}(),function(){new Paloma.FilterScope("system_check"),Paloma.variableContainer}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.system_check}Paloma.callbacks.system_check.index=function(){function e(){SomApi.account="SOM5763022da6bf4",SomApi.domainName="*.bigmarker.com",SomApi.config.sustainTime=4,SomApi.onTestCompleted=t,SomApi.onProgress=n,SomApi.onError=o,SomApi.config.progress.verbose=!0,DetectRTC.load(function(){return DetectRTC.isMobileDevice?("iOS"==DetectRTC.osName&&$("#ios_system_check").click(),void("Android"==DetectRTC.osName&&$("#android_system_check").click())):(SomApi.startTest(),$("#desktop_box").show(),$("#js-os-version").html(DetectRTC.osName),$(".js-browser-name").html(DetectRTC.browser.name),$(".js-browser-version").html(DetectRTC.browser.fullVersion),"iOS"==DetectRTC.osName?($(".js-os-fail").removeClass("close"),$(".js-os-pass").addClass("close"),$(".js-os-pass").siblings(".loading").addClass("close"),a=!1,i()):($(".js-os-fail").addClass("close"),$(".js-os-pass").removeClass("close"),$(".js-os-pass").siblings(".loading").addClass("close")),void(DetectRTC.browser.isChrome?DetectRTC.browser.version<48?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Chrome browser out of date."),$(".js-browser-pass").siblings(".loading").addClass("close"),a=!1,i()):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Chrome browser up to date"),$(".js-browser-pass").siblings(".loading").addClass("close")):DetectRTC.browser.isFirefox?DetectRTC.browser.version<39?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Chrome browser out of date."),$(".js-browser-pass").siblings(".loading").addClass("close"),a=!1,i()):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Firefox browser up to date."),$(".js-browser-pass").siblings(".loading").addClass("close")):DetectRTC.browser.isOpera?DetectRTC.browser.version<37?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Opera out of date."),$(".js-browser-pass").siblings(".loading").addClass("close"),a=!1,i()):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Opera up to date."),$(".js-browser-pass").siblings(".loading").addClass("close")):($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Unsupported Browser"),$(".js-browser-pass").siblings(".loading").addClass("close"),a=!1,i())))})}function t(e){$.ajax({url:"/save_speed_test_results?result="+encodeURIComponent(JSON.stringify(e))}),document.getElementById("load_bar").style.width="100%"}function o(e){$.ajax({url:"/save_speed_test_results?error="+encodeURIComponent(JSON.stringify(e))})}function i(){$("#failed-number").text(parseInt($("#failed-number").text())+1)}function n(e){var t="<div>Process Type: </br>"+e.type+"</div>";t+="<div>Current Speed: </br>"+e.currentSpeed+"Mbps</div>",$("#result_detail").html(t),document.getElementById("load_bar").style.width=e.percentDone+"%"}if($(".header-scroll-box").length>0){var s=$(window).scrollTop();s>100?$(".n-wrapper").addClass("show-noscroll"):$(".n-wrapper").removeClass("show-noscroll")}var a=!0;e()}}(),function(){{var e=(Paloma.variableContainer,Paloma.locals);e.system_check}Paloma.callbacks.system_check.system_check_modal=function(){function e(e){$.ajax({url:"/save_speed_test_results?result="+encodeURIComponent(JSON.stringify(e))})}function t(e){$.ajax({url:"/save_speed_test_results?error="+encodeURIComponent(JSON.stringify(e))})}$(function(){var e=!0;DetectRTC.load(function(){$("#js-os-version").html(DetectRTC.osName),$(".js-browser-name").html(DetectRTC.browser.name),$(".js-browser-version").html(DetectRTC.browser.fullVersion),"iOS"==DetectRTC.osName?($(".js-os-fail").removeClass("close"),$(".js-os-pass").addClass("close"),e=!1):($(".js-os-fail").addClass("close"),$(".js-os-pass").removeClass("close")),DetectRTC.browser.isChrome?DetectRTC.browser.version<48?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Chrome browser out of date."),e=!1):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Chrome browser up to date")):DetectRTC.browser.isFirefox?DetectRTC.browser.version<39?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Chrome browser out of date."),e=!1):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Firefox browser up to date.")):DetectRTC.browser.isOpera&&(DetectRTC.browser.version<37?($(".js-browser-fail").removeClass("close"),$(".js-browser-pass").addClass("close"),$(".js-browser-message").html("Opera out of date."),e=!1):($(".js-browser-fail").addClass("close"),$(".js-browser-pass").removeClass("close"),$(".js-browser-message").html("Opera up to date."))),e?($(".bh-fail").hide(),$(".bh-pass").show()):($(".bh-pass").hide(),$(".bh-fail").show())})}),SomApi.account="SOM5763022da6bf4",SomApi.domainName="*.bigmarker.com",SomApi.config.sustainTime=8,SomApi.onTestCompleted=e,SomApi.onError=t,SomApi.startTest()}}(),function(e){function t(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(e,t){return function(o){return d(e.call(this,o),t)}}function i(e,t){return function(o){return this.lang().ordinal(e.call(this,o),t)}}function n(){}function s(e){$(e),r(this,e)}function a(e){var t=g(e),o=t.year||0,i=t.month||0,n=t.week||0,s=t.day||0,a=t.hour||0,r=t.minute||0,l=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*l+6e4*r+36e5*a,this._days=+s+7*n,this._months=+i+12*o,this._data={},this._bubble()}function r(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function l(e){var t,o={};for(t in e)e.hasOwnProperty(t)&&gt.hasOwnProperty(t)&&(o[t]=e[t]);return o}function c(e){return 0>e?Math.ceil(e):Math.floor(e)}function d(e,t,o){for(var i=""+Math.abs(e),n=e>=0;i.length<t;)i="0"+i;return(n?o?"+":"":"-")+i}function u(e,t,o,i){var n,s,a=t._milliseconds,r=t._days,l=t._months;a&&e._d.setTime(+e._d+a*o),(r||l)&&(n=e.minute(),s=e.hour()),r&&e.date(e.date()+r*o),l&&e.month(e.month()+l*o),a&&!i&&it.updateOffset(e),(r||l)&&(e.minute(n),e.hour(s))}function h(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function p(e,t,o){var i,n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0;for(i=0;n>i;i++)(o&&e[i]!==t[i]||!o&&v(e[i])!==v(t[i]))&&a++;return a+s}function f(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Ut[e]||Vt[t]||t}return e}function g(e){var t,o,i={};for(o in e)e.hasOwnProperty(o)&&(t=f(o),t&&(i[t]=e[o]));return i}function b(t){var o,i;if(0===t.indexOf("week"))o=7,i="day";else{if(0!==t.indexOf("month"))return;o=12,i="month"}it[t]=function(n,s){var a,r,l=it.fn._lang[t],c=[];if("number"==typeof n&&(s=n,n=e),r=function(e){var t=it().utc().set(i,e);return l.call(it.fn._lang,t,n||"")},null!=s)return r(s);for(a=0;o>a;a++)c.push(r(a));return c}}function v(e){var t=+e,o=0;return 0!==t&&isFinite(t)&&(o=t>=0?Math.floor(t):Math.ceil(t)),o}function _(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function w(e){return y(e)?366:365}function y(e){return e%4===0&&e%100!==0||e%400===0}function $(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[ct]<0||e._a[ct]>11?ct:e._a[dt]<1||e._a[dt]>_(e._a[lt],e._a[ct])?dt:e._a[ut]<0||e._a[ut]>23?ut:e._a[ht]<0||e._a[ht]>59?ht:e._a[mt]<0||e._a[mt]>59?mt:e._a[pt]<0||e._a[pt]>999?pt:-1,e._pf._overflowDayOfYear&&(lt>t||t>dt)&&(t=dt),e._pf.overflow=t)}function k(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function x(e){return e?e.toLowerCase().replace("_","-"):e}function C(e,t){return t._isUTC?it(e).zone(t._offset||0):it(e).local()}function R(e,t){return t.abbr=e,ft[e]||(ft[e]=new n),ft[e].set(t),ft[e]}function S(e){delete ft[e]}function T(e){var t,o,i,n,s=0,a=function(e){if(!ft[e]&&bt)try{require("./lang/"+e)}catch(t){}return ft[e]};if(!e)return it.fn._lang;if(!h(e)){if(o=a(e))return o;e=[e]}for(;s<e.length;){for(n=x(e[s]).split("-"),t=n.length,i=x(e[s+1]),i=i?i.split("-"):null;t>0;){if(o=a(n.slice(0,t).join("-")))return o;if(i&&i.length>=t&&p(n,i,!0)>=t-1)break;t--}s++}return it.fn._lang}function D(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function P(e){var t,o,i=e.match(yt);for(t=0,o=i.length;o>t;t++)i[t]=Qt[i[t]]?Qt[i[t]]:D(i[t]);return function(n){var s="";for(t=0;o>t;t++)s+=i[t]instanceof Function?i[t].call(n,e):i[t];return s}}function A(e,t){return e.isValid()?(t=E(t,e.lang()),Yt[t]||(Yt[t]=P(t)),Yt[t](e)):e.lang().invalidDate()}function E(e,t){function o(e){return t.longDateFormat(e)||e}var i=5;for($t.lastIndex=0;i>=0&&$t.test(e);)e=e.replace($t,o),$t.lastIndex=0,i-=1;return e}function I(e,t){var o,i=t._strict;switch(e){case"DDDD":return Mt;case"YYYY":case"GGGG":case"gggg":return i?jt:Ct;case"Y":case"G":case"g":return Ft;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Ot:Rt;case"S":if(i)return Et;case"SS":if(i)return It;case"SSS":if(i)return Mt;case"DDD":return xt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Tt;case"a":case"A":return T(t._l)._meridiemParse;case"X":return At;case"Z":case"ZZ":return Dt;case"T":return Pt;case"SSSS":return St;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?It:kt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return kt;default:return o=new RegExp(N(H(e.replace("\\","")),"i"))}}function M(e){e=e||"";var t=e.match(Dt)||[],o=t[t.length-1]||[],i=(o+"").match(Bt)||["-",0,0],n=+(60*i[1])+v(i[2]);return"+"===i[0]?-n:n}function j(e,t,o){var i,n=o._a;switch(e){case"M":case"MM":null!=t&&(n[ct]=v(t)-1);break;case"MMM":case"MMMM":i=T(o._l).monthsParse(t),null!=i?n[ct]=i:o._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(n[dt]=v(t));break;case"DDD":case"DDDD":null!=t&&(o._dayOfYear=v(t));break;case"YY":n[lt]=v(t)+(v(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":n[lt]=v(t);break;case"a":case"A":o._isPm=T(o._l).isPM(t);break;case"H":case"HH":case"h":case"hh":n[ut]=v(t);break;case"m":case"mm":n[ht]=v(t);break;case"s":case"ss":n[mt]=v(t);break;case"S":case"SS":case"SSS":case"SSSS":n[pt]=v(1e3*("0."+t));break;case"X":o._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":o._useUTC=!0,o._tzm=M(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(o._w=o._w||{},o._w[e]=t)}}function O(e){var t,o,i,n,s,a,r,l,c,d,u=[];if(!e._d){for(i=z(e),e._w&&null==e._a[dt]&&null==e._a[ct]&&(s=function(t){var o=parseInt(t,10);return t?t.length<3?o>68?1900+o:2e3+o:o:null==e._a[lt]?it().weekYear():e._a[lt]},a=e._w,null!=a.GG||null!=a.W||null!=a.E?r=Z(s(a.GG),a.W||1,a.E,4,1):(l=T(e._l),c=null!=a.d?Y(a.d,l):null!=a.e?parseInt(a.e,10)+l._week.dow:0,d=parseInt(a.w,10)||1,null!=a.d&&c<l._week.dow&&d++,r=Z(s(a.gg),d,c,l._week.doy,l._week.dow)),e._a[lt]=r.year,e._dayOfYear=r.dayOfYear),e._dayOfYear&&(n=null==e._a[lt]?i[lt]:e._a[lt],e._dayOfYear>w(n)&&(e._pf._overflowDayOfYear=!0),o=V(n,0,e._dayOfYear),e._a[ct]=o.getUTCMonth(),e._a[dt]=o.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=u[t]=i[t];for(;7>t;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];u[ut]+=v((e._tzm||0)/60),u[ht]+=v((e._tzm||0)%60),e._d=(e._useUTC?V:U).apply(null,u)}}function F(e){var t;e._d||(t=g(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],O(e))}function z(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function L(e){e._a=[],e._pf.empty=!0;var t,o,i,n,s,a=T(e._l),r=""+e._i,l=r.length,c=0;for(i=E(e._f,a).match(yt)||[],t=0;t<i.length;t++)n=i[t],o=(r.match(I(n,e))||[])[0],o&&(s=r.substr(0,r.indexOf(o)),s.length>0&&e._pf.unusedInput.push(s),r=r.slice(r.indexOf(o)+o.length),c+=o.length),Qt[n]?(o?e._pf.empty=!1:e._pf.unusedTokens.push(n),j(n,o,e)):e._strict&&!o&&e._pf.unusedTokens.push(n);e._pf.charsLeftOver=l-c,r.length>0&&e._pf.unusedInput.push(r),e._isPm&&e._a[ut]<12&&(e._a[ut]+=12),e._isPm===!1&&12===e._a[ut]&&(e._a[ut]=0),O(e),$(e)}function H(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,o,i,n){return t||o||i||n})}function N(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(e){var o,i,n,s,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(s=0;s<e._f.length;s++)a=0,o=r({},e),o._pf=t(),o._f=e._f[s],L(o),k(o)&&(a+=o._pf.charsLeftOver,a+=10*o._pf.unusedTokens.length,o._pf.score=a,(null==n||n>a)&&(n=a,i=o));r(e,i||o)}function W(e){var t,o,i=e._i,n=zt.exec(i);if(n){for(e._pf.iso=!0,t=0,o=Ht.length;o>t;t++)if(Ht[t][1].exec(i)){e._f=Ht[t][0]+(n[6]||" ");break}for(t=0,o=Nt.length;o>t;t++)if(Nt[t][1].exec(i)){e._f+=Nt[t][0];break}i.match(Dt)&&(e._f+="Z"),L(e)}else e._d=new Date(i)}function q(t){var o=t._i,i=vt.exec(o);o===e?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof o?W(t):h(o)?(t._a=o.slice(0),O(t)):m(o)?t._d=new Date(+o):"object"==typeof o?F(t):t._d=new Date(o)}function U(e,t,o,i,n,s,a){var r=new Date(e,t,o,i,n,s,a);return 1970>e&&r.setFullYear(e),r}function V(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function Y(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function G(e,t,o,i,n){return n.relativeTime(t||1,!!o,e,i)}function X(e,t,o){var i=rt(Math.abs(e)/1e3),n=rt(i/60),s=rt(n/60),a=rt(s/24),r=rt(a/365),l=45>i&&["s",i]||1===n&&["m"]||45>n&&["mm",n]||1===s&&["h"]||22>s&&["hh",s]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",rt(a/30)]||1===r&&["y"]||["yy",r];return l[2]=t,l[3]=e>0,l[4]=o,G.apply({},l)}function Q(e,t,o){var i,n=o-t,s=o-e.day();return s>n&&(s-=7),n-7>s&&(s+=7),i=it(e).add("d",s),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function Z(e,t,o,i,n){var s,a,r=V(e,0,1).getUTCDay();return o=null!=o?o:n,s=n-r+(r>i?7:0)-(n>r?7:0),a=7*(t-1)+(o-n)+s+1,{year:a>0?e:e-1,dayOfYear:a>0?a:w(e-1)+a}}function K(e){var t=e._i,o=e._f;return null===t?it.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=T().preparse(t)),it.isMoment(t)?(e=l(t),e._d=new Date(+t._d)):o?h(o)?B(e):L(e):q(e),new s(e))}function J(e,t){it.fn[e]=it.fn[e+"s"]=function(e){var o=this._isUTC?"UTC":"";return null!=e?(this._d["set"+o+t](e),it.updateOffset(this),this):this._d["get"+o+t]()}}function et(e){it.duration.fn[e]=function(){return this._data[e]}}function tt(e,t){it.duration.fn["as"+e]=function(){return+this/t}}function ot(e){var t=!1,o=it;"undefined"==typeof ender&&(e?(at.moment=function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),o.apply(null,arguments)},r(at.moment,o)):at.moment=it)}for(var it,nt,st="2.5.1",at=this,rt=Math.round,lt=0,ct=1,dt=2,ut=3,ht=4,mt=5,pt=6,ft={},gt={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},bt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,vt=/^\/?Date\((\-?\d+)/i,_t=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,yt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,$t=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,kt=/\d\d?/,xt=/\d{1,3}/,Ct=/\d{1,4}/,Rt=/[+\-]?\d{1,6}/,St=/\d+/,Tt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Dt=/Z|[\+\-]\d\d:?\d\d/gi,Pt=/T/i,At=/[\+\-]?\d+(\.\d{1,3})?/,Et=/\d/,It=/\d\d/,Mt=/\d{3}/,jt=/\d{4}/,Ot=/[+-]?\d{6}/,Ft=/[+-]?\d+/,zt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Lt="YYYY-MM-DDTHH:mm:ssZ",Ht=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Nt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Bt=/([\+\-]|\d\d)/gi,Wt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),qt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ut={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Vt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Yt={},Gt="DDD w W M D d".split(" "),Xt="M D H h m s w W".split(" "),Qt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return d(this.year()%100,2)},YYYY:function(){return d(this.year(),4)},YYYYY:function(){return d(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+d(Math.abs(e),6)},gg:function(){return d(this.weekYear()%100,2)},gggg:function(){return d(this.weekYear(),4)},ggggg:function(){return d(this.weekYear(),5)},GG:function(){return d(this.isoWeekYear()%100,2)},GGGG:function(){return d(this.isoWeekYear(),4)},GGGGG:function(){return d(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return v(this.milliseconds()/100)},SS:function(){return d(v(this.milliseconds()/10),2)},SSS:function(){return d(this.milliseconds(),3)},SSSS:function(){return d(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+d(v(e/60),2)+":"+d(v(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+d(v(e/60),2)+d(v(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Zt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Gt.length;)nt=Gt.pop(),Qt[nt+"o"]=i(Qt[nt],nt);for(;Xt.length;)nt=Xt.pop(),Qt[nt+nt]=o(Qt[nt],2);for(Qt.DDDD=o(Qt.DDD,3),r(n.prototype,{set:function(e){var t,o;for(o in e)t=e[o],"function"==typeof t?this[o]=t:this["_"+o]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,o,i;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(o=it.utc([2e3,t]),i="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[t]=new RegExp(i.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,o,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(o=it([2e3,1]).day(t),i="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,o){return e>11?o?"pm":"PM":o?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var o=this._calendar[e];return"function"==typeof o?o.apply(t):o},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,o,i){var n=this._relativeTime[o];return"function"==typeof n?n(e,t,o,i):n.replace(/%d/i,e)},pastFuture:function(e,t){var o=this._relativeTime[e>0?"future":"past"];return"function"==typeof o?o(t):o.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Q(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),it=function(o,i,n,s){var a;return"boolean"==typeof n&&(s=n,n=e),a={},a._isAMomentObject=!0,a._i=o,a._f=i,a._l=n,a._strict=s,a._isUTC=!1,a._pf=t(),K(a)},it.utc=function(o,i,n,s){var a;return"boolean"==typeof n&&(s=n,n=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=n,a._i=o,a._f=i,a._strict=s,a._pf=t(),K(a).utc()
},it.unix=function(e){return it(1e3*e)},it.duration=function(e,t){var o,i,n,s=e,r=null;return it.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(r=_t.exec(e))?(o="-"===r[1]?-1:1,s={y:0,d:v(r[dt])*o,h:v(r[ut])*o,m:v(r[ht])*o,s:v(r[mt])*o,ms:v(r[pt])*o}):(r=wt.exec(e))&&(o="-"===r[1]?-1:1,n=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*o},s={y:n(r[2]),M:n(r[3]),d:n(r[4]),h:n(r[5]),m:n(r[6]),s:n(r[7]),w:n(r[8])}),i=new a(s),it.isDuration(e)&&e.hasOwnProperty("_lang")&&(i._lang=e._lang),i},it.version=st,it.defaultFormat=Lt,it.updateOffset=function(){},it.lang=function(e,t){var o;return e?(t?R(x(e),t):null===t?(S(e),e="en"):ft[e]||T(e),o=it.duration.fn._lang=it.fn._lang=T(e),o._abbr):it.fn._lang._abbr},it.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),T(e)},it.isMoment=function(e){return e instanceof s||null!=e&&e.hasOwnProperty("_isAMomentObject")},it.isDuration=function(e){return e instanceof a},nt=Zt.length-1;nt>=0;--nt)b(Zt[nt]);for(it.normalizeUnits=function(e){return f(e)},it.invalid=function(e){var t=it.utc(0/0);return null!=e?r(t._pf,e):t._pf.userInvalidated=!0,t},it.parseZone=function(e){return it(e).parseZone()},r(it.fn=s.prototype,{clone:function(){return it(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=it(this).utc();return 0<e.year()&&e.year()<=9999?A(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return k(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?it.utc(this._a):it(this._a)).toArray())>0:!1},parsingFlags:function(){return r({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=A(this,e||it.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var o;return o="string"==typeof e?it.duration(+t,e):it.duration(e,t),u(this,o,1),this},subtract:function(e,t){var o;return o="string"==typeof e?it.duration(+t,e):it.duration(e,t),u(this,o,-1),this},diff:function(e,t,o){var i,n,s=C(e,this),a=6e4*(this.zone()-s.zone());return t=f(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+s.daysInMonth()),n=12*(this.year()-s.year())+(this.month()-s.month()),n+=(this-it(this).startOf("month")-(s-it(s).startOf("month")))/i,n-=6e4*(this.zone()-it(this).startOf("month").zone()-(s.zone()-it(s).startOf("month").zone()))/i,"year"===t&&(n/=12)):(i=this-s,n="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),o?n:c(n)},from:function(e,t){return it.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(it(),e)},calendar:function(){var e=C(it(),this).startOf("day"),t=this.diff(e,"days",!0),o=-6>t?"sameElse":-1>t?"lastWeek":0>t?"lastDay":1>t?"sameDay":2>t?"nextDay":7>t?"nextWeek":"sameElse";return this.format(this.lang().calendar(o,this))},isLeapYear:function(){return y(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Y(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,o=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+o+"Month"](e),this.date(Math.min(t,this.daysInMonth())),it.updateOffset(this),this):this._d["get"+o+"Month"]()},startOf:function(e){switch(e=f(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=f(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+it(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+it(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+C(e,this).startOf(t)},min:function(e){return e=it.apply(null,arguments),this>e?this:e},max:function(e){return e=it.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=M(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&u(this,it.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?it(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return _(this.year(),this.month())},dayOfYear:function(e){var t=rt((it(this).startOf("day")-it(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=Q(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Q(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=Q(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=f(e),this[e]()},set:function(e,t){return e=f(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=T(t),this)}}),nt=0;nt<Wt.length;nt++)J(Wt[nt].toLowerCase().replace(/s$/,""),Wt[nt]);J("year","FullYear"),it.fn.days=it.fn.day,it.fn.months=it.fn.month,it.fn.weeks=it.fn.week,it.fn.isoWeeks=it.fn.isoWeek,it.fn.toJSON=it.fn.toISOString,r(it.duration.fn=a.prototype,{_bubble:function(){var e,t,o,i,n=this._milliseconds,s=this._days,a=this._months,r=this._data;r.milliseconds=n%1e3,e=c(n/1e3),r.seconds=e%60,t=c(e/60),r.minutes=t%60,o=c(t/60),r.hours=o%24,s+=c(o/24),r.days=s%30,a+=c(s/30),r.months=a%12,i=c(a/12),r.years=i},weeks:function(){return c(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)},humanize:function(e){var t=+this,o=X(t,!e,this.lang());return e&&(o=this.lang().pastFuture(t,o)),this.lang().postformat(o)},add:function(e,t){var o=it.duration(e,t);return this._milliseconds+=o._milliseconds,this._days+=o._days,this._months+=o._months,this._bubble(),this},subtract:function(e,t){var o=it.duration(e,t);return this._milliseconds-=o._milliseconds,this._days-=o._days,this._months-=o._months,this._bubble(),this},get:function(e){return e=f(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=f(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:it.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),o=Math.abs(this.days()),i=Math.abs(this.hours()),n=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(o?o+"D":"")+(i||n||s?"T":"")+(i?i+"H":"")+(n?n+"M":"")+(s?s+"S":""):"P0D"}});for(nt in qt)qt.hasOwnProperty(nt)&&(tt(nt,qt[nt]),et(nt.toLowerCase()));tt("Weeks",6048e5),it.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},it.lang("en",{ordinal:function(e){var t=e%10,o=1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+o}}),bt?(module.exports=it,ot(!0)):"function"==typeof define&&define.amd?define("moment",function(t,o,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&ot(i.config().noGlobal===e),it}):ot()}.call(this);var IsEdge=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),IsOpera=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),IsChrome=!IsEdge&&!IsEdge&&!!navigator.webkitGetUserMedia;if("undefined"!=typeof navigator)"undefined"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia);else var navigator={getUserMedia:{}};if("undefined"!=typeof webkitMediaStream)var MediaStream=webkitMediaStream;var ObjectStore={AudioContext:window.AudioContext},ObjectStore={AudioContext:window.AudioContext},Whammy=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){var t=URL.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),o=new Worker(t);return URL.revokeObjectURL(t),o}function o(e){function t(e){var t=i(e);if(!t)return[];for(var n=3e4,s=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:h(t.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t.width,id:176},{data:t.height,id:186}]}]}]}]}],a=0,l=0;a<e.length;){var c=[],d=0;do c.push(e[a]),d+=e[a].duration,a++;while(a<e.length&&n>d);var u=0,m={id:524531317,data:o(l,u,c)};s[1].data.push(m),l+=d}return r(s)}function o(e,t,o){return[{data:e,id:231}].concat(o.map(function(e){var o=l({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:o,id:163}}))}function i(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,o=e[0].height,i=e[0].duration,n=1;n<e.length;n++)i+=e[n].duration;return{duration:i,width:t,height:o}}function n(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function s(e){return new Uint8Array(e.split("").map(function(e){return e.charCodeAt(0)}))}function a(e){var t=[],o=e.length%8?new Array(9-e.length%8).join("0"):"";e=o+e;for(var i=0;i<e.length;i+=8)t.push(parseInt(e.substr(i,8),2));return new Uint8Array(t)}function r(e){for(var t=[],o=0;o<e.length;o++){var i=e[o].data;"object"==typeof i&&(i=r(i)),"number"==typeof i&&(i=a(i.toString(2))),"string"==typeof i&&(i=s(i));var l=i.size||i.byteLength||i.length,c=Math.ceil(Math.ceil(Math.log(l)/Math.log(2))/8),d=l.toString(2),u=new Array(7*c+7+1-d.length).join("0")+d,h=new Array(c).join("0")+"1"+u;t.push(n(e[o].id)),t.push(a(h)),t.push(i)}return new Blob(t,{type:"video/webm"})}function l(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),e.trackNum>127)throw"TrackNumber > 127 not supported";var o=[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map(function(e){return String.fromCharCode(e)}).join("")+e.frame;return o}function c(e){for(var t=e.RIFF[0].WEBP[0],o=t.indexOf("\x9d*"),i=0,n=[];4>i;i++)n[i]=t.charCodeAt(o+3+i);var s,a,r;return r=n[1]<<8|n[0],s=16383&r,r=n[3]<<8|n[2],a=16383&r,{width:s,height:a,data:t,riff:e}}function d(e,t){return parseInt(e.substr(t+4,4).split("").map(function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t}).join(""),2)}function u(e){for(var t=0,o={};t<e.length;){var i=e.substr(t,4),n=d(e,t),s=e.substr(t+4+4,n);t+=8+n,o[i]=o[i]||[],o[i].push("RIFF"===i||"LIST"===i?u(s):s)}return o}function h(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")}var m=new t(e.map(function(e){var t=c(u(atob(e.image.slice(23))));return t.duration=e.duration,t}));postMessage(m)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var i=t(o);i.onmessage=function(t){return t.data.error?void console.error(t.data.error):void e(t.data)},i.postMessage(this.frames)},{Video:e}}();!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};t=function(){function t(t,i){var n,s,a=this;if(a.defaults={accessibility:!0,appendArrows:e(t),arrows:!0,prevArrow:'<button type="button" class="slick-prev"></button>',nextArrow:'<button type="button" class="slick-next"></button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button">'+(t+1)+"</button>"},dots:!1,draggable:!0,easing:"linear",fade:!1,infinite:!0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,pauseOnHover:!0,pauseOnDotsHover:!1,responsive:null,slide:"div",slidesToShow:1,slidesToScroll:1,speed:300,swipe:!0,touchMove:!0,touchThreshold:5,useCSS:!0,vertical:!1},a.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentSlide:0,currentLeft:null,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},e.extend(a,a.initials),a.activeBreakpoint=null,a.animType=null,a.animProp=null,a.breakpoints=[],a.breakpointSettings=[],a.cssTransitions=!1,a.paused=!1,a.positionProp=null,a.$slider=e(t),a.$slidesCache=null,a.transformType=null,a.transitionType=null,a.windowWidth=0,a.windowTimer=null,a.options=e.extend({},a.defaults,i),a.originalSettings=a.options,n=a.options.responsive||null,n&&n.length>-1){for(s in n)n.hasOwnProperty(s)&&(a.breakpoints.push(n[s].breakpoint),a.breakpointSettings[n[s].breakpoint]=n[s].settings);a.breakpoints.sort(function(e,t){return t-e})}a.autoPlay=e.proxy(a.autoPlay,a),a.autoPlayClear=e.proxy(a.autoPlayClear,a),a.changeSlide=e.proxy(a.changeSlide,a),a.setPosition=e.proxy(a.setPosition,a),a.swipeHandler=e.proxy(a.swipeHandler,a),a.dragHandler=e.proxy(a.dragHandler,a),a.keyHandler=e.proxy(a.keyHandler,a),a.autoPlayIterator=e.proxy(a.autoPlayIterator,a),a.instanceUid=o++,a.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,a.init()}var o=0;return t}(),t.prototype.addSlide=function(t,o,i){var n=this;if("boolean"==typeof o)i=o,o=null;else if(0>o||o>=n.slideCount)return!1;n.unload(),"number"==typeof o?0===o&&0===n.$slides.length?e(t).appendTo(n.$slideTrack):i?e(t).insertBefore(n.$slides.eq(o)):e(t).insertAfter(n.$slides.eq(o)):i===!0?e(t).prependTo(n.$slideTrack):e(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).remove(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},t.prototype.animateSlide=function(t,o){var i={},n=this;n.transformsEnabled===!1?n.options.vertical===!1?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,o):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,o):n.cssTransitions===!1?e({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(e){n.options.vertical===!1?(i[n.animType]="translate("+e+"px, 0px)",n.$slideTrack.css(i)):(i[n.animType]="translate(0px,"+e+"px)",n.$slideTrack.css(i))},complete:function(){o&&o.call()}}):(n.applyTransition(),i[n.animType]=n.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(i),o&&setTimeout(function(){n.disableTransition(),o.call()},n.options.speed))},t.prototype.applyTransition=function(e){var t=this,o={};o[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,t.options.fade===!1?t.$slideTrack.css(o):t.$slides.eq(e).css(o)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&e.paused!==!0&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;e.options.infinite===!1?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(0===e.currentSlide-1&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,o,i=this;if(i.options.dots===!0&&i.slideCount>i.options.slidesToShow){for(o='<ul class="slick-dots">',t=0;t<=i.getDotCount();t+=1)o+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";o+="</ul>",i.$dots=e(o).appendTo(i.$slider),i.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),t.options.centerMode===!0&&(t.options.slidesToScroll=1,0===t.options.slidesToShow%2&&(t.options.slidesToShow=3)),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.options.accessibility===!0&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),t.options.draggable===!0&&t.$list.addClass("draggable")},t.prototype.checkResponsive=function(){var t,o,i=this;if(i.originalSettings.responsive&&i.originalSettings.responsive.length>-1&&null!==i.originalSettings.responsive){o=null;for(t in i.breakpoints)i.breakpoints.hasOwnProperty(t)&&e(window).width()<i.breakpoints[t]&&(o=i.breakpoints[t]);null!==o?null!==i.activeBreakpoint?o!==i.activeBreakpoint&&(i.activeBreakpoint=o,i.options=e.extend({},i.options,i.breakpointSettings[o]),i.refresh()):(i.activeBreakpoint=o,i.options=e.extend({},i.options,i.breakpointSettings[o]),i.refresh()):null!==i.activeBreakpoint&&(i.activeBreakpoint=null,i.options=e.extend({},i.options,i.originalSettings),i.refresh())}},t.prototype.changeSlide=function(t){var o=this,i=e(t.target);switch(i.is("a")&&t.preventDefault(),t.data.message){case"previous":o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide-o.options.slidesToScroll);break;case"next":o.slideCount>o.options.slidesToShow&&o.slideHandler(o.currentSlide+o.options.slidesToScroll);break;case"index":o.slideHandler(i.parent().index()*o.options.slidesToScroll);break;default:return!1}},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&(t.$prevArrow.remove(),t.$nextArrow.remove()),t.$slides.parent().hasClass("slick-track")&&t.$slides.unwrap().unwrap(),t.$slides.removeClass("slick-slide slick-active slick-visible").removeAttr("style"),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized"),t.$list.off(".slick"),e(window).off(".slick-"+t.instanceUid)},t.prototype.disableTransition=function(e){var t=this,o={};o[t.transitionType]="",t.options.fade===!1?t.$slideTrack.css(o):t.$slides.eq(e).css(o)},t.prototype.fadeSlide=function(e,t){var o=this;o.cssTransitions===!1?(o.$slides.eq(e).css({zIndex:1e3}),o.$slides.eq(e).animate({opacity:1},o.options.speed,o.options.easing,t)):(o.applyTransition(e),o.$slides.eq(e).css({opacity:1,zIndex:1e3}),t&&setTimeout(function(){o.disableTransition(e),t.call()},o.options.speed))},t.prototype.filterSlides=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).remove(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=function(){var e=this;return e.currentSlide},t.prototype.getDotCount=function(){var e,t=this,o=0,i=0,n=0;for(e=t.options.infinite===!0?t.slideCount+t.options.slidesToShow-t.options.slidesToScroll:t.slideCount;e>o;)n++,i+=t.options.slidesToScroll,o=i+t.options.slidesToShow;return n},t.prototype.getLeft=function(e){var t,o,i=this,n=0;return i.slideOffset=0,o=i.$slides.first().outerHeight(),i.options.infinite===!0?(i.slideCount>i.options.slidesToShow&&(i.slideOffset=-1*i.slideWidth*i.options.slidesToShow,n=-1*o*i.options.slidesToShow),0!==i.slideCount%i.options.slidesToScroll&&e+i.options.slidesToScroll>i.slideCount&&i.slideCount>i.options.slidesToShow&&(i.slideOffset=-1*i.slideCount%i.options.slidesToShow*i.slideWidth,n=-1*i.slideCount%i.options.slidesToShow*o)):0!==i.slideCount%i.options.slidesToShow&&e+i.options.slidesToScroll>i.slideCount&&i.slideCount>i.options.slidesToShow&&(i.slideOffset=i.options.slidesToShow*i.slideWidth-i.slideCount%i.options.slidesToShow*i.slideWidth,n=i.slideCount%i.options.slidesToShow*o),i.options.centerMode===!0&&i.options.infinite===!0?i.slideOffset+=i.slideWidth*Math.floor(i.options.slidesToShow/2)-i.slideWidth:i.options.centerMode===!0&&(i.slideOffset+=i.slideWidth*Math.floor(i.options.slidesToShow/2)),t=i.options.vertical===!1?-1*e*i.slideWidth+i.slideOffset:-1*e*o+n},t.prototype.init=function(){var t=this;e(t.$slider).hasClass("slick-initialized")||(e(t.$slider).addClass("slick-initialized"),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.checkResponsive()),null!==t.options.onInit&&t.options.onInit.call(this,t)},t.prototype.initArrowEvents=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.options.autoplay===!0&&e("li",t.$dots).on("mouseenter.slick",t.autoPlayClear).on("mouseleave.slick",t.autoPlay)},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.options.pauseOnHover===!0&&t.options.autoplay===!0&&(t.$list.on("mouseenter.slick",t.autoPlayClear),t.$list.on("mouseleave.slick",t.autoPlay)),t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,function(){t.checkResponsive(),t.setPosition()}),e(window).on("resize.slick.slick-"+t.instanceUid,function(){e(window).width!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()},50))}),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),e.options.autoplay===!0&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),o=e(this).attr("data-lazy");t.css({opacity:0}).attr("src",o).removeAttr("data-lazy").removeClass("slick-loading").load(function(){t.animate({opacity:1},200)})})}var o,i,n,s,a=this;a.options.centerMode===!0||a.options.fade===!0?(n=a.options.slidesToShow+a.currentSlide-1,s=n+a.options.slidesToShow+2):(n=a.options.infinite?a.options.slidesToShow+a.currentSlide:a.currentSlide,s=n+a.options.slidesToShow),o=a.$slider.find(".slick-slide").slice(n,s),t(o),a.currentSlide>=a.slideCount-a.options.slidesToShow?(i=a.$slider.find(".slick-cloned").slice(0,a.options.slidesToShow),t(i)):0===a.currentSlide&&(i=a.$slider.find(".slick-cloned").slice(-1*a.options.slidesToShow),t(i))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.postSlide=function(e){var t=this;null!==t.options.onAfterChange&&t.options.onAfterChange.call(this,t,e),t.animating=!1,t.setPosition(),t.swipeLeft=null,t.options.autoplay===!0&&t.paused===!1&&t.autoPlay()},t.prototype.progressiveLazyLoad=function(){var t,o,i=this;t=e("img[data-lazy]").length,t>0&&(o=e("img[data-lazy]",i.$slider).first(),o.attr("src",o.attr("data-lazy")).removeClass("slick-loading").load(function(){o.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},t.prototype.refresh=function(){var t=this,o=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.currentSlide=o,t.init()},t.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.setSlideClasses(0),e.setPosition(),null!==e.options.onReInit&&e.options.onReInit.call(this,e)},t.prototype.removeSlide=function(e,t){var o=this;return"boolean"==typeof e?(t=e,e=t===!0?0:o.slideCount-1):e=t===!0?--e:e,o.slideCount<1||0>e||e>o.slideCount-1?!1:(o.unload(),o.$slideTrack.children(this.options.slide).eq(e).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).remove(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,void o.reinit())},t.prototype.setCSS=function(e){var t,o,i=this,n={};t="left"==i.positionProp?e+"px":"0px",o="top"==i.positionProp?e+"px":"0px",n[i.positionProp]=e,i.transformsEnabled===!1?i.$slideTrack.css(n):(n={},i.cssTransitions===!1?(n[i.animType]="translate("+t+", "+o+")",i.$slideTrack.css(n)):(n[i.animType]="translate3d("+t+", "+o+", 0px)",i.$slideTrack.css(n)))},t.prototype.setDimensions=function(){var e=this;e.$slideTrack.children(".slick-slide").width(e.options.centerMode===!0?e.slideWidth:e.slideWidth),e.options.vertical===!1?(e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length)),e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding})):(e.$list.height(e.$slides.first().outerHeight()*e.options.slidesToShow),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight()*e.$slideTrack.children(".slick-slide").length)),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"}))},t.prototype.setFade=function(){var t,o=this;o.$slides.each(function(i,n){t=-1*o.slideWidth*i,e(n).css({position:"relative",left:t,top:0,zIndex:800,opacity:0})}),o.$slides.eq(o.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setPosition=function(){var e=this;e.setValues(),e.setDimensions(),e.options.fade===!1?e.setCSS(e.getLeft(e.currentSlide)):e.setFade()},t.prototype.setProps=function(){var e=this;e.positionProp=e.options.vertical===!0?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==document.body.style.WebkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.msTransition)&&e.options.useCSS===!0&&(e.cssTransitions=!0),void 0!==document.body.style.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition"),void 0!==document.body.style.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition"),void 0!==document.body.style.msTransform&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType},t.prototype.setValues=function(){var e=this;e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.slideWidth=Math.ceil(e.options.vertical===!1?e.listWidth/e.options.slidesToShow:e.listWidth)},t.prototype.setSlideClasses=function(e){var t,o,i,n=this;n.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),o=n.$slider.find(".slick-slide"),n.options.centerMode===!0?(t=Math.floor(n.options.slidesToShow/2),n.options.infinite===!0&&(e>=t&&e<=n.slideCount-1-t?n.$slides.slice(e-t,e+t+1).addClass("slick-active"):(i=n.options.slidesToShow+e,o.slice(i-t+1,i+t+2).addClass("slick-active")),0===e?o.eq(o.length-1-n.options.slidesToShow).addClass("slick-center"):e===n.slideCount-1&&o.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(e).addClass("slick-center")):e>0&&e<n.slideCount-n.options.slidesToShow?n.$slides.slice(e,e+n.options.slidesToShow).addClass("slick-active"):o.length<=n.options.slidesToShow?o.addClass("slick-active"):(i=n.options.infinite===!0?n.options.slidesToShow+e:e,o.slice(i,i+n.options.slidesToShow).addClass("slick-active")),"ondemand"===n.options.lazyLoad&&n.lazyLoad()},t.prototype.setupInfinite=function(){var t,o,i,n=this;if((n.options.fade===!0||n.options.vertical===!0)&&(n.options.centerMode=!1),n.options.infinite===!0&&n.options.fade===!1&&(o=null,n.slideCount>n.options.slidesToShow)){for(i=n.options.centerMode===!0?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-i;t-=1)o=t-1,e(n.$slides[o]).clone().attr("id","").prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)o=t,e(n.$slides[o]).clone().attr("id","").appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.slideHandler=function(e){var t,o,i,n,s=null,a=this;return a.animating===!0?!1:(t=e,s=a.getLeft(t),i=a.getLeft(a.currentSlide),n=0!==a.slideCount%a.options.slidesToScroll?a.options.slidesToScroll:0,a.currentLeft=null===a.swipeLeft?i:a.swipeLeft,a.options.infinite===!1&&a.options.centerMode===!1&&(0>e||e>a.slideCount-a.options.slidesToShow+n)?(a.options.fade===!1&&(t=a.currentSlide,a.animateSlide(i,function(){a.postSlide(t)})),!1):a.options.infinite===!1&&a.options.centerMode===!0&&(0>e||e>a.slideCount-a.options.slidesToScroll)?(a.options.fade===!1&&(t=a.currentSlide,a.animateSlide(i,function(){a.postSlide(t)})),!1):(a.options.autoplay===!0&&clearInterval(a.autoPlayTimer),o=0>t?0!==a.slideCount%a.options.slidesToScroll?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount-a.options.slidesToScroll:t>a.slideCount-1?0:t,a.animating=!0,null!==a.options.onBeforeChange&&e!==a.currentSlide&&a.options.onBeforeChange.call(this,a,a.currentSlide,o),a.currentSlide=o,a.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows(),a.options.fade===!0?(a.fadeSlide(o,function(){a.postSlide(o)}),!1):void a.animateSlide(s,function(){a.postSlide(o)})))},t.prototype.startLoad=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")
},t.prototype.swipeDirection=function(){var e,t,o,i,n=this;return e=n.touchObject.startX-n.touchObject.curX,t=n.touchObject.startY-n.touchObject.curY,o=Math.atan2(t,e),i=Math.round(180*o/Math.PI),0>i&&(i=360-Math.abs(i)),45>=i&&i>=0?"left":360>=i&&i>=315?"left":i>=135&&225>=i?"right":"vertical"},t.prototype.swipeEnd=function(t){var o=this;if(o.dragging=!1,void 0===o.touchObject.curX)return!1;if(o.touchObject.swipeLength>=o.touchObject.minSwipe)switch(e(t.target).on("click.slick",function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e(t.target).off("click.slick")}),o.swipeDirection()){case"left":o.slideHandler(o.currentSlide+o.options.slidesToScroll),o.touchObject={};break;case"right":o.slideHandler(o.currentSlide-o.options.slidesToScroll),o.touchObject={}}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1||t.options.draggable===!1&&!e.originalEvent.touches))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,o,i,n,s=this;return n=void 0!==e.originalEvent?e.originalEvent.touches:null,t=s.getLeft(s.currentSlide),!s.dragging||n&&1!==n.length?!1:(s.touchObject.curX=void 0!==n?n[0].pageX:e.clientX,s.touchObject.curY=void 0!==n?n[0].pageY:e.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),o=s.swipeDirection(),"vertical"!==o?(void 0!==e.originalEvent&&s.touchObject.swipeLength>4&&e.preventDefault(),i=s.touchObject.curX>s.touchObject.startX?1:-1,s.swipeLeft=s.options.vertical===!1?t+s.touchObject.swipeLength*i:t+s.touchObject.swipeLength*(s.$list.height()/s.listWidth)*i,s.options.fade===!0||s.options.touchMove===!1?!1:s.animating===!0?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft)):void 0)},t.prototype.swipeStart=function(e){var t,o=this;return 1!==o.touchObject.fingerCount||o.slideCount<=o.options.slidesToShow?(o.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),o.touchObject.startX=o.touchObject.curX=void 0!==t?t.pageX:e.clientX,o.touchObject.startY=o.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(o.dragging=!0))},t.prototype.unfilterSlides=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).remove(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&(t.$prevArrow.remove(),t.$nextArrow.remove()),t.$slides.removeClass("slick-slide slick-active slick-visible").removeAttr("style")},t.prototype.updateArrows=function(){var e=this;e.options.arrows===!0&&e.options.infinite!==!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},e.fn.slick=function(e){var o=this;return o.each(function(o,i){i.slick=new t(i,e)})},e.fn.slickAdd=function(e,t,o){var i=this;return i.each(function(i,n){n.slick.addSlide(e,t,o)})},e.fn.slickCurrentSlide=function(){var e=this;return e.get(0).slick.getCurrent()},e.fn.slickFilter=function(e){var t=this;return t.each(function(t,o){o.slick.filterSlides(e)})},e.fn.slickGoTo=function(e){var t=this;return t.each(function(t,o){o.slick.slideHandler(e)})},e.fn.slickNext=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"next"}})})},e.fn.slickPause=function(){var e=this;return e.each(function(e,t){t.slick.autoPlayClear(),t.slick.paused=!0})},e.fn.slickPlay=function(){var e=this;return e.each(function(e,t){t.slick.paused=!1,t.slick.autoPlay()})},e.fn.slickPrev=function(){var e=this;return e.each(function(e,t){t.slick.changeSlide({data:{message:"previous"}})})},e.fn.slickRemove=function(e,t){var o=this;return o.each(function(o,i){i.slick.removeSlide(e,t)})},e.fn.slickGetOption=function(e){var t=this;return t.get(0).slick.options[e]},e.fn.slickSetOption=function(e,t,o){var i=this;return i.each(function(i,n){n.slick.options[e]=t,o===!0&&(n.slick.unload(),n.slick.reinit())})},e.fn.slickUnfilter=function(){var e=this;return e.each(function(e,t){t.slick.unfilterSlides()})},e.fn.unslick=function(){var e=this;return e.each(function(e,t){t.slick&&t.slick.destroy()})}}),bmRoom={},$(document).on("click",".clroom-mask",function(e){return $("#share-video-link, #invite-people-link").removeClass("onactive"),$(".clroom-mask").hide(),$("#share-video-link").siblings().hide(),$("#invite-people-link").siblings().hide(),e.preventDefault(),!1}),$(document).on("click","#submit-invite",function(){$("#cancel-invite").trigger("click")}),$(document).on("click","#share-video-link",function(e){return $("#share-video-link").toggleClass("onactive"),$(".clroom-mask").toggle(),$("#share-video-link").siblings().toggle(),e.preventDefault(),!1}),bmRoom.layout={},bmRoom.layout.mobile=!0,bmRoom.layout.position="video",bmRoom.layout.closeAllOthers=function(e){switch(e="undefined"==typeof e?"all":e){case"mp4video":bmRoom.whiteboard.end(),bmRoom.videoShare.end(),bmRoom.stream.closeScreen();break;case"whiteboard":bmRoom.mp4Share.end(),bmRoom.videoShare.end(),bmRoom.stream.closeScreen();break;case"youtube":bmRoom.mp4Share.end(),bmRoom.whiteboard.end(),bmRoom.stream.closeScreen();break;case"screenShare":bmRoom.mp4Share.end(),bmRoom.whiteboard.end(),bmRoom.videoShare.end();break;default:bmRoom.mp4Share.end(),bmRoom.whiteboard.end(),bmRoom.videoShare.end(),bmRoom.stream.closeScreen()}},bmRoom.layout.resizeBar=function(){$(".video-uname").each(function(){var e=$(this).parent().find("video"),t=$(this).parent("li"),o=e.prop("videoHeight"),i=e.prop("videoWidth"),n=t.height(),s=t.width(),a=0,r=0,l=0,c=0;s/n>i/o?(a=n,r=i/o*a,left=0,c=0):(r=s,a=o/i*r,l=0,c=(n-a)/2);var d=$(this).parent().find(".stream-ahead");d.length>0&&(r=d.width()),$("#one-cam-share li").length?($(this).css("width",$(this).parent().width()),$(this).css("left",l),$(this).css("bottom",c)):($(this).css("width",r),$(this).css("left",l),$(this).css("bottom",c))}),$(window).width()<1025?bmRoom.admin.control||($(".admin-box").removeClass("onactive"),bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)&&$(".clroom-main").addClass("onactive")):bmRoom.admin.control&&($(".admin-box").addClass("onactive"),$(".clroom-main").removeClass("onactive")),setTimeout(function(){$("#video").height()!=$("#image_slide").height()+$("#video-list").height()&&$("#image_slide").height($("#video").height()-$("#video-list").height())},1e3),bmRoom.layout.resizeTitle()},bmRoom.layout.resizeTitle=function(){var e=$(window).width()-$(".clroom-logo").width()-$(".clroom-nav").width()-40;$(".attendee-title").is(":visible")?e>=500?$(".clroom-name, .clroom-name .clroom-name-title").css("max-width",e+"px"):$(".clroom-name, .clroom-name .clroom-name-title").css("max-width","500px"):$(".admin-title").is(":visible")&&(e>=230?$(".clroom-name, .clroom-name .clroom-name-title").css("max-width",e+"px"):$(".clroom-name, .clroom-name .clroom-name-title").css("max-width","230px"))},bmRoom.layout.stage=function(){$("#video").removeClass("grid").addClass("stage"),$("#video-list > li.av").length?$("#video").removeClass("stage-full"):$("#video").addClass("stage-full")},bmRoom.layout.grid=function(){$("#video").removeClass("stage").removeClass("stage-full").addClass("grid")},bmRoom.layout.errorWarning=function(){$(".error-warning").hide(),$(".error-warning").fadeIn(1500,function(){setTimeout(function(){$(".error-warning").fadeOut(1500)},2e3)})},bmRoom.layout.initUserListPermission=function(e){e?doInitPermission(e):$.each(bmRoom.user.opens,function(e,t){doInitPermission(t)})},bmRoom.layout.enableAudio=function(e){var t=bmRoom.admin.admin_list.indexOf(e.sid)>-1?!0:!1,o=bmRoom.admin.presenter_list.indexOf(e.sid)>-1?!0:!1;return t||o?bmRoom.admin.audio_status.hasOwnProperty(e.sid)?"enable"==bmRoom.admin.audio_status[e.sid].status?!0:!1:!0:$("#mc_lock").hasClass("onactive")?bmRoom.admin.audio_status.hasOwnProperty(e.sid)?"enable"==bmRoom.admin.audio_status[e.sid].status?!0:!1:!0:$("#mc_lock").hasClass("onactive")?bmRoom.admin.audio_status.hasOwnProperty(e.sid)?"enable"==bmRoom.admin.audio_status[e.sid].status?!0:!1:!0:bmRoom.admin.audio_status.hasOwnProperty(e.sid)&&"enable"==bmRoom.admin.audio_status[e.sid].status?!0:!1},bmRoom.layout.enableVideo=function(e){var t=bmRoom.admin.admin_list.indexOf(e.sid)>-1?!0:!1,o=bmRoom.admin.presenter_list.indexOf(e.sid)>-1?!0:!1;return t||o?bmRoom.admin.video_status.hasOwnProperty(e.sid)?"enable"==bmRoom.admin.video_status[e.sid].status?!0:!1:!0:$("#cam_lock").hasClass("onactive")?bmRoom.admin.video_status.hasOwnProperty(e.sid)?"enable"==bmRoom.admin.video_status[e.sid].status?!0:!1:!0:$("#cam_lock").hasClass("onactive")?bmRoom.admin.video_status.hasOwnProperty(e.sid)?"enable"==bmRoom.admin.video_status[e.sid].status?!0:!1:!0:bmRoom.admin.video_status.hasOwnProperty(e.sid)&&"enable"==bmRoom.admin.video_status[e.sid].status?!0:!1},bmRoom.layout.change=function(){$("#video-focus .screen-focus").length>0?bmRoom.layout.stage():$("#video-share-container").is(":visible")?bmRoom.layout.stage():$("#mp4-share-container").is(":visible")?bmRoom.layout.stage():$("#image_slide").is(":visible")?bmRoom.layout.stage():bmRoom.layout.grid(),$("#video-focus .screen-focus").length>0||$("#video-share-container").is(":visible")||$("#mp4-share-container").is(":visible")||$("#image_slide").is(":visible")||$("#video-list li").length>0?$("#welcome-board").hide():$("#welcome-board").show(),$("#video-list > li").length>0?$(".clroom-whitespace").css("background","#ddd"):$(".clroom-whitespace").css("background",""),$("#video-list").attr("class","clear video-"+$("#video-list > li").length),$("#switch-audio").parent().show(),$("#switch-video").parent().show(),$("#cam-menu").hide(),$("#mic-menu").hide(),$("#mic-menu .clroom-more-nav").hide(),$("#cam-menu .clroom-more-nav").hide(),$("#clroom-audio-dropdown-li-off, #clroom-audio-dropdown-li-mute, #clroom-audio-dropdown-li-unmute").show();var e=bmRoom.stream.opens[bmRoom.stream.av_id];if(e)$(".switch-unique").prop("disabled",!1),e.stream.getAudioTracks().length>0&&e.stream.getAudioTracks()[0].enabled?($("#mic-menu").show().removeClass("clroom-mute"),$("#mic-status-on").show(),$("#mic-status-mute").hide(),$("#mic-status-on .clroom-navbtn-text").html("On"),$("#mic-menu ul.clroom-more-nav-list").attr("class","clroom-more-nav-list mic-unmute"),$("#clroom-audio-dropdown-li-unmute").hide(),$(".clroom-mute-dropdown").removeClass("room-mute-list"),$(".clroom-mute-dropdown .clroom-navbtn-text").html("On")):($("#mic-menu").show().addClass("clroom-mute"),$("#mic-status-on").hide(),$("#mic-status-mute").show(),$("#mic-status-mute .clroom-navbtn-text").html("Mic Muted"),$("#mic-menu ul.clroom-more-nav-list").attr("class","clroom-more-nav-list mic-muted"),$("#clroom-audio-dropdown-li-mute").hide(),$(".clroom-mute-dropdown").addClass("room-mute-list"),$(".clroom-mute-dropdown .clroom-navbtn-text").html("Mic Muted")),"a"===e.spec&&($("#switch-audio").prop("disabled",!1).addClass("onactive"),$("#switch-audio .clroom-navbtn-text").html("On"),bmRoom.my.canVideo?setTimeout(function(){$("#switch-video").prop("disabled",!1)},2e3):$("#switch-video").prop("disabled",!0),$(".clroom-nav .clroom-mute").hide(),$(".clroom-nav .clroom-mute-dropdown").show(),$("#switch-audio").parent().hide(),$("#mic-menu").show()),"av"===e.spec&&($("#switch-video").prop("disabled",!1).addClass("onactive"),$("#switch-video .clroom-navbtn-text").html("On"),$("#switch-audio").prop("disabled",!0).removeClass("onactive"),$("#switch-video").parent().hide(),$("#cam-menu").show(),$("#mic-menu").show(),$("#mic-menu ul.clroom-more-nav-list").attr("class","clroom-more-nav-list cam-on"),$("#switch-audio").parent().hide());else{var t=bmRoom.stream.connecting;bmRoom.my.canAudio&&(t&&"publish"===t.type?$("#switch-audio").prop("disabled",!0).removeClass("onactive"):($("#switch-audio").prop("disabled",!1).removeClass("onactive"),$("#switch-audio").data("tips","Turn on mic"))),bmRoom.my.canVideo&&(t&&"publish"===t.type?$("#switch-video").prop("disabled",!0).removeClass("onactive"):($("#switch-video").prop("disabled",!1).removeClass("onactive"),$("#switch-video").data("tips","Turn on mic + cam"))),$(".switch-unique").removeClass("onactive"),$("#switch-video .clroom-navbtn-text").html("Off"),$("#switch-audio .clroom-navbtn-text").html("Off"),$(".clroom-nav .clroom-mute").hide(),$(".clroom-nav .clroom-mute-dropdown").hide()}var e=bmRoom.stream.opens[bmRoom.stream.sc_id];e?($("#switch-screen").addClass("onactive").prop("disabled",!1),"chrome"!==bmRoom.browser&&($("#switch-screen, #blank_screen_share").prop("disabled",!0),$(".clroom-blank-sharescreen").hide()),$(".clroom-modal-box, #bigroom_invite_people").hide(),$("#share-video-link").removeClass("onactive")):bmRoom.my.canScreen&&!bmRoom.stream.opens[bmRoom.stream.csc_id]&&(bmRoom.stream.connecting?$("#switch-screen, #blank_screen_share").prop("disabled",!0):$("#switch-screen, #blank_screen_share").prop("disabled",!1));var e=bmRoom.stream.opens[bmRoom.stream.csc_id];if(e){var o=bmRoom.user.opens[e.sid];o&&$(".recording-tips").html("Showing "+o.name+"'s Desktop"),$(".recording-tips").show()}else $(".recording-tips").hide(),bmRoom.my.canScreen&&($("#switch-screen").removeClass("onactive").prop("disabled",!1),"chrome"!==bmRoom.browser&&($("#switch-screen, #blank_screen_share").prop("disabled",!0),$(".clroom-blank-sharescreen").hide()));if($("#video-list > li").length>8&&($("#switch-video").hasClass("onactive")||($("#switch-video").prop("disabled",!0),$("#switch-video").data("tips","At most 9 streams can be shared for now")),$("#switch-audio").hasClass("onactive")||($("#switch-audio").prop("disabled",!0),$("#switch-audio").data("tips","At most 9 streams can be shared for now"))),"undefined"!=typeof bmRoom.stream.csc_id&&""!=bmRoom.stream.csc_id||bmRoom.whiteboard.status||$("#video-share").is(":visible")||bmRoom.mp4Share.video){var i=!0;$("#video-list > li").each(function(){$(this).hasClass("a")?$(this).hide():i=!1}),i&&$("#video-list").addClass("all-audios")}else $("#video-list > li").each(function(){$(this).hasClass("a")&&$(this).show()}),$("#video-list").addClass("all-audios");bmRoom.layout.initUserListPermission(),setTimeout(bmRoom.layout.initUserListPermission,2e3),bmRoom.layout.resizeBar(),setTimeout(bmRoom.layout.resizeBar,2e3),bmRoom.theme.changeActiveButton()};var presenterTour={id:"presenter-tour",steps:[{title:"Share Your Microphone and Webcam",content:"You can click here to share your mic + cam, and then your audio and video will publish.",target:"switch-video",placement:"bottom",xOffset:-100,arrowOffset:135},{title:"Share Just Your Microphone",content:"You can click here to share just your microphone, and then your audio will publish.",target:"switch-video",placement:"bottom",xOffset:-165,arrowOffset:135},{title:"Share Your Screen",content:"You must be on Google Chrome and have the browser applet to share your screen. When you share, you can select what screen or application to share.",target:"switch-screen",placement:"bottom",xOffset:-100,arrowOffset:138},{title:"Share Presentations and YouTube Videos",content:"Upload your PowerPoints, PDFs, and more into the presentation area. Or copy and paste your Public-or-Unlisted YouTube videos. ",target:"add-files",placement:"bottom",xOffset:-130,arrowOffset:165},{title:"Chat with Everyone in the Conference",content:"In the chat, you can: type and publish text, post links, @ people you would like to message, raise your hand, use emoticons, and delete all posts.",target:"chat_input",placement:"top",arrowOffset:20},{title:"Manage Your Attendees",content:"In your presenter control panel, you can: enable your attendees\u2019 mics + cams, mute those who are sharing, make your attendees presenters, or remove attendees from the conference.",target:"admin_to_audience",placement:"left",yOffset:100,arrowOffset:30},{title:"Record Your Conference ",content:"Record the audio, video, chat, presentation, screen sharing, and YouTube sharing. When you are finished, click Stop Recording. Your recording will publish to your conference page.",target:"admin_to_record",placement:"bottom",xOffset:-130,arrowOffset:175}],showPrevButton:!0,onStart:function(){}},attendeeTour={id:"attendee-tour",steps:[{title:"Share Your Microphone and Webcam",content:"If you have permission from the presenter to share your mic + cam, you can click here to share your mic + cam. Then your audio and video will publish.",target:"switch-video",placement:"bottom",xOffset:-100,arrowOffset:135},{title:"Share Just Your Microphone",content:"If you have permission from the presenter to share your microphone, you can click here to share just your microphone. Then your audio will publish.",target:"switch-audio",placement:"bottom",xOffset:-100,arrowOffset:135},{title:"Chat with Everyone in the Conference",content:"In the chat, you can: type and publish text, post links, @ people you would like to message, raise your hand, use emoticons, and delete your posts.",target:"chat_input",placement:"top",arrowOffset:20}],showPrevButton:!0,onStart:function(){}};$(function(){$("#arena").on("stream:change",bmRoom.layout.change),"firefox"==bmRoom.browser&&$(".clroom-nav > li").append('<div class="clroom-top-button-overlay" />'),$(".clroom-whitespace-resize").on("click",function(){$("#room-body").toggleClass("full-screen"),bmRoom.videoShare.resizeVideo()}),$("#whiteboard-fullscreen").on("click",function(){if($("#room-body").toggleClass("full-screen"),$("#room-body").hasClass("full-screen"))$(this).find(".room-fullscreen").removeClass("room-fullscreen").addClass("room-shrink");else{$(this).find(".room-shrink").removeClass("room-shrink").addClass("room-fullscreen");var e=bmRoom.admin.admin_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1;e&&"separateChat"!=bmRoom.roomType?$(".admin-box").show():$(".admin-box").hide()}bmRoom.layout.resizeBar(),bmRoom.stream.handleVideoAudioHtml()}),$(window).on("resize",bmRoom.layout.resizeBar),$("#confirm-delete").qtip({content:{text:"End Event and kick everyone out."},style:{classes:"qtip-dark qtip-shadow qtip-rounded"},position:{my:"bottom center",at:"top center"}}),$(".clroom-nav li.room-recording").qtip({content:{text:"This conference is being recorded"},style:{classes:"qtip-dark qtip-shadow qtip-rounded"},position:{my:"top center",at:"bottom center"}}),bmRoom.layout.tooltips=function(e,t,o,i,n){e.qtip({overwrite:!0,content:t,style:{classes:"qtip-dark qtip-shadow qtip-rounded qtip-width"},position:{my:i,at:n},show:{event:o.type,ready:!0},hide:"mouseout",onHide:function(){$(this).qtip("destroy")}},o)},$(document).on("mouseover",".clroom-top-button-overlay",function(e){var t="";switch($(this).prev().attr("id")){case"switch-screen":t="Only Chrome can share screen";break;case"switch-audio":case"switch-video":t=bmRoom.stream.connecting?"Loading":"Disabled by Host";break;case"add-files":case"add-videos":t="Disabled: You are not a presenter."}t&&bmRoom.layout.tooltips($(this).parent(),t,e,"top center","bottom center")}),$(document).on("mouseover","#switch-audio, #switch-video",function(e){var t,o="switch-audio"==this.id?"mic":"mic + cam";t=$(this).data("tips")?$(this).data("tips"):$(this).attr("disabled")?bmRoom.stream.connecting?"Loading":"Disabled by Host":$(this).hasClass("onactive")?"Turn off "+o:"Turn on "+o,bmRoom.layout.tooltips($(this).parent(),t,e,"top center","bottom center")}),$(document).on("mouseover","#switch-screen",function(e){var t;t=$(this).data("tips")?$(this).data("tips"):$(this).attr("disabled")?bmRoom.stream.connecting?"Loading":"Disabled: You are not a presenter.":$(this).hasClass("onactive")?"Stop sharing screen":"Start sharing screen","chrome"===bmRoom.browser?bmRoom.layout.tooltips($(this).parent(),t,e,"top center","bottom center"):bmRoom.layout.tooltips($(this).parent(),"Only Chrome can share screen",e,"top center","bottom center")}),$(document).on("mouseover","#add-files",function(e){var t;t=$(this).data("tips")?$(this).data("tips"):$(this).attr("disabled")?"Disabled: You are not a presenter.":$(this).hasClass("onactive")?"Share files or open whiteboards":"Share files or open whiteboards",bmRoom.layout.tooltips($(this).parent(),t,e,"top center","bottom center")}),$(document).on("mouseover","#add-videos",function(e){var t;t=$(this).data("tips")?$(this).data("tips"):$(this).attr("disabled")?"Disabled: You are not a presenter.":$(this).hasClass("onactive")?"Add a video":"Add a video",bmRoom.layout.tooltips($(this).parent(),t,e,"top center","bottom center")}),$(document).on("mouseover","#share-video-link",function(e){var t,o="share-video-link"==this.id?"share YouTube":"share screen";$(this).attr("disabled")&&(t="Only presenter can "+o),bmRoom.layout.tooltips($(this),t,e,"top center","bottom center")}),$(document).on("mouseover",".admin-roles-m",function(e){var t;"admin-roles-m"==$(this).attr("class").replace(" ","")||$(this).hasClass("disabled")?t="Unblock mic":$(this).hasClass("onactive")?t="Turn off mic":$(this).hasClass("enabled")&&(t="Block mic"),bmRoom.layout.tooltips($(this),t,e,"bottom center","top center")}),$(document).on("mouseover",".admin-roles-mu",function(e){var t;"admin-roles-mu"==$(this).attr("class").replace(" ","")?t="Mute mic":$(this).hasClass("closed")&&(t="Unmute"),bmRoom.layout.tooltips($(this),t,e,"bottom center","top center")}),$(document).on("mouseover",".admin-roles-v",function(e){var t;"admin-roles-v"==$(this).attr("class").replace(" ","")?t="Unblock webcam + mic":$(this).hasClass("onactive")?t="Turn off webcam + mic":$(this).hasClass("enabled")&&(t="Block webcam + mic"),bmRoom.layout.tooltips($(this),t,e,"bottom center","top center")}),$(document).on("mouseover","#mc_lock, #cam_lock",function(e){var t,o="mc_lock"==this.id?"mic":"mic + cam";t=$(this).hasClass("onactive")?"Allow attendees to share "+o:"Do not allow attendees to share "+o,bmRoom.layout.tooltips($(this),t,e,"bottom center","top center")}),$(document).on("mouseover",".hover-admin",function(e){var t;t=$(this).parent().hasClass("admin-roles-a")?$(this).parent().hasClass("onactive")?"Remove presenter":"Make presenter":"Presenter",bmRoom.layout.tooltips($(this),t,e,"bottom right","top center")}),$(document).on("mouseover",".admin-roles-d",function(e){$(this).parent().hasClass("user-self")||bmRoom.layout.tooltips($(this),"Remove user",e,"bottom right","top center")}),"chrome"===bmRoom.browser?$("#switch-screen").removeClass("disabled"):$("#switch-screen.disabled").parent().qtip({content:{text:"To use desktop sharing, please use Google Chrome"},style:{classes:"qtip-dark qtip-shadow qtip-rounded"},show:"mouseover",hide:"mouseout",position:{my:"top center",at:"bottom center"}}),$(".enter-overlay-button a").on("click",function(e){e.preventDefault(),$(".enter-overlay").hide()}),$("#bmroom-connect-test-btn").on("click",function(){$("#bmroom-connect-test-des").toggle()}),$("#mic-status-on, #mic-status-mute").on("click",function(e){e.preventDefault(),$("#cam-menu .clroom-more-nav").hide(),$("#mic-menu .clroom-more-nav").toggle()}),$("#cam-status-on").on("click",function(e){e.preventDefault(),$("#mic-menu .clroom-more-nav").hide(),$("#cam-menu .clroom-more-nav").toggle()}),$("#clroom-video-li-switch, #clroom-mic-li-switch").on("click",function(e){e.preventDefault(),"clroom-video-li-switch"==$(this).attr("id")&&($(".enter-test-right .enter-switchbox").removeClass("closed"),$(".enter-test-right .enter-switchbox").hasClass("onactive")||$("#enter-bg-presenter .enter-test-right .enter-test-list-right").trigger("click")),"clroom-mic-li-switch"==$(this).attr("id")&&($(".enter-test-left .enter-switchbox").removeClass("closed"),$(".enter-test-left .enter-switchbox").hasClass("onactive")||$("#enter-bg-presenter .enter-test-left .enter-test-list-right").trigger("click")),$("#enter-bg, #enter-bg-presenter").show()}),$("#show_tips").on("click",function(e){return bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?hopscotch.startTour(presenterTour,0):hopscotch.startTour(attendeeTour,0),e.preventDefault(),!1}),$(document).on("mouseover",".subnav-twitter",function(e){var t;t=$(this).hasClass("onactive")?"Undo Tweet":"Tweet this",bmRoom.layout.tooltips($(this),t,e,"bottom center","top center")}),$(document).on("mouseover",".subnav-retweet",function(e){var t;t=$(this).hasClass("onactive")?"Undo Retweet":"Retweet this",bmRoom.layout.tooltips($(this),t,e,"bottom center","top center")}),$(document).on("mouseover",".subnav-presenter",function(e){var t;t=$(this).hasClass("onactive")?"Undo Favorite":"Favorite",bmRoom.layout.tooltips($(this),t,e,"bottom center","top center")}),$(document).on("mouseover",".subnav-delete",function(e){bmRoom.layout.tooltips($(this),"Delete this",e,"bottom center","top center")})}),bmRoom.chat={},bmRoom.chat.applauseCount=5,bmRoom.chat.load=function(){},bmRoom.chat.store={},bmRoom.chat.message=function(e){{var t="",o=moment(new Date(e.timestamp)),i=o.format("h:mm:ss a");Object.keys(e.tweeted_users).indexOf(bmRoom.userID)>=0?"onactive":""}t+='<li id="msg-'+e.timestamp+'" data-author="'+e.sid+'">',t+='  <div class="clroom-groupchat-img">',t+='    <a href="javascript:void(0);"><img src="'+bmRoom.message.userImage(e)+'"></a>',t+="  </div>",t+='  <div class="clroom-groupchat-right">',t+='    <div class="clroom-groupchat-right-in">',t+='      <div class="clroom-groupchat-name">',bmRoom.user.isAdmin(e.sid)&&(t+='        <span class="room-admin hover-admin"></span>'),t+='        <a href="javascript:void(0);">'+e.name+"</a>",t+='        <div class="clroom-groupchat-date"> &middot; '+i+"</div>",t+="      </div>",t+='      <div class="clroom-groupchat-text" id="'+e.timestamp+'">'+bmRoom.message.convertCode(e)+"</div>",t+='      <ul class="clroom-group-chat-subnav">',t+="        <li>";var n="none";return(bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)||bmRoom.socket.io.engine.id==e.sid)&&(n="block"),t+='          <a href="javascript:void(0);" class="subnav-delete" id="delMsg-'+e.timestamp+'" onclick="bmRoom.chat.delete(\''+e.timestamp+'\')" style="display: '+n+'">',t+='            <span class="room-delete"></span>',t+="          </a>",t+="        </li>",t+="      </ul>",t+="    </div>",t+="  </div>",t+="</li>"},bmRoom.chat.append=function(e,t){var o=t[0].scrollHeight-(t.scrollTop()+t.height())<=54;$("#chat-message > li").not("#load-more-chats").length>0||"chat-message"!=t.attr("id")?t.append(e):t.find("#load-more-chats").length>0&&t.find("#load-more-chats").after(e),o?(t.scrollTop(t[0].scrollHeight),$("#message_count").text(0)):($("#message_count").text(parseInt($("#message_count").text())+1),$("#checkout_new_message").removeClass("close"))},bmRoom.chat.prepend=function(e,t){$("#chat-message li[id^=msg-]").length>0||"chat-message"!=t.attr("id")||$(e).hasClass("is_twitter")?t.append(e):t.find("#load-more-chats").length>0&&t.find("#load-more-chats").after(e),t.scrollTop(t[0].scrollHeight)},bmRoom.chat.send=function(e){if($.trim($("#chat_input_value").val())){var t={};t.name=bmRoom.my.name,t.photo=bmRoom.my.photo,t.timestamp=Date.now(),"private_chat"==e&&0==bmRoom.user.chatWith.length?$("[id^=chat-wrapper-]").filter(":visible").length>0?bmRoom.user.chatWith=$("[id^=chat-wrapper-]").filter(":visible").attr("id").replace("chat-wrapper-",""):e="public_chat":"public_chat"==e&&bmRoom.user.chatWith.length>0&&($("[id^=chat-wrapper-]").filter(":visible").length>0?(bmRoom.user.chatWith=$("[id^=chat-wrapper-]").filter(":visible").attr("id").replace("chat-wrapper-",""),e="private_chat"):bmRoom.user.chatWith=""),t.chat_type=e,t.to_id=bmRoom.user.chatWith,t.content=$("#chat_input_value").val(),t.content=t.content.replace(/<br>$/,"");var o=/(href=['"])?(https?\:\/\/\S*)((\s+)|$)/gi;t.content=t.content.replace(o,function(e,t,o){return t?t+o:'<a href="'+o+'" target="_blank">'+o+"</a>"}),t.content=t.content.replace(emoji_re,'<img src="/assets/emoji/$1.png" class="chat-emoji">'),$("#as-question-and-answer").is(":checked")&&bmRoom.admin.question_answer_lock?($("#chat-input .prettycheckbox > a.checked").trigger("click"),t.user_id=bmRoom.userID,t.user_email=bmRoom.userEmail,bmRoom.questionAnswer.post(t)):(bmRoom.socket.send(t),bmRoom.admin.opens[t.to_id]?bmRoom.saveRecordingAction("PrivateChatEvent","CHAT",t.content,"","","","","",bmRoom.admin.opens[t.to_id].id):bmRoom.saveRecordingAction("PublicChatEvent","CHAT",t.content,"",""))}},bmRoom.chat.start=function(){$("#chat-input textarea").on("keydown",function(e){13==e.which&&(e.preventDefault(),bmRoom.chat.send(1==$("[id^=chat-wrapper-]").filter(":visible").length?"private_chat":"public_chat"))}),$("#load-more-chats").click(function(){var e=$(this),t=10,o=e.data("end-index");if("enabled"==e.data("status")){$("#load-more-chats span").text("Loading...");var i=0;$("#chat-message li[id^=msg-]").length>0&&(i=$("#chat-message li[id^=msg-]").attr("id").replace("msg-","")),bmRoom.socket.emit("message:load",[t,o,i],function(t,o){"desc"==o&&(t=t.reverse());var i="";$.each(t,function(e,t){var o=JSON.parse(t);if("object"==typeof o){var n=bmRoom.chat.message(o);i+=n}}),t.length>0?($("#load-more-chats").after(i),$("#load-more-chats span").text("View Past Chats")):(e.data("status","disabled"),$("#load-more-chats span").text("No More Chats"))})}}),$(document).on("click","[id^=tweet_chat_]",function(){var e=this.id.replace("tweet_chat_","");if($("#chat_bottom").attr("data-token")&&$("#chat_bottom").attr("data-token-secret"))if($(this).hasClass("onactive"))bmRoom.socket.emit("undo_tweet_chat",{timestamp:e,tweet_id:$(this).attr("data-tweet-id"),user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,content_text:$("#"+e).text(),user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")});else{var t=$("#"+e).text();if($("#msg-"+e).attr("data-author")!=bmRoom.socket.io.engine.id){var o=$(this).attr("data-poster-screen-name");t='"'+t+'" by @'+o}bmRoom.socket.emit("tweet_chat",{timestamp:e,user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,content_text:t,conference_url:window.location.href,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")})}else window.open("/auth/twitter?request_source=conference_room_tweet_chat&tweet_id="+e,"","width=600, height=500")}),bmRoom.socket.on("tweet_chat",function(e){"undo"==e.type?($("#tweet_chat_"+e.timestamp).removeClass("onactive"),$("#tweet_chat_"+e.timestamp).attr("data-tweet-id","")):($("#tweet_chat_"+e.timestamp).addClass("onactive"),$("#tweet_chat_"+e.timestamp).attr("data-tweet-id",e.tweet_id))}),bmRoom.socket.on("message:new",function(e){if(e.room_id=e.room_id.split("-")[0],e.room_id==$("#conference-obfuscated-id").val()){if(bmRoom.socket.io.engine.id===e.sid){$("#chat_input_value").val("");var t=$("#chat-message");t.scrollTop(t[0].scrollHeight)}if(e.to_id)if(bmRoom.socket.io.engine.id===e.sid)var o=$("#chat-message"+e.to_id);else var o=$("#chat-message"+e.sid);else var o=$("#chat-message");if(0==$("#msg-"+e.timestamp).length){if(o.is(":visible")){var i=bmRoom.chat.message(e);bmRoom.chat.append(i,o)}else{if(bmRoom.socket.io.engine.id===e.sid)var n=e.to_id||"group-chat";else var n=e.to_id?e.sid:"group-chat";bmRoom.chat.store[n]=bmRoom.chat.store[n]||[],bmRoom.chat.store[n].push(e);var s=$('<span class="unread-count" />');if(s.html("undefined"!=typeof bmRoom.chat.store["group-chat"]&&bmRoom.chat.store["group-chat"].length>99?"<i>99+</i>":"<i>"+bmRoom.chat.store[n].length+"</i>"),"group-chat"!=n){$("#user-"+n+" .unread-count").remove(),$("#chat-panel-"+n+" .unread-count").remove(),$("#chat-panel-"+n).length>0&&$("#chat-panel-"+n).append(s.clone()),r={},r.sid=e.sid,r.name=e.name,bmRoom.user.openChat(r,!1);var i=bmRoom.chat.message(e);if(bmRoom.chat.prepend(i,$("#chat-message"+e.sid)),$("#user-"+e.sid+" .clroom-people-header .clroom-people-msg-nub").remove(),$("#user-"+e.sid+" .clroom-people-header").prepend('<div class="clroom-people-msg-nub">'+bmRoom.chat.store[n].length+"</div>"),!$("#roomchat_people").hasClass("onactive")){var a=0;$("#roomchat_people .unread-count").length>0?a=parseInt($("#roomchat_people .unread-count").text())+1:a+=1,a>0&&$("#roomchat_people .unread-count").remove(),$("#roomchat_people").append('<span class="unread-count" ><i>'+a+"</i></span>")
}}else $("#roomchat_group .unread-count").remove(),$("#roomchat_group").append(s)}if(e.to_id){var r=bmRoom.user.opens[e.sid];r&&bmRoom.socket.io.engine.id!==e.sid&&($("#chat-wrapper-"+r.sid).is(":visible")||bmRoom.user.openChat(r,!1))}}}}),bmRoom.socket.on("message:sync_delete",function(e){$("#msg-"+e).slideUp("slow",function(){$(this).remove()})}),bmRoom.socket.on("raise-hand",function(e){var t=JSON.parse(e);if(bmRoom.socket.io.engine.id===t.sid||bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)){var o=$('<li class="user-hand-message" />');o.html(t.name+" is raising hand."),o.prepend($('<span class="room-hand" />')),bmRoom.chat.append(o,$("#chat-message"))}bmRoom.admin.insertHtml(t,!0),bmRoom.user.insertHtml(t,!0),$("#admin-panel-people-attendee > ul.admin-roles-attendees > li#admin-user-"+t.sid).length>0&&$("#raise-hand-"+t.sid).show();var i=$("#admin-panel-people-attendee .admin-roles-h:visible").length;$("#admin-panel-title-attendee span.raise-hand-count").text(i),i>0?$("#admin-panel-title-attendee > .clroom-hand-raised-box").show():$("#admin-panel-title-attendee > .clroom-hand-raised-box").hide()}),bmRoom.socket.on("cancel-raise-hand",function(e){if("all"==e)$("#admin-panel-title-attendee span.raise-hand-count").text(0),$("#admin-panel-title-attendee > .clroom-hand-raised-box").addClass("close"),$("#admin-panel-people-attendee .admin-roles-h").hide();else{var t=JSON.parse(e),o=$("#admin-panel-people-attendee .admin-roles-h:visible").length-1;$("#admin-panel-title-attendee span.raise-hand-count").text(o),$("#raise-hand-"+t.sid).hide()}o>0?$("#admin-panel-title-attendee > .clroom-hand-raised-box").show():$("#admin-panel-title-attendee > .clroom-hand-raised-box").hide()}),bmRoom.socket.on("hand-clapping",function(e){var t=parseInt($("#applause-count").data("total"))+1;if($("#applause-count").text(t.toLocaleString()),$("#applause-count").data("total",t),$("#applause-area > ul > li").length>9){var o=$("#applause-area > ul > li").length-9,i=$("#applause-area > ul > li:lt("+o+")");i.animate({height:"0"},300,function(){$(this).remove()})}addApplauseAvatar(e)}),bmRoom.socket.on("snyc-hand-clapping",function(e){$("#applause-area > ul > li").remove();var t=e[0].reverse(),o=parseInt(e[1]);$("#applause-count").text(o.toLocaleString()),$("#applause-count").data("total",o),$.each(t,function(e,t){t=JSON.parse(t);var o=applauseElement(t,!1);$("#applause-area > ul").append(o),bindApplauseHover(t)})}),bmRoom.socket.on("videoShare:action",function(e,t){var t=JSON.parse(t),o=$('<li class="user-change-message" />');o.html("autoplay"==e?"start to autoplay video.":t.name+" "+e+" video."),bmRoom.chat.append(o,$("#chat-message"))}),bmRoom.socket.on("mp4Share:action",function(e,t){var t=JSON.parse(t),o=$('<li class="user-change-message" />');o.html("ended"==e?"MP4 video is over":"autoplay"==e?"start to autoplay mp4 video.":t.name+" "+e+" mp4 video."),bmRoom.chat.append(o,$("#chat-message"))}),bmRoom.socket.on("knock:action",function(e){bmRoom.chat.displayKnockAction(e)})},bmRoom.chat.displayKnockAction=function(e){if(e.confId==bmRoom.roomID){var t=$('<li class="user-change-message" />');switch(e.action){case"knock":t.html(e.name+" knock knock.");break;case"allowed":t.html(e.handler.name+" allowed "+e.name+" to enter the room."),$("#"+e.random_id+"-li").remove(),0==$("#knock-box-waiting-list > li").length&&$("#knock_notification_box").hide();break;case"declined":t.html(e.handler.name+" declined "+e.name+" to enter the room."),$("#"+e.random_id+"-li").remove(),0==$("#knock-box-waiting-list > li").length&&$("#knock_notification_box").hide()}bmRoom.chat.append(t,$("#chat-message"))}};var bmChatContent=function(){$("#chat_input").on("keydown",function(t){var o=$(this).html().replace(/<.*?>/g,"").replace(/&nbsp;/gi,"0");if($("#type_count").html(o.length),o.length>110?$("#post_and_tweet").hide():bmRoom.user.chatWith||$("#post_and_tweet").show(),"firefox"==bmRoom.browser,13==t.which)t.preventDefault(),$("#chat_filter").is(":visible")?(t.preventDefault(),bmRoom.message.confirmSelect()):$.trim($("#chat_input_value").val())&&(bmRoom.chat.send(1==$("[id^=chat-wrapper-]").filter(":visible").length?"private_chat":"public_chat"),$("#chat_input").html(""),$("#chat_input_value").val(""),$("#type_count").html("0"));else if(9==t.which&&$("#chat_filter_list li.active").length)t.preventDefault(),bmRoom.message.confirmSelect();else if(186==t.which&&bmRoom.message.emojiSelecting&&$("#chat_filter_list li.active").length)t.preventDefault(),bmRoom.message.confirmSelect();else if(40==t.which&&$("#chat_filter").is(":visible")){t.preventDefault();var i=$("#chat_filter_list li.active");i?(i.removeClass("active"),i.next().length?i.next().addClass("active"):$("#chat_filter_list li:first").addClass("active")):$("#chat_filter_list li:first").addClass("active")}else if(27==t.which&&$("#chat_filter").is(":visible"))e();else if(38==t.which&&$("#chat_filter").is(":visible")){t.preventDefault();var i=$("#chat_filter_list li.active");i?(i.removeClass("active"),i.prev().length?i.prev().addClass("active"):$("#chat_filter_list li:last").addClass("active")):$("#chat_filter_list li:last").addClass("active")}}),$("#chat_input").on("keyup",function(){var e=$("#chat_input").html();"firefox"!=bmRoom.browser&&("<br>"==e?$("#chat_input").html(""):""!=e&&"<br>"!=e.slice(-4)&&($("#chat_input").html(e+"<br>"),bmRoom.message.setEndOfContenteditable("chat_input")))}),$("#chat_input").on("input",function(){if(bmRoom.message.htmlToValue()){var e=bmRoom.message.getInputString();e.type.length?bmRoom.message.filterList(e):$("#chat_filter").hide()}}),$("#chat_input").on("paste",function(e){return console.log(e),e.srcElement.innerText}),$("#post_message").click(function(){bmRoom.chat.send(1==$("[id^=chat-wrapper-]").filter(":visible").length?"private_chat":"public_chat"),$("#chat_input").html(""),$("#chat_input_value").val(""),$("#type_count").html("0")}),$(document).on("click","html",function(){e()}),$(".clroom-chat-input-btu-box > li > a").not("#hands_up").click(function(e){e.stopPropagation()}),$("#chat_textarea #room-at").on("click",function(){$("#chat_input").trigger("focus"),bmRoom.message.setEndOfContenteditable("chat_input"),$("#chat_input").html($("#chat_input").html()+" @"),bmRoom.message.setEndOfContenteditable("chat_input"),bmRoom.message.filterList({type:"at",last:""},bmRoom.message.user_online)}),$("#chat_textarea #select_face").on("click",function(){$("#chat_input").trigger("focus"),bmRoom.message.setEndOfContenteditable("chat_input"),$("#chat_input").html($("#chat_input").html()+" :"),bmRoom.message.setEndOfContenteditable("chat_input"),bmRoom.message.filterList({type:"emoji",last:""})}),$("#applause").on("click",function(){if(bmRoom.chat.applauseCount>0){bmRoom.chat.applauseCount--;var e=$(this).parent();e.stop(),e.css("opacity",bmRoom.chat.applauseCount/10+.5),e.animate({opacity:1},1e4,function(){bmRoom.chat.applauseCount=5}),bmRoom.socket.emit("hand-clapping")}}),$("#chat_textarea #hands_up").on("click",function(){bmRoom.socket.emit("raise-hand")}),$(document).on("focus","#chat_input",function(){$(".chat-grey",this).is(":visible")&&($(this).html(""),bmRoom.message.setEndOfContenteditable("chat_input")),$("#chat_bottom").addClass("onfocus"),$("#roomchat_group_area").addClass("onfocus"),$("#twitter_account_bottom > span").text().length<=1&&$("#twitter_account_bottom > span").text("@"+bmRoom.user.opens[bmRoom.socket.io.engine.id].twitter_name)}),$(document).on("blur","#chat_input",function(){0===$.trim($(this).html()).length&&$(this).html('<span class="chat-grey">Type your message here...</span>')}),$(document).on("mouseover","#chat_filter_list li",function(){$("#chat_filter_list li").removeClass("active"),$(this).addClass("active")}),$(document).on("click","#chat_filter_list li",function(){bmRoom.message.confirmSelect()});var e=function(){"block"==$("#chat_filter").css("display")&&($("#chat_input").html($("#chat_input").html().replace(/\s*(:|@)$/,"")),$("#chat_filter_list li").removeClass("active"),bmRoom.message.setEndOfContenteditable("chat_input"),bmRoom.message.htmlToValue(),$("#chat_filter").hide())};$("#chat_init").hide()};bmRoom.chat.delete=function(e){bmRoom.socket.emit("message:delete",e)},bmRoom.chat.handleDelBtn=function(){$("#chat-message li[id^=msg-]").each(function(){var e=$(this).attr("id").replace("msg-","");bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)||$(this).data("author")==bmRoom.socket.io.engine.id?$("#delMsg-"+e).show():$("#delMsg-"+e).hide()})},bmRoom.stream={},bmRoom.stream.volumeIntervals={},bmRoom.stream.connections={},bmRoom.stream.markForDelete=[],bmRoom.stream.published=[],bmRoom.stream.connTime={},bmRoom.stream.connCount={},bmRoom.stream.singleBoxPosition="on-lefttop",bmRoom.stream.onvolumechange=function(e,t,o){$("#stream-"+e+" .video-uname").css("background-size",o),$("#user-"+t).css("background-size",o),$("#admin-user-"+t).css("background-size",o),$("#single-cam-share li#stream-"+e).length>0&&$("#single-cam-share-box .clroom-attendeer-status-voice-in").css("width",o.split(" ")[0])},bmRoom.stream.getMuxerID=function(e){for(var t in bmRoom.stream.opens){var o=bmRoom.stream.opens[t];if("sc"!=o.spec&&e==o.sid)return t}return""},bmRoom.stream.clearAdminPanelIcon=function(e){bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-m","enabled"),bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-v","enabled")},bmRoom.stream.changeAdminPanelIcon=function(e){"a"===e.spec&&bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-m","enabled onactive"),"av"===e.spec&&bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-v","enabled onactive"),e.aopen?bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-mu",""):bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-mu","closed")},bmRoom.stream.whoIsTaking=function(e,t){var o=!0;for(var i in bmRoom.stream.opens)bmRoom.stream.opens[i].audioLevel>t&&(e=i,t=bmRoom.stream.opens[i].audioLevel),bmRoom.stream.opens[i].audioLevel>0&&(o=!1);if(t>0){var n=bmRoom.stream.opens[e].sid,s=bmRoom.user.opens[n];$("#speaking-status-slide-up").is(":hidden")&&$("#speaking-status-slide-down").is(":hidden")&&($("#speaking-status-slide-up").show(),$("#speaking-status-slide-down").hide()),bmRoom.stream.genSpeakerStatus();var a=$("#speaker-li-"+e),r=s.name;s.name.length>20&&(r=s.name.substr(0,20)+"..."),$("#speaking-status-name").text(r),$("#speakers-status-list > li").removeClass("speaking"),a.addClass("speaking"),$("#speaking-status-slide-up").attr("data-speaker-mid",e);var l=($("#speaker-li-"+e),"perfect-connection");a.hasClass("good-connection")&&(l="good-connection"),a.hasClass("poor-connection")&&(l="poor-connection"),$("#speaking-status-slide-up > .clroom-presenter-connection-box-inner").removeClass("perfect-connection poor-connection good-connection").addClass(l);var c=$("#speakers-status-list > li").not("#speakers-list-model").length;$("#speaking-status-slide-down").is(":visible")?$("#group-chat-outbox").css("top",36*c+36+"px"):$("#speaking-status-slide-up").is(":visible")?$("#speaking-status-slide-up > .poor-connection").length>0?$("#group-chat-outbox").css("top","72px"):$("#group-chat-outbox").css("top","52px"):$("#group-chat-outbox").css("top",0)}o&&($("#speaking-status-slide-up > .clroom-presenter-connection-box-inner").removeClass().addClass("clroom-presenter-connection-box-inner").removeAttr("data-speaker-mid"),$("#speaking-status-name").text("No Speaker"),$("#speakers-status-list > li").removeClass("speaking"))},bmRoom.stream.getVolume=function(e,t,o){if("firefox"===bmRoom.browser){var i=bmRoom.audioCtx;analyser=i.createAnalyser(),analyser.smoothingTimeConstant=.3,analyser.fftSize=512;var n=i.createMediaStreamSource(e.stream);n.connect(analyser);var s=new Uint8Array(analyser.frequencyBinCount);bmRoom.stream.volumeIntervals[e.muxer_id]=setInterval(function(){var t=0;analyser.getByteFrequencyData(s);for(var i=0;i<s.length;i++)t+=s[i];if(bmRoom.stream.opens[e.muxer_id]){var n=bmRoom.stream.opens[e.muxer_id];n.stream.getAudioTracks()[0].enabled||(t=0)}else t=0,bmRoom.stream.volumeIntervals[e.muxer_id]&&clearInterval(bmRoom.stream.volumeIntervals[e.muxer_id]);var a=t/5e4*100+"% 15%";o(a)},t)}if("chrome"===bmRoom.browser){var a=bmRoom.stream.pcs[e.muxer_id];bmRoom.stream.volumeIntervals[e.muxer_id]=setInterval(function(){a.getStats(function(t){var i=0;if(t.result().forEach(function(e){e.names().forEach(function(t){("audioInputLevel"==t||"audioOutputLevel"==t)&&(i+=parseInt(e.stat(t)))})}),bmRoom.stream.opens[e.muxer_id]){var n=bmRoom.stream.opens[e.muxer_id];n.stream.getAudioTracks()[0].enabled||(i=0)}else i=0,bmRoom.stream.volumeIntervals[e.muxer_id]&&clearInterval(bmRoom.stream.volumeIntervals[e.muxer_id]);var s=i/5e4*100+"% 15%";o(s)})},t)}},void 0!==navigator.mozGetUserMedia?(navigator.getUserMedia=navigator.mozGetUserMedia,RTCPeerConnection=mozRTCPeerConnection,RTCSessionDescription=mozRTCSessionDescription,RTCIceCandidate=mozRTCIceCandidate,bmRoom.browser="firefox",bmRoom.stream.can=!0):void 0!==navigator.webkitGetUserMedia?(navigator.getUserMedia=navigator.webkitGetUserMedia,RTCPeerConnection=webkitRTCPeerConnection,RTCSessionDescription=RTCSessionDescription,RTCIceCandidate=RTCIceCandidate,bmRoom.browser=DetectRTC.browser.isChrome?"chrome":"others",bmRoom.stream.can=!0):(navigator.getUserMedia={},RTCPeerConnection={},RTCSessionDescription={},bmRoom.browser="others",bmRoom.stream.can=!1),bmRoom.stream.pcs={},bmRoom.stream.connect=function(e,t){var o={iceServers:[{urls:"stun:13.91.46.140:3478?transport=udp"}]};bmRoom.stream.twillo.username&&bmRoom.stream.twillo.password,o.iceServers.push({urls:"turn:13.91.3.242:443?transport=tcp",username:"bigroom",credential:"bigroom"});var i={mandatory:{googIPv6:!1},optional:[{DtlsSrtpKeyAgreement:!0}]},n=new RTCPeerConnection(o,i);setTimeout(function(){["checking","new"].indexOf(n.iceConnectionState)>-1&&n.close()},15e3),bmRoom.stream.pcs[e.muxer_id]=n;var s={muxer_id:e.muxer_id,spec:e.spec,pc:n,aopen:e.aopen,sid:e.sid};n.id=Date.now().toString(36)+Math.random().toString(36).slice(2);n.onicecandidate=function(t){if(t.candidate){"sdparta_0"==t.candidate.sdpMid&&(t.candidate.sdpMid="audio"),"sdparta_1"==t.candidate.sdpMid&&(t.candidate.sdpMid="video");var o={sid:n.id,muxer_id:e.muxer_id,candidate:t.candidate};n.localCandidates||(n.localCandidates=[]),n.localDescriptionSended?bmRoom.socket.emit("stream:candidate",o):n.localCandidates.push(o)}},"publish"===e.type&&n.addStream(e.stream);var a={offerToReceiveVideo:!0,offerToReceiveAudio:!0,mozDontOfferDataChannel:!0};n.createOffer(function(t){n.setLocalDescription(t,function(){},function(){});var o={type:e.type,muxer_id:e.muxer_id,spec:e.spec,sdp:t.sdp,pid:n.id,tw_username:bmRoom.stream.twillo.username,tw_password:bmRoom.stream.twillo.password};bmRoom.socket.emit("stream:connect",o,function(t){var i=JSON.parse(t);rsdp=i.sdp,rsdp.match(/a=ssrc:55543/)&&"chrome"===bmRoom.browser&&(rsdp=rsdp.replace(/a=sendrecv\na=mid:video/,"a=recvonly\na=mid:video"),rsdp=rsdp.split("a=ssrc:55543")[0]),"firefox"===bmRoom.browser&&(rsdp=rsdp.replace(/a=group:BUNDLE audio video/g,"a=group:BUNDLE sdparta_0 sdparta_1"),rsdp=rsdp.replace(/a=mid:audio/g,"a=mid:sdparta_0"),rsdp=rsdp.replace(/a=mid:video/g,"a=mid:sdparta_1"),"publish"==o.type?"a"==o.spec&&(rsdp=rsdp.replace(/a=sendrecv\na=mid:sdparta_1/,"a=sendonly\na=mid:sdparta_1")):rsdp=rsdp.replace(/a=sendrecv/g,"a=sendonly")),"publish"!=o.type&&"a"==o.spec&&(rsdp=rsdp.split("ulpfec/90000")[0]+"ulpfec/90000\r\n"),n.setRemoteDescription(new RTCSessionDescription({sdp:rsdp,type:"answer"}),function(){for(n.remoteDescriptionSetted=!0,n.localDescriptionSended=!0;n.remoteCandidates&&n.remoteCandidates.length>0;){var e=n.remoteCandidates.shift();if(e.candidate.indexOf("prflx")>0)return;n.addIceCandidate(e)}for(;n.localCandidates&&n.localCandidates.length>0;){var t=n.localCandidates.shift();bmRoom.socket.emit("stream:candidate",t)}},function(e){console.error("set remote description failed: ",e),console.error("local sdp:",o.sdp),console.error("remote sdp:",rsdp)}),bmRoom.saveRecordingAction("StartStreamShareEvent",o.spec,"","","",e.sid)})},function(){},a),n.oniceconnectionstatechange=function(){bmRoom.stream.handleVideoAudioHtml();var e=n.iceConnectionState;console.log(e),("closed"===e||"failed"===e)&&t(!0,s),"av"!=s.spec&&"a"!=s.spec||s.sid!=bmRoom.socket.io.engine.id||("connected"==e&&bmRoom.twilioCall.call(),("closed"===e||"failed"===e)&&bmRoom.twilioCall.cancel())},n.onaddstream=function(o){e.stream&&("sc"===e.spec?bmRoom.stream.sc_id=e.muxer_id:bmRoom.stream.av_id=e.muxer_id),s.stream=e.stream||o.stream,bmRoom.stream.opens[e.muxer_id]=s,bmRoom.stream.addBox(s,!1);var i=bmRoom.stream.videoRecorders[e.muxer_id];i&&i.start(1e3*bmRoom.stream.recordInterval);var n=bmRoom.stream.audioRecorders[e.muxer_id];n&&n.start(1e3*bmRoom.stream.recordInterval),t(!1,s)}},bmRoom.stream.pushJobs=function(e){var t=e.muxer_id;if(t&&!bmRoom.stream.opens[t]&&e.sid&&bmRoom.user.opens[e.sid]){var o={};o.type="subscribe",o.muxer_id=t,o.spec=e.spec,o.sid=e.sid,o.aopen=e.aopen,bmRoom.stream.jobs.indexOf(o)>-1||bmRoom.stream.connecting&&t==bmRoom.stream.connecting.muxer_id||bmRoom.stream.jobs.push(o)}},bmRoom.stream.syncStream=function(){bmRoom.stream.connecting||bmRoom.socket.emit("stream:sync",function(e){$.each(e,function(e,t){var t=JSON.parse(t);bmRoom.stream.pushJobs(t)}),$.each(bmRoom.stream.opens,function(t,o){var i=bmRoom.stream.pcs[t],n=["closed","disconnected","closed"];i&&e[t]&&n.indexOf(i.iceConnectionState)<0?bmRoom.stream.opens[t].failures=0:(bmRoom.stream.opens[t].failures++,bmRoom.stream.opens[t].failures>3&&(console.log("Remove 1"),bmRoom.stream.removeBox(o)))})})},bmRoom.stream.popFailed=function(){console.log("popFailed..."),$("#bigroom_failed_popup").show()},bmRoom.stream.popFailedHide=function(){console.log("popFailedHide..."),$("#bigroom_failed_popup").hide()},bmRoom.stream.addBox=function(e,t){var t=t?!0:!1;if(!t&&(bmRoom.stream.connCount[e.muxer_id]=bmRoom.stream.connCount[e.muxer_id]?bmRoom.stream.connCount[e.muxer_id]+1:1,bmRoom.stream.connCount[e.muxer_id]>3))return void bmRoom.stream.popFailed();t?bmRoom.stream.connTime[e.muxer_id]||(bmRoom.stream.connTime[e.muxer_id]=setTimeout(function(){bmRoom.stream.popFailed()},12e4)):(bmRoom.stream.popFailedHide(),clearTimeout(bmRoom.stream.connTime[e.muxer_id]));var o=bmRoom.user.opens[e.sid],i=$("#stream-"+e.muxer_id);if(i.addClass(e.spec),0===i.length){var n=$('<div class="stream-bg" />').html('<div class="room-loading"><span class="room-facetime-videos"></span><p>loading...</p></div>'),s=$('<div class="stream-bg" />').html('<div class="room-loading"><span class="room-microphone"></span><p>loading...</p></div>'),a=$('<div class="stream-bg" />').html('<div class="room-loading"><span class="room-sharescreen"></span><p>loading...</p></div>');if("sc"===e.spec){i=$('<div class="screen-focus" id="stream-'+e.muxer_id+'" />');var r='<div class="clroom-pannel-control" id="sharescreen-full-area" style="width: auto; height: 40px; top: -40px;">';r+='<ul class="clroom-pannel-nav">',r+="<li>",r+='<a href="#" id="share-fullscreen" style="padding: 8px;">',r+='<span class="room-fullscreen"></span>',r+="</a>",r+="</li>",r+="</ul>",r+="</div>",i.append(a).prepend(r),$("#video-focus").append(i),bmRoom.stream.handleVideoAudioHtml(),bmRoom.stream.screenShareFullScreen()}else{var i=$('<li id="stream-'+e.muxer_id+'" />');if(i.append("a"===e.spec?s:n),e.sid&&bmRoom.user.opens[e.sid]){var l=o.name;o.name.length>20&&(l=o.name.substr(0,20)+"...");var c=$("<div />").html(l).addClass("video-uname");i.append(c),bmRoom.stream.genSpeakerStatus(e,"add")}"a"===e.spec?$("#audio-list").append(i):bmRoom.stream.handleVideoAudioHtml(i,!0)}i=$("#stream-"+e.muxer_id)}if(!t){switch(bmRoom.stream.loading=!1,e.spec){case"a":var d=$('<audio class="stream" />');if(d.attr("src",URL.createObjectURL(e.stream)),d.attr("style","display: none"),d.prop("autoplay",!0),bmRoom.stream.av_id===e.muxer_id&&d.prop("muted",!0),$("audio",i).length<1&&i.prepend(d),$(".stream-ahead",i).length<1){var u=$('<img class="stream-ahead" src="'+bmRoom.message.userImage(o)+'" />');i.prepend(u)}break;case"av":var h=$('<video class="stream" />');h.attr("src",URL.createObjectURL(e.stream)),h.prop("autoplay",!0),bmRoom.stream.av_id===e.muxer_id&&h.prop("muted",!0),$("video",i).length<1&&i.prepend(h),e.stream.needMute&&setTimeout(function(){bmRoom.socket.emit("stream:mute",bmRoom.socket.io.engine.id,bmRoom.stream.av_id)},2e3);break;case"sc":if($(".stream-bg",i).hide(),$(".screen-focus.sc").on("mouseover",function(){$("#sharescreen-full-area").css("top","0px")}).on("mouseout",function(){$("#sharescreen-full-area").css("top","-40px")}),bmRoom.stream.sc_id===e.muxer_id){var m="";m+='<div class="clroom-screen-box">',m+='<div class="clroom-screen-box-title">You are sharing your screen</div>',m+='<div class="clroom-screen-box-text">Your desktop or the application you chose is now visible to others.</div>',m+='<div class="clroom-screen-box-img"><img src="/assets/share-screen-icon.png"></div>',m+='<div class="clroom-end-screen-button clroom-end-screen-button2">Stop Screen Sharing</div>',m+="</div>",i.prepend(m),$("#sharescreen-full-area").hide()}else{var h=$('<video class="stream" id="screenshare-video" />');h.attr("src",URL.createObjectURL(e.stream)),h.prop("autoplay",!0),$("video",i).length<1&&i.prepend(h),i.append('<div class="clroom-end-screen-button" style="display:none"><span class="room-delete"></span>Stop screen sharing</div>'),bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)&&$(".clroom-end-screen-button").show()}bmRoom.stream.sc_id===e.muxer_id&&bmRoom.socket.emit("stream:screenchange",bmRoom.my.name,!0),bmRoom.stream.csc_id=e.muxer_id}("a"==e.spec||"av"==e.spec)&&($(".video-uname",i).append('<div class="clroom-presenter-signal"><span class="clroom-mic-on"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><path d="M23.5,14.5v4.515c0,0.82-0.683,1.485-1.494,1.485H9.993c-0.824,0-1.493-0.677-1.493-1.485V14.5h-3v7.515   c0,0.809,0.676,1.485,1.51,1.485h7.49V28h-6v3h15v-3h-6v-4.5h7.49c0.834,0,1.51-0.665,1.51-1.485V14.5H23.5z"></path><path id="Rectangle-48" d="M11.5,1h9C21.329,1,22,1.672,22,2.5v15c0,0.829-0.671,1.5-1.5,1.5h-9c-0.828,0-1.5-0.671-1.5-1.5v-15   C10,1.672,10.672,1,11.5,1z"></path></svg></span><span class="clroom-mic-mute" style="display: none"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve"><path d="M22,16.697V2.5C22,1.671,21.329,1,20.5,1h-9C10.672,1,10,1.671,10,2.5v2.197L22,16.697z"></path><path d="M10,15.305V17.5c0,0.829,0.672,1.5,1.5,1.5h2.197L10,15.305z"></path><polygon points="26.5,21.197 26.5,14.5 23.5,14.5 23.5,18.197 "></polygon><path d="M22.697,28H17.5v-4.5h0.697l-3-3H9.993c-0.824,0-1.493-0.677-1.493-1.484V14.5h-3v7.516c0,0.81,0.676,1.484,1.51,1.484h7.49  V28h-6v3h15v-2.197L22.697,28z"></path><rect x="-2.471" y="14.25" transform="matrix(0.7071 0.7071 -0.7071 0.7071 15.823 -6.7006)" width="36.941" height="3"></rect></svg></span></div>'),e.aopen||$("#stream-"+e.muxer_id+" .clroom-presenter-signal").show(),bmRoom.stream.changeAdminPanelIcon(e)),$(".video-uname .connected-num",i).length<1&&$(".video-uname",i).append('<span class="connected-num" />')}$("#arena").trigger("stream:change")},bmRoom.stream.genSpeakerStatus=function(e,t){if("add"==t){var o=bmRoom.user.opens[e.sid],i=o.name;o.name.length>20&&(i=o.name.substr(0,20)+"...");var n=$("#speakers-list-model").clone();n.removeAttr("style").attr("id","speaker-li-"+e.muxer_id),n.find(".clroom-presenter-connection-box-open-list-name").text(i),$("#speakers-status-list").append(n)}"remove"==t&&$("#speaker-li-"+e.muxer_id).remove();var s=$("#speakers-status-list > li").not("#speakers-list-model").length;$("#speaking-status-slide-down").is(":visible")?$("#group-chat-outbox").css("top",36*s+36+"px"):$("#speaking-status-slide-up").is(":visible")?$("#speaking-status-slide-up > .poor-connection").length>0?$("#group-chat-outbox").css("top","72px"):$("#group-chat-outbox").css("top","52px"):$("#group-chat-outbox").css("top",0),$.isEmptyObject(bmRoom.stream.opens)&&($("#speaking-status-slide-up, #speaking-status-slide-down").hide(),$("#speaking-status-slide-up > .clroom-presenter-connection-box-inner").removeClass().addClass("clroom-presenter-connection-box-inner perfect-connection"),$("#speaking-status-name").text(""),$("#group-chat-outbox").css("top",0))},bmRoom.stream.screenShareFullScreen=function(){document.getElementById("share-fullscreen").addEventListener("click",function(){var e=document.getElementById("screenshare-video");e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},!1)},bmRoom.stream.handleVideoAudioHtml=function(e,t){for(var o=0,i=Object.keys(bmRoom.stream.opens).length-1;i>=0;i--)"av"==bmRoom.stream.opens[Object.keys(bmRoom.stream.opens)[i]].spec&&o++;"undefined"==typeof e&&(1===o&&(bmRoom.whiteboard.status||bmRoom.stream.csc_id||$("#video-share-container").is(":visible")||null!==bmRoom.mp4Share.video)?($("#arena").addClass("onactive-single-cam"),$("#single-cam-share").append($("#video-list li.av")),$("#single-cam-share").find("video").each(function(){this.play()}),$("#single-cam-share-box .classroom-attendeer-status-name").text($("#single-cam-share .video-uname").text())):($("#single-cam-share-box .classroom-attendeer-status-name").text(""),$("#single-cam-share-box .clroom-attendeer-status-voice-in").css("width",0),$("#single-cam-share-box .classroom-attendeer-status-connection").removeClass().addClass("classroom-attendeer-status-connection perfect-connection"),$("#arena").removeClass("onactive-single-cam"),$("#video-list").append($("#single-cam-share li.av")),$("#video-list").find("video").each(function(){this.play(),$(this).show()}))),t===!0?0===o&&(bmRoom.whiteboard.status||bmRoom.stream.csc_id||$("#video-share-container").is(":visible")||null!==bmRoom.mp4Share.video)?($("#arena").addClass("onactive-single-cam"),$("#single-cam-share").append(e),$("#single-cam-share-box .classroom-attendeer-status-name").text($("#single-cam-share .video-uname").text())):($("#single-cam-share-box .classroom-attendeer-status-name").text(""),$("#single-cam-share-box .clroom-attendeer-status-voice-in").css("width",0),$("#single-cam-share-box .classroom-attendeer-status-connection").removeClass().addClass("classroom-attendeer-status-connection perfect-connection"),$("#arena").removeClass("onactive-single-cam"),$("#video-list").append($("#single-cam-share li.av")).append(e),$("#video-list").find("video").each(function(){this.play(),$(this).show()})):t===!1&&(1===o&&(bmRoom.whiteboard.status||bmRoom.stream.csc_id||$("#video-share-container").is(":visible")||null!==bmRoom.mp4Share.video)?($("#arena").addClass("onactive-single-cam"),$("#single-cam-share").append($("#video-list li.av")),$("#single-cam-share").find("video").each(function(){this.play()}),$("#single-cam-share-box .classroom-attendeer-status-name").text($("#single-cam-share .video-uname").text())):($("#single-cam-share-box .classroom-attendeer-status-name").text(""),$("#single-cam-share-box .clroom-attendeer-status-voice-in").css("width",0),$("#single-cam-share-box .classroom-attendeer-status-connection").removeClass().addClass("classroom-attendeer-status-connection perfect-connection"),$("#arena").removeClass("onactive-single-cam")),e.remove()),bmRoom.layout.change(),$("#single-cam-share-box").is(":visible")&&($("#single-cam-share-box").removeClass("on-lefttop on-righttop on-leftbottom on-rightbottom").addClass(bmRoom.stream.singleBoxPosition),bmRoom.stream.repositionSingleVideoBox())},bmRoom.stream.removeBox=function(e){clearTimeout(bmRoom.stream.connTime[e.muxer_id]),bmRoom.stream.deleteing=!0;var t=bmRoom.stream.opens[e.muxer_id];if(t&&t.stream&&t.stream.getTracks){var o=t.stream.getTracks();o.forEach(function(e){e.stop()})}for(var i in bmRoom.stream.audioRecorders){var n=bmRoom.stream.audioRecorders[i];n.stop()}for(var i in bmRoom.stream.videoRecorders){var s=bmRoom.stream.videoRecorders[i];s.stop()}var a=bmRoom.stream.pcs[e.muxer_id];a&&a.iceConnectionState&&"closed"!==a.iceConnectionState,e.pc&&"closed"!==e.pc.iceConnectionState&&e.pc.close(),delete bmRoom.stream.opens[e.muxer_id],bmRoom.stream.handleVideoAudioHtml($("#stream-"+e.muxer_id),!1),bmRoom.stream.genSpeakerStatus(e,"remove"),e.sid==bmRoom.socket.io.engine.id&&$("#bmroom-connect-test-btn").hide(),$("#user-"+e.sid).css("background-size","0% 15%"),$("#admin-user-"+e.sid).css("background-size","0% 15%"),bmRoom.stream.av_id===e.muxer_id&&("a"===e.spec&&(bmRoom.stream.av_id=""),"av"===e.spec&&(bmRoom.stream.av_id="")),"sc"===e.spec&&(bmRoom.stream.sc_id="",bmRoom.stream.csc_id=""),$("#arena").trigger("stream:change"),$("#mute-user-audio-"+e.sid).removeClass("onactive"),$("#admin-user-"+e.sid+" .admin-roles-mu").hide(),bmRoom.stream.clearAdminPanelIcon(e),bmRoom.user.opens[e.sid]||$("#alert-presenter-disconnect")[0].play(),bmRoom.stream.handleVideoAudioHtml(),bmRoom.stream.deleteing=!1},bmRoom.stream.jobs=[],bmRoom.stream.jobInterval=0,bmRoom.stream.opens={},bmRoom.preload={},bmRoom.preload.enableVideo=!1,bmRoom.preload.enableAudio=!1,bmRoom.stream.audioRecorders={},bmRoom.stream.videoRecorders={},bmRoom.stream.recordInterval=10,bmRoom.stream.pushLocalMedia=function(e,t,o){var i="firefox-"+Math.random().toString(36).slice(2);e.id&&(i=e.id.replace(/[{}]/g,"")),bmRoom.stream.published.push(i),o&&!bmRoom.preload.enableAudio&&(e.needMute=!0);var n={};n.type="publish",n.muxer_id=i,n.spec=t,n.stream=e,n.aopen=!0,n.sid=bmRoom.socket.io.engine.id,e.onended=function(){var e=bmRoom.stream.opens[i];e&&bmRoom.socket.emit("stream:unpublish",e.muxer_id,function(){console.log("Remove 7: the stream is ended."),bmRoom.stream.removeBox(e),bmRoom.saveRecordingAction("StopStreamShareEvent",e.spec,"","","",e.sid)})};var s=!0;if(bmRoom.stream.jobs.indexOf(n)>-1&&(s=!1,console.log("Publish stream failed: already added this stream to job.")),bmRoom.stream.opens[i]&&(s=!1,console.log("Publish stream failed: this stream already published.")),bmRoom.stream.connecting&&i==bmRoom.stream.connecting.muxer_id&&(console.log("Publish stream failed: this stream is publishing."),s=!1),bmRoom.stream.av_id&&"sc"!=t&&(console.log("Publish stream failed: have another non-sc published."),s=!1),bmRoom.stream.sc_id&&"sc"==t&&(console.log("Publish stream failed: have another sc published."),s=!1),s)bmRoom.stream.jobs.push(n);else if(e&&e.getTracks){var a=e.getTracks();a.forEach(function(e){e.stop()})}},bmRoom.stream.getMedia=function(e,t){var o=setTimeout(function(){"chrome"===bmRoom.browser&&($(".enter-allowbox > div").hide(),$(".enter-bg, #enter-bg-allow").show())},2e3);"firefox"===bmRoom.browser&&("a"==t?$("#switch-audio").prop("disabled",!1):"av"==t&&$("#switch-video").prop("disabled",!1)),navigator.getUserMedia(e,function(e){$(".clroom-modal-box, #bigroom_invite_people").hide(),clearTimeout(o),$(".enter-bg, #enter-bg-allow").hide(),bmRoom.stream.pushLocalMedia(e,t,!1)},function(){$("#switch-audio").prop("disabled",!1),$("#switch-video").prop("disabled",!1),$(".clroom-modal-box, #bigroom_invite_people").hide(),clearTimeout(o),$(".enter-bg, #enter-bg-allow").hide()})},bmRoom.stream.openScreen=function(){$("#video-share-container").is(":visible")&&$("#end-youtube-video-button").trigger("click");var e=bmRoom.stream.opens[bmRoom.stream.csc_id];e?bmRoom.socket.emit("stream:unpublish",e.muxer_id,function(){console.log("Remove 8"),bmRoom.stream.removeBox(e),bmRoom.saveRecordingAction("StopStreamShareEvent",e.spec,"","","",e.sid),window.postMessage("get-sourceId","*")}):window.postMessage("get-sourceId","*")},bmRoom.stream.closeScreen=function(){var e=bmRoom.stream.opens[bmRoom.stream.csc_id];e&&(console.log("Remove 10"),bmRoom.stream.removeBox(e),bmRoom.socket.emit("stream:unpublish",e.muxer_id,function(){bmRoom.saveRecordingAction("StopStreamShareEvent",e.spec,"","","",e.sid),bmRoom.stream.repositionSingleVideoBox(),bmRoom.stream.handleVideoAudioHtml()}),$("#switch-screen").removeClass("onactive"),bmRoom.socket.emit("stream:screenchange",bmRoom.my.name,!1))},bmRoom.stream.audioConstraints={optional:[{googEchoCancellation:!0},{googEchoCancellation2:!0},{googAutoGainControl:!0},{googAutoGainControl2:!0},{googNoiseSuppression:!0},{googNoiseSuppression2:!0},{googHighpassFilter:!0},{googAudioMirroring:!1}]},bmRoom.stream.videoConstraints={optional:[{maxFrameRate:30},{minFrameRate:3}]},bmRoom.stream.unpublish=function(e){var t=bmRoom.stream.connecting;if(t&&t.muxer_id===e){if(t&&t.stream&&t.stream.getTracks){var o=t.stream.getTracks();
o.forEach(function(e){e.stop()})}console.log("Remove 2"),bmRoom.stream.removeBox(t),bmRoom.stream.connecting=!1}var i=bmRoom.stream.loading;i&&i.muxer_id===e&&(console.log("Remove 3"),bmRoom.stream.removeBox(i),bmRoom.stream.loading=!1,bmRoom.stream.connecting=!1);var n=bmRoom.stream.opens[e];n&&(console.log("Remove 4"),bmRoom.stream.removeBox(n)),e&&bmRoom.stream.markForDelete.push(e);var s="";"object"==typeof t&&(s=t),"object"==typeof i&&(s=i),"object"==typeof n&&(s=n),s.muxer_id==e&&"sc"==s.spec&&s.sid==bmRoom.socket.io.engine.id&&bmRoomTabInactive&&$("#alert-close-sc")[0].play(),bmRoom.stream.handleVideoAudioHtml()},bmRoom.stream.displayConnectionStats=function(e,t){var o=e.mid,i=(e.sid,$("#speaking-status-slide-up > .clroom-presenter-connection-box-inner")),n=$("#speaker-li-"+o);i.removeClass("perfect-connection").removeClass("good-connection").removeClass("poor-connection"),n.removeClass("perfect-connection").removeClass("good-connection").removeClass("poor-connection");var s="";if(s=t>.02?"poor-connection":t>.01&&.02>=t?"good-connection":"perfect-connection",n.addClass(s),$("#speaking-status-slide-up").attr("data-speaker-mid")==o&&i.addClass(s),$("#single-cam-share > li#stream-"+o).length>0){var a=$("#single-cam-share-box .classroom-attendeer-status-connection");a.removeClass("perfect-connection").removeClass("good-connection").removeClass("poor-connection").addClass(s)}},bmRoom.stream.start=function(){var e="",t={};"chrome"===bmRoom.browser?bmRoom.my.canScreen&&$("#switch-screen, #blank_screen_share").prop("disabled",!1):($("#switch-screen, #blank_screen_share").prop("disabled",!0),$(".clroom-blank-sharescreen").hide()),$(document).on("click",".clroom-nav > li > button:not(#invite-people-link, #share-video-link, #mute-local-link, #exit-room, #add-files, #add-videos, #show_tips, #top-more-btn, #mic-status-mute)",function(){var o=$(this).hasClass("onactive");if($(this).prop("disabled",!0),$(this).hasClass("switch-unique")&&$(".switch-unique").prop("disabled",!0),$(this).is("#switch-video")){var i=bmRoom.stream.opens[bmRoom.stream.av_id];i&&(bmRoom.stream.unpublish(bmRoom.stream.av_id),bmRoom.stream.av_id="",bmRoom.socket.emit("stream:unpublish",i.muxer_id,function(){bmRoom.stream.removeBox(i)})),o||(e="av",t={video:bmRoom.stream.videoConstraints,audio:bmRoom.stream.audioConstraints},bmRoom.stream.getMedia(t,e))}else if($(this).is("#switch-audio")){var i=bmRoom.stream.opens[bmRoom.stream.av_id];i&&(bmRoom.stream.unpublish(bmRoom.stream.av_id),bmRoom.stream.av_id="",bmRoom.socket.emit("stream:unpublish",i.muxer_id,function(){bmRoom.stream.removeBox(i),bmRoom.saveRecordingAction("StopStreamShareEvent",i.spec,"","","",i.sid)})),o||(e="a",t={video:!1,audio:bmRoom.stream.audioConstraints},t.video=!1,bmRoom.stream.getMedia(t,e))}else{if(!$(this).is("#switch-record"))return 0;bmRoom.socket.emit("stream:record",function(){bmRoom.saveRecordingAction("StartConferenceRecording","RECORDER","","","","")})}}),$(document).on("click","#switch-screen",function(){if($(this).prop("disabled",!0),$(this).hasClass("onactive")){var o=bmRoom.stream.opens[bmRoom.stream.sc_id];o&&bmRoom.socket.emit("stream:unpublish",o.muxer_id,function(){bmRoom.stream.removeBox(o),bmRoom.saveRecordingAction("StopStreamShareEvent",o.spec,"","","",o.sid)})}else bmRoom.layout.closeAllOthers("screenShare"),maxFR=$("#max-screenshare-frame-rate").val(),e="sc",t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:screen.width,maxHeight:screen.height,minWidth:screen.width,minHeight:screen.height,maxFrameRate:maxFR}}},$(this).hasClass("needPlugin")?chrome.webstore.install("",function(){$(this).removeClass("needPlugin"),$("#switch-screen").prop("disabled",!1)},function(){$("#switch-screen").prop("disabled",!1)}):bmRoom.stream.openScreen()}),window.addEventListener("message",function(o){"PermissionDeniedError"==o.data&&($("#switch-screen").prop("disabled",!1),bmRoom.stream.handleVideoAudioHtml()),o.data.sourceId&&(t.video.mandatory.chromeMediaSourceId=o.data.sourceId,bmRoom.stream.getMedia(t,e))}),$(document).on("click","#record_switch_button.stream-canrecord",function(e){e.preventDefault(),bmRoom.socket.emit("close-recording-popup"),youtubePlayer&&(bmRoom.videoShare.currentVideo.elapseTime=youtubePlayer.getCurrentTime()),bmRoom.mp4Share.video&&(bmRoom.mp4Share.currentVideo.elapseTime=bmRoom.mp4Share.video.currentTime),videos={yvideo:bmRoom.videoShare.currentVideo,mvideo:bmRoom.mp4Share.currentVideo},bmRoom.socket.emit("stream:record",videos,function(){$("#record_switch_button").removeClass("stream-canrecord"),$("#record_switch_button").addClass("stream-recording"),$("#record_switch_button a").html('<span class="room-record"></span> Stop Recording'),bmRoom.whiteboard.status&&(bmRoom.socket.emit("whiteboard:play",bmRoom.whiteboard.images[bmRoom.whiteboard.slider.getCurrentSlide()]),bmRoom.saveRecordingAction("PlayWhiteBoardEvent","WHITEBOARD","",bmRoom.whiteboard.images[bmRoom.whiteboard.slider.getCurrentSlide()],"")),bmRoom.saveRecordingAction("StartConferenceRecording","RECORDER","","","","")}),$.ajax({url:"/recording_trackers",type:"POST",data:{recording_tracker:{conference_obfuscated_id:$("#conference-obfuscated-id").val(),type_cd:"start_recording"}},success:function(){}})}),$(document).on("click","#record_switch_button.stream-recording",function(e){e.preventDefault(),confirm("Are you sure you want to stop recording!")&&bmRoom.socket.emit("stream:stoprecord",function(){$("#record_switch_button").removeClass("stream-recording"),$("#record_switch_button").removeClass("stream-canrecord"),$("#record_switch_button a").html('<span class="room-record"></span> Recording ended'),bmRoom.saveRecordingAction("EndConferenceRecording","RECORDER","","","","")}),$.ajax({url:"/recording_trackers",type:"POST",data:{recording_tracker:{conference_obfuscated_id:$("#conference-obfuscated-id").val(),type_cd:"end_recording"}},success:function(){}})}),$(document).on("click","#room-delete-button",function(e){e.preventDefault(),bmRoom.saveRecordingAction("EndConference","CONFERENCE","","","",""),bmRoom.whiteboard.end(),bmRoom.mp4Share.end(),$("#record_switch_button.stream-recording").length>0?bmRoom.socket.emit("stream:stoprecord",function(){bmRoom.socket.emit("room:close"),$("#record_switch_button").removeClass("stream-recording"),$("#record_switch_button").removeClass("stream-canrecord"),bmRoom.saveRecordingAction("EndConferenceRecording","RECORDER","","","","")}):bmRoom.socket.emit("room:close"),$.ajax({url:"/recording_trackers",type:"POST",data:{recording_tracker:{conference_obfuscated_id:$("#conference-obfuscated-id").val(),type_cd:"end_conference"}},success:function(){}})}),setInterval(function(){var e=null;for(var t in bmRoom.stream.opens)e=bmRoom.stream.opens[t],e&&e.pc&&e.pc.id&&bmRoom.socket.emit("stream:getStats",t,e.pc.id);e?e.sid==bmRoom.socket.io.engine.id&&$("#bmroom-connect-test-btn").show():$("#bmroom-connect-test-btn").hide(),bmRoom.layout.resizeTitle()},1e4),bmRoom.socket.on("stream:getStats",function(e,t){bmRoom.stream.displayConnectionStats(e,t)}),bmRoom.socket.on("stream:getSpeakerStats",function(e,t){bmRoom.stream.displayConnectionStats(e,t)}),$("#speaking-status-slide-up").click(function(){$(this).hide(),$("#speaking-status-slide-down").show(),bmRoom.stream.genSpeakerStatus()}),$("#speaking-status-slide-down .clroom-presenter-connection-box-open").click(function(){$("#speaking-status-slide-down").hide(),$("#speaking-status-slide-up").show(),bmRoom.stream.genSpeakerStatus()}),bmRoom.socket.on("stream:candidate",function(e,t){var o=bmRoom.stream.pcs[e];if(o){var i=JSON.parse(t);i.candidate=i.candidate.replace(/a=/g,""),i.sdpMLineIndex=parseInt(i.sdpMLineIndex),"firefox"===bmRoom.browser?("audio"==i.sdpMid&&(i.sdpMid="sdparta_0"),"video"==i.sdpMid&&(i.sdpMid="sdparta_1")):("sdparta_0"==i.sdpMid&&(i.sdpMid="audio"),"sdparta_1"==i.sdpMid&&(i.sdpMid="video"));var n=new RTCIceCandidate(i);if(o.remoteCandidates||(o.remoteCandidates=[]),o.remoteDescriptionSetted){if(n.candidate.indexOf("prflx")>0)return;o.addIceCandidate(n)}else o.remoteCandidates.push(n)}}),bmRoom.stream.jobInterval=setInterval(function(){if(!bmRoom.stream.connecting&&bmRoom.stream.jobs.length>0){var e=bmRoom.stream.jobs.shift();if(bmRoom.stream.markForDelete.indexOf(e.muxer_id)>-1)return;if(bmRoom.stream.opens[e.muxer_id])return;if("publish"==e.type&&bmRoom.stream.av_id&&bmRoom.stream.av_id.length>0&&"sc"!=e.spec)return;bmRoom.stream.connecting=e,bmRoom.stream.addBox(e,!0),bmRoom.stream.connect(e,function(t,o){var i=!0;t&&(console.log("Remove 12"),console.log(e),"publish"===e.type&&bmRoom.socket.emit("stream:unpublish",e.muxer_id,function(){bmRoom.saveRecordingAction("StopStreamShareEvent",e.spec,"","","",e.sid),bmRoom.stream.handleVideoAudioHtml()}),bmRoom.stream.removeBox(o),i=!1),bmRoom.socket.io.engine.id==e.sid&&i&&($(".error-warning").addClass("green").removeClass("red"),"a"==e.spec&&($(".error-warning").html("Now Sharing Microphone"),bmRoom.layout.errorWarning())),bmRoom.stream.connecting=!1,bmRoom.stream.handleVideoAudioHtml(),bmRoom.layout.change()})}},500),bmRoom.stream.syncStream(),bmRoom.stream.syncInterval=setInterval(bmRoom.stream.syncStream,5e3),bmRoom.socket.on("stream:audioLevel",function(e,t){t=t>50?t-50:0;var o=t/1.27+"% 15%",i=bmRoom.stream.opens[e];i&&i.sid&&(bmRoom.stream.onvolumechange(e,i.sid,o),bmRoom.stream.opens[e].audioLevel=t,bmRoom.stream.whoIsTaking(e,t))}),bmRoom.socket.on("stream:crash",function(e){bmRoom.socket.emit("stream:unpublish",e.muxer_id,function(){bmRoom.saveRecordingAction("StopStreamShareEvent",e.spec,"","","",e.sid)})}),bmRoom.socket.on("stream:unpublish",function(e){bmRoom.stream.unpublish(e)}),bmRoom.socket.on("stream:connected",function(e){var t=$("#stream-"+e.muxer_id);if(bmRoom.stream.av_id===e.muxer_id&&t.length>0){bmRoom.stream.connections[e.muxer_id]?bmRoom.stream.connections[e.muxer_id]+=1:bmRoom.stream.connections[e.muxer_id]=1;var o=bmRoom.stream.connections[e.muxer_id],i=Object.keys(bmRoom.user.opens).length;i>o||$(".connected-num").html("")}}),bmRoom.socket.on("stream:connect:failed",function(e){var t=bmRoom.stream.connecting;if(t&&t.muxer_id===e){if(t&&t.stream&&t.stream.getTracks){var o=t.stream.getTracks();o.forEach(function(e){e.stop()})}console.log("Remove 5"),bmRoom.stream.removeBox(t),bmRoom.stream.connecting=!1}var i=bmRoom.stream.opens[e];i&&(console.log("Remove 6"),bmRoom.stream.removeBox(i))}),bmRoom.socket.on("stream:volume",function(e,t){$("#user-"+e).css("background-size",t/5e4*100+"% 15%"),$("#admin-user-"+e).css("background-size",t/5e4*100+"% 15%")}),bmRoom.socket.on("stream:loading",function(e){bmRoom.stream.addBox(e,!0),bmRoom.stream.loading=e,bmRoom.stream.pushJobs(e)}),bmRoom.socket.on("stream:recording",function(){$(".admin-record-button").addClass("stream-recording"),$(".admin-record-button").removeClass("stream-canrecord"),$("#record_switch_button a").html('<span class="room-record"></span> Stop Recording'),$("#recording_status").show().html('<span class="room-record"></span>&nbsp;Recording')}),bmRoom.socket.on("stream:recorded",function(){$(".admin-record-button").removeClass("stream-recording"),$(".admin-record-button").removeClass("stream-canrecord"),$("#record_switch_button a").html('<span class="room-record"></span> Recording ended'),$("#recording_status").show().removeClass("clroom-name-recording").addClass("clroom-name-recorded").html('<span class="room-record"></span>&nbsp;Recorded')}),bmRoom.socket.on("stream:mute",function(e,t){var o=bmRoom.stream.opens[t];o&&(o.aopen=!1,bmRoom.stream.changeAdminPanelIcon(o),$("#stream-"+t+" .clroom-presenter-signal > span.clroom-mic-on").hide(),$("#stream-"+t+" .clroom-presenter-signal > span.clroom-mic-mute").show(),t==bmRoom.stream.av_id&&(o.stream.getAudioTracks()[0].enabled=!1,$(".error-warning").addClass("red").removeClass("green"),$(".error-warning").html("You are now muted"),bmRoom.layout.errorWarning(),bmRoom.layout.change(),e==bmRoom.socket.io.engine.id&&bmRoom.twilioCall.mute(!0),bmRoom.saveRecordingAction("Muted","MUTE","","","","","","","")))}),bmRoom.socket.on("stream:unmute",function(e,t){var o=bmRoom.stream.opens[t];o&&(o.aopen=!0,bmRoom.stream.changeAdminPanelIcon(o),$("#stream-"+t+" .clroom-presenter-signal > span.clroom-mic-on").show(),$("#stream-"+t+" .clroom-presenter-signal > span.clroom-mic-mute").hide(),t==bmRoom.stream.av_id&&(o.stream.getAudioTracks()[0].enabled=!0,$(".error-warning").addClass("green").removeClass("red"),$(".error-warning").html("You are now unmuted"),bmRoom.layout.errorWarning(),bmRoom.layout.change(),e==bmRoom.socket.io.engine.id&&bmRoom.twilioCall.mute(!1),bmRoom.saveRecordingAction("Unmuted","MUTE","","","","","","","")))}),window.postMessage("are-you-there","*"),window.addEventListener("message",function(e){"rtcmulticonnection-extension-loaded"===e.data&&$("#switch-screen").removeClass("needPlugin")}),bmRoom.socket.on("admin",function(e,t){t.sid===bmRoom.socket.io.engine.id&&(e?$(".clroom-end-screen-button").show():$(".clroom-end-screen-button").hide())}),bmRoom.socket.on("stream:screenchange",function(e,t){var o=$('<li class="screen-change-message '+(t?"added":"closed")+'" />'),i=t?" started":" stopped";o.html(e+i+" the screen sharing."),bmRoom.chat.append(o,$("#chat-message"))}),$(document).on("click",".clroom-end-screen-button",function(){window.confirm("Are you sure you want stop screen sharing?")&&bmRoom.stream.closeScreen()}),bmRoom.socket.on("singleVideoBox:changePosition",function(e){bmRoom.stream.singleBoxPosition=e.addClass||bmRoom.stream.singleBoxPosition,e.engineId!=bmRoom.socket.io.engine.id&&bmRoom.stream.handleVideoAudioHtml()}),$("#mute-local-link").on("click",function(){$(this).hasClass("onactive")?bmRoom.socket.emit("stream:unmute",bmRoom.socket.io.engine.id,bmRoom.stream.av_id):bmRoom.socket.emit("stream:mute",bmRoom.socket.io.engine.id,bmRoom.stream.av_id)}),$("#clroom-audio-dropdown-li-mute").on("click",function(){bmRoom.socket.emit("stream:mute",bmRoom.socket.io.engine.id,bmRoom.stream.av_id)}),$("#clroom-audio-dropdown-li-unmute").on("click",function(){bmRoom.socket.emit("stream:unmute",bmRoom.socket.io.engine.id,bmRoom.stream.av_id)}),$("#clroom-audio-dropdown-li-off").on("click",function(){$("#switch-audio.onactive").trigger("click")}),$("#clroom-video-li-close").on("click",function(){$("#switch-video.onactive").trigger("click"),$("#switch-video").attr("disabled",!0).removeClass("onactive")}),$(".clroom-attendeer-arr-l, .clroom-attendeer-arr-r, .clroom-attendeer-arr-b, .clroom-attendeer-arr-t").click(function(){$(this).hasClass("clroom-attendeer-arr-l")&&($("#single-cam-share-box").hasClass("on-righttop")&&(bmRoom.stream.singleBoxPosition="on-lefttop"),$("#single-cam-share-box").hasClass("on-rightbottom")&&(bmRoom.stream.singleBoxPosition="on-leftbottom")),$(this).hasClass("clroom-attendeer-arr-r")&&($("#single-cam-share-box").hasClass("on-lefttop")&&(bmRoom.stream.singleBoxPosition="on-righttop"),$("#single-cam-share-box").hasClass("on-leftbottom")&&(bmRoom.stream.singleBoxPosition="on-rightbottom")),$(this).hasClass("clroom-attendeer-arr-b")&&($("#single-cam-share-box").hasClass("on-lefttop")&&(bmRoom.stream.singleBoxPosition="on-leftbottom"),$("#single-cam-share-box").hasClass("on-righttop")&&(bmRoom.stream.singleBoxPosition="on-rightbottom")),$(this).hasClass("clroom-attendeer-arr-t")&&($("#single-cam-share-box").hasClass("on-leftbottom")&&(bmRoom.stream.singleBoxPosition="on-lefttop"),$("#single-cam-share-box").hasClass("on-rightbottom")&&(bmRoom.stream.singleBoxPosition="on-righttop")),$("#single-cam-share-box").removeClass().addClass("clroom-attendeer-video "+bmRoom.stream.singleBoxPosition),bmRoom.stream.repositionSingleVideoBox();var e={addClass:bmRoom.stream.singleBoxPosition,engineId:bmRoom.socket.io.engine.id};bmRoom.socket.emit("singleVideoBox:changePosition",e)})},bmRoom.stream.repositionSingleVideoBox=function(){var e=$("#single-cam-share-box").attr("class").split(" ")[1],t=$("#arena").width(),o=$("#single-cam-share-box").width(),i=$("#arena").height(),n=$("#single-cam-share-box").height(),s=15,a=15,r={left:15,top:15};"on-lefttop"==e||("on-righttop"==e?(s=t-o-15,a=15,r={right:15,top:15}):"on-leftbottom"==e?(s=15,a=i-n-15,r={left:15,bottom:15}):"on-rightbottom"==e&&(s=t-o-15,a=i-n-15,r={right:15,bottom:15})),$("#single-cam-share-box").animate({left:s,top:a},500,function(){$(this).removeAttr("style").css(r)})},bmRoom.user={},bmRoom.user.opens={},bmRoom.user.jobDoing=!1,bmRoom.user.chatWith="",bmRoom.user.chatIndex={},bmRoom.user.unread={},bmRoom.user.admin_list=[],bmRoom.user.presenter_list=[],bmRoom.user.attendee_list=[],bmRoom.user.show_attendees=!0,bmRoom.user.isAdmin=function(e){var t=bmRoom.admin.admin_list.indexOf(e)>-1?!0:!1;return t},bmRoom.user.insertHtml=function(e,t){if(0===$("#user-"+e.sid).length){var o=$('<li id="user-'+e.sid+'"/>');if(bmRoom.socket.io.engine.id===e.sid)o.addClass("user-self");else{var i=$('<div class="clroom-people-chat-button" />').html('<a href="javascript:void(0)">Chat</a>');i.data("sid",e.sid),o.append(i)}var n='<div class="clroom-chat-twitter"><a target="_blank" id="screen_name_'+e.sid+'" href="javascript:void(0)"></a></div>';if("undefined"!=typeof e.twitter_name&&e.twitter_name.length>0&&(n='<div class="clroom-chat-twitter"><a target="_blank" id="screen_name_'+e.sid+'" href="https://twitter.com/@'+e.twitter_name+'">@'+e.twitter_name+"</a></div>"),"Organizer"===e.role||"Temp-Organizer"===e.role||"Presenter"===e.role){if("Temp-Organizer"===e.role&&o.attr("data-role","Temp-Organizer"),o.addClass("clroom-people-color-2"),o.prepend('<div class="clroom-people-header"><div class="clroom-people-header-in"><img src="'+bmRoom.message.userImage(e)+'"></div></div><div class="clroom-people-name-1-out"><div class="clroom-people-name-1"><div class="clroom-people-name-width"><span class="room-admin hover-admin"></span>'+e.name+"</div>"+n+'<div class="clroom-groupchat-date"></div></div></div>'),"Organizer"===e.role||"Temp-Organizer"===e.role){var s=bmRoom.admin.sortObj(bmRoom.user.opens,bmRoom.user.admin_list,"name",e),a=s[0];bmRoom.user.admin_list=s[1],0==$("#people-admin > ul").children().length||0>a||$("#people-admin > ul").children().length<=a?$("#people-admin > ul").append(o):$(o).insertBefore($($("#people-admin > ul").children()[a]))}if("Presenter"===e.role){var s=bmRoom.admin.sortObj(bmRoom.user.opens,bmRoom.user.presenter_list,"name",e),a=s[0];bmRoom.user.presenter_list=s[1],0==$("#people-presenter > ul").children().length||0>a||$("#people-presenter > ul").children().length<=a?$("#people-presenter > ul").append(o):$(o).insertBefore($($("#people-presenter > ul").children()[a]))}"Presenter"===e.role?bmRoom.user.presenter_list.indexOf(e.sid)<0&&bmRoom.user.presenter_list.push(e.sid):bmRoom.user.admin_list.indexOf(e.sid)<0&&bmRoom.user.admin_list.push(e.sid)}else{o.addClass("clroom-people-bg"),o.prepend('<div class="clroom-people-header"><div class="clroom-people-header-in"><img src="'+bmRoom.message.userImage(e)+'"></div></div><div class="clroom-people-name-1-out"><div class="clroom-people-name-1"><div class="clroom-people-name-width">'+e.name+"</div>"+n+'<div class="clroom-groupchat-date"></div></div></div>');var s=bmRoom.admin.sortObj(bmRoom.user.opens,bmRoom.user.attendee_list,"name",e),a=s[0];bmRoom.user.attendee_list=s[1],$("#people-attendee > ul").children().length>99&&!t&&(o=""),bmRoom.user.attendee_list.indexOf(e.sid)<0&&bmRoom.user.attendee_list.push(e.sid),0==$("#people-attendee > ul").children().length||0>a||$("#people-attendee > ul").children().length<=a?($("#people-attendee > ul").append(o),t?$("#people-attendee > ul").prepend(o):$("#people-attendee > ul").append(o)):t?$("#people-attendee > ul").prepend(o):$(o).insertBefore($($("#people-attendee > ul").children()[a]))}}bmRoom.user.changeHtml(e,!0)},bmRoom.user.changeData=function(e,t){var o=$('<li class="user-change-message" />'),i=t?" entered":" left";o.html(e.name+i+" the conference."),bmRoom.chat.append(o,$("#chat-message"))},bmRoom.user.changeHtml=function(){var e=$("#admin-panel-people-admin > ul > li").length;$("#title-admin .user-count").html(e);var t=$("#admin-panel-people-presenter > ul > li").length;$("#title-presenter .user-count").html(t);var o=$("#admin-panel-people-attendee > ul > li").length;$("#title-attendee .user-count").html(o)},bmRoom.user.processUnreadPrivateMsg=function(e){"undefined"!=typeof bmRoom.chat.store[e]&&bmRoom.chat.store[e].length>0&&$("#user-"+e+" .clroom-people-header").prepend('<div class="clroom-people-msg-nub">'+bmRoom.chat.store[e].length+"</div>")},bmRoom.user.processUnread=function(){if("none"!=$("#people-attendee").css("display")){var e=$("#roomchat_people"),t=Object.keys(bmRoom.user.unread).length;t>0&&bmRoom.user.show_attendees?e.html('People<span class="unread-count"><i>'+t+"</i></span>"):$("#roomchat_people .unread-count").remove()}},bmRoom.user.addUser=function(e){bmRoom.user.jobDoing=!0,bmRoom.user.opens[e.sid]||(bmRoom.user.opens[e.sid]=e,bmRoom.user.isAdmin(bmRoom.socket.io.engine.id),bmRoom.socket.io.engine.id===e.sid||$("#roomchat_people_area").is(":visible")?(bmRoom.socket.io.engine.id===e.sid&&e.name!=bmRoom.my.name&&$("#random_id").length>0&&(e.name=bmRoom.my.name),"Organizer"==e.role||"Temp-Organizer"==e.role?bmRoom.user.admin_list.indexOf(e.sid)<0&&bmRoom.user.admin_list.push(e.sid):"Presenter"==e.role?bmRoom.user.presenter_list.indexOf(e.sid)<0&&bmRoom.user.presenter_list.push(e.sid):bmRoom.user.attendee_list.indexOf(e.sid)<0&&bmRoom.user.attendee_list.push(e.sid),"enable"!=e.separateChat&&bmRoom.user.insertHtml(e)):"enable"!=e.separateChat&&(bmRoom.user.unread[e.sid]=e,bmRoom.user.processUnread())),bmRoom.user.jobDoing=!1},bmRoom.user.removeUser=function(e){bmRoom.user.jobDoing=!0,bmRoom.user.opens[e.sid]&&(delete bmRoom.user.opens[e.sid],bmRoom.admin.removeItemInList(bmRoom.user.admin_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.presenter_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.user.attendee_list,e.sid),bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)),bmRoom.user.unread[e.sid]&&(delete bmRoom.user.unread[e.sid],bmRoom.user.processUnread()),$("#user-"+e.sid).remove(),bmRoom.user.changeHtml(e,!1),bmRoom.user.jobDoing=!1},bmRoom.user.openChat=function(e,t){t="undefined"!=typeof t?t:!0;{var o="chat-wrapper-"+e.sid;"chat-panel-"+e.sid}if(0===$("#"+o).length){var i=$("<div />").attr("id",o).addClass("clroom-private-chat onfocus"),n=$('<div data-with="'+e.sid+'" />');n.html('<a href="javascript:void(0);" class="close_private_chat"><span class="room-arr-left-b"></span>&nbsp;PRIVATE CHAT WITH &nbsp;'+e.name),n.addClass("clroom-private-chat-tag"),i.append(n);var s=$("<div />").addClass("clroom-groupchat-out"),a=$("<ul />").attr("id","chat-message"+e.sid).addClass("clroom-groupchat");s.html(a),i.append(s).insertAfter("#people-list")}t?($("#"+o).show(),$("#people-list").hide(),$("#chat_bottom").show(),$("#chat_bottom_disabled").hide()):$("#"+o).hide()},bmRoom.user.closeChat=function(e){bmRoom.user.chatIndex[e.sid]&&$("#chat-tab-wrapper").slickRemove(bmRoom.user.chatIndex[e.sid]),bmRoom.chat.store[e.sid]&&bmRoom.chat.store[e.sid].length&&(bmRoom.chat.store[e.sid]=[]),$("#chat-wrapper-"+e.sid).is(":visible")&&($("#chat-wrapper-"+e.sid).hide(),$("#people-list").show(),$("#chat_bottom").hide())},bmRoom.user.sync=function(){bmRoom.user.jobDoing||bmRoom.socket.emit("user:sync",function(e){$.each(e,function(e,t){var t=JSON.parse(t);bmRoom.user.addUser(t)}),$.each(bmRoom.user.opens,function(t,o){e[t]||(bmRoom.user.removeUser(o),bmRoom.user.closeChat(o))})})},bmRoom.user.start=function(){bmRoom.socket.on("user:connect",function(e){"separateChat"==bmRoom.roomType&&e.sid==bmRoom.socket.io.engine.id&&(e.role=bmRoom.defaultRole),bmRoom.user.addUser(e)}),bmRoom.socket.on("user:disconnect",function(e){var t=bmRoom.user.opens[e];t&&(bmRoom.user.removeUser(t),bmRoom.user.closeChat(t))}),setTimeout(bmRoom.user.sync,3e3),$("#chat-tab-wrapper").slick({slidesToShow:3,slidesToScroll:1,arrows:!0,infinite:!1}),$(document).on("mouseover",".user_full_name",function(){var e=$(this).find(".user_name");if(e.width()>$(this).width()){var t=$(this).find(".user_name").width()-$(this).width();e.animate({marginLeft:"-"+(t+2)+"px"},3e3,function(){e.css("margin-left",0)})}}),$(document).on("mouseleave",".user_full_name",function(){$(".user_name").stop().css("margin-left",0)}),$(document).on("click","#chat-tab-wrapper .tab-name",function(e){e.preventDefault();var t=$(this).data("with");if(t){bmRoom.user.chatWith=t,$("#post_and_tweet").hide(),$(".clroom-groupchat-img > .prettycheckbox").hide();var o=bmRoom.chat.store[t];o&&o.length>0&&($.each(o,function(e,o){var i=bmRoom.chat.message(o);$("#chat-message"+t).append(i)}),bmRoom.chat.store[t]=[]),$("#user-"+t+" .unread-count").remove(),$("#chat-panel-"+t+" .unread-count").remove(),$("#chat-panel-"+t).removeAttr("style")}else{bmRoom.user.chatWith="",$("#post_and_tweet").show(),$(".clroom-groupchat-img > .prettycheckbox").show();var o=bmRoom.chat.store["group-chat"];o&&o.length>0&&($.each(o,function(e,t){if("undefined"!=typeof t.type&&"tweet"==t.type){var o=bmRoom.twitter.html(t);$("#chat-message").append(o),$(".is_twitter").length>500&&$(".is_twitter")[0].remove()}else{var i=bmRoom.chat.message(t);$("#chat-message").append(i)}}),bmRoom.chat.store["group-chat"]=[]),$("#roomchat_group .unread-count").remove(),$("#roomchat_group").removeAttr("style")}$(this).hasClass("tab-name-people")&&$.each(bmRoom.user.unread,function(e,t){var o=bmRoom.admin.admin_list.indexOf(t.sid)>-1?!0:!1,i=bmRoom.admin.presenter_list.indexOf(t.sid)>-1?!0:!1;o?(bmRoom.user.admin_list.indexOf(t.sid)<0&&bmRoom.user.admin_list.push(t.sid),"Organizer"!=bmRoom.user.opens[t.sid].role&&(bmRoom.user.opens[t.sid].role="Temp-Organizer")):i?(bmRoom.user.presenter_list.indexOf(t.sid)<0&&bmRoom.user.presenter_list.push(t.sid),bmRoom.user.opens[t.sid].role="Presenter"):bmRoom.user.attendee_list.indexOf(t.sid)<0&&bmRoom.user.attendee_list.push(t.sid),bmRoom.user.insertHtml(t),delete bmRoom.user.unread[e],bmRoom.user.processUnread(),bmRoom.user.processUnreadPrivateMsg(e)});var i=bmRoom.admin.admin_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1,n=bmRoom.admin.presenter_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1;bmRoom.admin.chat_lock||i||n?($("#roomchat_group").hasClass("onactive")?$("#chat_bottom").show():$("#chat_bottom").hide(),$("#chat_bottom_disabled").hide()):$("#roomchat_group").hasClass("onactive")?($("#chat_bottom").hide(),$("#chat_bottom_disabled").show()):$("#chat_bottom_disabled").hide()}),$(document).on("click",".clroom-people-chat-button",function(){var e;e="undefined"==typeof $(this).data("sid")||0==$(this).data("sid").length?bmRoom.user.opens[$(this).parent().attr("id").replace("user-","")]:bmRoom.user.opens[$(this).data("sid")],e&&(bmRoom.user.chatWith=e.sid,bmRoom.user.openChat(e),$("#chat-panel-"+e.sid).trigger("click"),bmRoom.chat.store[e.sid]=[],$("#user-"+e.sid+" .clroom-people-msg-nub").remove(),$("#post_and_tweet").hide(),$(".clroom-groupchat-img > .prettycheckbox").hide())}),$(document).on("click",".clroom-private-chat-tag",function(){var e=bmRoom.user.opens[$(this).data("with")];e&&bmRoom.user.closeChat(e)})},bmRoom.user.stop=function(){clearInterval(bmRoom.user.syncInterval),bmRoom.user.opens={}},bmRoom.admin={},bmRoom.admin.opens={},bmRoom.admin.audio_status={},bmRoom.admin.video_status={},bmRoom.admin.jobDoing=!1,bmRoom.admin.chatWith="",bmRoom.admin.chatIndex={},bmRoom.admin.admin_list=[],bmRoom.admin.presenter_list=[],bmRoom.admin.attendee_list=[],bmRoom.admin.control=!0,bmRoom.admin.chat_lock=!0,bmRoom.admin.question_answer_lock=!0,bmRoom.admin.question_answer_view_lock=!0,bmRoom.admin.removeItemInList=function(e,t){var o=e.indexOf(t);o>-1&&e.splice(o,1)},bmRoom.admin.sortObj=function(e,t,o,i){return void 0!=o?t.sort(function(t,i){if(void 0!=e[t]&&e[t].sid==bmRoom.socket.io.engine.id)return-1;if(void 0!=e[i]&&e[i].sid==bmRoom.socket.io.engine.id)return 1;if(void 0!=e[t]&&void 0!=e[i]){var n=e[t][o],s=e[i][o];return s>n?-1:n>s?1:0}return 1}):t.sort(),[t.indexOf(i.sid),t]},bmRoom.admin.insertAfter=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},bmRoom.admin.insertHtml=function(e,t){bmRoom.admin.jobDoing=!0;var o=bmRoom.user.opens[bmRoom.socket.io.engine.id],i="";if("Organizer"==$(".admin-box").attr("data-role")&&(i='<span class="room-admin hover-admin"></span>'),0===$("#admin-user-"+e.sid).length){"Organizer"==e.role||"Temp-Organizer"==e.role||"Presenter"==e.role||$("#cam_lock").hasClass("onactive")?e.lock_video="enabled":(e.lock_video="",o&&"Organizer"==o.role&&(e.status="disable")),"Organizer"==e.role||"Temp-Organizer"==e.role||"Presenter"==e.role||$("#mc_lock").hasClass("onactive")?e.lock_audio="enabled":(e.lock_audio="",o&&o.role&&"Organizer"==o.role&&(e.status="disable"));var n=$("#admin-panel-member-modal > ul > li").first().clone();if(n.attr("id","admin-user-"+e.sid),bmRoom.socket.io.engine.id===e.sid&&n.addClass("user-self"),"Organizer"===e.role||"Temp-Organizer"===e.role||"Presenter"===e.role)if(n.attr("data-role",e.role),n.find(".user_name").text(e.name),n.find(".admin-roles-v").attr("class","admin-roles-v "+e.lock_video).attr("id","mute-user-video-"+e.sid),n.find(".admin-roles-m").attr("class","admin-roles-m "+e.lock_video).attr("id","mute-user-audio-"+e.sid),n.find(".admin-roles-h").attr("id","raise-hand-"+e.sid),n.find(".admin-roles-more-box").attr("id","admin-more-"+e.sid),"Organizer"===e.role?(n.find(".admin-roles-presenter").hide(),n.find(".admin-roles-admin").hide()):"Temp-Organizer"===e.role?(n.find(".admin-roles-presenter").removeClass("enabled-presenter"),n.find(".admin-roles-admin").addClass("enabled-admin")):n.find(".admin-roles-admin").removeClass("enabled-admin"),n.hasClass("user-self")&&n.find(".admin-roles-mo").html(""),e.changeRole||n.find(".admin-roles-presenter").remove(),"Presenter"===e.role){var s=bmRoom.admin.sortObj(bmRoom.admin.opens,bmRoom.admin.presenter_list,"name",e),a=s[0];bmRoom.admin.presenter_list=s[1],0==$("#admin-panel-people-presenter > ul").children().length||0>a||$("#admin-panel-people-presenter > ul").children().length<=a?$("#admin-panel-people-presenter > ul").append(n):$(n).insertBefore($($("#admin-panel-people-presenter > ul").children()[a])),bmRoom.admin.presenter_list.indexOf(e.sid)<0&&bmRoom.admin.presenter_list.push(e.sid)}else{var s=bmRoom.admin.sortObj(bmRoom.admin.opens,bmRoom.admin.admin_list,"name",e),a=s[0];bmRoom.admin.admin_list=s[1],0==$("#admin-panel-people-admin > ul").children().length||0>a||$("#admin-panel-people-admin > ul").children().length<=a?$("#admin-panel-people-admin > ul").append(n):$(n).insertBefore($($("#admin-panel-people-admin > ul").children()[a])),bmRoom.admin.admin_list.indexOf(e.sid)<0&&bmRoom.admin.admin_list.push(e.sid)}else{n.attr("data-role","Attendee"),n.find(".hover-admin").remove(),n.find(".user_full_name").attr("class","admin-roles-attendees-name user_full_name"),n.find(".user_name").text(e.name),n.find(".admin-roles-v").attr("class","admin-roles-v "+e.lock_video).attr("id","mute-user-video-"+e.sid),n.find(".admin-roles-m").attr("class","admin-roles-m "+e.lock_video).attr("id","mute-user-audio-"+e.sid),n.find(".admin-roles-h").attr("id","raise-hand-"+e.sid),n.find(".admin-roles-more-box").attr("id","admin-more-"+e.sid),n.find(".admin-roles-presenter").removeClass("enabled-presenter"),n.find(".admin-roles-admin").removeClass("enabled-admin"),e.changeRole||n.find(".admin-roles-presenter").remove();var s=bmRoom.admin.sortObj(bmRoom.admin.opens,bmRoom.admin.attendee_list,"name",e),a=s[0];bmRoom.admin.attendee_list=s[1],$("#admin-panel-people-attendee > ul").children().length>99&&!t&&(n=""),bmRoom.admin.attendee_list.indexOf(e.sid)<0&&bmRoom.admin.attendee_list.push(e.sid),0==$("#admin-panel-people-attendee > ul").children().length||0>a||$("#admin-panel-people-attendee > ul").children().length<=a?t?$("#admin-panel-people-attendee > ul").prepend(n):$("#admin-panel-people-attendee > ul").append(n):t?$("#admin-panel-people-attendee > ul").prepend(n):$(n).insertBefore($($("#admin-panel-people-attendee > ul").children()[a]))}}$("#admin-user-"+e.sid+" .admin-roles-mo .room-more").unbind("click").click(function(t){t.stopPropagation(),$("#admin-user-"+e.sid+" .admin-roles-mo").toggleClass("onactive")}),bmRoom.admin.changeHtml(e,!0),bmRoom.admin.jobDoing=!1,$("#admin-panel-people-admin .admin-roles-v, #admin-panel-people-admin .admin-roles-m").addClass("enabled"),bmRoom.layout.initUserListPermission(e),bmRoom.socket.io.engine.id==e.sid&&bmRoom.saveRecordingAction("EnteringTheWebinar","MEMBER","","","","",e.name)},bmRoom.admin.changeHtml=function(){var e=$("#admin-panel-people-admin > ul > li").length;$("#admin-panel-title-admin .user-count").html(e);var t=$("#admin-panel-people-presenter > ul > li").length;$("#admin-panel-title-presenter .user-count").html(t);
var o=$("#admin-panel-people-attendee > ul > li").length;$("#admin-panel-title-attendee .user-count").html(o)},bmRoom.admin.addUser=function(e){bmRoom.admin.jobDoing=!0,bmRoom.admin.opens[e.sid]||(bmRoom.admin.opens[e.sid]=e,"Organizer"==e.role||"Temp-Organizer"==e.role?bmRoom.admin.admin_list.indexOf(e.sid)<0&&bmRoom.admin.admin_list.push(e.sid):"Presenter"==e.role?bmRoom.admin.presenter_list.indexOf(e.sid)<0&&bmRoom.admin.presenter_list.push(e.sid):bmRoom.admin.attendee_list.indexOf(e.sid)<0&&bmRoom.admin.attendee_list.push(e.sid),"enable"!=e.separateChat&&bmRoom.admin.insertHtml(e)),bmRoom.admin.jobDoing=!1},bmRoom.admin.removeUser=function(e){bmRoom.admin.jobDoing=!0,bmRoom.admin.opens[e.sid]&&(delete bmRoom.admin.opens[e.sid],bmRoom.admin.removeItemInList(bmRoom.admin.admin_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.presenter_list,e.sid),bmRoom.admin.removeItemInList(bmRoom.admin.attendee_list,e.sid)),$("#admin-user-"+e.sid).remove(),bmRoom.admin.changeHtml(e,!1),bmRoom.admin.jobDoing=!1},bmRoom.admin.muteIconDisplay=function(e,t,o){$("#admin-user-"+e+" ."+t).attr("class",t+" "+o),$("#admin-user-"+e+" .admin-roles-v.onactive").length>0?$("#admin-user-"+e+" .admin-roles-m").css("visibility","hidden"):$("#admin-user-"+e+" .admin-roles-m").css("visibility","visible"),$("#admin-user-"+e+" .admin-roles-v.onactive").length||$("#admin-user-"+e+" .admin-roles-m.onactive").length?$("#admin-user-"+e+" .admin-roles-mu").show():$("#admin-user-"+e+" .admin-roles-mu").hide()},bmRoom.admin.sync=function(){bmRoom.admin.jobDoing||bmRoom.socket.emit("user:sync",function(e){$.each(e,function(e,t){var t=JSON.parse(t);bmRoom.admin.addUser(t)}),$.each(bmRoom.admin.opens,function(t,o){e[t]||bmRoom.admin.removeUser(o)})})},bmRoom.admin.start=function(){bmRoom.socket.on("user:connect",function(e){bmRoom.admin.addUser(e)}),bmRoom.socket.on("user:disconnect",function(e){var t=bmRoom.admin.opens[e];t&&bmRoom.admin.removeUser(t)}),bmRoom.admin.sync(),bmRoom.socket.on("leave-room",function(){window.location.href=window.location.href=bmRoom.exitURI}),bmRoom.socket.on("seeall-lock",function(e){var t=bmRoom.admin.attendee_list.indexOf(bmRoom.socket.io.engine.id)>-1?!1:!0;"enable"==e?($("#seeall_lock").addClass("onactive"),$("#attendees_count").show(),$("#show_attendees").show(),$("#hide_attendees").hide(),bmRoom.user.show_attendees=!0):($("#seeall_lock").removeClass("onactive"),t||($("#attendees_count").hide(),$("#show_attendees").hide(),$("#hide_attendees").show(),$("#roomchat_people .unread-count").remove(),bmRoom.user.show_attendees=!1))}),bmRoom.socket.on("chat-lock",function(e){var t=bmRoom.admin.attendee_list.indexOf(bmRoom.socket.io.engine.id)>-1?!1:!0;e||(e=bmRoom.chat.defaultPublic),"enable"==e?(bmRoom.admin.chat_lock=!0,$("#chat_lock").addClass("onactive"),$("#people-list").is(":hidden")&&$("#chat_bottom").show(),$("#chat_bottom_disabled").hide()):($("#chat_lock").removeClass("onactive"),$("#chat_bottom_disabled").hide(),t?($("#people-list").is(":hidden")&&$("#chat_bottom").show(),$("#chat_bottom_disabled").hide()):(bmRoom.admin.chat_lock=!1,$("#roomchat_group").hasClass("onactive")&&($("#chat_bottom").hide(),$("#chat_bottom_disabled").show())))}),bmRoom.socket.on("question-answer-lock",function(e){bmRoom.admin.admin_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1;e||(e=bmRoom.questionAnswer.defaultPublic),"enable"==e?(bmRoom.admin.question_answer_lock=!0,$("#question_answer").addClass("onactive"),$("#roomchat_qanda").parent().show(),$("#chat-input .prettycheckbox").show()):(bmRoom.admin.question_answer_lock=!1,$("#question_answer").removeClass("onactive"),$("#roomchat_qanda").parent().hide(),$("#roomchat_qanda_area").is(":visible")&&$("#roomchat_group").trigger("click"),$("#chat-input .prettycheckbox").hide())}),bmRoom.socket.on("question-answer-view-lock",function(e){var t=bmRoom.admin.admin_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1,o=bmRoom.admin.presenter_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1;"enable"==e?(bmRoom.admin.question_answer_view_lock=!0,$("#question_answer_view").addClass("onactive"),$("#roomchat_qanda").hasClass("onactive")&&($("#roomchat_qanda_area .clroom-qanda-box").show(),$("#roomchat_qanda_area .clroom-qanda-box-disable").hide())):(bmRoom.admin.question_answer_view_lock=!1,$("#question_answer_view").removeClass("onactive"),bmRoom.admin.question_answer_view_lock||t||o?($("#roomchat_qanda_area .clroom-qanda-box").show(),$("#roomchat_qanda_area .clroom-qanda-box-disable").hide()):($("#roomchat_qanda_area .clroom-qanda-box").hide(),$("#roomchat_qanda_area .clroom-qanda-box-disable").show()))}),bmRoom.socket.on("mute-all-mic",function(e){bmRoom.socket.io.engine.id==e.sid||bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?"disable"==e.status&&($("#switch-audio").show().attr("disabled",!1),bmRoom.my.canAudio=!0):"disable"==e.status&&($("#switch-audio.onactive").trigger("click"),$("#switch-audio").attr("disabled",!0).removeClass("onactive"),bmRoom.my.canAudio=!1),bmRoom.admin.audio_status={},"disable"==e.status?($("#mc_lock").removeClass("onactive"),$("#mc_lock_text").html("Attendee Mic Disabled"),$.each(bmRoom.admin.audio_status,function(e,t){bmRoom.user.isAdmin(t.sid)||(t.status="disable")}),$("#admin-panel-people-attendee>ul>li .admin-roles-m").attr("class","admin-roles-m")):($("#mc_lock").addClass("onactive"),$("#mc_lock_text").html("Attendee Mic Enabled"),bmRoom.my.canAudio=!0,$("#switch-audio").show().attr("disabled",!1),$.each(bmRoom.admin.audio_status,function(e,t){bmRoom.user.isAdmin(t.sid)||(t.status="disable")}),$("#admin-panel-people-attendee>ul>li .admin-roles-m").attr("class","admin-roles-m enabled")),$("#mc_lock").hasClass("onactive")?$.each(bmRoom.user.opens,function(e,t){t.lock_audio="enabled"}):$.each(bmRoom.user.opens,function(e,t){bmRoom.user.isAdmin(e)||(t.lock_audio="")}),bmRoom.layout.initUserListPermission()}),bmRoom.socket.on("mute-all-cam",function(e){bmRoom.socket.io.engine.id==e.sid||bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?"disable"==e.status&&($("#switch-video").show().attr("disabled",!1),bmRoom.my.canVideo=!0):"disable"==e.status&&($("#switch-video.onactive").trigger("click"),$("#switch-video").attr("disabled",!0).removeClass("onactive"),bmRoom.my.canVideo=!1),bmRoom.admin.video_status={},"disable"==e.status?($("#cam_lock").removeClass("onactive"),$("#cam_lock_text").html("Attendee Cam + Mic Disabled"),$.each(bmRoom.admin.video_status,function(e,t){bmRoom.user.isAdmin(t.sid)||(t.status="disable")}),$("#admin-panel-people-attendee>ul>li .admin-roles-v").attr("class","admin-roles-v")):($("#cam_lock").addClass("onactive"),$("#cam_lock_text").html("Attendee Cam + Mic Enabled"),bmRoom.my.canVideo=!0,$("#switch-video").show().attr("disabled",!1),$.each(bmRoom.admin.video_status,function(e,t){bmRoom.user.isAdmin(t.sid)||(t.status="enable")}),$("#admin-panel-people-attendee>ul>li .admin-roles-v").attr("class","admin-roles-v enabled")),$("#cam_lock").hasClass("onactive")?$.each(bmRoom.user.opens,function(e,t){t.lock_video="enabled"}):$.each(bmRoom.user.opens,function(e,t){bmRoom.user.isAdmin(e)||(t.lock_video="")}),bmRoom.layout.initUserListPermission()}),bmRoom.socket.on("hd-lock",function(e){var t=$("#default-hd-status").val();"enable"==e?($("#hd_lock").addClass("onactive"),$("#hd_lock_text").html("Broadcast in HD Enabled")):"disable"==e?($("#hd_lock").removeClass("onactive"),$("#hd_lock_text").html("Broadcast in HD Disabled")):null!=e||"true"!=t||$("#hd_lock").hasClass("onactive")||$("#hd_lock").click()}),bmRoom.socket.on("mute-user-audio",function(e){var t=$("#admin-user-"+e.sid+" .admin-roles-m").hasClass("onactive");bmRoom.socket.io.engine.id===e.sid&&("enable"==e.status?($("#switch-audio").prop("disabled",!1),bmRoom.my.canAudio=!0):($("#switch-screen.onactive").trigger("click"),$("#switch-audio.onactive").trigger("click"),t||(bmRoom.my.canAudio=!1,$("#switch-audio").attr("disabled",!0).removeClass("onactive")))),"enable"==e.status?t||(bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-m","enabled"),bmRoom.user.opens[e.sid].lock_audio="enabled"):t?(bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-m","enabled"),bmRoom.user.opens[e.sid].lock_audio="enabled",console.log(bmRoom.user.opens[e.sid])):(bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-m",""),bmRoom.user.opens[e.sid].lock_audio=""),bmRoom.admin.audio_status[e.sid]=e,bmRoom.layout.initUserListPermission(bmRoom.user.opens[e.sid])}),bmRoom.socket.on("mute-user-video",function(e){var t=$("#admin-user-"+e.sid+" .admin-roles-v").hasClass("onactive");bmRoom.socket.io.engine.id===e.sid&&("enable"==e.status?(bmRoom.my.canVideo=!0,$("#switch-video").prop("disabled",!1)):($("#switch-video.onactive").trigger("click"),$("#switch-screen.onactive").trigger("click"),t||(bmRoom.my.canVideo=!1,$("#switch-video").attr("disabled",!0).removeClass("onactive")))),"enable"==e.status?t||(bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-v","enabled"),bmRoom.user.opens[e.sid].lock_video="enabled"):t?(bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-v","enabled"),bmRoom.user.opens[e.sid].lock_video="enabled"):(bmRoom.admin.muteIconDisplay(e.sid,"admin-roles-v",""),bmRoom.user.opens[e.sid].lock_video=""),bmRoom.admin.video_status[e.sid]=e,bmRoom.layout.initUserListPermission(bmRoom.user.opens[e.sid])}),bmRoom.socket.on("muted-audio-user",function(e){$.each(e,function(e,t){var t=JSON.parse(t);bmRoom.admin.audio_status[t.sid]=t})}),bmRoom.socket.on("muted-video-user",function(e){$.each(e,function(e,t){var t=JSON.parse(t);bmRoom.admin.video_status[t.sid]=t})}),bmRoom.socket.on("admin",function(e,t){var o={};if("separateChat"!=bmRoom.roomType&&(t.lock_audio="",t.lock_video="",t.lock_audio=$("#admin-user-"+t.sid+" > .admin-roles-m").attr("class").replace("admin-roles-m",""),t.lock_video=$("#admin-user-"+t.sid+" > .admin-roles-v").attr("class").replace("admin-roles-v",""),bmRoom.user.opens[t.sid].lock_audio=t.lock_audio,bmRoom.user.opens[t.sid].lock_video=t.lock_video),bmRoom.admin.opens[t.sid].role=t.role,$("#admin-user-"+t.sid+" .room-admin").qtip("destroy"),$("#admin-user-"+t.sid).remove(),$("#user-"+t.sid).remove(),e)if(handleUsersList(t),bmRoom.parentSid===t.sid&&(bmRoom.admin.opens[bmRoom.socket.io.engine.id].role=t.role,o=bmRoom.admin.opens[bmRoom.socket.io.engine.id],handleUsersList(o)),bmRoom.socket.io.engine.id===t.sid||bmRoom.parentSid===t.sid||bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)){(bmRoom.socket.io.engine.id===t.sid||bmRoom.parentSid===t.sid)&&("Presenter"==t.role?($(".admin-box").removeClass("onactive").hide(),$(".clroom-main").removeClass("onactive").addClass("clroom-full")):("separateChat"!=bmRoom.roomType&&$(".admin-box").addClass("onactive").show(),$(".clroom-main").addClass("onactive").removeClass("clroom-full")),("Organizer"===t.role||"Temp-Organizer"===t.role||"Presenter"===t.role)&&($('[data-show-as="admin-presenter"]').show(),$("#mic-menu, #cam-menu, #bmroom-connect-test-btn").hide(),$(".admin-title").show(),$(".attendee-title").hide(),$("#roomchat_qanda").hasClass("onactive")&&($("#roomchat_qanda_area .clroom-qanda-box").show(),$("#roomchat_qanda_area .clroom-qanda-box-disable").hide())),$(".admin-box").hasClass("onactive")&&($("#room-body").hasClass("full-screen")?$(".admin-box").hide():$(".admin-box").show())),$("#welcome-board >.clroom-blank-state-5").show(),$("#welcome-board >.clroom-blank-state-4").hide(),$("#switch-audio").prop("disabled",!1),$("#switch-video").prop("disabled",!1),$("#invite-people-link").parent().show(),"chrome"===bmRoom.browser?$("#switch-screen").prop("disabled",!1):($("#switch-screen, #blank_screen_share").prop("disabled",!0).removeClass("onactive"),$(".clroom-blank-sharescreen").hide()),$("#add-files").prop("disabled",!1),$("#add-videos").prop("disabled",!1),$(".video-share-control").prop("disabled",!1).attr("title",""),bmRoom.videoShare.resizeVideo(),$(".remove-youtube-video-link").show(),$(".clroom-video-controlbox").show(),bmRoom.my.canVideo=!0,bmRoom.my.canAudio=!0,bmRoom.my.canScreen=!0;var i='<div class="clroom-poll-add-box">';"separateChat"==bmRoom.roomType?(i+='<a href="javascript:void(0);" onclick="createNewPoll();">',i+="Create A New Poll",i+="</a>"):(i+='<a href="/conferences/'+$("#conference-obfuscated-id").val()+'/polls/new_in_bigroom" rel="modal:open">',i+="Create A New Poll",i+="</a>"),i+='<input id="create_poll_node" name="create_poll_node" type="hidden">',i+="</div>",$("#roomchat_poll_area").removeClass("no-admin"),$("#roomchat_poll_area .clroom-twitter-box").prepend(i),$('[data-twitter-role-type="attendee"]').attr("style","display: none"),$('[data-twitter-role-type="organizer"]').attr("style",""),$("#roomchat_group_area").className="clroom-groupchat-body onactive"+($("#roomchat_group_area").attr("data-hashtag")||"").length>1?" logedin":" addhashtag",$("#twitter_show_tag>a").html($("#roomchat_group_area").attr("data-hashtag")+' <span class="room-edit"></span>').removeClass("unclickable"),$("#chat-message").removeClass("without-twitter"),$("#attendees_count").show(),$("#show_attendees").show(),$("#hide_attendees").hide(),$("#chat_bottom").show(),$("#chat_bottom_disabled").hide(),$("#roomchat_group_area").addClass("twitter-connect"),$("#roomchat_qanda").parent().show(),$("#qanda-content-list > li").each(function(){var e=$(this).data("obfuscated-id"),t=$(this).data("answered"),o=$("#conference-obfuscated-id").val(),i=$('<a href="/conferences/'+o+"/qanda_answered/"+e+'" data-remote="true" class="answered-qanda">Mark answered</a>'),n=$('<a href="/conferences/'+o+"/delete_qanda/"+e+'" data-remote="true" class="delete-qanda">Delete</a>');$(this).find(".mark-answered > a").remove(),t||$(this).find(".mark-answered").append(i),$(this).find(".mark-answered").append(n)}),$(".clroom-attendeer-arrs").show()}else $(".admin-box").removeClass("onactive").hide(),$("#welcome-board >.clroom-blank-state-4").show(),$("#welcome-board >.clroom-blank-state-5").hide(),$(".clroom-main").removeClass("onactive").addClass("clroom-full"),$("#switch-audio").attr("disabled",!0).removeClass("onactive"),$("#switch-video").attr("disabled",!0).removeClass("onactive"),$("#switch-screen, #blank_screen_share").attr("disabled",!0).removeClass("onactive"),$("#add-files").prop("disabled",!0).removeClass("onactive"),$("#add-videos").prop("disabled",!0).removeClass("onactive"),$("#invite-people-link").parent().hide(),$(".remove-youtube-video-link").hide(),$(".clroom-video-controlbox").hide(),bmRoom.videoShare.resizeVideo(),$(".video-share-control").prop("disabled",!0).attr("title","Only admins can control this."),bmRoom.my.canVideo=!1,bmRoom.my.canAudio=!1,bmRoom.my.canScreen=!1,$("#roomchat_poll_area").addClass("no-admin"),$("#roomchat_poll_area .clroom-poll-add-box").remove(),$("#roomchat_group_area").removeClass("twitter-connect"),$("#qanda-content-list > li .mark-answered > a").remove(),$(".clroom-attendeer-arrs").hide();else(t.sid===bmRoom.socket.io.engine.id||bmRoom.parentSid===t.sid)&&(bmRoom.stream.sc_id&&bmRoom.stream.closeScreen(),bmRoom.my.canScreen=!1),t.role=bmRoom.admin.opens[t.sid].role,handleUsersList(t),bmRoom.parentSid===t.sid&&(bmRoom.admin.opens[bmRoom.socket.io.engine.id].role=t.role,o=bmRoom.admin.opens[bmRoom.socket.io.engine.id],handleUsersList(o)),(bmRoom.socket.io.engine.id===t.sid||bmRoom.parentSid===t.sid)&&($(".admin-box").removeClass("onactive").hide(),$(".clroom-main").removeClass("onactive").addClass("clroom-full"),bmRoom.layout.enableAudio(t)?$("#switch-audio").attr("disabled",!1):($("#switch-audio.onactive").trigger("click"),bmRoom.my.canAudio=!1,$("#switch-audio").attr("disabled",!0).removeClass("onactive")),bmRoom.layout.enableVideo(t)?$("#switch-video").attr("disabled",!1):($("#switch-video.onactive").trigger("click"),bmRoom.my.canVideo=!1,$("#switch-video").attr("disabled",!0).removeClass("onactive")),$("#switch-screen, #blank_screen_share").attr("disabled",!0).removeClass("onactive"),$("#welcome-board >.clroom-blank-state-4").show(),$("#welcome-board >.clroom-blank-state-5").hide(),$("#add-files").prop("disabled",!0).removeClass("onactive"),$("#add-videos").prop("disabled",!0).removeClass("onactive"),$("#invite-people-link").parent().hide(),$(".remove-youtube-video-link").hide(),$(".clroom-video-controlbox").hide(),bmRoom.videoShare.resizeVideo(),$(".video-share-control").prop("disabled",!0).attr("title","Only admins can control this."),$("#roomchat_poll_area").addClass("no-admin"),$("#roomchat_poll_area .clroom-poll-add-box").remove(),$('[data-twitter-role-type="attendee"]').attr("style",""),$('[data-twitter-role-type="organizer"]').attr("style","display: none"),$("#roomchat_group_area").className="clroom-groupchat-body onactive",$("#twitter_show_tag>a").html($("#roomchat_group_area").attr("data-hashtag")).addClass("unclickable"),$("#chat-message").addClass("without-twitter"),$("#seeall_lock").hasClass("onactive")?($("#attendees_count").show(),$("#show_attendees").show(),$("#hide_attendees").hide()):($("#attendees_count").hide(),$("#show_attendees").hide(),$("#hide_attendees").show()),$("#chat_lock").hasClass("onactive")?(bmRoom.admin.chat_lock=!0,$("#chat_bottom").show(),$("#chat_bottom_disabled").hide()):(bmRoom.admin.chat_lock=!1,$("#chat_bottom").hide(),$("#chat_bottom_disabled").show()),$("#roomchat_group_area").removeClass("twitter-connect"),$('[data-show-as="admin-presenter"]').hide(),$(".admin-title").hide(),$(".attendee-title").show(),$("#qanda-content-list > li .mark-answered > a").remove(),$(".clroom-attendeer-arrs").hide());if(bmRoom.admin.insertHtml(t),bmRoom.user.insertHtml(t),bmRoom.chat.handleDelBtn(),bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)){var n=bmRoom.admin.opens[bmRoom.socket.io.engine.id];bmRoom.layout.initUserListPermission(n)}var s=bmRoom.admin.admin_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1,a=bmRoom.admin.presenter_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1;s?($("#confirm-delete").parent().show(),$("#record_switch_button").show()):($("#confirm-delete").parent().hide(),$("#record_switch_button").hide()),bmRoom.admin.question_answer_lock?$("#roomchat_qanda").parent().show():($("#roomchat_qanda").hasClass("onactive")&&$("#roomchat_group").trigger("click"),$("#roomchat_qanda").parent().hide()),bmRoom.admin.question_answer_view_lock||s||a?($("#roomchat_qanda_area .clroom-qanda-box").show(),$("#roomchat_qanda_area .clroom-qanda-box-disable").hide()):($("#roomchat_qanda_area .clroom-qanda-box").hide(),$("#roomchat_qanda_area .clroom-qanda-box-disable").show()),bmRoom.theme.changeThemePermission(s),bmRoom.whiteboard.status&&bmRoom.whiteboard.showControl(bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)),setTimeout(function(){bmRoom.videoShare.resizeVideo()},1e3)}),bmRoom.socket.on("all-admins",function(e){$('[data-role="Temp-Organizer"]').remove(),e&&$.each(e,function(e,t){var t=JSON.parse(t);t.role="Temp-Organizer",bmRoom.admin.opens[t.sid]&&"Organizer"!=bmRoom.admin.opens[t.sid].role&&(bmRoom.admin.opens[t.sid].role="Temp-Organizer"),bmRoom.admin.admin_list.indexOf(t.sid)<0&&bmRoom.admin.admin_list.push(t.sid),bmRoom.admin.insertHtml(t),bmRoom.user.admin_list.indexOf(t.sid)<0&&bmRoom.user.admin_list.push(t.sid),bmRoom.user.insertHtml(t)})}),bmRoom.socket.on("all-presenters",function(e){e&&$.each(e,function(e,t){var t=JSON.parse(t);t.role="Presenter",bmRoom.admin.opens[t.sid]&&(bmRoom.admin.opens[t.sid].role="Presenter"),bmRoom.admin.presenter_list.indexOf(t.sid)<0&&bmRoom.admin.presenter_list.push(t.sid),bmRoom.admin.insertHtml(t),bmRoom.user.presenter_list.indexOf(t.sid)<0&&bmRoom.user.presenter_list.push(t.sid),bmRoom.user.insertHtml(t)})}),bmRoom.socket.on("close-recording-popup",function(){$("#remind_recording_popup").hide()})},$(document).on("click","#remind_recording_popup .room-delete2",function(){$("#remind_recording_popup").hide(),$.ajax({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/change_will_be_recorded",type:"PUT"})});var recordingTourTop={id:"start-recording-tour-top",target:"admin_to_record",placement:"top",title:"Now Recording",content:"Go to the Record tab to stop the recording.",xOffset:-60,arrowOffset:90,width:180},recordingTourLeft={id:"start-recording-tour-left",target:"admin-shrink",placement:"left",title:"Now Recording",content:"Go to the Record tab of the Host Control Panel to stop the recording.",yOffset:-15,xOffset:-20,width:180,arrowOffset:"center"},calloutMgr;$(document).ready(function(){calloutMgr=hopscotch.getCalloutManager()}),$(document).on("click","#remind_recording_popup .clroom-recording-mod-btn",function(){$("#record_switch_button").click(),$("#remind_recording_popup").hide(),bmRoom.socket.emit("close-recording-popup"),calloutMgr.createCallout(bmRoom.admin.control?recordingTourTop:recordingTourLeft)}),$(document).on("click","#admin-shrink",function(){$(this).toggleClass("close"),$(".admin-box").toggleClass("onactive"),$(".clroom-main").toggleClass("onactive"),calloutMgr.removeCallout("start-recording-tour-left"),calloutMgr.removeCallout("start-recording-tour-top"),bmRoom.admin.control=$(".admin-box").hasClass("onactive")?!0:!1,setTimeout(function(){bmRoom.videoShare.resizeVideo(),bmRoom.mp4Share.resizeVideo()},1e3)}),$(document).on("click","[id^=admin-user-] .admin-roles-presenter",function(){var e=$(this).parent().attr("id").replace("admin-more-",""),t=bmRoom.user.opens[e];0===$("#admin-panel-people-presenter #admin-user-"+t.sid).length?(t.role="Presenter",bmRoom.socket.emit("change-role","presenter",t),bmRoom.saveRecordingAction("MakePresenter","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e].name)):(t.role="Member",bmRoom.socket.emit("change-role","member",t),bmRoom.saveRecordingAction("CancelPresenter","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e].name))}),$(document).on("click","[id^=admin-user-] .admin-roles-admin",function(){var e=$(this).parent().attr("id").replace("admin-more-",""),t=bmRoom.user.opens[e];0===$("#admin-panel-people-admin #admin-user-"+t.sid).length?(t.role="Temp-Organizer",bmRoom.socket.emit("change-role","admin",t),bmRoom.saveRecordingAction("MakeAdmin","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e].name)):t.changeRole?(t.role="Member",bmRoom.socket.emit("change-role","member",t),bmRoom.saveRecordingAction("CancelAdmin","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e].name)):(t.role="Presenter",bmRoom.socket.emit("change-role","presenter",t),bmRoom.saveRecordingAction("MakePresenter","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e].name))}),$(document).on("click",".admin-roles-mu",function(){var e={};e.sid=$(this).parent().attr("id").replace("admin-user-",""),e.role=$("#admin-user-"+e.sid).attr("data-role");var t=bmRoom.stream.getMuxerID(e.sid);$(this).hasClass("closed")?(bmRoom.socket.emit("stream:unmute",e.sid,t),$(this).removeClass("closed"),bmRoom.saveRecordingAction("UnmuteIndividual","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e.sid].name)):(bmRoom.socket.emit("stream:mute",e.sid,t),$(this).addClass("closed"),bmRoom.saveRecordingAction("MuteIndividual","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e.sid].name))}),$(document).on("click","[id^=mute-user-audio-]",function(){var e=new Object;e.sid=this.id.replace("mute-user-audio-",""),e.role=$("#admin-user-"+e.sid).data("role"),bmRoom.admin.opens[e.sid]?$(this).hasClass("enabled")?(e.status="disable",bmRoom.socket.emit("mute-user-audio",e),bmRoom.saveRecordingAction("DisableIndividualMic","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e.sid].name)):(e.status="enable",bmRoom.socket.emit("mute-user-audio",e),bmRoom.saveRecordingAction("EnableIndividualMic","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e.sid].name)):"TwilioCall"==e.role}),$(document).on("click","[id^=mute-user-video-]",function(){var e=new Object;e.role=$("#admin-user-"+e.sid).attr("data-role"),e.sid=this.id.replace("mute-user-video-",""),$(this).hasClass("enabled")?(e.status="disable",bmRoom.socket.emit("mute-user-video",e),bmRoom.saveRecordingAction("DisableIndividualCam","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e.sid].name)):(e.status="enable",bmRoom.socket.emit("mute-user-video",e),bmRoom.saveRecordingAction("EnableIndividualCam","PERMISSION","","","",bmRoom.socket.io.engine.id,bmRoom.admin.opens[e.sid].name))}),$(document).on("click","[id^=admin-user-] .admin-roles-remove",function(){var e=$(this).parent().data("role"),t=$(this).parent().attr("id").replace("admin-more-","");"TwilioCall"==e?$.ajax({url:"/home/kick_twilio_call",type:"post",data:{obfuscated_id:$("#conference-obfuscated-id").val(),call_sid:t}}):t!=bmRoom.socket.io.engine.id&&(bmRoom.socket.emit("leave-room",t),bmRoom.saveRecordingAction("RemovingTheWebinar","MEMBER","","","",bmRoom.admin.opens[t].id,bmRoom.admin.opens[t].name))}),$(document).on("click","#exit-room",function(){}),$(document).on("click","#hd_lock",function(){$("#hd_lock").hasClass("onactive")?($("#hd_lock").removeClass("onactive"),bmRoom.socket.emit("hd-lock","disable"),bmRoom.saveRecordingAction("DisabledHD","HD","","","","")):($("#hd_lock").addClass("onactive"),bmRoom.socket.emit("hd-lock","enable"),bmRoom.saveRecordingAction("EnabledHD","HD","","","",""))}),$(document).on("click","#hide_tweets",function(){$("#hide_tweets").hasClass("onactive")?($("#hide_tweets").removeClass("onactive"),$("#hide_tweets_flag").val(0),$(".is_twitter").show(),bmRoom.saveRecordingAction("TurningOffTweets","TWITTER","","","","",bmRoom.my.name)):($("#hide_tweets").addClass("onactive"),$("#hide_tweets_flag").val(1),$(".is_twitter").hide(),bmRoom.saveRecordingAction("TurningOnTweets","TWITTER","","","","",bmRoom.my.name))}),$(document).on("click","#seeall_lock",function(){$("#seeall_lock").hasClass("onactive")?($("#seeall_lock").removeClass("onactive"),bmRoom.socket.emit("seeall-lock","disable")):($("#seeall_lock").addClass("onactive"),bmRoom.socket.emit("seeall-lock","enable"))}),$(document).on("click","#chat_lock",function(){$("#chat_lock").hasClass("onactive")?($("#chat_lock").removeClass("onactive"),bmRoom.socket.emit("chat-lock","disable")):($("#chat_lock").addClass("onactive"),bmRoom.socket.emit("chat-lock","enable"))}),$(document).on("click","#mc_lock",function(){$("#mc_lock").hasClass("onactive")?($("#mc_lock").removeClass("onactive"),bmRoom.socket.emit("mute-all-mic","disable"),bmRoom.saveRecordingAction("DisableAttendeeMic","MIC","","","",bmRoom.socket.io.engine.id)):($("#mc_lock").addClass("onactive"),bmRoom.socket.emit("mute-all-mic","enable"),bmRoom.saveRecordingAction("EnableAttendeeMic","MIC","","","",bmRoom.socket.io.engine.id))}),$(document).on("click","#cam_lock",function(){$("#cam_lock").hasClass("onactive")?($("#cam_lock").removeClass("onactive"),bmRoom.socket.emit("mute-all-cam","disable"),bmRoom.saveRecordingAction("DisableAttendeeCam","WEBCAM","","","",bmRoom.socket.io.engine.id)):($("#cam_lock").addClass("onactive"),bmRoom.socket.emit("mute-all-cam","enable"),bmRoom.saveRecordingAction("DisableAttendeeCam","WEBCAM","","","",bmRoom.socket.io.engine.id))}),$(document).on("click","#question_answer",function(){$("#question_answer").hasClass("onactive")?($("#question_answer").removeClass("onactive"),bmRoom.socket.emit("question-answer-lock","disable")):($("#question_answer").addClass("onactive"),bmRoom.socket.emit("question-answer-lock","enable"))}),$(document).on("click","#question_answer_view",function(){$("#question_answer_view").hasClass("onactive")?($("#question_answer_view").removeClass("onactive"),bmRoom.socket.emit("question-answer-view-lock","disable")):($("#question_answer_view").addClass("onactive"),bmRoom.socket.emit("question-answer-view-lock","enable"))}),$(document).on("click","#record_lock_off",function(){$("#record_lock").addClass("onactive")}),$(document).on("click","#record_lock_on",function(){$("#record_lock").removeClass("onactive")}),$(document).on("click","#admin_to_audience",function(e){e.preventDefault(),$("#admin_to_audience, #admin_audience").addClass("onactive"),$("#admin_to_engagement, #admin_to_record, #admin_record, #admin_advanced").removeClass("onactive")}),$(document).on("click","#admin_to_record",function(e){e.preventDefault(),$("#admin_to_record, #admin_record").addClass("onactive"),$("#admin_to_engagement, #admin_audience, #admin_to_audience, #admin_advanced").removeClass("onactive")}),$(document).on("click","#admin_to_engagement",function(e){e.preventDefault(),$("#admin_advanced, #admin_to_engagement").addClass("onactive"),$("#admin_record, #admin_audience, #admin_to_audience, #admin_to_record").removeClass("onactive")}),bmRoom.whiteboard={},bmRoom.whiteboard.images=[],bmRoom.whiteboard.type="",bmRoom.whiteboard.slider,bmRoom.whiteboard.status=!1,bmRoom.whiteboard.hashedId,bmRoom.whiteboard.currentCanvas,bmRoom.whiteboard.drawing,bmRoom.whiteboard.canDraw=!1,bmRoom.whiteboard.currentCtx,bmRoom.whiteboard.drawingStatus=!1,bmRoom.whiteboard.drawClient,bmRoom.whiteboard.drawPosition=0,bmRoom.whiteboard.drawMaxPosition=0,bmRoom.whiteboard.drawingPointColor="rgb(254, 255, 0)",bmRoom.whiteboard.drawingPointSize=10,bmRoom.whiteboard.drawingClear=!0,bmRoom.whiteboard.isAdmin=!1,bmRoom.whiteboard.contentElement={width:0,height:0},bmRoom.whiteboard.drawData={x:0,y:0},$(function(){$("#video-focus, #image_slide").resize(function(){(bmRoom.whiteboard.contentElement.height!=$("#image_slide").height()||bmRoom.whiteboard.contentElement.width!=$("#image_slide").width())&&bmRoom.whiteboard.status&&bmRoom.whiteboard.resize(bmRoom.whiteboard.slider.getCurrentSlide()),bmRoom.whiteboard.contentElement.height=$(this).height(),bmRoom.whiteboard.contentElement.width=$(this).width()})}),bmRoom.layout.enableWhiteboardMenu=function(e){var t=bmRoom.admin.admin_list.indexOf(e)>-1?!0:!1,o=bmRoom.admin.presenter_list.indexOf(e)>-1?!0:!1;return t||o},bmRoom.whiteboard.start=function(){bmRoom.socket.on("whiteboard:create",function(e,t){bmRoom.whiteboard.isAdmin=bmRoom.layout.enableWhiteboardMenu(bmRoom.socket.io.engine.id);var o=e[0],i=e[1],n=e[2]||0;bmRoom.whiteboard.type=e[3],bmRoom.whiteboard.images=o,bmRoom.whiteboard.hashedId=i,get_whiteboard_file_title(bmRoom.whiteboard.hashedId),$("#clroom-ppt-slide-body-out").mThumbnailScroller("destroy"),$("#slider_thumbnail").html(""),$("#generate_images").html("<ul id='bxslider'></ul>");for(var s=0;s<bmRoom.whiteboard.images.length;s++){var a="whiteboard-"+bmRoom.whiteboard.hashedId+"-"+s;$("#bxslider").append("<li><div id='"+a+"'><img src='"+bmRoom.whiteboard.images[s]+"' /></div></li>");var r="";n==s&&(r="class='onactive'");var l="<li "+r+" data-slide-index='"+s+"' id='whiteboard-thumbnail-"+bmRoom.whiteboard.hashedId+"-"+s+"'>";l+="<a href='javascript:void(0);'><img src='"+bmRoom.whiteboard.images[s]+"'></a>",l+="<div class='clroom-ppt-slide-numb'>"+(s+1)+"</div>",l+="</li>",$("#slider_thumbnail").append(l)}bmRoom.whiteboard.slider=null,bmRoom.whiteboard.slider=$("#bxslider").wbSlider({pagerCustom:!0,controls:!1,mode:"fade",touchEnabled:!1,startSlide:n,preloadImages:"all",onSliderLoad:function(){$(".clroom-ppt-control-right").unbind().bind("click",function(){syncSilderAction(bmRoom.whiteboard.hashedId,"next")}).hide(),$(".clroom-ppt-control-left").unbind().bind("click",function(){syncSilderAction(bmRoom.whiteboard.hashedId,"prev")}).hide(),bmRoom.whiteboard.status=!0,bmRoom.layout.resizeBar(),bmRoom.whiteboard.resize(n),bmRoom.whiteboard.showControl(bmRoom.whiteboard.isAdmin),bmRoom.stream.handleVideoAudioHtml(),$(window).unbind("keydown").on("keydown",function(e){!$("#chat_bottom").hasClass("onfocus")&&bmRoom.whiteboard.status&&bmRoom.whiteboard.isAdmin&&(37==e.keyCode&&$(".clroom-ppt-control-left").trigger("click"),39==e.keyCode&&$(".clroom-ppt-control-right").trigger("click"))})}}),showCurrentText(bmRoom.whiteboard.slider.getCurrentSlide()),$("#image_slide").show(),bmRoom.layout.change(),$("#welcome-board, #video-share-container, .clroom-modal-box").hide(),"onactive"==$("#share-video-link").prop("class")&&$("#share-video-link").click(),$("#clroom-ppt-slide-body-out").mThumbnailScroller("destroy").mThumbnailScroller({}),$("#clroom-ppt-slide-body-out ul.clroom-ppt-slide-body li").each(function(){$(this).unbind().click(function(){syncSilderAction(bmRoom.whiteboard.hashedId,null,$(this).data("slide-index"))})}),t&&t()}),bmRoom.socket.on("whiteboard:sync_switch",function(e){bmRoom.whiteboard.slider.goToSlide(e),bmRoom.whiteboard.goSlideThumbs(bmRoom.whiteboard.hashedId,e),showCurrentText(bmRoom.whiteboard.slider.getCurrentSlide()),bmRoom.whiteboard.status&&bmRoom.whiteboard.initDrawing(),bmRoom.whiteboard.resize(bmRoom.whiteboard.slider.getCurrentSlide())}),bmRoom.socket.on("whiteboard:sync_close",function(){$("#room-body").hasClass("full-screen")&&$("#whiteboard-fullscreen").trigger("click"),$("#image_slide").hide(),$("#generate_images").html(""),bmRoom.whiteboard.status=!1,bmRoom.stream.handleVideoAudioHtml()
}),bmRoom.socket.on("whiteboard:convert_uploaded_file",function(e){"blank-whiteboard"==e[2]||($("#upload_msg").show().text("Converting File..."),$("#upload_status").show()),e[1]=e[1].split("-")[0],$.ajax({url:"/conferences/"+e[1]+"/convert_uploaded_file/"+e[0],type:"get"})}),bmRoom.socket.on("whiteboard:refresh_uploaded_list",function(e){var t=(e[0],e[1]);$.ajax({url:"/conferences/"+e[0]+"/refresh_uploaded_list",type:"get",data:{type:t}})}),bmRoom.socket.on("whiteboard:draw",function(e){e.saveHistory?e.drawing&&e.drawer==bmRoom.socket.io.engine.id&&bmRoom.whiteboard.drawing.saveHistory():(e.drawing&&bmRoom.whiteboard.drawClient&&drawLine(bmRoom.whiteboard.drawClient,e),bmRoom.whiteboard.drawClient=convertXY(e))}),bmRoom.socket.on("whiteboard:sync_position",function(e){bmRoom.whiteboard.drawPosition=e.position,bmRoom.whiteboard.drawMaxPosition=e.max,bmRoom.whiteboard.drawingClear=e.clear}),bmRoom.socket.on("whiteboard:sync_history",function(e){if(e){var t=e[0],o=e[1],i=e[2];bmRoom.whiteboard.drawPosition=t.position,bmRoom.whiteboard.drawMaxPosition=o.max,bmRoom.whiteboard.drawingClear=o.clear,bmRoom.whiteboard.initDrawingSetting(o),0==t.position?bmRoom.whiteboard.drawing.reset({background:!0}):bmRoom.whiteboard.drawing.setImg(t.value,t.size),i&&bmRoom.whiteboard.resize(bmRoom.whiteboard.slider.getCurrentSlide())}else bmRoom.whiteboard.drawPosition=0,bmRoom.whiteboard.drawMaxPosition=0,bmRoom.whiteboard.drawingClear=!0}),bmRoom.socket.on("whiteboard:sync_draw_action",function(e){switch(e.actionName){case"setColor":bmRoom.whiteboard.initDrawingSetting({pointColor:e.value});break;case"changeSize":bmRoom.whiteboard.initDrawingSetting({pointSize:e.value});break;default:return}}),bmRoom.socket.on("whiteboard:clear_draw",function(){bmRoom.whiteboard.drawing.setImg(bmRoom.whiteboard.drawing.blankCanvas),bmRoom.whiteboard.resize(bmRoom.whiteboard.slider.getCurrentSlide())}),bmRoom.socket.on("admin",function(e,t){t.sid===bmRoom.socket.io.engine.id&&bmRoom.whiteboard.showControl(e)})},bmRoom.whiteboard.initDrawingSetting=function(e){e="undefined"==typeof e?{pointColor:bmRoom.whiteboard.drawingPointColor,pointSize:bmRoom.whiteboard.drawingPointSize}:e,e.pointColor&&(bmRoom.whiteboard.drawing.setColor(e.pointColor),$("#brush_color span").css("color",e.pointColor),bmRoom.whiteboard.drawingPointColor=e.pointColor),e.pointSize&&(bmRoom.whiteboard.drawing.controls[2].val=e.pointSize,change_penpoint_style(e.pointSize),bmRoom.whiteboard.drawing.controls[2].updateView(),bmRoom.whiteboard.drawingPointSize=e.pointSize,$("#change_size").val(e.pointSize))},bmRoom.whiteboard.initDrawing=function(e,t){if(bmRoom.whiteboard.slider){e=e||bmRoom.whiteboard.slider.getCurrentSlide();var o="whiteboard-"+bmRoom.whiteboard.hashedId+"-"+e;$("#"+o+" .drawing-board-controls, #"+o+" .drawing-board-canvas-wrapper, #"+o+" .show-btn").remove(),bmRoom.whiteboard.drawing=new DrawingBoard.Board("whiteboard-"+bmRoom.whiteboard.hashedId+"-"+e,{webStorage:!1,controls:["Color","DrawingMode","Size","Navigation"],controlsPosition:"top right",color:bmRoom.whiteboard.drawingPointColor,size:bmRoom.whiteboard.drawingPointSize,customHeight:$("#"+o+" img")[0].height,customWidth:$("#"+o+" img")[0].width,canvasId:o+"-canvas"},function(){bmRoom.whiteboard.currentCanvas=$("#whiteboard-"+bmRoom.whiteboard.hashedId+"-"+bmRoom.whiteboard.slider.getCurrentSlide()+"-canvas"),bmRoom.whiteboard.currentCanvas.length>0&&(bmRoom.whiteboard.currentCtx=bmRoom.whiteboard.currentCanvas[0].getContext("2d"),bmRoom.whiteboard.currentCanvas.on("mousemove touchmove",function(e){var t=getXYData(e,this);bmRoom.whiteboard.drawingStatus&&bmRoom.whiteboard.isAdmin&&bmRoom.whiteboard.canDraw&&bmRoom.socket.emit("whiteboard:mousemove",t)}).on("mousedown touchstart",function(e){bmRoom.whiteboard.isAdmin&&bmRoom.whiteboard.canDraw&&(bmRoom.whiteboard.drawData=getXYData(e,this),bmRoom.socket.emit("whiteboard:mousemove",bmRoom.whiteboard.drawData)),bmRoom.whiteboard.drawingStatus=!0,e.preventDefault()}).bind("mouseup mouseleave touchend",function(e){var t=getXYData(e,this),o=t.x==bmRoom.whiteboard.drawData.x&&t.y==bmRoom.whiteboard.drawData.y,i={drawing:bmRoom.whiteboard.drawingStatus,drawer:bmRoom.socket.io.engine.id,saveHistory:!0};!o&&bmRoom.whiteboard.drawingStatus&&bmRoom.whiteboard.isAdmin&&bmRoom.whiteboard.canDraw&&bmRoom.socket.emit("whiteboard:mousemove",i),bmRoom.whiteboard.drawingStatus=!1,e.preventDefault()}),bmRoom.whiteboard.showControl(bmRoom.whiteboard.isAdmin));var t={whId:bmRoom.whiteboard.hashedId,whIndex:e};bmRoom.socket.emit("whiteboard:get_history",t)}),bmRoom.whiteboard.initDrawingSetting(),t&&t()}},bmRoom.whiteboard.drawAction=function(e,t){var o={actionName:e,value:t,drawer:bmRoom.socket.io.engine.id};bmRoom.socket.emit("whiteboard:draw_action",o)},bmRoom.whiteboard.end=function(){bmRoom.whiteboard.status&&(bmRoom.socket.emit("whiteboard:end"),bmRoom.saveRecordingAction("EndWhiteBoardEvent","WHITEBOARD","","",""),bmRoom.socket.emit("whiteboard:close")),bmRoom.whiteboard.endDisplay()},bmRoom.whiteboard.endDisplay=function(){$("#slider_thumbnail").html("").css("margin-left","0px")},$(function(){setInterval(function(){$("ul#bxslider li").length>0&&0==$("#generate_images .bx-viewport").height()&&bmRoom.whiteboard.resize(bmRoom.whiteboard.slider.getCurrentSlide())},500)}),bmRoom.whiteboard.resize=function(e){var t=$("#video-focus").width();if($(".clroom-ppt").css("max-width",t),$(".bx-wrapper").css("max-width",t-4),$(".bx-viewport").css("height",$("#image_slide").height()),$("ul#bxslider li").width(t),$("ul#bxslider img").length>0){var o=$("number"==typeof e?"ul#bxslider img:eq("+e+")":"ul#bxslider img:visible");o.each(function(){"blank-whiteboard"==bmRoom.whiteboard.type?$(this).css({height:$("ul#bxslider").height(),width:$("ul#bxslider").width()}):resize_scale(this)})}bmRoom.whiteboard.status&&bmRoom.whiteboard.initDrawing()};var syncSilderAction=function(e,t,o){var i="number"==typeof o?o:next_index(bmRoom.whiteboard.slider.getCurrentSlide(),t);bmRoom.socket.emit("whiteboard:switch",i),bmRoom.socket.emit("whiteboard:record_current",[e,bmRoom.whiteboard.images[i]]),bmRoom.socket.emit("whiteboard:play",bmRoom.whiteboard.images[i]),bmRoom.saveRecordingAction("PlayWhiteBoardEvent","WHITEBOARD","",bmRoom.whiteboard.images[i],"")},next_index=function(e,t){return e=parseInt(e),"next"==t&&(e+=1),"prev"==t&&(e-=1),0>e?e=bmRoom.whiteboard.images.length-1:e>=bmRoom.whiteboard.images.length&&(e=0),e},showCurrentText=function(e){e=e||bmRoom.whiteboard.slider.getCurrentSlide();var t=parseInt(e)+1,o=bmRoom.whiteboard.images.length;$("#show_text").text("Slide "+t+" of "+o)},getXYData=function(e,t){var o={x:e.pageX||e.originalEvent.touches[0].pageX,y:e.pageY||e.originalEvent.touches[0].pageY,drawing:bmRoom.whiteboard.drawingStatus,drawer:bmRoom.socket.io.engine.id,offset:$(t).offset(),whiteboard:{height:$(t).height(),width:$(t).width()}};return o},convertXY=function(e){var t=e.x-e.offset.left,o=e.y-e.offset.top,i=t*bmRoom.whiteboard.currentCanvas.height()/e.whiteboard.height,n=o*bmRoom.whiteboard.currentCanvas.width()/e.whiteboard.width,s={x:i,y:n,drawing:e.drawing,drawer:e.drawer,offset:bmRoom.whiteboard.currentCanvas.offset(),whiteboard:{height:bmRoom.whiteboard.currentCanvas.height(),width:bmRoom.whiteboard.currentCanvas.width()}};return s};bmRoom.whiteboard.showControl=function(e){bmRoom.whiteboard.isAdmin=e,bmRoom.whiteboard.canDraw=bmRoom.whiteboard.canDraw||!1,bmRoom.whiteboard.canDraw||$("#drawing_controls").removeClass("onactive"),bmRoom.whiteboard.isAdmin?($(".clroom-ppt-control-left, .clroom-ppt-control-right, #close").show(),bmRoom.whiteboard.canDraw&&$(".drawing-board-canvas").css("cursor","crosshair"),$(".drawing-board-controls").removeClass("drawing-board-controls-hidden"),$("#pannel_switch").show()):($(".clroom-ppt-control-left, .clroom-ppt-control-right, #close").hide(),$(".drawing-board-controls").addClass("drawing-board-controls-hidden"),$("#pannel_switch").hide(),$("#drawing_controls").removeClass("onactive")),"blank-whiteboard"==bmRoom.whiteboard.type?($(".clroom-show-slide, .clroom-ppt-control-left, .clroom-ppt-control-text, .clroom-ppt-control-right").hide(),bmRoom.whiteboard.isAdmin&&($("#drawing_controls").hasClass("onactive")||$("#pannel_switch").trigger("click"))):($(".clroom-show-slide, .clroom-ppt-control-text").show(),bmRoom.whiteboard.isAdmin||$(".clroom-show-slide").hide()),bmRoom.whiteboard.initDrawingControlColor(),bmRoom.whiteboard.initDrawingControlNavigation(),bmRoom.whiteboard.initDrawingControlSize(),bmRoom.whiteboard.initSlideThumbs()},bmRoom.whiteboard.initDrawingControlColor=function(){$("#clroom-color-box li").unbind("click").click(function(){var e=$(this).data("color");bmRoom.whiteboard.drawing&&(bmRoom.whiteboard.drawing.setColor(e),bmRoom.whiteboard.drawAction("setColor",e)),$("#clroom-color-box").removeClass("onactive"),$("#brush_color span").css("color",e)})},bmRoom.whiteboard.initDrawingControlNavigation=function(){$("#go_back, #go_forth, #reset_drawing").unbind("click"),$("#go_back").click(function(){bmRoom.whiteboard.drawing&&bmRoom.whiteboard.drawing.goBackInHistory()}),$("#go_forth").click(function(){bmRoom.whiteboard.drawing&&bmRoom.whiteboard.drawing.goForthInHistory()}),$("#reset_drawing").click(function(){bmRoom.whiteboard.drawing&&!bmRoom.whiteboard.drawingClear&&bmRoom.whiteboard.drawing.saveHistory(bmRoom.whiteboard.drawing.blankCanvas)})},bmRoom.whiteboard.initDrawingControlSize=function(){$("#change_size").unbind("change").on("change",function(){bmRoom.whiteboard.drawing&&(bmRoom.whiteboard.drawing.controls[2].val=$(this).val(),bmRoom.whiteboard.drawAction("changeSize",$(this).val()),bmRoom.whiteboard.drawing.controls[2].updateView(),change_penpoint_style($(this).val()))})},bmRoom.whiteboard.initSlideThumbs=function(){$("#clroom-ppt-slide-thumbnail").hasClass("onactive")&&!bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)&&$("#clroom-ppt-slide-thumbnail").removeClass("onactive")},bmRoom.whiteboard.goSlideThumbs=function(e,t){$("#clroom-ppt-slide-body-out ul.clroom-ppt-slide-body li").removeClass("onactive"),$("#whiteboard-thumbnail-"+bmRoom.whiteboard.hashedId+"-"+t).addClass("onactive")},errMsg="",$(function(){var e=null;$("#whiteboard_file").fileupload({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/whiteboard/"+$("#random_id").val(),dataType:"json",autoUpload:!1,dropZone:$("#clroom-poupbox-drag-box, #blank-clroom-poupbox-drag-box")}).on("fileuploadadd",function(t,o){var i=o.originalFiles[0],n=/\.(pdf|doc|docx|odp|ppt|pptx|odt|jpg|jpeg|png|mp4)$/i;i.size&&i.size>1e8?$("#share_files_box").is(":visible")?($("#box_upload_status").show(),$("#box_upload_msg").text("Files must be 100 MB or smaller"),$("#box_upload_progress").hide(),$("#box_upload_progress img").css("width","0%"),$("#box_stop_file_process").parent().hide()):($("#upload_status").show(),$("#upload_msg").text("Files must be 100 MB or smaller"),$("#upload_progress").hide(),$("#upload_progress img").css("width","0%"),$("#stop_file_process").parent().hide()):n.test(i.name.toLowerCase())?(e=o,$("#share_files_box").is(":visible")?($("#box_upload_status").show(),$("#box_upload_msg").text("Uploading file... 0%"),$("#box_upload_progress").show(),$("#box_upload_progress img").css("width","0%"),$("#box_stop_file_process").parent().show()):($("#upload_status").show(),$("#upload_msg").text("Uploading file... 0%"),$("#upload_progress").show(),$("#upload_progress img").css("width","0%"),$("#stop_file_process").parent().show()),o.submit()):$("#share_files_box").is(":visible")?($("#box_upload_status").show(),$("#box_upload_msg").text("Files extension must be '.mp4', '.pdf', '.doc', '.docx', '.odp', '.ppt', '.pptx', '.odt', '.jpg', '.jpeg' or '.png'."),$("#box_upload_progress").hide(),$("#box_upload_progress img").css("width","0%"),$("#box_stop_file_process").parent().hide()):($("#upload_status").show(),$("#upload_msg").text("Files extension must be '.mp4', '.pdf', '.doc', '.docx', '.odp', '.ppt', '.pptx', '.odt', '.jpg', '.jpeg' or '.png'."),$("#upload_progress").hide(),$("#upload_progress img").css("width","0%"),$("#stop_file_process").parent().hide())}).on("fileuploadprocessalways",function(){}).on("fileuploadprogressall",function(e,t){var o=parseInt(t.loaded/t.total*100,10);$("#share_files_box").is(":visible")?($("#box_upload_status").show(),$("#box_upload_msg").text("Uploading file... "+o+"%"),$("#box_upload_progress img").css("width",o+"%")):($("#upload_status").show(),$("#upload_msg").text("Uploading file... "+o+"%"),$("#upload_progress img").css("width",o+"%")),100==o&&($("#share_files_box").is(":visible")?($("#box_upload_msg").text("Saving..."),$("#box_stop_file_process").parent().hide()):($("#upload_msg").text("Saving..."),$("#stop_file_process").parent().hide()))}).on("fileuploaddone",function(e,t){var o=t.result;if(o[0].length<=0)if($("#share_files_box").is(":visible")?($("#box_upload_msg").text("Converting file ..."),$("#box_upload_progress img").css("width","100%"),$("#box_stop_file_process").parent().hide()):($("#upload_msg").text("Converting file ..."),$("#upload_progress img").css("width","100%"),$("#stop_file_process").parent().hide()),""==o[1].shared_file_file_url)$.ajax({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/convert_images",data:o[1],type:"get"});else{$("#share_files_box").is(":visible")&&$("#close_files_box").trigger("click"),$("#box_upload_msg").show().text(""),$("#box_upload_status").hide(),$("#blank-clroom-poupbox-drag-box #upload_msg").show().text(""),$("#blank-clroom-poupbox-drag-box #upload_status").hide();var i={};i.link=o[1].shared_file_file_url,i.isMuted=0,i.playingState=0,i.eventTime=Date.now(),i.elapseTime=0,i.volume=100,bmRoom.layout.closeAllOthers("mp4video"),bmRoom.socket.emit("mp4Share:load",i),bmRoom.socket.emit("whiteboard:refresh_uploaded","whiteboard")}else $("#upload_progress, #box_upload_progress").hide(),$("#share_files_box").is(":visible")?($("#box_upload_msg").text(o[0].join("<br />")),$("#box_upload_progress img").css("width","0"),$("#box_stop_file_process").parent().hide()):($("#upload_msg").text(o[0].join("<br />")),$("#upload_progress img").css("width","0"),$("#stop_file_process").parent().hide())}).on("fileuploadfail",function(t,o){e=null,"abort"==o.errorThrown?$("#share_files_box").is(":visible")?($("#box_upload_msg").text("File Upload has been canceled!"),$("#box_upload_progress img").css("width","0%"),$("#box_stop_file_process").parent().hide()):($("#upload_msg").text("File Upload has been canceled!"),$("#upload_progress img").css("width","0%"),$("#stop_file_process").parent().hide()):$("#share_files_box").is(":visible")?($("#box_upload_msg").text("Upload file failed!"),$("#box_upload_progress img").css("width","0%"),$("#box_stop_file_process").parent().hide()):($("#upload_msg").text("Upload file failed!"),$("#upload_progress img").css("width","0%"),$("#stop_file_process").parent().hide())}),$("#box_stop_file_process, #stop_file_process").click(function(){e&&e.abort()}),$("#select_file, #blank_select_file").on("click",function(){$("#whiteboard_file").click()}),$("#close").on("click",function(){bmRoom.whiteboard.end()}),$("#create_blank_btn").click(function(e){"enabled"==$(this).data("status")?($.ajax({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/blank_whiteboard/"+$("#random_id").val(),type:"get"}),$(this).data("status","disabled"),$(this).text("Opening..."),$("#blank_status").show()):e.preventDefault()})}),function(e){function t(e){var t=e.__resizeTriggers__,o=t.firstElementChild,i=t.lastElementChild,n=o.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,n.style.width=o.offsetWidth+1+"px",n.style.height=o.offsetHeight+1+"px",o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight}function o(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function i(e){var i=this;t(this),this.__resizeRAF__&&c(this.__resizeRAF__),this.__resizeRAF__=l(function(){o(i)&&(i.__resizeLast__.width=i.offsetWidth,i.__resizeLast__.height=i.offsetHeight,i.__resizeListeners__.forEach(function(t){t.call(i,e)}))})}function n(){if(!a){var e=(w?w:"")+".resize-triggers { "+(y?y:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e)),t.appendChild(o),a=!0}}var s=document.attachEvent,a=!1,r=e.fn.resize;if(e.fn.resize=function(e){return this.each(function(){this==window?r.call(jQuery(this),e):addResizeListener(this,e)})},e.fn.removeResize=function(e){return this.each(function(){removeResizeListener(this,e)})},!s){var l=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(t){return e(t)}}(),c=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}(),d=!1,u="animation",h="",m="animationstart",p="Webkit Moz O ms".split(" "),f="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g="",b=document.createElement("fakeelement");if(void 0!==b.style.animationName&&(d=!0),d===!1)for(var v=0;v<p.length;v++)if(void 0!==b.style[p[v]+"AnimationName"]){g=p[v],u=g+"Animation",h="-"+g.toLowerCase()+"-",m=f[v],d=!0;break}var _="resizeanim",w="@"+h+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",y=h+"animation: 1ms "+_+"; "}window.addResizeListener=function(e,o){s?e.attachEvent("onresize",o):(e.__resizeTriggers__||("static"==getComputedStyle(e).position&&(e.style.position="relative"),n(),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=document.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),t(e),e.addEventListener("scroll",i,!0),m&&e.__resizeTriggers__.addEventListener(m,function(o){o.animationName==_&&t(e)})),e.__resizeListeners__.push(o))},window.removeResizeListener=function(e,t){s?e.detachEvent("onresize",t):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",i),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}(jQuery),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t){return this.options=e.extend({},e.noty.defaults,t),this.options.layout=this.options.custom?e.noty.layouts.inline:e.noty.layouts[this.options.layout],this.options.theme=e.noty.themes[this.options.theme],delete t.layout,delete t.theme,this.options=e.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=e.extend({},this.options,t),this._build(),this},_build:function(){var t=e('<div class="noty_bar"></div>').attr("id",this.options.id);if(t.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?e(this.options.layout.parent.object).css(this.options.layout.parent.css).append(t):t,this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var o=e("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(o):this.$bar.append(o);var i=this;e.each(this.options.buttons,function(t,o){var n=e("<button/>").addClass(o.addClass?o.addClass:"gray").html(o.text).appendTo(i.$bar.find(".noty_buttons")).bind("click",function(){e.isFunction(o.onClick)&&o.onClick.call(n,i)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),e.noty.store[this.options.id]=this},show:function(){var t=this;return e(t.options.layout.container.selector).append(t.$bar),t.options.theme.style.apply(t),"function"===e.type(t.options.layout.css)?this.options.layout.css.apply(t.$bar):t.$bar.css(this.options.layout.css||{}),t.$bar.addClass(t.options.layout.addClass),t.options.layout.container.style.apply(e(t.options.layout.container.selector)),t.options.theme.callback.onShow.apply(this),e.inArray("click",t.options.closeWith)>-1&&t.$bar.css("cursor","pointer").one("click",function(){t.options.callback.onCloseClick&&t.options.callback.onCloseClick.apply(t),t.close()}),e.inArray("hover",t.options.closeWith)>-1&&t.$bar.one("mouseenter",function(){t.close()}),e.inArray("button",t.options.closeWith)>-1&&t.$closeButton.one("click",function(){t.close()}),-1==e.inArray("button",t.options.closeWith)&&t.$closeButton.remove(),t.options.callback.onShow&&t.options.callback.onShow.apply(t),t.$bar.animate(t.options.animation.open,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterShow&&t.options.callback.afterShow.apply(t),t.shown=!0}),t.options.timeout&&t.$bar.delay(t.options.timeout).promise().done(function(){t.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var t=this;if(!this.shown){var o=[];return e.each(e.noty.queue,function(e,i){i.options.id!=t.options.id&&o.push(i)}),void(e.noty.queue=o)}t.$bar.addClass("i-am-closing-now"),t.options.callback.onClose&&t.options.callback.onClose.apply(t),t.$bar.clearQueue().stop().animate(t.options.animation.close,t.options.animation.speed,t.options.animation.easing,function(){t.options.callback.afterClose&&t.options.callback.afterClose.apply(t)}).promise().done(function(){t.options.modal&&(e.notyRenderer.setModalCount(-1),0==e.notyRenderer.getModalCount()&&e(".noty_modal").fadeOut("fast",function(){e(this).remove()})),e.notyRenderer.setLayoutCountFor(t,-1),0==e.notyRenderer.getLayoutCountFor(t)&&e(t.options.layout.container.selector).remove(),"undefined"!=typeof t.$bar&&null!==t.$bar&&(t.$bar.remove(),t.$bar=null,t.closed=!0),delete e.noty.store[t.options.id],t.options.theme.callback.onClose.apply(t),t.options.dismissQueue||(e.noty.ontap=!0,e.notyRenderer.render())})}},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},closed:!1,shown:!1};e.notyRenderer={},e.notyRenderer.init=function(o){var i=Object.create(t).init(o);return i.options.force?e.noty.queue.unshift(i):e.noty.queue.push(i),e.notyRenderer.render(),"object"==e.noty.returns?i:i.options.id},e.notyRenderer.render=function(){var t=e.noty.queue[0];"object"===e.type(t)?t.options.dismissQueue?e.notyRenderer.show(e.noty.queue.shift()):e.noty.ontap&&(e.notyRenderer.show(e.noty.queue.shift()),e.noty.ontap=!1):e.noty.ontap=!0},e.notyRenderer.show=function(t){t.options.modal&&(e.notyRenderer.createModalFor(t),e.notyRenderer.setModalCount(1)),0==e(t.options.layout.container.selector).length?t.options.custom?t.options.custom.append(e(t.options.layout.container.object).addClass("i-am-new")):e("body").append(e(t.options.layout.container.object).addClass("i-am-new")):e(t.options.layout.container.selector).removeClass("i-am-new"),e.notyRenderer.setLayoutCountFor(t,1),t.show()},e.notyRenderer.createModalFor=function(t){0==e(".noty_modal").length&&e("<div/>").addClass("noty_modal").data("noty_modal_count",0).css(t.options.theme.modal.css).prependTo(e("body")).fadeIn("fast")},e.notyRenderer.getLayoutCountFor=function(t){return e(t.options.layout.container.selector).data("noty_layout_count")||0},e.notyRenderer.setLayoutCountFor=function(t,o){return e(t.options.layout.container.selector).data("noty_layout_count",e.notyRenderer.getLayoutCountFor(t)+o)},e.notyRenderer.getModalCount=function(){return e(".noty_modal").data("noty_modal_count")||0},e.notyRenderer.setModalCount=function(t){return e(".noty_modal").data("noty_modal_count",e.notyRenderer.getModalCount()+t)},e.fn.noty=function(t){return t.custom=e(this),e.notyRenderer.init(t)},e.noty={},e.noty.queue=[],e.noty.ontap=!0,e.noty.layouts={},e.noty.themes={},e.noty.returns="object",e.noty.store={},e.noty.get=function(t){return e.noty.store.hasOwnProperty(t)?e.noty.store[t]:!1},e.noty.close=function(t){return e.noty.get(t)?e.noty.get(t).close():!1},e.noty.setText=function(t,o){return e.noty.get(t)?e.noty.get(t).setText(o):!1},e.noty.setType=function(t,o){return e.noty.get(t)?e.noty.get(t).setType(o):!1},e.noty.clearQueue=function(){e.noty.queue=[]},e.noty.closeAll=function(){e.noty.clearQueue(),e.each(e.noty.store,function(e,t){t.close()})};var o=window.alert;e.noty.consumeAlert=function(t){window.alert=function(o){t?t.text=o:t={text:o},e.notyRenderer.init(t)}},e.noty.stopConsumeAlert=function(){window.alert=o},e.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},e(window).resize(function(){e.each(e.noty.layouts,function(t,o){o.container.style.apply(e(o.container.selector))})})}(jQuery),function(e){e.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){e(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){e(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){e(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){e(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){e(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var o=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-o)/2+"px"}):e(this).animate({left:(e(window).width()-e(this).outerWidth(!1))/2+"px",top:(e(window).height()-o)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){e(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var o=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-o)/2+"px"}):e(this).animate({top:(e(window).height()-o)/2+"px"},500),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){e(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var t=e(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");e("body").append(t),t.find(".i-am-closing-now").remove(),t.find("li").css("display","block");var o=t.height();t.remove(),e(this).hasClass("i-am-new")?e(this).css({top:(e(window).height()-o)/2+"px"}):e(this).animate({top:(e(window).height()-o)/2+"px"},500),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul id="noty_inline_layout_container" />',selector:"ul#noty_inline_layout_container",style:function(){e(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){e(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(e){e.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){e(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),e(this).css({left:(e(window).width()-e(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){e(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){e(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&e(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(e){e.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var t=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).last().css({borderRadius:"0px 0px 5px 5px"});
break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),e(t).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":e(t).css({borderRadius:"0px 0px 0px 0px"}),e(t).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden"}),this.$message.css({fontSize:"18px",lineHeight:"16px",textAlign:"center",padding:"13px 10px 13px",fontWeight:"bold",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){e(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){e(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){e.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),bmRoom.videoShare={},bmRoom.videoShare.currentVideo={},bmRoom.videoShare.resizeVideo=function(){var e=$(window).width()-$(".admin-nav").width();$("#room-body").hasClass("full-screen")||(e-=$(".clroom-peoplechat-box").width()),$("#video-share-container").css("width",$(".clroom-whitespace").width()),bmRoom.layout.resizeBar()},$(window).resize(function(){bmRoom.videoShare.resizeVideo()}),$(document).on("click","#submit-video-share-link",function(e){var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/g,o=$("#video-share-link-field").val(),i="";return a=o.replace(t,function(e,t){i=t,bmRoom.videoShare.currentVideo.youtubeLink=$("#video-share-link-field").val(),bmRoom.videoShare.currentVideo.isMuted=0,bmRoom.videoShare.currentVideo.playingState="-1",bmRoom.videoShare.currentVideo.eventTime=Date.now(),bmRoom.videoShare.currentVideo.elapseTime=0,bmRoom.videoShare.currentVideo.volume=$(".volume-bar").attr("volume-value"),bmRoom.socket.emit("videoShare:load",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("StartYoutubeShareEvent","YOUTUBE","","",o),bmRoom.socket.emit("videoShare:action","shared"),$("#share-video-link").click(),$("#close_videos_box").click()}),i.length>0?$(".youtube-share-error").hide():$(".youtube-share-error").show(),e.preventDefault(),!1}),$(document).on("click","#cancel-youtube",function(){$("#share-video-link").click()}),$(document).on("click","#video-share-container .clroom-video-overlay-play",function(){$(".play-pause-video-button").click()}),$(document).on("click","#video-share-container .play-pause-video-button",function(e){return bmRoom.videoShare.currentVideo.eventTime=Date.now(),bmRoom.videoShare.currentVideo.elapseTime=youtubePlayer.getPlayerState()==YT.PlayerState.ENDED?0:youtubePlayer.getCurrentTime(),youtubePlayer.getPlayerState()==YT.PlayerState.PLAYING?(bmRoom.videoShare.currentVideo.playingState="2",bmRoom.socket.emit("videoShare:pause",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubePauseEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink),bmRoom.socket.emit("videoShare:action","paused")):(bmRoom.videoShare.currentVideo.playingState="1",bmRoom.socket.emit("videoShare:play",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubePlayEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink),bmRoom.socket.emit("videoShare:action","played")),e.preventDefault(),!1}),$(document).on("click","#video-share-container  .mute-unmute-video-button",function(e){return bmRoom.videoShare.currentVideo.eventTime=Date.now(),bmRoom.videoShare.currentVideo.elapseTime=youtubePlayer.getCurrentTime(),$(this).hasClass("muteon")?(bmRoom.videoShare.currentVideo.isMuted=0,bmRoom.socket.emit("videoShare:unmute",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubeUnmuteEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink)):(bmRoom.videoShare.currentVideo.isMuted=1,bmRoom.socket.emit("videoShare:mute",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubeMuteEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink)),e.preventDefault(),!1}),$(document).on("click","#end-youtube-video-button",function(e){return bmRoom.videoShare.currentVideo.eventTime=Date.now(),bmRoom.videoShare.currentVideo.elapseTime=youtubePlayer.getCurrentTime(),bmRoom.socket.emit("videoShare:end",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubeEndEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink),bmRoom.socket.emit("videoShare:action","removed"),bmRoom.videoShare.currentVideo={},e.preventDefault(),!1}),$(document).on("mouseup","#video-share-container .progress-bar",function(e){if(bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)){var t=$(".progress-bar"),o=(e.pageX-t.offset().left)/t.outerWidth();bmRoom.videoShare.currentVideo.eventTime=Date.now(),bmRoom.videoShare.currentVideo.elapseTime=Math.round(youtubePlayer.getDuration()*o),bmRoom.videoShare.currentVideo.playingState="1",bmRoom.socket.emit("videoShare:play",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubePlayEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink)}}),$(document).on("mouseup","#video-share-container .volume-bar",function(e){if(bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)){var t=$(".volume-bar"),o=(e.pageX-t.offset().left)/t.outerWidth();o=Math.round(100*o),5>o?o=0:o>95&&(o=100),bmRoom.videoShare.currentVideo.eventTime=Date.now(),bmRoom.videoShare.currentVideo.elapseTime=Math.round(youtubePlayer.getDuration()*o),bmRoom.videoShare.currentVideo.volume=o,bmRoom.socket.emit("videoShare:volumeChange",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubeVolumeChangeEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink)}});var done=!1,progressBarHandle=[];bmRoom.videoShare.start=function(){bmRoom.videoShare.resizeVideo(),bmRoom.socket.emit("videoShare:check_existing"),bmRoom.socket.on("videoShare:load",function(e){if(bmRoom.whiteboard.endDisplay(),bmRoom.videoShare.currentVideo=e,e.youtubeLink){var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/g;vc=e.youtubeLink.replace(t,function(e,t){jQuery.isEmptyObject(youtubePlayer)?youtubePlayer=new YT.Player("video-share",{playerVars:{autoplay:0,controls:0,rel:0,showinfo:0,enablejsapi:1},videoId:t,events:{onReady:onPlayerReady}}):youtubePlayer.cueVideoById(t)}),$("#video-share-container").show(),$("#welcome-board").hide(),bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?($("#video-share-container .video-share-control").prop("disabled",!1).attr("title",""),$("#video-share-container .remove-youtube-video-link").show(),$("#video-share-container .clroom-video-controlbox").show()):($("#video-share-container .video-share-control").prop("disabled",!0).attr("title","Only admins and presenters can control this."),$("#video-share-container .remove-youtube-video-link").hide(),$("#video-share-container .clroom-video-controlbox").hide()),bmRoom.layout.change(),bmRoom.stream.handleVideoAudioHtml(),setTimeout(function(){bmRoom.videoShare.resizeVideo()},5e3)}}),bmRoom.socket.on("videoShare:play",function(e){bmRoom.videoShare.currentVideo=e,youtubePlayer.playVideo();playAndSeek(e.elapseTime),$("#video-share-container .play-pause-video-button").addClass("onactive")}),bmRoom.socket.on("videoShare:pause",function(e){bmRoom.videoShare.currentVideo=e,youtubePlayer.pauseVideo(),$("#video-share-container .play-pause-video-button").removeClass("onactive")}),bmRoom.socket.on("videoShare:mute",function(e){bmRoom.videoShare.currentVideo=e,youtubePlayer.mute(),$("#video-share-container .mute-unmute-video-button").addClass("muteon")}),bmRoom.socket.on("videoShare:unmute",function(e){bmRoom.videoShare.currentVideo=e,youtubePlayer.unMute(),$("#video-share-container .mute-unmute-video-button").removeClass("muteon")}),bmRoom.socket.on("videoShare:volumeChange",function(e){bmRoom.videoShare.currentVideo=e,setVolumeBar(e)}),bmRoom.socket.on("videoShare:end",function(e){bmRoom.videoShare.currentVideo=e,bmRoom.videoShare.end2()})},bmRoom.videoShare.end=function(){bmRoom.videoShare.currentVideo=bmRoom.videoShare.currentVideo||{},bmRoom.videoShare.currentVideo&&Object.keys(bmRoom.videoShare.currentVideo).length>0&&(bmRoom.socket.emit("videoShare:end",bmRoom.videoShare.currentVideo),bmRoom.saveRecordingAction("YoutubeEndEvent","YOUTUBE","","",bmRoom.videoShare.currentVideo.youtubeLink))},bmRoom.videoShare.end2=function(){"undefined"!=typeof youtubePlayer&&(youtubePlayer.stopVideo&&youtubePlayer.stopVideo(),pauseProgressBar()),bmRoom.videoShare.currentVideo={},$("#video-share-container").hide(),$("#welcome-board").show(),bmRoom.stream.handleVideoAudioHtml()};var youtubePlayer,tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),bmRoom.mp4Share={},bmRoom.mp4Share.currentVideo={},bmRoom.mp4Share.video=null,bmRoom.mp4Share.isAutoPlayVideo=!1,bmRoom.mp4Share.hashedId=null,bmRoom.mp4Share.resizeVideo=function(){$("#mp4-share > video").css("width",$("#mp4-share-inner-container").width()),$("#mp4-share > video").css("height",$("#mp4-share-inner-container").height()),bmRoom.layout.resizeBar()},$(window).resize(function(){bmRoom.mp4Share.resizeVideo()}),bmRoom.mp4Share.start=function(){bmRoom.mp4Share.resizeVideo(),bmRoom.socket.emit("mp4Share:check_existing"),bmRoom.socket.on("mp4Share:load",function(e){bmRoom.whiteboard.endDisplay(),bmRoom.mp4Share.currentVideo=e,$("#mp4-share").remove();var t=$('<div id="mp4-share"></div>'),o=$("<video>"),i=$("<source />");i.attr("src",e.link).attr("type","video/mp4"),i.appendTo(o),o.appendTo(t),bmRoom.mp4Share.video=o.get(0),$("#mp4-share-container .video-share-control").prop("disabled",!0),$("#mp4-share-inner-container").append(t),bmRoom.mp4Share.video.load(),bmRoom.mp4Share.video.addEventListener("loadeddata",function(){$("#mp4-share-container .clroom-video-overlay-play-icon").show(),$("#mp4-share-container .clroom-video-overlay-play-status").hide().html(""),bmRoom.mp4Share.video.ontimeupdate=function(){$("#mp4-share-container .clroom-video-overlay-play-icon").hide(),updateMP4ProgressBarDisplay()},bmRoom.mp4Share.video.onended=function(){3==bmRoom.mp4Share.currentVideo.playingState,$("#mp4-share-container .clroom-video-overlay-play-icon").hide(),$("#mp4-share-container .clroom-video-overlay-play-status").show().html("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The video has ended"),$("#mp4-share-container .play-pause-video-button").removeClass("onactive")},bmRoom.mp4Share.video.onplay=function(){$("#mp4-share-container .clroom-video-overlay-play-icon").hide(),$("#mp4-share-container .clroom-video-overlay-play-status").hide()},bmRoom.mp4Share.video.onpause=function(){$("#mp4-share-container .clroom-video-overlay-play-icon").hide(),$("#mp4-share-container .clroom-video-overlay-play-status").show().html("The host has paused the video")},bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?($("#mp4-share-container .video-share-control").prop("disabled",!1).attr("title",""),$("#mp4-share-container .end-mp4-video-button").show(),$("#mp4-share-container .clroom-video-controlbox").show()):($("#mp4-share-container .video-share-control").prop("disabled",!0).attr("title","Only admins and presenters can control this."),$("#mp4-share-container .end-mp4-video-button").hide(),$("#mp4-share-container .clroom-video-controlbox").hide()),onMP4PlayerReady(),updateMP4ProgressBarDisplay(),setVolumeBar(e),bmRoom.mp4Share.resizeVideo()}),$("#mp4-share-container").show(),$("#welcome-board").hide(),bmRoom.layout.change(),bmRoom.stream.handleVideoAudioHtml()}),bmRoom.socket.on("mp4Share:play",function(e){bmRoom.mp4Share.currentVideo=e,mp4PlayAndSeek(e.elapseTime),$("#mp4-share-container .play-pause-video-button").addClass("onactive")}),bmRoom.socket.on("mp4Share:pause",function(e){bmRoom.mp4Share.currentVideo=e,bmRoom.mp4Share.video.pause(),$("#mp4-share-container .play-pause-video-button").removeClass("onactive")}),bmRoom.socket.on("mp4Share:mute",function(e){bmRoom.mp4Share.currentVideo=e,bmRoom.mp4Share.video.volume=0,$("#mp4-share-container .mute-unmute-video-button").addClass("muteon")}),bmRoom.socket.on("mp4Share:unmute",function(e){bmRoom.mp4Share.currentVideo=e,bmRoom.mp4Share.video.volume=1,$("#mp4-share-container .mute-unmute-video-button").removeClass("muteon")}),bmRoom.socket.on("mp4Share:volumeChange",function(e){bmRoom.mp4Share.currentVideo=e,bmRoom.mp4Share.video.volume=parseInt(e.volume)/100,setVolumeBar(e)}),bmRoom.socket.on("mp4Share:end",function(){bmRoom.mp4Share.currentVideo={},bmRoom.mp4Share.video=null,$("#mp4-share-container .video-share-control").prop("disabled",!0),$("#mp4-share").remove(),$("#mp4-share-container").hide(),$("#welcome-board").show(),bmRoom.stream.handleVideoAudioHtml()}),bmRoom.socket.on("mp4Share:autoPlay",function(e){"start"==e.playStatus&&("bigroom-mp4-video"==e.content_object_type&&$("#share-object-btn-"+e.obfuscated_id).length>0&&playMp4Video($("#share-object-btn-"+e.obfuscated_id)[0],!0,e.start_at),("whiteboard"==e.content_object_type||"blank-whiteboard"==e.content_object_type)&&open_uploaded_file(e.hashed_id),"bigroom_video"==e.content_object_type&&$("#share-object-btn-"+e.obfuscated_id).length>0&&play_bigroom_video($("#share-object-btn-"+e.obfuscated_id)[0],!0,e.start_at))}),bmRoom.socket.on("mp4Share:hideButton",function(){$("#alert-auto-play").hide()})},bmRoom.mp4Share.initAutoPlay=function(e){if("whiteboard"==e.content_object_type||"blank-whiteboard"==e.content_object_type)bmRoom.socket.emit("mp4Share:autoPlay",e);else{var t=setInterval(function(){var o=Date.now(),i=!1;bmRoom.admin.opens[bmRoom.socket.io.engine.id]&&(i="Member"!=bmRoom.admin.opens[bmRoom.socket.io.engine.id].role);var n=$(".screen-focus").is(":visible")||bmRoom.whiteboard.status||$("#video-share-container").is(":visible")||bmRoom.mp4Share.video;Math.abs(e.start_at-o)<2e3&&i&&($("#alert-auto-play").is(":hidden")&&n?$("#alert-auto-play").show():bmRoom.socket.emit("mp4Share:autoPlay",e),clearInterval(t))},500);$("#start-auto-play-video").click(function(){$("#alert-auto-play").hide();var o="Member"!=bmRoom.admin.opens[bmRoom.socket.io.engine.id].role;o&&(clearInterval(t),bmRoom.socket.emit("mp4Share:autoPlay",e))}),$("#cancel-auto-play-video").click(function(){$("#alert-auto-play").hide();var o="Member"!=bmRoom.admin.opens[bmRoom.socket.io.engine.id].role;o&&(clearInterval(t),e.playStatus="cancel",bmRoom.socket.emit("mp4Share:autoPlay",e))})}},$(document).on("click","#mp4-share-container .play-pause-video-button",function(e){return bmRoom.mp4Share.currentVideo.eventTime=Date.now(),bmRoom.mp4Share.currentVideo.elapseTime=bmRoom.mp4Share.video?bmRoom.mp4Share.video.currentTime:0,3==bmRoom.mp4Share.currentVideo.playingState&&(bmRoom.mp4Share.currentVideo.elapseTime=0),1==bmRoom.mp4Share.currentVideo.playingState?(bmRoom.mp4Share.currentVideo.playingState=2,bmRoom.mp4Share.video.pause(),bmRoom.socket.emit("mp4Share:pause",bmRoom.mp4Share.currentVideo),bmRoom.socket.emit("mp4Share:action","paused")):(bmRoom.mp4Share.currentVideo.playingState=1,bmRoom.socket.emit("mp4Share:play",bmRoom.mp4Share.currentVideo),bmRoom.socket.emit("mp4Share:action","played")),e.preventDefault(),!1}),$(document).on("click","#mp4-share-container .mute-unmute-video-button",function(e){return bmRoom.mp4Share.currentVideo.eventTime=Date.now(),bmRoom.mp4Share.currentVideo.elapseTime=bmRoom.mp4Share.video?bmRoom.mp4Share.video.currentTime:0,$(this).hasClass("muteon")?(bmRoom.mp4Share.currentVideo.isMuted=0,bmRoom.socket.emit("mp4Share:unmute",bmRoom.mp4Share.currentVideo)):(bmRoom.mp4Share.currentVideo.isMuted=1,bmRoom.socket.emit("mp4Share:mute",bmRoom.mp4Share.currentVideo)),e.preventDefault(),!1}),$(document).on("mouseup","#mp4-share-container .progress-bar",function(e){if(bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)&&bmRoom.mp4Share.video){var t=$("#mp4-share-container .progress-bar"),o=(e.pageX-t.offset().left)/t.outerWidth();bmRoom.mp4Share.currentVideo.eventTime=Date.now(),bmRoom.mp4Share.currentVideo.elapseTime=Math.round(bmRoom.mp4Share.video.duration*o),0==bmRoom.mp4Share.currentVideo.playingState&&(bmRoom.mp4Share.currentVideo.playingState=1),bmRoom.socket.emit("mp4Share:play",bmRoom.mp4Share.currentVideo)}}),$(document).on("mouseup","#mp4-share-container .volume-bar",function(e){if(bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)){var t=$("#mp4-share-container .volume-bar"),o=(e.pageX-t.offset().left)/t.outerWidth();o=Math.round(100*o),5>o?o=0:o>95&&(o=100),bmRoom.mp4Share.currentVideo.eventTime=Date.now(),bmRoom.mp4Share.currentVideo.elapseTime=bmRoom.mp4Share.video.currentTime,bmRoom.mp4Share.currentVideo.volume=o,bmRoom.socket.emit("mp4Share:volumeChange",bmRoom.mp4Share.currentVideo)}}),$(document).on("click","#end-mp4-video-button",function(e){return bmRoom.mp4Share.currentVideo.eventTime=Date.now(),bmRoom.mp4Share.currentVideo.elapseTime=bmRoom.mp4Share.video.currentTime,bmRoom.mp4Share.currentVideo.playingState=3,bmRoom.socket.emit("mp4Share:end",bmRoom.mp4Share.currentVideo),bmRoom.socket.emit("mp4Share:action","removed"),bmRoom.mp4Share.currentVideo={},e.preventDefault(),!1}),$(document).on("click","#mp4-share-container .clroom-video-overlay-play-icon",function(){$("#mp4-share-container .play-pause-video-button").click()}),bmRoom.mp4Share.end=function(){bmRoom.mp4Share.video&&bmRoom.socket.emit("mp4Share:end",bmRoom.mp4Share.currentVideo)},/*!
 * FitVids 1.1
 *
 * Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
 * Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/

 *
 */
function(e){"use strict";e.fn.fitVids=function(t){var o={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var i=document.head||document.getElementsByTagName("head")[0],n=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",s=document.createElement("div");s.innerHTML='<p>x</p><style id="fit-vids-style">'+n+"</style>",i.appendChild(s.childNodes[1])}return t&&e.extend(o,t),this.each(function(){var t=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];o.customSelector&&t.push(o.customSelector);var i=".fitvidsignore";o.ignore&&(i=i+", "+o.ignore);var n=e(this).find(t.join(","));n=n.not("object object"),n=n.not(i),n.each(function(){var t=e(this);if(!(t.parents(i).length>0||"embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){t.css("height")||t.css("width")||!isNaN(t.attr("height"))&&!isNaN(t.attr("width"))||(t.attr("height",9),t.attr("width",16));var o="object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),n=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),s=o/n;if(!t.attr("id")){var a="fitvid"+Math.floor(999999*Math.random());t.attr("id",a)}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*s+"%"),t.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto), /*
Copyright 2012 Igor Vaynberg

Version: 3.4.5 Timestamp: Mon Nov  4 08:22:42 PST 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28
* http://jqueryui.com
* Includes: widget.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var t=0,o=Array.prototype.slice;e.cleanData=function(t){return function(o){var i,n,s;for(s=0;null!=(n=o[s]);s++)try{i=e._data(n,"events"),i&&i.remove&&e(n).triggerHandler("remove")}catch(a){}t(o)}}(e.cleanData),e.widget=function(t,o,i){var n,s,a,r,l={},c=t.split(".")[0];return t=t.split(".")[1],n=c+"-"+t,i||(i=o,o=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[c]=e[c]||{},s=e[c][t],a=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,s,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),r=new o,r.options=e.widget.extend({},r.options),e.each(i,function(t,i){return e.isFunction(i)?void(l[t]=function(){var e=function(){return o.prototype[t].apply(this,arguments)},n=function(e){return o.prototype[t].apply(this,e)};return function(){var t,o=this._super,s=this._superApply;return this._super=e,this._superApply=n,t=i.apply(this,arguments),this._super=o,this._superApply=s,t}}()):void(l[t]=i)}),a.prototype=e.widget.extend(r,{widgetEventPrefix:s?r.widgetEventPrefix||t:t},l,{constructor:a,namespace:c,widgetName:t,widgetFullName:n}),s?(e.each(s._childConstructors,function(t,o){var i=o.prototype;e.widget(i.namespace+"."+i.widgetName,a,o._proto)}),delete s._childConstructors):o._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var i,n,s=o.call(arguments,1),a=0,r=s.length;r>a;a++)for(i in s[a])n=s[a][i],s[a].hasOwnProperty(i)&&void 0!==n&&(t[i]=e.isPlainObject(n)?e.isPlainObject(t[i])?e.widget.extend({},t[i],n):e.widget.extend({},n):n);return t},e.widget.bridge=function(t,i){var n=i.prototype.widgetFullName||t;e.fn[t]=function(s){var a="string"==typeof s,r=o.call(arguments,1),l=this;return a?this.each(function(){var o,i=e.data(this,n);return"instance"===s?(l=i,!1):i?e.isFunction(i[s])&&"_"!==s.charAt(0)?(o=i[s].apply(i,r),o!==i&&void 0!==o?(l=o&&o.jquery?l.pushStack(o.get()):o,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):(r.length&&(s=e.widget.extend.apply(null,[s].concat(r))),this.each(function(){var t=e.data(this,n);t?(t.option(s||{}),t._init&&t._init()):e.data(this,n,new i(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(o,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),o),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,o){var i,n,s,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},i=t.split("."),t=i.shift(),i.length){for(n=a[t]=e.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)n[i[s]]=n[i[s]]||{},n=n[i[s]];if(t=i.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=o}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=o}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,o,i){var n,s=this;"boolean"!=typeof t&&(i=o,o=t,t=!1),i?(o=n=e(o),this.bindings=this.bindings.add(o)):(i=o,o=this.element,n=this.widget()),e.each(i,function(i,a){function r(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?n.delegate(d,c,r):o.bind(c,r)})},_off:function(t,o){o=(o||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(o).undelegate(o),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function o(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(o,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,o,i){var n,s,a=this.options[t];if(i=i||{},o=e.Event(o),o.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),o.target=this.element[0],s=o.originalEvent)for(n in s)n in o||(o[n]=s[n]);return this.element.trigger(o,i),!(e.isFunction(a)&&a.apply(this.element[0],[o].concat(i))===!1||o.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,o){e.Widget.prototype["_"+t]=function(i,n,s){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?o:n.effect||o:t;n=n||{},"number"==typeof n&&(n={duration:n}),a=!e.isEmptyObject(n),n.complete=s,n.delay&&i.delay(n.delay),a&&e.effects&&e.effects.effect[r]?i[t](n):r!==t&&i[r]?i[r](n.duration,n.easing,s):i.queue(function(o){e(this)[t](),s&&s.call(i[0]),o()})}});e.widget}),/*
 * jQuery Iframe Transport Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(o){if(o.async){var i,n,s,a=o.initialIframeSrc||"javascript:false;";return{send:function(r,l){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",o.formAcceptCharset),s=/\?/.test(o.url)?"&":"?","DELETE"===o.type?(o.url=o.url+s+"_method=DELETE",o.type="POST"):"PUT"===o.type?(o.url=o.url+s+"_method=PUT",o.type="POST"):"PATCH"===o.type&&(o.url=o.url+s+"_method=PATCH",o.type="POST"),t+=1,n=e('<iframe src="'+a+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,s=e.isArray(o.paramName)?o.paramName:[o.paramName];n.unbind("load").bind("load",function(){var t;try{if(t=n.contents(),!t.length||!t[0].firstChild)throw new Error}catch(o){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+a+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",n.prop("name")).prop("action",o.url).prop("method",o.type),o.formData&&e.each(o.formData,function(t,o){e('<input type="hidden"/>').prop("name",o.name).val(o.value).appendTo(i)}),o.fileInput&&o.fileInput.length&&"POST"===o.type&&(t=o.fileInput.clone(),o.fileInput.after(function(e){return t[e]}),o.paramName&&o.fileInput.each(function(t){e(this).prop("name",s[t]||o.paramName)}),i.append(o.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),o.fileInput.removeAttr("form")),i.submit(),t&&t.length&&o.fileInput.each(function(o,i){var n=e(t[o]);e(i).prop("name",n.prop("name")).attr("form",n.attr("form")),n.replaceWith(i)})}),i.append(n).appendTo(document.body)},abort:function(){n&&n.unbind("load").prop("src",a),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var o=t&&t[0];return o&&e.isXMLDoc(o)?o:e.parseXML(o.XMLDocument&&o.XMLDocument.xml||e(o.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),/*
 * jQuery File Upload Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(e){"use strict";function t(t){var o="dragover"===t;return function(i){i.dataTransfer=i.originalEvent&&i.originalEvent.dataTransfer;var n=i.dataTransfer;n&&-1!==e.inArray("Files",n.types)&&this._trigger(t,e.Event(t,{delegatedEvent:i}))!==!1&&(i.preventDefault(),o&&(n.dropEffect="copy"))}}e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,o){return t=this.messages[t]||t.toString(),o&&e.each(o,function(e,o){t=t.replace("{"+e+"}",o)}),t},formData:function(e){return e.serializeArray()},add:function(t,o){return t.isDefaultPrevented()?!1:void((o.autoUpload||o.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&o.process().done(function(){o.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,o){var i=e-this.timestamp;return(!this.bitrate||!o||i>o)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var o;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(o=[],e.each(t.formData,function(e,t){o.push({name:e,value:t})}),o):[]},_getTotal:function(t){var o=0;return e.each(t,function(e,t){o+=t.size||1}),o},_initProgressObject:function(t){var o={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,o):t._progress=o},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,o){if(t.lengthComputable){var i,n=Date.now?Date.now():(new Date).getTime();if(o._time&&o.progressInterval&&n-o._time<o.progressInterval&&t.loaded!==t.total)return;o._time=n,i=Math.floor(t.loaded/t.total*(o.chunkSize||o._progress.total))+(o.uploadedBytes||0),this._progress.loaded+=i-o._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,o.bitrateInterval),o._progress.loaded=o.loaded=i,o._progress.bitrate=o.bitrate=o._bitrateTimer.getBitrate(n,i,o.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),o),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var o=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,o._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var o,i=this,n=t.files[0],s=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",n)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(o=this._getFormData(t),t.blob?o.push({name:a,value:t.blob}):e.each(t.files,function(i,n){o.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||a,value:n})})):(i._isInstanceOf("FormData",t.formData)?o=t.formData:(o=new FormData,e.each(this._getFormData(t),function(e,t){o.append(t.name,t.value)})),t.blob?o.append(a,t.blob,n.name):e.each(t.files,function(n,s){(i._isInstanceOf("File",s)||i._isInstanceOf("Blob",s))&&o.append("array"===e.type(t.paramName)&&t.paramName[n]||a,s,s.uploadName||s.name)})),t.data=o):(t.contentType=n.type||"application/octet-stream",t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){var o=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&o&&o!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var o=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],o.each(function(){for(var t=e(this),o=t.prop("name")||"files[]",n=(t.prop("files")||[1]).length;n;)i.push(o),n-=1}),i.length||(i=[o.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var o=e.extend({},this.options,t);return this._initFormSettings(o),this._initDataSettings(o),o},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,o,i){var n=e.Deferred(),s=n.promise();return o=o||this.options.context||s,t===!0?n.resolveWith(o,i):t===!1&&n.rejectWith(o,i),s.abort=n.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,o){var i=this,n=function(t){return e.Deferred().resolveWith(i,t).promise()};o.process=function(t,s){return(t||s)&&(o._processQueue=this._processQueue=(this._processQueue||n([this])).pipe(function(){return o.errorThrown?e.Deferred().rejectWith(i,[o]).promise():n(arguments)}).pipe(t,s)),this._processQueue||n([this])},o.submit=function(){return"pending"!==this.state()&&(o.jqXHR=this.jqXHR=i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},o.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},o.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},o.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},o.progress=function(){return this._progress},o.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),o=t&&t.split("-"),i=o&&o.length>1&&parseInt(o[1],10);return i&&i+1},_chunkedUpload:function(t,o){t.uploadedBytes=t.uploadedBytes||0;var i,n,s=this,a=t.files[0],r=a.size,l=t.uploadedBytes,c=t.maxChunkSize||r,d=this._blobSlice,u=e.Deferred(),h=u.promise();return this._isXHRUpload(t)&&d&&(l||r>c)&&!t.data?o?!0:l>=r?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(n=function(){var o=e.extend({},t),h=o._progress.loaded;o.blob=d.call(a,l,l+c,a.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+l+"-"+(l+o.chunkSize-1)+"/"+r,s._initXHRData(o),s._initProgressListener(o),i=(s._trigger("chunksend",null,o)!==!1&&e.ajax(o)||s._getXHRPromise(!1,o.context)).done(function(i,a,c){l=s._getUploadedBytes(c)||l+o.chunkSize,h+o.chunkSize-o._progress.loaded&&s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-o.uploadedBytes,total:l-o.uploadedBytes}),o),t.uploadedBytes=o.uploadedBytes=l,o.result=i,o.textStatus=a,o.jqXHR=c,s._trigger("chunkdone",null,o),s._trigger("chunkalways",null,o),r>l?n():u.resolveWith(o.context,[i,a,c])}).fail(function(e,t,i){o.jqXHR=e,o.textStatus=t,o.errorThrown=i,s._trigger("chunkfail",null,o),s._trigger("chunkalways",null,o),u.rejectWith(o.context,[e,t,i])})},this._enhancePromise(h),h.abort=function(){return i.abort()},n(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,o,i,n){var s=n._progress.total,a=n._response;n._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),n),a.result=n.result=t,a.textStatus=n.textStatus=o,a.jqXHR=n.jqXHR=i,this._trigger("done",null,n)},_onFail:function(e,t,o,i){var n=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),n.jqXHR=i.jqXHR=e,n.textStatus=i.textStatus=t,n.errorThrown=i.errorThrown=o,this._trigger("fail",null,i)},_onAlways:function(e,t,o,i){this._trigger("always",null,i)},_onSend:function(t,o){o.submit||this._addConvenienceMethods(t,o);var i,n,s,a,r=this,l=r._getAJAXSettings(o),c=function(){return r._sending+=1,l._bitrateTimer=new r._BitrateTimer,i=i||((n||r._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&r._getXHRPromise(!1,l.context,n)||r._chunkedUpload(l)||e.ajax(l)).done(function(e,t,o){r._onDone(e,t,o,l)}).fail(function(e,t,o){r._onFail(e,t,o,l)}).always(function(e,t,o){if(r._onAlways(e,t,o,l),r._sending-=1,r._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>r._sending)for(var i=r._slots.shift();i;){if("pending"===r._getDeferredState(i)){i.resolve();break}i=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),a=s.pipe(c)):(this._sequence=this._sequence.pipe(c,c),a=this._sequence),a.abort=function(){return n=[void 0,"abort","abort"],i?i.abort():(s&&s.rejectWith(l.context,n),c())},this._enhancePromise(a)):c()},_onAdd:function(t,o){var i,n,s,a,r=this,l=!0,c=e.extend({},this.options,o),d=o.files,u=d.length,h=c.limitMultiFileUploads,m=c.limitMultiFileUploadSize,p=c.limitMultiFileUploadSizeOverhead,f=0,g=this._getParamName(c),b=0;if(!u)return!1;if(m&&void 0===d[0].size&&(m=void 0),(c.singleFileUploads||h||m)&&this._isXHRUpload(c))if(c.singleFileUploads||m||!h)if(!c.singleFileUploads&&m)for(s=[],i=[],a=0;u>a;a+=1)f+=d[a].size+p,(a+1===u||f+d[a+1].size+p>m||h&&a+1-b>=h)&&(s.push(d.slice(b,a+1)),n=g.slice(b,a+1),n.length||(n=g),i.push(n),b=a+1,f=0);else i=g;else for(s=[],i=[],a=0;u>a;a+=h)s.push(d.slice(a,a+h)),n=g.slice(a,a+h),n.length||(n=g),i.push(n);else s=[d],i=[g];return o.originalFiles=d,e.each(s||d,function(n,a){var c=e.extend({},o);return c.files=s?a:[a],c.paramName=i[n],r._initResponseObject(c),r._initProgressObject(c),r._addConvenienceMethods(t,c),l=r._trigger("add",e.Event("add",{delegatedEvent:t}),c)}),l},_replaceFileInput:function(t){var o=t.fileInput,i=o.clone(!0),n=o.is(document.activeElement);t.fileInputClone=i,e("<form></form>").append(i)[0].reset(),o.after(i).detach(),n&&i.focus(),e.cleanData(o.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===o[0]?i[0]:t}),o[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,o){var i,n=this,s=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),s.resolve([e])},r=function(e){n._handleFileTreeEntries(e,o+t.name+"/").done(function(e){s.resolve(e)}).fail(a)},l=function(){i.readEntries(function(e){e.length?(c=c.concat(e),l()):r(c)},a)},c=[];return o=o||"",t.isFile?t._file?(t._file.relativePath=o,s.resolve(t._file)):t.file(function(e){e.relativePath=o,s.resolve(e)},a):t.isDirectory?(i=t.createReader(),l()):s.resolve([]),s.promise()},_handleFileTreeEntries:function(t,o){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,o)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var o=t.items;return o&&o.length&&(o[0].webkitGetAsEntry||o[0].getAsEntry)?this._handleFileTreeEntries(e.map(o,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var o,i,n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(o=e.makeArray(t.prop("files")),o.length)void 0===o[0].name&&o[0].fileName&&e.each(o,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();o=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(o).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var o=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(n){i.files=n,o.options.replaceFileInput&&o._replaceFileInput(i),o._trigger("change",e.Event("change",{delegatedEvent:t}),i)!==!1&&o._onAdd(t,i)})},_onPaste:function(t){var o=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};o&&o.length&&(e.each(o,function(e,t){var o=t.getAsFile&&t.getAsFile();o&&i.files.push(o)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)!==!1&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var o=this,i=t.dataTransfer,n={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){n.files=i,o._trigger("drop",e.Event("drop",{delegatedEvent:t}),n)!==!1&&o._onAdd(t,n)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,o){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,o),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),o=t.pop();return t.shift(),new RegExp(t.join("/"),o)},_isRegExpOption:function(t,o){return"url"!==t&&"string"===e.type(o)&&/^\/.*\/[igm]{0,3}$/.test(o)},_initDataAttributes:function(){var t=this,o=this.options,i=this.element.data();e.each(this.element[0].attributes,function(e,n){var s,a=n.name.toLowerCase();/^data-/.test(a)&&(a=a.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),s=i[a],t._isRegExpOption(a,s)&&(s=t._getRegExp(s)),o[a]=s)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var o=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,o._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var o,i,n=this,s=e.Deferred(),a=s.promise();return a.abort=function(){return i=!0,o?o.abort():(s.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return void s.reject();t.files=e,o=n._onSend(null,t),o.then(function(e,t,o){s.resolve(e,t,o)},function(e,t,o){s.reject(e,t,o)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),window.DrawingBoard={},DrawingBoard.Board=function(e,t,o){if(this.opts=$.extend({},DrawingBoard.Board.defaultOpts,t),this.ev=new DrawingBoard.Utils.MicroEvent,this.id=e,this.$el=$(document.getElementById(e)),!this.$el.length)return!1;var i='<div class="drawing-board-canvas-wrapper"></canvas><canvas id="'+this.opts.canvasId+'" class="drawing-board-canvas"></canvas><div class="drawing-board-cursor drawing-board-utils-hidden"></div></div>';return this.opts.controlsPosition.indexOf("bottom")>-1?i+='<div class="drawing-board-controls drawing-board-controls-hidden"></div>':i='<div class="drawing-board-controls drawing-board-controls-hidden"></div>'+i,this.$el.addClass("drawing-board").append(i),this.dom={$canvasWrapper:this.$el.find(".drawing-board-canvas-wrapper"),$canvas:this.$el.find(".drawing-board-canvas"),$cursor:this.$el.find(".drawing-board-cursor"),$controls:this.$el.find(".drawing-board-controls")},this.dom.$controls.hide(),this.dom.$controls.append('<div class="hide-btn">O/F</div>'),$.each(["left","right","center"],$.proxy(function(e,t){return this.opts.controlsPosition.indexOf(t)>-1?(this.dom.$controls.attr("data-align",t),!1):void 0},this)),this.canvas=this.dom.$canvas.get(0),this.ctx=this.canvas&&this.canvas.getContext&&this.canvas.getContext("2d")?this.canvas.getContext("2d"):null,this.color=this.opts.color,this.ctx?(this.storage=this._getStorage(),this.initHistory(),this.reset({webStorage:!1,history:!1,background:!1}),this.initControls(),this.resize(),this.reset({webStorage:!1,history:!0,background:!0}),this.restoreWebStorage(),this.initHistory(),this.initDropEvents(),this.initDrawEvents(),this.opts.base64&&this.opts.base64Size&&this.setImg(this.opts.base64,this.opts.base64Size),void(o&&o())):(this.opts.errorMessage&&this.$el.html(this.opts.errorMessage),!1)},DrawingBoard.Board.defaultOpts={controls:["Color","DrawingMode","Size","Navigation"],controlsPosition:"top left",color:"#000000",size:1,background:null,eraserColor:"background",webStorage:"session",droppable:!1,enlargeYourContainer:!1,errorMessage:'<p>It seems you use an obsolete browser. <a href="http://browsehappy.com/" target="_blank">Update it</a> to start drawing.</p>',customWidth:null,customHeight:null,canvasId:null,base64:null,base64Size:null},DrawingBoard.Board.prototype={reset:function(e){e=$.extend({color:this.opts.color,size:this.opts.size,webStorage:!0,history:!0,background:!1},e),this.setMode("pencil"),e.background&&this.resetBackground(this.opts.background,e.history),e.color&&this.setColor(e.color),e.size&&(this.ctx.lineWidth=e.size),this.ctx.lineCap="round",this.ctx.lineJoin="round",e.webStorage&&this.saveWebStorage(),e.history&&this.initHistory(),this.blankCanvas=this.getImg(),this.ev.trigger("board:reset",e)},resetBackground:function(e,t){e=e||this.opts.background,t="undefined"!=typeof t?t:!0;var o=DrawingBoard.Utils.isColor(e),i=this.getMode();this.setMode("pencil"),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.width),o?(this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)):e&&this.setImg(e),this.setMode(i)},resize:function(){this.dom.$controls.toggleClass("drawing-board-controls-hidden",!this.controls||!this.controls.length||!bmRoom.whiteboard.isAdmin);var e,t,o=[this.$el.width(),DrawingBoard.Utils.boxBorderWidth(this.$el),DrawingBoard.Utils.boxBorderWidth(this.dom.$canvasWrapper,!0,!0)],i=[this.$el.height(),DrawingBoard.Utils.boxBorderHeight(this.$el),this.dom.$controls.height(),DrawingBoard.Utils.boxBorderHeight(this.dom.$controls,!1,!0),DrawingBoard.Utils.boxBorderHeight(this.dom.$canvasWrapper,!0,!0)],n=function(e,t){t=t||1;for(var o=e[0],i=1;i<e.length;i++)o+=e[i]*t;return o},s=function(e){return n(e,-1)};this.opts.enlargeYourContainer?(e=this.$el.width(),t=this.$el.height(),this.$el.width(n(o)),this.$el.height(n(i))):(e=s(o),t=s(i));var a=this.opts.customHeight||t,r=this.opts.customWidth||e;this.dom.$canvasWrapper.css("width",r+"px"),this.dom.$canvasWrapper.css("height",a+"px"),this.dom.$canvas.css("width",r+"px"),this.dom.$canvas.css("height",a+"px"),this.dom.$canvas.css("opacity",.5),this.canvas.width=r,this.canvas.height=a},initControls:function(){if(this.controls=[],!this.opts.controls.length||!DrawingBoard.Control)return!1;for(var e=0;e<this.opts.controls.length;e++){var t=null;if("string"==typeof this.opts.controls[e])t=new window.DrawingBoard.Control[this.opts.controls[e]](this);else if("object"==typeof this.opts.controls[e]){for(var o in this.opts.controls[e])break;t=new window.DrawingBoard.Control[o](this,this.opts.controls[e][o])}t&&this.addControl(t)}},addControl:function(e,t,o){if("string"!=typeof e&&("object"!=typeof e||!e instanceof DrawingBoard.Control))return!1;var i="object"==typeof t?t:{};o=o?1*o:"number"==typeof t?t:null,"string"==typeof e&&(e=new window.DrawingBoard.Control[e](this,i)),o?this.dom.$controls.children().eq(o).before(e.$el):this.dom.$controls.append(e.$el),this.controls||(this.controls=[]),this.controls.push(e),bmRoom.whiteboard.isAdmin||this.dom.$controls.removeClass("drawing-board-controls-hidden")},initHistory:function(){this.history={values:[],position:0,size:[],max:0}},saveHistory:function(e){bmRoom.whiteboard.drawPosition++,bmRoom.whiteboard.drawMaxPosition=bmRoom.whiteboard.drawPosition;var t={whId:bmRoom.whiteboard.hashedId,whIndex:bmRoom.whiteboard.slider.getCurrentSlide(),value:e?e:this.getImg(),position:bmRoom.whiteboard.drawPosition,size:{width:bmRoom.whiteboard.slider.getCurrentSlideElement().find("img:visible").width(),height:bmRoom.whiteboard.slider.getCurrentSlideElement().find("img:visible").height()},max:bmRoom.whiteboard.drawMaxPosition,pointSize:this.controls[2].val,pointColor:this.color,clear:e?!0:!1};bmRoom.whiteboard.isAdmin&&bmRoom.whiteboard.canDraw&&(bmRoom.socket.emit("whiteboard:draw_history",t),bmRoom.saveRecordingAction("DrawWhiteBoardEvent","WHITEBOARDDRAW","","",""))},_goThroughHistory:function(e){if(!(e&&this.history.position==this.history.values.length||!e&&1==this.history.position)){var t=e?this.history.position+1:this.history.position-1;this.history.values.length&&void 0!==this.history.values[t-1]&&(this.history.position=t,this.setImg(this.history.values[t-1],this.history.size[t-1])),this.saveWebStorage()}},goBackInHistory:function(){var e={whId:bmRoom.whiteboard.hashedId,whIndex:bmRoom.whiteboard.slider.getCurrentSlide(),goForth:!1,doDraw:!0};bmRoom.socket.emit("whiteboard:go_history",e)},goForthInHistory:function(){var e={whId:bmRoom.whiteboard.hashedId,whIndex:bmRoom.whiteboard.slider.getCurrentSlide(),goForth:!0,doDraw:!0};bmRoom.socket.emit("whiteboard:go_history",e)},setImg:function(e,t){var o=this.ctx,i=new Image,n=o.globalCompositeOperation,s=this;i.onload=function(){o.globalCompositeOperation="source-over",o.clearRect(0,0,o.canvas.width,o.canvas.width);var e=i.width,a=i.height;t&&(e=i.width*(s.canvas.width/t.width),a=i.height*(s.canvas.height/t.height)),o.drawImage(i,0,0,e,a),o.globalCompositeOperation=n},i.src=e},getImg:function(){return this.canvas.toDataURL("image/png")},downloadImg:function(){var e=this.getImg();e=e.replace("image/png","image/octet-stream"),window.location.href=e},saveWebStorage:function(){window[this.storage]&&(window[this.storage].setItem("drawing-board-"+this.id,this.getImg()),this.ev.trigger("board:save"+this.storage.charAt(0).toUpperCase()+this.storage.slice(1),this.getImg()))},restoreWebStorage:function(){window[this.storage]&&null!==window[this.storage].getItem("drawing-board-"+this.id)&&(this.setImg(window[this.storage].getItem("drawing-board-"+this.id)),this.ev.trigger("board:restore"+this.storage.charAt(0).toUpperCase()+this.storage.slice(1),window[this.storage].getItem("drawing-board-"+this.id)))},clearWebStorage:function(){window[this.storage]&&null!==window[this.storage].getItem("drawing-board-"+this.id)&&(window[this.storage].removeItem("drawing-board-"+this.id),this.ev.trigger("board:clear"+this.storage.charAt(0).toUpperCase()+this.storage.slice(1)))},_getStorage:function(){return!this.opts.webStorage||"session"!==this.opts.webStorage&&"local"!==this.opts.webStorage?!1:this.opts.webStorage+"Storage"},initDropEvents:function(){return this.opts.droppable?(this.dom.$canvas.on("dragover dragenter drop",function(e){e.stopPropagation(),e.preventDefault()}),void this.dom.$canvas.on("drop",$.proxy(this._onCanvasDrop,this))):!1},_onCanvasDrop:function(e){e=e.originalEvent?e.originalEvent:e;var t=e.dataTransfer.files;if(!t||!t.length||-1==t[0].type.indexOf("image")||!window.FileReader)return!1;var o=new FileReader;o.readAsDataURL(t[0]),o.onload=$.proxy(function(e){this.setImg(e.target.result),this.ev.trigger("board:imageDropped",e.target.result),this.ev.trigger("board:userAction"),this.initHistory()},this)},setMode:function(e,t){t=t||!1,e=e||"pencil",this.ev.unbind("board:startDrawing",$.proxy(this.fill,this)),"transparent"===this.opts.eraserColor?this.ctx.globalCompositeOperation="eraser"===e?"destination-out":"source-over":("eraser"===e?"background"===this.opts.eraserColor&&DrawingBoard.Utils.isColor(this.opts.background)?this.ctx.strokeStyle=this.opts.background:DrawingBoard.Utils.isColor(this.opts.eraserColor)&&(this.ctx.strokeStyle=this.opts.eraserColor):this.mode&&"eraser"!==this.mode||(this.ctx.strokeStyle=this.color),"filler"===e&&this.ev.bind("board:startDrawing",$.proxy(this.fill,this))),this.mode=e,t||this.ev.trigger("board:mode",this.mode)},getMode:function(){return this.mode||"pencil"},setColor:function(e){var t=this;if(e=e||this.color,!DrawingBoard.Utils.isColor(e))return!1;if(this.color=e,"transparent"!==this.opts.eraserColor&&"eraser"===this.mode){var o=function(e){"eraser"!==e&&(t.strokeStyle=t.color),t.ev.unbind("board:mode",o)};this.ev.bind("board:mode",o)}else this.ctx.strokeStyle=this.color},fill:function(e){if(this.getImg()===this.blankCanvas)return this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.width),this.ctx.fillStyle=this.color,void this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),o=0,i=1,n=2,s=3,a=this.ctx.strokeStyle,r=parseInt(a.substr(1,2),16),l=parseInt(a.substr(3,2),16),c=parseInt(a.substr(5,2),16),d=DrawingBoard.Utils.pixelAt(t,parseInt(e.coords.x,10),parseInt(e.coords.y,10));if(d[s]!==DrawingBoard.Utils.RGBToInt(r,l,c)){for(var u,h=[d],m=t.width-1,p=t.height-1;u=h.pop();)u[s]===d[s]&&(t.data[u[o]]=r,t.data[u[o]+1]=l,t.data[u[o]+2]=c,u[i]>0&&h.push(DrawingBoard.Utils.pixelAt(t,u[i]-1,u[n])),u[i]<m&&h.push(DrawingBoard.Utils.pixelAt(t,u[i]+1,u[n])),u[n]>0&&h.push(DrawingBoard.Utils.pixelAt(t,u[i],u[n]-1)),u[n]<p&&h.push(DrawingBoard.Utils.pixelAt(t,u[i],u[n]+1)));this.ctx.putImageData(t,0,0)}},initDrawEvents:function(){this.isDrawing=!1,this.isMouseHovering=!1,this.coords={},this.coords.old=this.coords.current=this.coords.oldMid={x:0,y:0},this.dom.$canvas.on("mousedown touchstart",$.proxy(function(e){bmRoom.whiteboard.canDraw&&this._onInputStart(e,this._getInputCoords(e))},this)),this.dom.$canvas.on("mousemove touchmove",$.proxy(function(e){bmRoom.whiteboard.canDraw&&this._onInputMove(e,this._getInputCoords(e))},this)),this.dom.$canvas.on("mousemove",$.proxy(function(){},this)),this.dom.$canvas.on("mouseup touchend",$.proxy(function(e){bmRoom.whiteboard.canDraw&&this._onInputStop(e,this._getInputCoords(e))},this)),this.dom.$canvas.on("mouseover",$.proxy(function(e){bmRoom.whiteboard.canDraw&&this._onMouseOver(e,this._getInputCoords(e))},this)),this.dom.$canvas.on("mouseout",$.proxy(function(e){bmRoom.whiteboard.canDraw&&this._onMouseOut(e,this._getInputCoords(e))},this)),$("body").on("mouseup touchend",$.proxy(function(){this.isDrawing=!1},this)),window.requestAnimationFrame&&requestAnimationFrame($.proxy(this.draw,this))},draw:function(){if(bmRoom.whiteboard.isAdmin){if(window.requestAnimationFrame&&this.ctx.lineWidth>10&&this.isMouseHovering){this.dom.$cursor.css({width:this.ctx.lineWidth+"px",height:this.ctx.lineWidth+"px"});var e=DrawingBoard.Utils.tpl("translateX({{x}}px) translateY({{y}}px)",{x:this.coords.current.x-this.ctx.lineWidth/2,y:this.coords.current.y-this.ctx.lineWidth/2});this.dom.$cursor.css({transform:e,"-webkit-transform":e,"-ms-transform":e}),this.dom.$cursor.removeClass("drawing-board-utils-hidden")}else this.dom.$cursor.addClass("drawing-board-utils-hidden");if(this.isDrawing){var t=this._getMidInputCoords(this.coords.current);this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.quadraticCurveTo(this.coords.old.x,this.coords.old.y,this.coords.oldMid.x,this.coords.oldMid.y),this.ctx.stroke(),this.coords.old=this.coords.current,this.coords.oldMid=t}window.requestAnimationFrame&&requestAnimationFrame($.proxy(function(){this.draw()},this))}},_onInputStart:function(e,t){this.coords.current=this.coords.old=t,this.coords.oldMid=this._getMidInputCoords(t),this.isDrawing=!1,window.requestAnimationFrame||this.draw(),this.ev.trigger("board:startDrawing",{e:e,coords:t}),e.preventDefault()},_onInputMove:function(e,t){this.coords.current=t,this.ev.trigger("board:drawing",{e:e,coords:t}),window.requestAnimationFrame||this.draw(),e.preventDefault()},_onInputStop:function(e,t){!this.isDrawing||e.touches&&0!==e.touches.length||(this.isDrawing=!1,this.saveWebStorage(),this.saveHistory(),this.ev.trigger("board:stopDrawing",{e:e,coords:t}),this.ev.trigger("board:userAction"),e.preventDefault())},_onMouseOver:function(e,t){this.isMouseHovering=!0,this.coords.old=this._getInputCoords(e),this.coords.oldMid=this._getMidInputCoords(this.coords.old),this.ev.trigger("board:mouseOver",{e:e,coords:t})},_onMouseOut:function(e,t){this.isMouseHovering=!1,this.ev.trigger("board:mouseOut",{e:e,coords:t})},_getInputCoords:function(e){e=e.originalEvent?e.originalEvent:e;var t,o;return e.touches&&1==e.touches.length?(t=e.touches[0].pageX,o=e.touches[0].pageY):(t=e.pageX,o=e.pageY),{x:t-this.dom.$canvas.offset().left,y:o-this.dom.$canvas.offset().top}},_getMidInputCoords:function(e){return{x:this.coords.old.x+e.x>>1,y:this.coords.old.y+e.y>>1}}},DrawingBoard.Control=function(e,t){return this.board=e,this.opts=$.extend({},this.defaults,t),this.$el=$(document.createElement("div")).addClass("drawing-board-control"),this.name&&this.$el.addClass("drawing-board-control-"+this.name),this.board.ev.bind("board:reset",$.proxy(this.onBoardReset,this)),this.initialize.apply(this,arguments),this},DrawingBoard.Control.prototype={name:"",defaults:{},initialize:function(){},addToBoard:function(){this.board.addControl(this)},onBoardReset:function(){}},DrawingBoard.Control.extend=function(e,t){var o,i=this;o=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},$.extend(o,i,t);var n=function(){this.constructor=o};return n.prototype=i.prototype,o.prototype=new n,e&&$.extend(o.prototype,e),o.__super__=i.prototype,o
},DrawingBoard.Control.Color=DrawingBoard.Control.extend({name:"colors",initialize:function(){this.initTemplate();var e=this;this.$el.on("click",".drawing-board-control-colors-picker",function(t){var o=$(this).attr("data-color");e.board.setColor(o),bmRoom.whiteboard.drawAction("setColor",o),e.$el.find(".drawing-board-control-colors-current").css("background-color",o).attr("data-color",o),e.board.ev.trigger("color:changed",o),e.$el.find(".drawing-board-control-colors-rainbows").addClass("drawing-board-utils-hidden"),t.preventDefault()}),this.$el.on("click",".drawing-board-control-colors-current",function(t){e.$el.find(".drawing-board-control-colors-rainbows").toggleClass("drawing-board-utils-hidden"),t.preventDefault()}),$("body").on("click",function(t){var o=$(t.target),i=o.hasClass("drawing-board-control-colors-current")?o:o.closest(".drawing-board-control-colors-current"),n=e.$el.find(".drawing-board-control-colors-current"),s=e.$el.find(".drawing-board-control-colors-rainbows");i.length&&i.get(0)===n.get(0)||s.hasClass("drawing-board-utils-hidden")||s.addClass("drawing-board-utils-hidden")})},initTemplate:function(){var e='<div class="drawing-board-control-inner"><div class="drawing-board-control-colors-current" style="background-color: {{color}}" data-color="{{color}}"></div><div class="drawing-board-control-colors-rainbows">{{rainbows}}</div></div>',t='<div class="drawing-board-control-colors-picker" data-color="{{color}}" style="background-color: {{color}}"></div>',o="";$.each([.75,.5,.25],$.proxy(function(e,i){var n=0,s=null;for(o+='<div class="drawing-board-control-colors-rainbow">',.25==i&&(s=this._rgba(0,0,0,1)),.5==i&&(s=this._rgba(150,150,150,1)),.75==i&&(s=this._rgba(255,255,255,1)),o+=DrawingBoard.Utils.tpl(t,{color:s.toString()});330>=n;)o+=DrawingBoard.Utils.tpl(t,{color:this._hsl2Rgba(this._hsl(n-60,1,i)).toString()}),n+=30;o+="</div>"},this)),this.$el.append($(DrawingBoard.Utils.tpl(e,{color:this.board.color,rainbows:o}))),this.$el.find(".drawing-board-control-colors-rainbows").addClass("drawing-board-utils-hidden")},onBoardReset:function(){this.board.setColor(this.$el.find(".drawing-board-control-colors-current").attr("data-color"))},_rgba:function(e,t,o,i){return{r:e,g:t,b:o,a:i,toString:function(){return"rgba("+e+", "+t+", "+o+", "+i+")"}}},_hsl:function(e,t,o){return{h:e,s:t,l:o,toString:function(){return"hsl("+e+", "+100*t+"%, "+100*o+"%)"}}},_hex2Rgba:function(e){var t=parseInt(e.substring(1),16);return this._rgba(t>>16,t>>8&255,255&t,1)},_hsl2Rgba:function(e){function t(e,t,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?e+6*(t-e)*o:.5>o?t:2/3>o?e+(t-e)*(2/3-o)*6:e}var o,i,n,s=e.h/360,a=e.s,r=e.l;if(0===a)o=i=n=r;else{var l=.5>r?r*(1+a):r+a-r*a,c=2*r-l;o=Math.floor(255*t(c,l,s+1/3)),i=Math.floor(255*t(c,l,s)),n=Math.floor(255*t(c,l,s-1/3))}return this._rgba(o,i,n,1)}}),DrawingBoard.Control.DrawingMode=DrawingBoard.Control.extend({name:"drawingmode",defaults:{pencil:!0},initialize:function(){this.prevMode=this.board.getMode(),$.each(["pencil","eraser","filler"],$.proxy(function(e,t){this.opts[t]&&this.$el.append('<button class="drawing-board-control-drawingmode-'+t+'-button" data-mode="'+t+'"></button>')},this)),this.$el.on("click","button[data-mode]",$.proxy(function(e){var t=$(e.currentTarget).attr("data-mode"),o=this.board.getMode();o!==t&&(this.prevMode=o);var i=o===t?this.prevMode:t;this.board.setMode(i),e.preventDefault()},this)),this.board.ev.bind("board:mode",$.proxy(function(e){this.toggleButtons(e)},this)),this.toggleButtons(this.board.getMode())},toggleButtons:function(e){this.$el.find("button[data-mode]").each(function(t,o){var i=$(o);i.toggleClass("active",e===i.attr("data-mode"))})}}),DrawingBoard.Control.Navigation=DrawingBoard.Control.extend({name:"navigation",defaults:{back:!0,forward:!0,reset:!0},initialize:function(){var e="";if(this.opts.back&&(e+='<button class="drawing-board-control-navigation-back">&larr;</button>'),this.opts.forward&&(e+='<button class="drawing-board-control-navigation-forward">&rarr;</button>'),this.opts.reset&&(e+='<button class="drawing-board-control-navigation-reset">&times;</button>'),this.$el.append(e),this.opts.back){var t=this.$el.find(".drawing-board-control-navigation-back");this.board.ev.bind("historyNavigation",$.proxy(function(e){1===e?t.attr("disabled","disabled"):t.removeAttr("disabled")},this)),this.$el.on("click",".drawing-board-control-navigation-back",$.proxy(function(e){this.board.goBackInHistory(),e.preventDefault()},this))}if(this.opts.forward){var o=this.$el.find(".drawing-board-control-navigation-forward");this.board.ev.bind("historyNavigation",$.proxy(function(e){e===this.board.history.values.length?o.attr("disabled","disabled"):o.removeAttr("disabled")},this)),this.$el.on("click",".drawing-board-control-navigation-forward",$.proxy(function(e){this.board.goForthInHistory(),e.preventDefault()},this))}this.opts.reset&&this.$el.on("click",".drawing-board-control-navigation-reset",$.proxy(function(e){bmRoom.whiteboard.drawing.saveHistory(bmRoom.whiteboard.drawing.blankCanvas),e.preventDefault()},this))}}),DrawingBoard.Control.Size=DrawingBoard.Control.extend({name:"size",defaults:{type:"auto",dropdownValues:[1,3,6,10,20,30,40,50],min:1,max:50},types:["dropdown","range"],initialize:function(){"auto"==this.opts.type&&(this.opts.type=this._iHasRangeInput()?"range":"dropdown");var e=$.inArray(this.opts.type,this.types)>-1?this["_"+this.opts.type+"Template"]():!1;if(!e)return!1;this.val=this.board.opts.size,this.$el.append($(e)),this.$el.attr("data-drawing-board-type",this.opts.type),this.updateView();var t=this;"range"==this.opts.type&&this.$el.on("change",".drawing-board-control-size-range-input",function(e){t.val=$(this).val(),t.updateView(),bmRoom.whiteboard.drawAction("changeSize",t.val),t.board.ev.trigger("size:changed",t.val),e.preventDefault()}),"dropdown"==this.opts.type&&(this.$el.on("click",".drawing-board-control-size-dropdown-current",$.proxy(function(){this.$el.find(".drawing-board-control-size-dropdown").toggleClass("drawing-board-utils-hidden")},this)),this.$el.on("click","[data-size]",function(e){t.val=parseInt($(this).attr("data-size"),0),t.updateView(),bmRoom.whiteboard.drawAction("changeSize",t.val),t.board.ev.trigger("size:changed",t.val),e.preventDefault()}))},_rangeTemplate:function(){var e='<div class="drawing-board-control-inner" title="{{size}}"><input type="range" min="{{min}}" max="{{max}}" value="{{size}}" step="1" class="drawing-board-control-size-range-input"><span class="drawing-board-control-size-range-current"></span></div>';return DrawingBoard.Utils.tpl(e,{min:this.opts.min,max:this.opts.max,size:this.board.opts.size})},_dropdownTemplate:function(){var e='<div class="drawing-board-control-inner" title="{{size}}"><div class="drawing-board-control-size-dropdown-current"><span></span></div><ul class="drawing-board-control-size-dropdown">';return $.each(this.opts.dropdownValues,function(t,o){e+=DrawingBoard.Utils.tpl('<li data-size="{{size}}"><span style="width: {{size}}px; height: {{size}}px; border-radius: {{size}}px;"></span></li>',{size:o})}),e+="</ul></div>"},onBoardReset:function(){this.updateView()},updateView:function(){var e=this.val;if(this.board.ctx.lineWidth=e,this.$el.find(".drawing-board-control-size-range-current, .drawing-board-control-size-dropdown-current span").css({width:e+"px",height:e+"px",borderRadius:e+"px",marginLeft:-1*e/2+"px",marginTop:-1*e/2+"px"}),this.$el.find(".drawing-board-control-inner").attr("title",e),"dropdown"==this.opts.type){var t=null;$.each(this.opts.dropdownValues,function(o,i){(null===t||Math.abs(i-e)<Math.abs(t-e))&&(t=i)}),this.$el.find(".drawing-board-control-size-dropdown").addClass("drawing-board-utils-hidden")}},_iHasRangeInput:function(){var e,t=document.createElement("input"),o=":)",i=document.documentElement,n="range";return t.setAttribute("type",n),e="text"!==t.type,t.value=o,t.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(n)&&void 0!==t.style.WebkitAppearance&&(i.appendChild(t),defaultView=document.defaultView,e=defaultView.getComputedStyle&&"textfield"!==defaultView.getComputedStyle(t,null).WebkitAppearance&&0!==t.offsetHeight,i.removeChild(t)),!!e}}),DrawingBoard.Control.Download=DrawingBoard.Control.extend({name:"download",initialize:function(){this.$el.append('<button class="drawing-board-control-download-button"></button>'),this.$el.on("click",".drawing-board-control-download-button",$.proxy(function(e){this.board.downloadImg(),e.preventDefault()},this))}}),window.DrawingBoard="undefined"!=typeof DrawingBoard?DrawingBoard:{},DrawingBoard.Utils={},DrawingBoard.Utils.tpl=function(){"use strict";var e,t="{{",o="}}",i="[a-z0-9_][\\.a-z0-9_]*",n=new RegExp(t+"\\s*("+i+")\\s*"+o,"gi");return function(t,o){return t.replace(n,function(t,i){for(var n=i.split("."),s=n.length,a=o,r=0;s>r;r++){if(a=a[n[r]],a===e)throw"tim: '"+n[r]+"' not found in "+t;if(r===s-1)return a}})}}(),DrawingBoard.Utils.MicroEvent=function(){},DrawingBoard.Utils.MicroEvent.prototype={bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},DrawingBoard.Utils._boxBorderSize=function(e,t,o,i){t=!!t||!0,o=!!o||!1;var n,s=0;"width"==i?(n=["border-left-width","border-right-width"],t&&n.push("padding-left","padding-right"),o&&n.push("margin-left","margin-right")):(n=["border-top-width","border-bottom-width"],t&&n.push("padding-top","padding-bottom"),o&&n.push("margin-top","margin-bottom"));for(var a=n.length-1;a>=0;a--)s+=parseInt(e.css(n[a]).replace("px",""),10);return s},DrawingBoard.Utils.boxBorderWidth=function(e,t,o){return DrawingBoard.Utils._boxBorderSize(e,t,o,"width")},DrawingBoard.Utils.boxBorderHeight=function(e,t,o){return DrawingBoard.Utils._boxBorderSize(e,t,o,"height")},DrawingBoard.Utils.isColor=function(e){return e&&e.length?/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)||-1!==$.inArray(e.substring(0,3),["rgb","hsl"]):!1},DrawingBoard.Utils.RGBToInt=function(e,t,o){var i=0;return i|=(255&e)<<16,i|=(255&t)<<8,i|=255&o},DrawingBoard.Utils.pixelAt=function(e,t,o){var i=4*(o*e.width+t),n=DrawingBoard.Utils.RGBToInt(e.data[i],e.data[i+1],e.data[i+2]);return[i,t,o,n]},DrawingBoard.Utils.compareColors=function(e,t,o){if(0===o)return e===t;var i=e>>16&255,n=t>>16&255,s=e>>8&255,a=t>>8&255,r=255&e,l=255&t;return Math.abs(i-n)<=o&&Math.abs(s-a)<=o&&Math.abs(r-l)<=o},function(){for(var e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"]}(),function(e,t){var o,i="mThumbnailScroller",n="mTS",s=".mThumbnailScroller",a={setTop:0,setLeft:0,type:"hover-50",axis:"x",speed:15,contentTouchScroll:25,markup:{buttonsPlaceholder:!1,buttonsHTML:{up:"SVG set 1",down:"SVG set 1",left:"SVG set 1",right:"SVG set 1"}},advanced:{autoExpandHorizontalScroll:!0,updateOnContentResize:!0,updateOnImageLoad:!0},theme:"none",home_button:!1,callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},r=0,l={},c=t.attachEvent&&!t.addEventListener?1:0,d=!1,u=["mTS_disabled","mTS_destroyed","mTS_no_scroll"],h={init:function(t){var t=e.extend(!0,{},a,t),o=m.call(this);if(t.live){var i=t.liveSelector||this.selector||s,c=e(i);if("off"===t.live)return void f(i);l[i]=setTimeout(function(){c.mThumbnailScroller(t),"once"===t.live&&c.length&&f(i)},500)}else f(i);return t.speed=0===t.speed?100:t.speed,p(t),e(o).each(function(){var o=e(this);if(!o.data(n)){o.data(n,{idx:++r,opt:t,html:null,overflowed:null,bindEvents:!1,tweenRunning:!1,langDir:o.css("direction"),cbOffsets:null,trigger:null});var i=o.data(n).opt,s=o.data("mts-axis"),a=o.data("mts-type"),l=o.data("mts-theme");s&&(i.axis=s),a&&(i.type=a),l&&(i.theme=l,p(i)),g.call(this),h.update.call(null,o)}})},update:function(t){var o=t||m.call(this);return e(o).each(function(){var t=e(this);if(t.data(n)){var o=t.data(n),i=o.opt,s=e("#mTS_"+o.idx+"_container");if(!s.length)return;o.tweenRunning&&F(t),t.hasClass(u[0])&&t.removeClass(u[0]),t.hasClass(u[1])&&t.removeClass(u[1]),y.call(this),b.call(this),o.overflowed=$.call(this),R.call(this),x.call(this);var a=[s[0].offsetTop,s[0].offsetLeft];"x"!==i.axis&&(o.overflowed[0]?z(t,a[0].toString(),{dir:"y",dur:0,overwrite:"none"}):(k.call(this),"y"===i.axis?(z(t,"0",{dir:"y",dur:0,overwrite:"none"}),C.call(this)):"yx"===i.axis&&o.overflowed[1]&&z(t,a[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(o.overflowed[1]?z(t,a[1].toString(),{dir:"x",dur:0,overwrite:"none"}):(k.call(this),"x"===i.axis?(z(t,"0",{dir:"x",dur:0,overwrite:"none"}),C.call(this)):"yx"===i.axis&&o.overflowed[0]&&z(t,a[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),o.overflowed[0]||o.overflowed[1]?t.removeClass(u[2]):t.addClass(u[2]),O.call(this)}})},scrollTo:function(t,o){if("undefined"!=typeof t&&null!=t){var i=m.call(this);return e(i).each(function(){var i=e(this);if(i.data(n)){var s=i.data(n),a=s.opt,r={trigger:"external",speed:a.speed,duration:1e3,easing:"easeInOut",timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=e.extend(!0,{},r,o),c=M.call(this,t),d=l.duration?l.duration:7e3/(l.speed||1);c[0]=j.call(this,c[0],"y"),c[1]=j.call(this,c[1],"x"),l.dur=d>0&&17>d?17:d,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==a.axis&&s.overflowed[0]&&(l.dir="y",l.overwrite="all",z(i,-c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==a.axis&&s.overflowed[1]&&(l.dir="x",l.overwrite="none",z(i,-c[1].toString(),l))},l.timeout)}})}},stop:function(){var t=m.call(this);return e(t).each(function(){var t=e(this);t.data(n)&&F(t)})},disable:function(t){var o=m.call(this);return e(o).each(function(){var o=e(this);if(o.data(n)){{var i=o.data(n);i.opt}O.call(this,"remove"),C.call(this),t&&k.call(this),R.call(this,!0),o.addClass(u[0])}})},destroy:function(){var t=m.call(this);return e(t).each(function(){var o=e(this);if(o.data(n)){var s=o.data(n),a=s.opt,r=e("#mTS_"+s.idx),l=(e("#mTS_"+s.idx+"_container"),e("#mTS_"+s.idx+"_buttonUp,#mTS_"+s.idx+"_buttonDown,#mTS_"+s.idx+"_buttonLeft,#mTS_"+s.idx+"_buttonRight"));a.live&&f(t),O.call(this,"remove"),C.call(this),k.call(this),o.removeData(n),B(this,"mts"),l.remove(),r.replaceWith(s.html),o.removeClass(i+" _"+n+"_"+s.idx+" "+n+"-"+a.theme+" "+u[2]+" "+u[0]).addClass(u[1])}})}},m=function(){return"object"!=typeof e(this)||e(this).length<1?s:this},p=function(t){var o=["buttons-out"],i=["buttons-in"],n=["buttons-out"],s=["hover-classic"],a=["hover-full"];t.markup.buttonsPlaceholder=e.inArray(t.theme,o)>-1?"outside":t.markup.buttonsPlaceholder,t.markup.buttonsHTML=e.inArray(t.theme,i)>-1?{up:"SVG set 2",down:"SVG set 2",left:"SVG set 2",right:"SVG set 2"}:e.inArray(t.theme,n)>-1?{up:"SVG set 3",down:"SVG set 3",left:"SVG set 3",right:"SVG set 3"}:t.markup.buttonsHTML,t.type=e.inArray(t.theme,s)>-1?"hover-85":e.inArray(t.theme,a)>-1?"hover-precise":t.type,t.speed=e.inArray(t.theme,s)>-1?60:e.inArray(t.theme,a)>-1?10:t.speed},f=function(e){l[e]&&(clearTimeout(l[e]),B(l,e))},g=function(){var t=e(this),o=t.data(n),s=o.opt,a="yx"===s.axis?"mTS_vertical_horizontal":"x"===s.axis?"mTS_horizontal":"mTS_vertical",r=s.markup.thumbnailsContainer||"ul",l=s.markup.thumbnailContainer||"li",c=s.markup.thumbnailElement||"img";if(o.html=t.children().clone(!0,!0),!t.find(r).length){var d=t.find("li").length?"<ul class='"+n+"AutoContainer' />":"<div class='"+n+"AutoContainer' />";t.wrapInner(d),r="."+n+"AutoContainer"}s.setWidth&&t.css("width",s.setWidth),s.setHeight&&t.css("height",s.setHeight),s.setLeft="y"!==s.axis&&"rtl"===o.langDir?"-989999px":s.setLeft,t.addClass(i+" _"+n+"_"+o.idx+" "+n+"-"+s.theme).find(r).wrap("<div id='mTS_"+o.idx+"' class='mTSWrapper "+a+"' />").addClass(n+"Container").attr("id","mTS_"+o.idx+"_container").css({position:"relative",top:s.setTop,left:s.setLeft}).find(l).addClass(n+"ThumbContainer").find(c).addClass(n+"Thumb"),v.call(this)},b=function(){var t=e(this),o=t.data(n),i=o.opt,s=e("#mTS_"+o.idx+"_container");i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis&&s.css({position:"absolute",width:"auto"}).wrap("<div class='mTS_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(s[0].getBoundingClientRect().right)-Math.floor(s[0].getBoundingClientRect().left),position:"relative"}).unwrap()},v=function(){var t,o=e(this),s=o.data(n),a=s.opt,r=a.markup.buttonsPlaceholder?"outside"===a.markup.buttonsPlaceholder?o:e(a.markup.buttonsPlaceholder):e("#mTS_"+s.idx);t=a.home_button?["<a href='#' id='mTS_"+s.idx+"_buttonUp' class='mTSButton mTSButtonUp'><span class='mTSButtonIconContainer'>"+_.call(this,"up")+"</span></a>","<a href='#' id='mTS_"+s.idx+"_buttonDown' class='mTSButton mTSButtonDown'><span class='mTSButtonIconContainer'>"+_.call(this,"down")+"</span></a>","<a href='javascript:void(0);' id='mTS_"+s.idx+"_buttonLeft' class='course-nav-btn btn-prev mTSButtonLeft'><span class='icon-leftarrow2'></span></a>","<a href='javascript:void(0);' id='mTS_"+s.idx+"_buttonRight' class='course-nav-btn btn-next mTSButtonRight'><span class='icon-leftarrow'></span></a>"]:["<a href='#' id='mTS_"+s.idx+"_buttonUp' class='mTSButton mTSButtonUp'><span class='mTSButtonIconContainer'>"+_.call(this,"up")+"</span></a>","<a href='#' id='mTS_"+s.idx+"_buttonDown' class='mTSButton mTSButtonDown'><span class='mTSButtonIconContainer'>"+_.call(this,"down")+"</span></a>","<a href='#' id='mTS_"+s.idx+"_buttonLeft' class='mTSButton mTSButtonLeft'><span class='mTSButtonIconContainer'>"+_.call(this,"left")+"</span></a>","<a href='#' id='mTS_"+s.idx+"_buttonRight' class='mTSButton mTSButtonRight'><span class='mTSButtonIconContainer'>"+_.call(this,"right")+"</span></a>"];["x"===a.axis?t[2]:t[0],"x"===a.axis?t[3]:t[1]];r.hasClass(i)&&"static"===r.css("position")&&r.css("position","relative"),-1!==a.type.indexOf("click")&&("x"!==a.axis&&r.append(t[0]+t[1]),"y"!==a.axis&&r.append(t[2]+t[3]))},_=function(t){var o=e(this),i=o.data(n),s=i.opt,a=s.markup.buttonsHTML,r="SVG set 1"===a[t]?0:"SVG set 2"===a[t]?1:"SVG set 3"===a[t]?2:"SVG set 4"===a[t]?3:"SVG set 5"===a[t]?4:null;switch(t){case"up":return null===r?a[t]:c?"&uarr;":w(a[t])[r][0];case"down":return null===r?a[t]:c?"&darr;":w(a[t])[r][1];case"left":return null===r?a[t]:c?"&larr;":w(a[t])[r][2];case"right":return null===r?a[t]:c?"&rarr;":w(a[t])[r][3]}},w=function(){var e="<svg version='1.1' viewBox='0 0 24 24' preserveAspectRatio='xMinYMin meet' class='mTSButtonIcon'><g><line stroke-width='1' x1='' y1='' x2='' y2='' stroke='#449FDB' opacity=''></line></g>",t="</svg>";return[[e+"<path d='M20.561 9.439l-7.5-7.5c-0.586-0.586-1.535-0.586-2.121 0l-7.5 7.5c-0.586 0.586-0.586 1.536 0 2.121s1.536 0.586 2.121 0l4.939-4.939v14.379c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5v-14.379l4.939 4.939c0.293 0.293 0.677 0.439 1.061 0.439s0.768-0.146 1.061-0.439c0.586-0.586 0.586-1.535 0-2.121z'></path>"+t,e+"<path d='M3.439 14.561l7.5 7.5c0.586 0.586 1.536 0.586 2.121 0l7.5-7.5c0.586-0.586 0.586-1.536 0-2.121s-1.536-0.586-2.121 0l-4.939 4.939v-14.379c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5v14.379l-4.939-4.939c-0.293-0.293-0.677-0.439-1.061-0.439s-0.768 0.146-1.061 0.439c-0.586 0.586-0.586 1.536 0 2.121z'></path>"+t,e+"<path d='M9.439 3.439l-7.5 7.5c-0.586 0.586-0.586 1.536 0 2.121l7.5 7.5c0.586 0.586 1.536 0.586 2.121 0s0.586-1.536 0-2.121l-4.939-4.939h14.379c0.828 0 1.5-0.672 1.5-1.5s-0.672-1.5-1.5-1.5h-14.379l4.939-4.939c0.293-0.293 0.439-0.677 0.439-1.061s-0.146-0.768-0.439-1.061c-0.586-0.586-1.536-0.586-2.121 0z'></path>"+t,e+"<path d='M14.561 20.561l7.5-7.5c0.586-0.586 0.586-1.536 0-2.121l-7.5-7.5c-0.586-0.586-1.536-0.586-2.121 0s-0.586 1.536 0 2.121l4.939 4.939h-14.379c-0.828 0-1.5 0.672-1.5 1.5s0.672 1.5 1.5 1.5h14.379l-4.939 4.939c-0.293 0.293-0.439 0.677-0.439 1.061s0.146 0.768 0.439 1.061c0.586 0.586 1.536 0.586 2.121 0z'></path>"+t],[e+"<path d='M18.58 13.724c-0.488-0.502-5.634-5.402-5.634-5.402-0.262-0.268-0.604-0.402-0.946-0.402-0.343 0-0.685 0.134-0.946 0.402 0 0-5.146 4.901-5.635 5.402-0.488 0.502-0.522 1.404 0 1.939 0.523 0.534 1.252 0.577 1.891 0l4.69-4.496 4.688 4.496c0.641 0.577 1.37 0.534 1.891 0 0.523-0.536 0.491-1.439 0-1.939z'</path>"+t,e+"<path d='M18.58 10.276c-0.488 0.502-5.634 5.404-5.634 5.404-0.262 0.268-0.604 0.401-0.946 0.401-0.343 0-0.685-0.133-0.946-0.401 0 0-5.146-4.902-5.635-5.404-0.488-0.502-0.522-1.403 0-1.939 0.523-0.535 1.252-0.577 1.891 0l4.69 4.498 4.688-4.496c0.641-0.577 1.37-0.535 1.891 0 0.523 0.535 0.491 1.438 0 1.938z'></path>"+t,e+"<path d='M13.724 5.419c-0.502 0.49-5.402 5.635-5.402 5.635-0.268 0.262-0.401 0.604-0.401 0.946s0.133 0.684 0.401 0.946c0 0 4.901 5.146 5.402 5.634 0.502 0.49 1.404 0.523 1.939 0 0.534-0.522 0.576-1.25-0.001-1.89l-4.496-4.69 4.496-4.69c0.577-0.641 0.535-1.369 0.001-1.891-0.536-0.522-1.439-0.49-1.939 0z'></path>"+t,e+"<path d='M10.276 5.419c0.502 0.49 5.402 5.635 5.402 5.635 0.269 0.262 0.402 0.604 0.402 0.946s-0.133 0.684-0.402 0.946c0 0-4.901 5.146-5.402 5.634-0.502 0.49-1.403 0.523-1.939 0-0.535-0.522-0.577-1.25 0-1.89l4.498-4.69-4.496-4.69c-0.577-0.641-0.535-1.369 0-1.891s1.438-0.49 1.938 0z'></path>"+t],[e+"<path d='M20.902 17.279c0.325 0.322 0.851 0.322 1.175 0 0.325-0.322 0.325-0.841 0-1.163l-9.49-9.396c-0.324-0.322-0.85-0.322-1.174 0l-9.49 9.396c-0.324 0.322-0.325 0.841 0 1.163s0.85 0.322 1.175 0l8.902-8.569 8.902 8.569z'></path>"+t,e+"<path d='M3.098 6.721c-0.325-0.322-0.851-0.322-1.175 0-0.324 0.32-0.324 0.841 0 1.163l9.49 9.396c0.325 0.322 0.85 0.322 1.175 0l9.49-9.396c0.324-0.322 0.325-0.841 0-1.163s-0.852-0.322-1.175-0.001l-8.903 8.569-8.902-8.568z'></path>"+t,e+"<path d='M17.279 20.902c0.322 0.325 0.322 0.85 0 1.175s-0.841 0.325-1.163 0l-9.396-9.488c-0.322-0.325-0.322-0.851 0-1.175l9.396-9.49c0.322-0.325 0.841-0.325 1.163 0s0.322 0.85 0 1.175l-8.568 8.902 8.568 8.902z'</path>"+t,e+"<path d='M6.72 20.902c-0.322 0.325-0.322 0.85 0 1.175s0.841 0.325 1.163 0l9.396-9.488c0.322-0.325 0.322-0.851 0-1.175l-9.396-9.49c-0.322-0.325-0.841-0.325-1.163 0s-0.322 0.85 0 1.175l8.568 8.902-8.568 8.902z'</path>"+t],[e+"<path d='M12 0l-12 12h7.5v12l9 0v-12h7.5z'></path>"+t,e+"<path d='M12 24l12-12h-7.5v-12l-9-0v12h-7.5z'></path>"+t,e+"<path d='M0 12l12 12v-7.5h12l0-9h-12v-7.5z'></path>"+t,e+"<path d='M24 12l-12-12v7.5h-12l-0 9h12v7.5z'></path>"+t],[e+"<path d='M6.48 16.8h11.040l-5.521-9.6z'></path>"+t,e+"<path d='M17.52 7.201l-11.040-0.001 5.52 9.6z'></path>"+t,e+"<path d='M16.799 6.48l0.001 11.040-9.6-5.52z'></path>"+t,e+"<path d='M7.201 6.48l-0.001 11.040 9.6-5.52z'></path>"+t]]},y=function(){var t=e(this),o=t.data(n),i=(o.opt,e("#mTS_"+o.idx)),s=t.css("max-height"),a=-1!==s.indexOf("%"),r=t.css("box-sizing");if("none"!==s){var l=a?t.parent().height()*parseInt(s)/100:parseInt(s);"border-box"===r&&(l-=t.innerHeight()-t.height()+(t.outerHeight()-t.innerHeight())),i.css("max-height",Math.round(l))}},$=function(){var t=e(this),o=t.data(n),i=e("#mTS_"+o.idx),s=e("#mTS_"+o.idx+"_container");return[s.height()>i.height(),s.width()>i.width()]},k=function(){var t=e(this),o=t.data(n),i=o.opt,s=e("#mTS_"+o.idx),a=e("#mTS_"+o.idx+"_container");if(F(t),("x"!==i.axis&&!o.overflowed[0]||"y"===i.axis&&o.overflowed[0])&&a.css("top",0),"y"!==i.axis&&!o.overflowed[1]||"x"===i.axis&&o.overflowed[1]){var r="rtl"===o.langDir?s.width()-a.width():0;a.css("left",r)}},x=function(){var t=e(this),o=t.data(n),i=o.opt;o.bindEvents||(i.contentTouchScroll&&D.call(this),-1!==i.type.indexOf("hover")?"hover-precise"===i.type?P.call(this):A.call(this):-1!==i.type.indexOf("click")&&E.call(this),o.bindEvents=!0)},C=function(){var t=e(this),o=t.data(n),i=n+"_"+o.idx,s=e("#mTS_"+o.idx+",#mTS_"+o.idx+"_container,#mTS_"+o.idx+"_buttonUp,#mTS_"+o.idx+"_buttonDown,#mTS_"+o.idx+"_buttonLeft,#mTS_"+o.idx+"_buttonRight"),a=e("#mTS_"+o.idx+"_container");o.bindEvents&&(s.each(function(){e(this).unbind("."+i)}),clearTimeout(a[0].onCompleteTimeout),B(a[0],"onCompleteTimeout"),o.bindEvents=!1)},R=function(t,o,i){var s=e(this),a=s.data(n),r=a.opt;if(-1!==r.type.indexOf("click")){i||(i=r.axis);var l=[e("#mTS_"+a.idx+"_buttonUp"),e("#mTS_"+a.idx+"_buttonDown"),e("#mTS_"+a.idx+"_buttonLeft"),e("#mTS_"+a.idx+"_buttonRight")],c=n+"-hidden";"x"!==i&&(sel=!a.overflowed[0]||t||o?1===o?[l[0],l[1]]:2===o?[l[1],l[0]]:[l[0].add(l[1]),null]:[a.overflowed[1]?null:l[2].add(l[3]),l[0].add(l[1])]),"y"!==i&&(sel=!a.overflowed[1]||t||o?1===o?[l[2],l[3]]:2===o?[l[3],l[2]]:[l[2].add(l[3]),null]:[a.overflowed[0]?null:l[0].add(l[1]),l[2].add(l[3])]),sel[0]&&sel[0].addClass(c),sel[1]&&sel[1].removeClass(c)}},S=function(e){var t=e.type;switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return[e.originalEvent.pageY,e.originalEvent.pageX];case"touchstart":case"touchmove":case"touchend":var o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];return[o.pageY,o.pageX];default:return[e.pageY,e.pageX]}},T=function(e){return o||-1!==e.type.indexOf("touch")||"undefined"!=typeof e.pointerType&&(2===e.pointerType||"touch"===e.pointerType)?"touch":"mouse"},D=function(){function t(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?o[0]:o[3]:e>60?t>3?o[3]:o[2]:e>30?t>8?o[1]:t>6?o[0]:t>4?t:o[2]:t>8?t:o[3]}function i(e,t,o,i,n){e&&z(b,-e.toString(),{dur:t,easing:o,dir:i,overwrite:n})}var s,a,r,l,c,u,h,m,p,f,g,b=e(this),v=b.data(n),_=v.opt,w=n+"_"+v.idx,y=e("#mTS_"+v.idx),$=e("#mTS_"+v.idx+"_container"),k=[],x=[],C=0,R="yx"===_.axis?"none":"all",T=[];$.bind("touchstart."+w+" pointerdown."+w+" MSPointerDown."+w,function(e){if(q(e)&&!d){var t=$.offset();s=S(e)[0]-t.top,a=S(e)[1]-t.left,T=[S(e)[0],S(e)[1]]}}).bind("touchmove."+w+" pointermove."+w+" MSPointerMove."+w,function(e){if(q(e)&&!d){e.stopImmediatePropagation(),u=H();var t=y.offset(),o=S(e)[0]-t.top,n=S(e)[1]-t.left,r="linearOut";if(k.push(o),x.push(n),T[2]=Math.abs(S(e)[0]-T[0]),T[3]=Math.abs(S(e)[1]-T[1]),v.overflowed[0])var l=y.height()-$.height(),c=s-o>0&&o-s>l&&2*T[3]<T[2];if(v.overflowed[1])var h=y.width()-$.width(),m=a-n>0&&n-a>h&&2*T[2]<T[3];(c||m)&&e.preventDefault(),f="yx"===_.axis?[s-o,a-n]:"x"===_.axis?[null,a-n]:[s-o,null],$[0].idleTimer=250,v.overflowed[0]&&i(f[0],C,r,"y","all"),v.overflowed[1]&&i(f[1],C,r,"x",R)}}),y.bind("touchstart."+w+" pointerdown."+w+" MSPointerDown."+w,function(e){if(q(e)&&!d){e.stopImmediatePropagation(),o=!0,F(b),c=H();var t=y.offset();r=S(e)[0]-t.top,l=S(e)[1]-t.left,k=[],x=[]}}).bind("touchend."+w+" pointerup."+w+" MSPointerUp."+w,function(e){if(q(e)&&!d){e.stopImmediatePropagation(),h=H();var o=y.offset(),n=S(e)[0]-o.top,s=S(e)[1]-o.left;if(!(h-u>30)){p=1e3/(h-c);var a="easeOut",b=2.5>p,w=b?[k[k.length-2],x[x.length-2]]:[0,0];m=b?[n-w[0],s-w[1]]:[n-r,s-l];var C=[Math.abs(m[0]),Math.abs(m[1])];p=b?[Math.abs(m[0]/4),Math.abs(m[1]/4)]:[p,p];var T=[Math.abs($[0].offsetTop)-m[0]*t(C[0]/p[0],p[0]),Math.abs($[0].offsetLeft)-m[1]*t(C[1]/p[1],p[1])];f="yx"===_.axis?[T[0],T[1]]:"x"===_.axis?[null,T[1]]:[T[0],null],g=[4*C[0]+60*_.speed,4*C[1]+60*_.speed];var D=parseInt(_.contentTouchScroll)||0;f[0]=C[0]>D?f[0]:0,f[1]=C[1]>D?f[1]:0,v.overflowed[0]&&i(f[0],g[0],a,"y",R),v.overflowed[1]&&i(f[1],g[1],a,"x",R)}}})},P=function(){var o,i,s,a=e(this),r=a.data(n),l=r.opt,c=n+"_"+r.idx,d=e("#mTS_"+r.idx),u=e("#mTS_"+r.idx+"_container"),h=t.navigator.pointerEnabled?"pointermove":t.navigator.msPointerEnabled?"MSPointerMove":"mousemove";d.bind(h+"."+c,function(e){if("touch"!==T(e.originalEvent||e)&&(r.overflowed[0]||r.overflowed[1])){e.preventDefault();var t=d.height(),n=u.height(),c=d.width(),h=u.width(),m=h/c*7e3/(l.speed||1);o=[S(e)[0]-d.offset().top,S(e)[1]-d.offset().left],i=[o[0]/d.height(),o[1]/d.width()],s=[Math.round(-((n-t)*i[0])),Math.round(-((h-c)*i[1]))],"x"!==l.axis&&r.overflowed[0]&&z(a,s[0].toString(),{dir:"y",dur:m,easing:"easeOut"}),"y"!==l.axis&&r.overflowed[1]&&z(a,s[1].toString(),{dir:"x",dur:m,easing:"easeOut"})}})},A=function(){function i(){g[0].rAF||(r=t.requestAnimationFrame?t.requestAnimationFrame:function(e){return setTimeout(e,17)},g[0].rAF=r(a))}function s(){null!=g[0].rAF&&(t.requestAnimationFrame?t.cancelAnimationFrame(g[0].rAF):clearTimeout(g[0].rAF),clearTimeout(u),g[0].rAF=null)}function a(){if(!o){d=[c[0]+b[0].offsetTop,c[1]+b[0].offsetLeft];var e=[g.height()-b.height(),g.width()-b.width()];"x"!==p.axis&&m.overflowed[0]&&(d[0]=d[0]>0?0:d[0]<e[0]?e[0]:d[0],c[0]&&!k[0]&&z(h,d[0],{dir:"y",dur:0,easing:"linear"}),(d[0]>=0||d[0]<=e[0])&&(k[0]=1)),"y"!==p.axis&&m.overflowed[1]&&(d[1]=d[1]>0?0:d[1]<e[1]?e[1]:d[1],c[1]&&!k[1]&&z(h,d[1],{dir:"x",dur:0,easing:"linear"}),(d[1]>=0||d[1]<=e[1])&&(k[1]=1)),u=setTimeout(function(){g[0].rAF=r(a)},_)}}var r,l,c,d,u,h=e(this),m=h.data(n),p=m.opt,f=n+"_"+m.idx,g=e("#mTS_"+m.idx),b=e("#mTS_"+m.idx+"_container"),v=t.navigator.pointerEnabled?["pointerover","pointermove","pointerout"]:t.navigator.msPointerEnabled?["MSPointerOver","MSPointerMove","MSPointerOut"]:["mouseenter","mousemove","mouseleave"],_=t.requestAnimationFrame?0:17,w=p.speed,y=parseInt(p.type.split("hover-")[1])||1,$=w*y/100,k=[0,0];g.bind(v[0]+"."+f,function(e){"touch"!==T(e.originalEvent||e)&&(m.overflowed[0]||m.overflowed[1])&&i()}).bind(v[1]+"."+f,function(e){"touch"!==T(e.originalEvent||e)&&(m.overflowed[0]||m.overflowed[1])&&(l=[S(e)[0]-g.offset().top,S(e)[1]-g.offset().left],c=[Math.round(Math.cos(l[0]/g.height()*Math.PI)*w),Math.round(Math.cos(l[1]/g.width()*Math.PI)*w)],c[0]=c[0]<=-$?c[0]+=$:c[0]>=$?c[0]-=$:c[0]=0,c[1]=c[1]<=-$?c[1]+=$:c[1]>=$?c[1]-=$:c[1]=0,k=[0,0])}).bind(v[2]+"."+f,function(e){"touch"!==T(e.originalEvent||e)&&(m.overflowed[0]||m.overflowed[1])&&s()})},E=function(){var t=e(this),o=t.data(n),i=o.opt,s=n+"_"+o.idx,a=e("#mTS_"+o.idx),r=e("#mTS_"+o.idx+"_container"),l=[e("#mTS_"+o.idx+"_buttonUp"),e("#mTS_"+o.idx+"_buttonDown"),e("#mTS_"+o.idx+"_buttonLeft"),e("#mTS_"+o.idx+"_buttonRight")],c=l[0].add(l[1]).add(l[2]).add(l[3]);c.bind("click."+s,function(n){if(W(n)&&(o.overflowed[0]||o.overflowed[1])&&(n.preventDefault(),!o.tweenRunning)){if("x"!==i.axis&&o.overflowed[0]){var s=a.height(),l="click-thumb"===i.type?0:e(this).hasClass("mTSButtonUp")?"+=":e(this).hasClass("mTSButtonDown")?"-=":0;if("click-thumb"!==i.type)var c=parseInt(i.type.split("click-")[1])||1,d=l?[l+s*c/100,null]:0;else{var u=I.call(t[0])[0],m=I.call(t[0])[1];if(e(this).hasClass("mTSButtonDown"))var d=m?m[0].offsetTop-parseInt(m.css("margin-bottom"))-s:989999;else if(e(this).hasClass("mTSButtonUp")){var d=u?u[0].offsetTop-parseInt(u.css("margin-top")):0;if(0===r[0].offsetTop)return}}}if("y"!==i.axis&&o.overflowed[1]){var p=a.width(),l="click-thumb"===i.type?0:e(this).hasClass("mTSButtonLeft")?"+=":e(this).hasClass("mTSButtonRight")?"-=":0;if("click-thumb"!==i.type)var c=parseInt(i.type.split("click-")[1])||1,d=l?[null,l+p*c/100]:d;else{var u=I.call(t[0])[2],m=I.call(t[0])[3];if(e(this).hasClass("mTSButtonRight"))var d=m?m[0].offsetLeft-parseInt(m.css("margin-right"))-p:989999;else if(e(this).hasClass("mTSButtonLeft")){var d=u?u[0].offsetLeft-parseInt(u.css("margin-left")):0;if(0===r[0].offsetLeft)return}}}null!==d&&h.scrollTo.call(t[0],d,{duration:0})}})},I=function(){var t,o,i,s,a=e(this),r=a.data(n),l=(r.opt,e("#mTS_"+r.idx+"_container")),c=e("#mTS_"+r.idx),d=l.find(".mTSThumbContainer");return d.each(function(){var n=e(this),a=[Math.round(n.offset().top-l.offset().top+l[0].offsetTop),Math.round(n.offset().left-l.offset().left+l[0].offsetLeft)];if(a[0]<=0-parseInt(n.css("margin-top")))t=d.eq(0===a[0]?n.index()-1:n.index());else if(a[0]<=c.height()+parseInt(n.css("margin-bottom"))){var r=d.eq(n.index()+1);o=r.length?r:null}if(a[1]<=0-parseInt(n.css("margin-left")))i=d.eq(0===a[1]?n.index()-1:n.index());else if(a[1]<=c.width()+parseInt(n.css("margin-right"))){var u=d.eq(n.index()+1);s=u.length?u:null}}),[t,o,i,s]},M=function(t){var o=e(this).data(n).opt,i=[];return"function"==typeof t&&(t=t()),t instanceof Array?i=t.length>1?[t[0],t[1]]:"x"===o.axis?[null,t[0]]:[t[0],null]:(i[0]=t.y?t.y:t.x||"x"===o.axis?null:t,i[1]=t.x?t.x:t.y||"y"===o.axis?null:t),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},j=function(t,o){if(null!=t&&"undefined"!=typeof t){var i=e(this),s=i.data(n),a=s.opt,r=e("#mTS_"+s.idx),l=e("#mTS_"+s.idx+"_container"),c=typeof t;o||(o="x"===a.axis?"x":"y");var d="x"===o?l.width():l.height(),u="x"===o?l.offset().left:l.offset().top,m="x"===o?l[0].offsetLeft:l[0].offsetTop,p="x"===o?"left":"top";switch(c){case"function":return t();case"object":if(t.nodeType)var f="x"===o?e(t).offset().left:e(t).offset().top;
else if(t.jquery){if(!t.length)return;var f="x"===o?t.offset().left:t.offset().top}return f-u;case"string":case"number":if(U(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(d*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(m-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var g=m+parseInt(t.split("+=")[1]);return g>=0?0:Math.abs(g)}if(-1!==t.indexOf("px")&&U(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(r.height()-l.height());if("right"===t)return Math.abs(r.width()-l.width());if("first"===t||"last"===t){var b=l.find(":"+t),f="x"===o?e(b).offset().left:e(b).offset().top;return f-u}if(e(t).length){var f="x"===o?e(t).offset().left:e(t).offset().top;return f-u}return l.css(p,t),void h.update.call(null,i[0])}}},O=function(t){function o(){clearTimeout(m[0].autoUpdate),m[0].autoUpdate=setTimeout(function(){return d.advanced.updateOnSelectorChange&&(p=a(),p!==b)?(r(),void(b=p)):(d.advanced.updateOnContentResize&&(f=[m.height(),m.width(),u.height(),u.width(),l.height(),l.width()],(f[0]!==v[0]||f[1]!==v[1]||f[2]!==v[2]||f[3]!==v[3]||f[4]!==v[4]||f[5]!==v[5])&&(r(),v=f)),d.advanced.updateOnImageLoad&&(g=i(),g!==_&&(m.find("img").each(function(){s(this.src)}),_=g)),void((d.advanced.updateOnSelectorChange||d.advanced.updateOnContentResize||d.advanced.updateOnImageLoad)&&o()))},60)}function i(){var e=0;return d.advanced.updateOnImageLoad&&(e=m.find("img").length),e}function s(e){function t(e,t){return function(){return t.apply(e,arguments)}}function o(){this.onload=null,r()}var i=new Image;i.onload=t(i,o),i.src=e}function a(){d.advanced.updateOnSelectorChange===!0&&(d.advanced.updateOnSelectorChange="*");var t=0,o=m.find(d.advanced.updateOnSelectorChange);return d.advanced.updateOnSelectorChange&&o.length>0&&o.each(function(){t+=e(this).height()+e(this).width()}),t}function r(){clearTimeout(m[0].autoUpdate),h.update.call(null,l[0])}var l=e(this),c=l.data(n),d=c.opt,u=e("#mTS_"+c.idx),m=e("#mTS_"+c.idx+"_container");if(t)return clearTimeout(m[0].autoUpdate),void B(m[0],"autoUpdate");var p,f,g,b=a(),v=[m.height(),m.width(),u.height(),u.width(),l.height(),l.width()],_=i();o()},F=function(t){var o=t.data(n),i=e("#mTS_"+o.idx+"_container");i.each(function(){N.call(this)})},z=function(t,o,i){function s(e){return l&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function a(){return[c.callbacks.alwaysTriggerOffsets||g>=b+_,c.callbacks.alwaysTriggerOffsets||-w>=g]}function r(){var e=[h[0].offsetTop,h[0].offsetLeft],o=[h.height(),h.width()],n=[u.height(),u.width()];t[0].mts={content:h,top:e[0],left:e[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(o[0])-n[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(o[1])-n[1])),direction:i.dir}}var l=t.data(n),c=l.opt,d={trigger:"internal",dir:"y",easing:"easeOut",dur:60*c.speed,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i=e.extend(d,i),u=e("#mTS_"+l.idx),h=e("#mTS_"+l.idx+"_container"),m=c.callbacks.onTotalScrollOffset?M.call(t,c.callbacks.onTotalScrollOffset):[0,0],p=c.callbacks.onTotalScrollBackOffset?M.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];switch(l.trigger=i.trigger,(0!==u.scrollTop()||0!==u.scrollLeft())&&u.scrollTop(0).scrollLeft(0),i.dir){case"x":var f="left",g=h[0].offsetLeft,b=u.width()-h.width(),v=o,_=m[1],w=p[1],y=_>0?_:0,$=w>0?w:0;break;case"y":var f="top",g=h[0].offsetTop,b=u.height()-h.height(),v=o,_=m[0],w=p[0],y=_>0?_:0,$=w>0?w:0}v>=0?(v=0,R.call(t,!1,1,i.dir)):b>=v?(v=b,R.call(t,!1,2,i.dir)):(v=v,R.call(t,!1,0,i.dir)),t[0].mts||(r(),s("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(h[0].onCompleteTimeout),(l.tweenRunning||!(0===g&&v>=0||g===b&&b>=v))&&L(h[0],f,Math.round(v),i.dur,i.easing,i.overwrite,{onStart:function(){i.callbacks&&i.onStart&&!l.tweenRunning&&(s("onScrollStart")&&(r(),c.callbacks.onScrollStart.call(t[0])),l.tweenRunning=!0,l.cbOffsets=a())},onUpdate:function(){i.callbacks&&i.onUpdate&&s("whileScrolling")&&(r(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(i.callbacks&&i.onComplete){"yx"===c.axis&&clearTimeout(h[0].onCompleteTimeout);var e=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){s("onScroll")&&(r(),c.callbacks.onScroll.call(t[0])),s("onTotalScroll")&&b+y>=v&&l.cbOffsets[0]&&(r(),c.callbacks.onTotalScroll.call(t[0])),s("onTotalScrollBack")&&v>=-$&&l.cbOffsets[1]&&(r(),c.callbacks.onTotalScrollBack.call(t[0])),l.tweenRunning=!1,h[0].idleTimer=0},e)}}})},L=function(e,o,i,n,s,a,r){function l(){$.stop||(_||f.call(),_=H()-v,c(),_>=$.time&&($.time=_>$.time?_+m-(_-$.time):_+m-1,$.time<_+1&&($.time=_+1)),$.time<n?$.id=p(l):b.call())}function c(){n>0?($.currVal=h($.time,w,k,n,s),y[o]=Math.round($.currVal)+"px"):y[o]=i+"px",g.call()}function d(){m=1e3/60,$.time=_+m,p=t.requestAnimationFrame?t.requestAnimationFrame:function(e){return c(),setTimeout(e,.01)},$.id=p(l)}function u(){null!=$.id&&(t.requestAnimationFrame?t.cancelAnimationFrame($.id):clearTimeout($.id),$.id=null)}function h(e,t,o,i,n){switch(n){case"linear":return o*e/i+t;case"linearOut":return e/=i,e--,o*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=i/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=i/2,1>e?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":return e/=i/2,1>e?o/2*e*e*e+t:(e-=2,o/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=i,e--,-o*(e*e*e*e-1)+t;case"easeOutStrong":return o*(-Math.pow(2,-10*e/i)+1)+t;case"easeOut":default:var s=(e/=i)*e,a=s*e;return t+o*(.499999999999997*a*s+-2.5*s*s+5.5*a+-6.5*s+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var m,p,r=r||{},f=r.onStart||function(){},g=r.onUpdate||function(){},b=r.onComplete||function(){},v=H(),_=0,w=e.offsetTop,y=e.style,$=e._mTween[o];"left"===o&&(w=e.offsetLeft);var k=i-w;$.stop=0,"none"!==a&&u(),d()},H=function(){return t.performance&&t.performance.now?t.performance.now():t.performance&&t.performance.webkitNow?t.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},N=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var o=["top","left"],i=0;i<o.length;i++){var n=o[i];e._mTween[n].id&&(t.requestAnimationFrame?t.cancelAnimationFrame(e._mTween[n].id):clearTimeout(e._mTween[n].id),e._mTween[n].id=null,e._mTween[n].stop=1)}},B=function(e,t){try{delete e[t]}catch(o){e[t]=null}},W=function(e){return!(e.which&&1!==e.which)},q=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},U=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};e.fn[i]=function(t){return h[t]?h[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):h.init.apply(this,arguments)},e[i]=function(t){return h[t]?h[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):h.init.apply(this,arguments)},e[i].defaults=a,t[i]=!0,e(t).load(function(){var t=e(s),o=[];if(t.length){t.each(function(){var t=e(this),i=t.data("mts-axis")||a.axis,s=t.data("mts-type")||a.type,r=t.data("mts-theme")||a.theme,l="auto-"+n+"-"+i+"-"+s+"-"+r,c=[l,i,s];t.addClass(l),-1===e.inArray(l,o)&&o.push(c)});for(var r=0;r<o.length;r++)e("."+o[r][0])[i]({axis:o[r][1],type:o[r][2]})}})}(jQuery,window,document),/**! hopscotch - v0.2.3
*
* Copyright 2014 LinkedIn Corp. All rights reserved.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
!function(context,namespace){var Hopscotch,HopscotchBubble,HopscotchCalloutManager,HopscotchI18N,customI18N,customRenderer,customEscape,utils,callbacks,helpers,winLoadHandler,defaultOpts,templateToUse="bubble_default",Sizzle=window.Sizzle||null,winHopscotch=context[namespace],undefinedStr="undefined",waitingToStart=!1,hasJquery=typeof window.jQuery!==undefinedStr,hasSessionStorage=!1,isStorageWritable=!1,document=window.document,rtlMatches={left:"right",right:"left"};try{typeof window.sessionStorage!==undefinedStr&&(hasSessionStorage=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),isStorageWritable=!0)}catch(err){}defaultOpts={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,isRtl:!1,cookieName:"hopscotch.tour.state"},winHopscotch||(Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),winLoadHandler=function(){waitingToStart&&winHopscotch.startTour()},utils={addClass:function(e,t){var o,i,n,s;if(e.className){for(i=t.split(/\s+/),o=" "+e.className+" ",n=0,s=i.length;s>n;++n)o.indexOf(" "+i[n]+" ")<0&&(o+=i[n]+" ");e.className=o.replace(/^\s+|\s+$/g,"")}else e.className=t},removeClass:function(e,t){var o,i,n,s;for(i=t.split(/\s+/),o=" "+e.className+" ",n=0,s=i.length;s>n;++n)o=o.replace(" "+i[n]+" "," ");e.className=o.replace(/^\s+|\s+$/g,"")},hasClass:function(e,t){var o;return e.className?(o=" "+e.className+" ",-1!==o.indexOf(" "+t+" ")):!1},getPixelValue:function(e){var t=typeof e;return"number"===t?e:"string"===t?parseInt(e,10):0},valOrDefault:function(e,t){return typeof e!==undefinedStr?e:t},invokeCallbackArrayHelper:function(e){var t;return Array.isArray(e)&&(t=helpers[e[0]],"function"==typeof t)?t.apply(this,e.slice(1)):void 0},invokeCallbackArray:function(e){var t,o;if(Array.isArray(e)){if("string"==typeof e[0])return utils.invokeCallbackArrayHelper(e);for(t=0,o=e.length;o>t;++t)utils.invokeCallback(e[t])}},invokeCallback:function(e){return"function"==typeof e?e():"string"==typeof e&&helpers[e]?helpers[e]():utils.invokeCallbackArray(e)},invokeEventCallbacks:function(e,t){var o,i,n=callbacks[e];if(t)return this.invokeCallback(t);for(o=0,i=n.length;i>o;++o)this.invokeCallback(n[o].cb)},getScrollTop:function(){var e;return e=typeof window.pageYOffset!==undefinedStr?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){var e;return e=typeof window.pageXOffset!==undefinedStr?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth},addEvtListener:function(e,t,o){return e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent("on"+t,o)},removeEvtListener:function(e,t,o){return e.removeEventListener?e.removeEventListener(t,o,!1):e.detachEvent("on"+t,o)},documentIsReady:function(){return"complete"===document.readyState||"interactive"===document.readyState},evtPreventDefault:function(e){e.preventDefault?e.preventDefault():event&&(event.returnValue=!1)},extend:function(e,t){var o;for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},getStepTargetHelper:function(e){var t=document.getElementById(e);if(t)return t;if(hasJquery)return t=jQuery(e),t.length?t[0]:null;if(Sizzle)return t=new Sizzle(e),t.length?t[0]:null;if(document.querySelector)try{return document.querySelector(e)}catch(o){}return/^#[a-zA-Z][\w-_:.]*$/.test(e)?document.getElementById(e.substring(1)):null},getStepTarget:function(e){var t;if(!e||!e.target)return null;if("string"==typeof e.target)return utils.getStepTargetHelper(e.target);if(Array.isArray(e.target)){var o,i;for(o=0,i=e.target.length;i>o;o++)if("string"==typeof e.target[o]&&(t=utils.getStepTargetHelper(e.target[o])))return t;return null}return e.target},getI18NString:function(e){return customI18N[e]||HopscotchI18N[e]},setState:function(e,t,o){var i,n="";if(hasSessionStorage&&isStorageWritable)try{sessionStorage.setItem(e,t)}catch(s){isStorageWritable=!1,this.setState(e,t,o)}else hasSessionStorage&&sessionStorage.removeItem(e),o&&(i=new Date,i.setTime(i.getTime()+24*o*60*60*1e3),n="; expires="+i.toGMTString()),document.cookie=e+"="+t+n+"; path=/"},getState:function(e){var t,o,i,n=e+"=",s=document.cookie.split(";");if(hasSessionStorage&&(i=sessionStorage.getItem(e)))return i;for(t=0;t<s.length;t++){for(o=s[t];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n)){i=o.substring(n.length,o.length);break}}return i},clearState:function(e){hasSessionStorage?sessionStorage.removeItem(e):this.setState(e,"",-1)},normalizePlacement:function(e){!e.placement&&e.orientation&&(e.placement=e.orientation)},flipPlacement:function(e){if(e.isRtl&&!e._isFlipped){var t,o,i=["orientation","placement"];e.xOffset&&(e.xOffset=-1*this.getPixelValue(e.xOffset));for(o in i)t=i[o],e.hasOwnProperty(t)&&rtlMatches.hasOwnProperty(e[t])&&(e[t]=rtlMatches[e[t]]);e._isFlipped=!0}}},utils.addEvtListener(window,"load",winLoadHandler),callbacks={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},helpers={},HopscotchI18N={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},customI18N={},HopscotchBubble=function(e){this.init(e)},HopscotchBubble.prototype={isShowing:!1,currStep:void 0,setPosition:function(e){var t,o,i,n,s,a,r,l=utils.getStepTarget(e),c=this.element,d=this.arrowEl,u=e.isRtl?"right":"left";if(utils.flipPlacement(e),utils.normalizePlacement(e),o=c.offsetWidth,t=c.offsetHeight,utils.removeClass(c,"fade-in-down fade-in-up fade-in-left fade-in-right"),i=l.getBoundingClientRect(),r=e.isRtl?i.right-o:i.left,"top"===e.placement)n=i.top-t-this.opt.arrowWidth,s=r;else if("bottom"===e.placement)n=i.bottom+this.opt.arrowWidth,s=r;else if("left"===e.placement)n=i.top,s=i.left-o-this.opt.arrowWidth;else{if("right"!==e.placement)throw"Bubble placement failed because step.placement is invalid or undefined!";n=i.top,s=i.right+this.opt.arrowWidth}a="center"!==e.arrowOffset?utils.getPixelValue(e.arrowOffset):e.arrowOffset,a?"top"===e.placement||"bottom"===e.placement?(d.style.top="",d.style[u]="center"===a?Math.floor(o/2-d.offsetWidth/2)+"px":a+"px"):("left"===e.placement||"right"===e.placement)&&(d.style[u]="",d.style.top="center"===a?Math.floor(t/2-d.offsetHeight/2)+"px":a+"px"):(d.style.top="",d.style[u]=""),"center"===e.xOffset?s=i.left+l.offsetWidth/2-o/2:s+=utils.getPixelValue(e.xOffset),"center"===e.yOffset?n=i.top+l.offsetHeight/2-t/2:n+=utils.getPixelValue(e.yOffset),e.fixedElement||(n+=utils.getScrollTop(),s+=utils.getScrollLeft()),c.style.position=e.fixedElement?"fixed":"absolute",c.style.top=n+"px",c.style.left=s+"px"},render:function(e,t,o){var n,s,a,r,l,c,d,u,h=this.element;if(e?this.currStep=e:this.currStep&&(e=this.currStep),this.opt.isTourBubble?(r=winHopscotch.getCurrTour(),r&&(s=r.customData,n=r.customRenderer,e.isRtl=e.hasOwnProperty("isRtl")?e.isRtl:r.hasOwnProperty("isRtl")?r.isRtl:this.opt.isRtl,a=r.unsafe,Array.isArray(r.steps)&&(l=r.steps.length,d=t===l-1))):(s=e.customData,n=e.customRenderer,a=e.unsafe,e.isRtl=e.hasOwnProperty("isRtl")?e.isRtl:this.opt.isRtl),c=utils.getI18NString(d?"doneBtn":e.showSkip?"skipBtn":"nextBtn"),utils.flipPlacement(e),utils.normalizePlacement(e),this.placement=e.placement,u={i18n:{prevBtn:utils.getI18NString("prevBtn"),nextBtn:c,closeTooltip:utils.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(t))},buttons:{showPrev:utils.valOrDefault(e.showPrevButton,this.opt.showPrevButton)&&t>0,showNext:utils.valOrDefault(e.showNextButton,this.opt.showNextButton),showCTA:utils.valOrDefault(e.showCTAButton&&e.ctaLabel,!1),ctaLabel:e.ctaLabel,showClose:utils.valOrDefault(this.opt.showCloseButton,!0)},step:{num:t,isLast:utils.valOrDefault(d,!1),title:e.title||"",content:e.content||"",isRtl:e.isRtl,placement:e.placement,padding:utils.valOrDefault(e.padding,this.opt.bubblePadding),width:utils.getPixelValue(e.width)||this.opt.bubbleWidth,customData:e.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:l,unsafe:utils.valOrDefault(a,!1),customData:s||{}}},"function"==typeof n)h.innerHTML=n(u);else if("string"==typeof n){if(!hopscotch.templates||"function"!=typeof hopscotch.templates[n])throw'Bubble rendering failed - template "'+n+'" is not a function.';h.innerHTML=hopscotch.templates[n](u)}else if(customRenderer)h.innerHTML=customRenderer(u);else{if(!hopscotch.templates||"function"!=typeof hopscotch.templates[templateToUse])throw'Bubble rendering failed - template "'+templateToUse+'" is not a function.';h.innerHTML=hopscotch.templates[templateToUse](u)}for(children=h.children,numChildren=children.length,i=0;numChildren>i;i++)node=children[i],utils.hasClass(node,"hopscotch-arrow")&&(this.arrowEl=node);return h.style.zIndex="number"==typeof e.zindex?e.zindex:"",this._setArrow(e.placement),this.hide(!1),this.setPosition(e),o&&o(!e.fixedElement),this},_getStepNum:function(e){var t,o,i=0,n=winHopscotch.getSkippedStepsIndexes(),s=n.length;for(o=0;s>o;o++)t=n[o],e>t&&i++;return e-i},_getStepI18nNum:function(e){var t=utils.getI18NString("stepNums");return t&&e<t.length?e=t[e]:e+=1,e},_setArrow:function(e){utils.removeClass(this.arrowEl,"down up right left"),"top"===e?utils.addClass(this.arrowEl,"down"):"bottom"===e?utils.addClass(this.arrowEl,"up"):"left"===e?utils.addClass(this.arrowEl,"right"):"right"===e&&utils.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var e=this,t="fade-in-"+this._getArrowDirection(),o=1e3;return utils.removeClass(this.element,"hide"),utils.addClass(this.element,t),setTimeout(function(){utils.removeClass(e.element,"invisible")},50),setTimeout(function(){utils.removeClass(e.element,t)},o),this.isShowing=!0,this},hide:function(e){var t=this.element;return e=utils.valOrDefault(e,!0),t.style.top="",t.style.left="",e?(utils.addClass(t,"hide"),utils.removeClass(t,"invisible")):(utils.removeClass(t,"hide"),utils.addClass(t,"invisible")),utils.removeClass(t,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},destroy:function(){var e=this.element;e&&e.parentNode.removeChild(e),utils.removeEvtListener(e,"click",this.clickCb)},_handleBubbleClick:function(e){function t(o){return o===e.currentTarget?null:utils.hasClass(o,"hopscotch-cta")?"cta":utils.hasClass(o,"hopscotch-next")?"next":utils.hasClass(o,"hopscotch-prev")?"prev":utils.hasClass(o,"hopscotch-close")?"close":t(o.parentElement)}var o;e=e||window.event;var i=e.target||e.srcElement;if(o=t(i),"cta"===o)this.opt.isTourBubble||winHopscotch.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&utils.invokeCallback(this.currStep.onCTA);else if("next"===o)winHopscotch.nextStep(!0);else if("prev"===o)winHopscotch.prevStep(!0);else if("close"===o){if(this.opt.isTourBubble){var n=winHopscotch.getCurrStepNum(),s=winHopscotch.getCurrTour(),a=n===s.steps.length-1;utils.invokeEventCallbacks("close"),winHopscotch.endTour(!0,a)}else this.opt.onClose&&utils.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?winHopscotch.getCalloutManager().removeCallout(this.opt.id):this.destroy();utils.evtPreventDefault(e)}},init:function(e){var t,o,i,n=document.createElement("div"),s=this,a=!1;this.element=n,i={showPrevButton:defaultOpts.showPrevButton,showNextButton:defaultOpts.showNextButton,bubbleWidth:defaultOpts.bubbleWidth,bubblePadding:defaultOpts.bubblePadding,arrowWidth:defaultOpts.arrowWidth,isRtl:defaultOpts.isRtl,showNumber:!0,isTourBubble:!0},e=typeof e===undefinedStr?{}:e,utils.extend(i,e),this.opt=i,n.className="hopscotch-bubble animated",i.isTourBubble||utils.addClass(n,"hopscotch-callout no-number"),t=function(){!a&&s.isShowing&&(a=!0,setTimeout(function(){s.setPosition(s.currStep),a=!1},100))},utils.addEvtListener(window,"resize",t),this.clickCb=function(e){s._handleBubbleClick(e)},utils.addEvtListener(n,"click",this.clickCb),this.hide(),utils.documentIsReady()?document.body.appendChild(n):(document.addEventListener?(o=function(){document.removeEventListener("DOMContentLoaded",o),window.removeEventListener("load",o),document.body.appendChild(n)},document.addEventListener("DOMContentLoaded",o,!1)):(o=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),window.detachEvent("onload",o),document.body.appendChild(n))},document.attachEvent("onreadystatechange",o)),utils.addEvtListener(window,"load",o))}},HopscotchCalloutManager=function(){var e={},t={};this.createCallout=function(o){var i;if(!o.id)throw"Must specify a callout id.";if(e[o.id])throw"Callout by that id already exists. Please choose a unique id.";return o.showNextButton=o.showPrevButton=!1,o.isTourBubble=!1,i=new HopscotchBubble(o),e[o.id]=i,t[o.id]=o,o.target&&i.render(o,null,function(){i.show(),o.onShow&&utils.invokeCallback(o.onShow)}),i},this.getCallout=function(t){return e[t]},this.removeAllCallouts=function(){var t;for(t in e)e.hasOwnProperty(t)&&this.removeCallout(t)},this.removeCallout=function(o){var i=e[o];e[o]=null,t[o]=null,i&&i.destroy()},this.refreshCalloutPositions=function(){var o,i,n;for(o in e)e.hasOwnProperty(o)&&t.hasOwnProperty(o)&&(i=e[o],n=t[o],i&&n&&i.setPosition(n))}},Hopscotch=function(e){var t,o,i,n,s,a,r,l,c=this,d={},u=[],h=function(e){return t||(t=new HopscotchBubble(i)),e&&utils.extend(t.opt,{bubblePadding:m("bubblePadding"),bubbleWidth:m("bubbleWidth"),showNextButton:m("showNextButton"),showPrevButton:m("showPrevButton"),showCloseButton:m("showCloseButton"),arrowWidth:m("arrowWidth"),isRtl:m("isRtl")}),t},m=function(e){return"undefined"==typeof i?defaultOpts[e]:utils.valOrDefault(i[e],defaultOpts[e])},p=function(){var e;return e=!n||0>s||s>=n.steps.length?null:n.steps[s]},f=function(){c.nextStep()},g=function(e){var t,o,i,n,s,a,r=h(),l=r.element,c=utils.getPixelValue(l.style.top),d=c+utils.getPixelValue(l.offsetHeight),u=utils.getStepTarget(p()),f=u.getBoundingClientRect(),g=f.top+utils.getScrollTop(),b=f.bottom+utils.getScrollTop(),v=g>c?c:g,_=d>b?d:b,w=utils.getScrollTop(),y=w+utils.getWindowHeight(),$=v-m("scrollTopMargin");v>=w&&(v<=w+m("scrollTopMargin")||y>=_)?e&&e():m("smoothScroll")?typeof YAHOO!==undefinedStr&&typeof YAHOO.env!==undefinedStr&&typeof YAHOO.env.ua!==undefinedStr&&typeof YAHOO.util!==undefinedStr&&typeof YAHOO.util.Scroll!==undefinedStr?(t=YAHOO.env.ua.webkit?document.body:document.documentElement,i=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,o=new YAHOO.util.Scroll(t,{scroll:{to:[0,$]}},m("scrollDuration")/1e3,i),o.onComplete.subscribe(e),o.animate()):hasJquery?jQuery("body, html").animate({scrollTop:$},m("scrollDuration"),e):(0>$&&($=0),n=w>v?-1:1,s=Math.abs(w-$)/(m("scrollDuration")/10),(a=function(){var t=utils.getScrollTop(),o=t+n*s;return n>0&&o>=$||0>n&&$>=o?(o=$,e&&e(),void window.scrollTo(0,o)):(window.scrollTo(0,o),utils.getScrollTop()===t?void(e&&e()):void setTimeout(a,10))})()):(window.scrollTo(0,$),e&&e())},b=function(e,t){var o,i,a;s+e>=0&&s+e<n.steps.length?(s+=e,i=p(),a=function(){o=utils.getStepTarget(i),o?(d[s]&&delete d[s],t(s)):(d[s]=!0,utils.invokeEventCallbacks("error"),b(e,t))},i.delay?setTimeout(a,i.delay):a()):t(-1)},v=function(e,t){var o,i,a,r,l=h(),c=this;if(l.hide(),e=utils.valOrDefault(e,!0),o=p(),o.nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(o),"click",f),i=o,a=t>0?i.multipage:s>0&&n.steps[s-1].multipage,r=function(o){var n;if(-1===o)return this.endTour(!0);if(e&&(n=t>0?utils.invokeEventCallbacks("next",i.onNext):utils.invokeEventCallbacks("prev",i.onPrev)),o===s){if(a)return void $();n=utils.valOrDefault(n,!0),n?this.showStep(o):this.endTour(!1)}},!a&&m("skipIfNoElement"))b(t,function(e){r.call(c,e)});else if(s+t>=0&&s+t<n.steps.length){if(s+=t,o=p(),!utils.getStepTarget(o)&&!a)return utils.invokeEventCallbacks("error"),this.endTour(!0,!1);r.call(this,s)}return this},_=function(e){var t,o,i,n={};for(t in e)e.hasOwnProperty(t)&&"id"!==t&&"steps"!==t&&(n[t]=e[t]);return l.call(this,n,!0),o=utils.getState(m("cookieName")),o&&(i=o.split(":"),a=i[0],r=i[1],i.length>2&&(u=i[2].split(",")),r=parseInt(r,10)),this},w=function(e,t,o){var i,n;if(s=e||0,d=t||{},i=p(),n=utils.getStepTarget(i))return void o(s);if(!n){if(utils.invokeEventCallbacks("error"),d[s]=!0,m("skipIfNoElement"))return void b(1,o);s=-1,o(s)}},y=function(e){function t(){i.show(),utils.invokeEventCallbacks("show",o.onShow)}var o=n.steps[e],i=h(),a=utils.getStepTarget(o);s!==e&&p().nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(p()),"click",f),s=e,i.hide(!1),i.render(o,e,function(e){e?g(t):t(),o.nextOnTargetClick&&utils.addEvtListener(a,"click",f)}),$()},$=function(){var e=n.id+":"+s,t=winHopscotch.getSkippedStepsIndexes();t&&t.length>0&&(e+=":"+t.join(",")),utils.setState(m("cookieName"),e,1)},k=function(e){e&&this.configure(e)};this.getCalloutManager=function(){return typeof o===undefinedStr&&(o=new HopscotchCalloutManager),o},this.startTour=function(e,t){var o,i,s={},l=this;if(n||(n=e,_.call(this,e)),typeof t!==undefinedStr){if(t>=n.steps.length)throw"Specified step number out of bounds.";i=t}if(!utils.documentIsReady())return waitingToStart=!0,this;if("undefined"==typeof i&&n.id===a&&typeof r!==undefinedStr){if(i=r,u.length>0)for(var c=0,d=u.length;d>c;c++)s[u[c]]=!0}else i||(i=0);return w(i,s,function(e){var t=-1!==e&&utils.getStepTarget(n.steps[e]);return t?(utils.invokeEventCallbacks("start"),o=h(),o.hide(!1),l.isActive=!0,void(utils.getStepTarget(p())?l.showStep(e):(utils.invokeEventCallbacks("error"),m("skipIfNoElement")&&l.nextStep(!1)))):void l.endTour(!1,!1)}),this},this.showStep=function(e){var t=n.steps[e];return t.delay?setTimeout(function(){y(e)},t.delay):y(e),this},this.prevStep=function(e){return v.call(this,e,-1),this},this.nextStep=function(e){return v.call(this,e,1),this},this.endTour=function(e,t){var o,i=h();return e=utils.valOrDefault(e,!0),t=utils.valOrDefault(t,!0),n&&(o=p(),o&&o.nextOnTargetClick&&utils.removeEvtListener(utils.getStepTarget(o),"click",f)),s=0,r=void 0,i.hide(),e&&utils.clearState(m("cookieName")),this.isActive&&(this.isActive=!1,n&&t&&utils.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),n=null,this},this.getCurrTour=function(){return n},this.getCurrTarget=function(){return utils.getStepTarget(p())},this.getCurrStepNum=function(){return s},this.getSkippedStepsIndexes=function(){var e,t=[];for(e in d)t.push(e);return t},this.refreshBubblePosition=function(){var e=p();return e&&h().setPosition(e),this.getCalloutManager().refreshCalloutPositions(),this},this.listen=function(e,t,o){return e&&callbacks[e].push({cb:t,fromTour:o}),this},this.unlisten=function(e,t){var o,i,n=callbacks[e];for(o=0,i=n.length;i>o;++o)n[o]===t&&n.splice(o,1);return this},this.removeCallbacks=function(e,t){var o,i,n,s;for(s in callbacks)if(!e||e===s)if(t)for(o=callbacks[s],i=0,n=o.length;n>i;++i)o[i].fromTour&&(o.splice(i--,1),--n);else callbacks[s]=[];return this},this.registerHelper=function(e,t){"string"==typeof e&&"function"==typeof t&&(helpers[e]=t)},this.unregisterHelper=function(e){helpers[e]=null},this.invokeHelper=function(e){var t,o,i=[];for(t=1,o=arguments.length;o>t;++t)i.push(arguments[t]);helpers[e]&&helpers[e].call(null,i)},this.setCookieName=function(e){return i.cookieName=e,this},this.resetDefaultOptions=function(){return i={},this},this.resetDefaultI18N=function(){return customI18N={},this},this.getState=function(){return utils.getState(m("cookieName"))},l=function(e,t){var o,n,s,a,r=["next","prev","start","end","show","error","close"];for(i||this.resetDefaultOptions(),utils.extend(i,e),e&&utils.extend(customI18N,e.i18n),s=0,a=r.length;a>s;++s)n="on"+r[s].charAt(0).toUpperCase()+r[s].substring(1),e[n]&&this.listen(r[s],e[n],t);return o=h(!0),this},this.configure=function(e){return l.call(this,e,!1)},this.setRenderer=function(e){var t=typeof e;return"string"===t?(templateToUse=e,customRenderer=void 0):"function"===t&&(customRenderer=e),this},this.setEscaper=function(e){return"function"==typeof e&&(customEscape=e),this},k.call(this,e)},winHopscotch=new Hopscotch,context[namespace]=winHopscotch,function(){var _={};_.escape=function(e){return customEscape?customEscape(e):null==e?"":(""+e).replace(new RegExp("[&<>\"']","g"),function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":'"'==e?"&quot;":"'"==e?"&#x27;":void 0})},this.hopscotch=this.hopscotch||{},this.hopscotch.templates=this.hopscotch.templates||{},this.hopscotch.templates.bubble_default=function(obj){function optEscape(e,t){return t?_.escape(e):e}obj||(obj={});var __t,__p="";with(_.escape,Array.prototype.join,obj)__p+='\n<div class="hopscotch-bubble-container" style="width: '+(null==(__t=step.width)?"":__t)+"px; padding: "+(null==(__t=step.padding)?"":__t)+'px;">\n  ',tour.isTour&&(__p+='<span class="hopscotch-bubble-number">'+(null==(__t=i18n.stepNum)?"":__t)+"</span>"),__p+='\n  <div class="hopscotch-bubble-content">\n    ',""!==step.title&&(__p+='<h3 class="hopscotch-title">'+(null==(__t=optEscape(step.title,tour.unsafe))?"":__t)+"</h3>"),__p+="\n    ",""!==step.content&&(__p+='<div class="hopscotch-content">'+(null==(__t=optEscape(step.content,tour.unsafe))?"":__t)+"</div>"),__p+='\n  </div>\n  <div class="hopscotch-actions">\n    ',buttons.showPrev&&(__p+='<button class="hopscotch-nav-button prev hopscotch-prev">'+(null==(__t=i18n.prevBtn)?"":__t)+"</button>"),__p+="\n    ",buttons.showCTA&&(__p+='<button class="hopscotch-nav-button next hopscotch-cta">'+(null==(__t=buttons.ctaLabel)?"":__t)+"</button>"),__p+="\n    ",buttons.showNext&&(__p+='<button class="hopscotch-nav-button next hopscotch-next">'+(null==(__t=i18n.nextBtn)?"":__t)+"</button>"),__p+="\n  </div>\n  ",buttons.showClose&&(__p+='<a title="'+(null==(__t=i18n.closeTooltip)?"":__t)+'" href="#" class="hopscotch-bubble-close hopscotch-close">'+(null==(__t=i18n.closeTooltip)?"":__t)+"</a>"),__p+='\n</div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"></div>\n  <div class="hopscotch-bubble-arrow"></div>\n</div>';return __p}}())}(window,"hopscotch"),bmRoom.twitter={},bmRoom.twitter.unread=0,bmRoom.twitter.html=function(e){var t=Object.keys(e.retweet_users).indexOf(bmRoom.user.opens[bmRoom.socket.io.engine.id].id)>=0?"onactive":"",o=e.favorite_users.indexOf(bmRoom.user.opens[bmRoom.socket.io.engine.id].id)>=0?"onactive":"",i="twitter"==e.from_type?"":"ontwitter",n=moment(new Date(e.timestamp)),s=n.format("h:mm:ss a"),a=1==$("#hide_tweets_flag").val()?' style="display:none"':"",r=/(href=['"])?(https?\:\/\/\S*)((\s+)|$)/gi;e.text=e.text.replace(r,function(e,t,o){return t?t+o:'<a href="'+o+'" target="_blank">'+o+"</a>"});var l='<li class="is_twitter '+i+'" id="'+e.id_str+'" data-post-user="'+e.post_user_id+'"'+a+">";return l+='<div class="clroom-groupchat-img"><img alt="'+e.user.screen_name+'" src="'+e.user.profile_image_url_https+'"></div>',l+='<div class="clroom-groupchat-right"><div class="clroom-groupchat-right-in">',"twitter"==e.from_type&&(l+='<div class="clroom-chat-from">FROM TWITTER</div>'),l+='<div class="clroom-groupchat-name">',l+='<div class="clroom-groupchat-name-tw">'+e.user.name+"</div>",l+=' <div class="clroom-chat-twitter"><a target="_blank" href="https://twitter.com/@'+e.user.screen_name+'">@'+e.user.screen_name+"</a></div>",l+='<div class="clroom-groupchat-date" timestamp="'+e.timestamp+'">'+s+"</div>",l+="</div>",l+='<div class="clroom-groupchat-text">',l+=unescape(e.text),l+="</div>",l+='<ul class="clroom-group-chat-subnav">',e.post_user_id!=bmRoom.user.opens[bmRoom.socket.io.engine.id].id&&(l+='<li><a href="javascript:void(0);" class="subnav-retweet '+t+'" id="retweet_'+e.id_str+'" data-retweet-id="'+e.retweet_users[bmRoom.user.opens[bmRoom.socket.io.engine.id].id]+'"><span class="room-retweet"></span></a></li>'),l+='<li><a href="javascript:void(0);" class="subnav-presenter '+o+'" id="favor_'+e.id_str+'"><span class="room-admin"></span></a></li>',(e.post_user_id==bmRoom.user.opens[bmRoom.socket.io.engine.id].id||bmRoom.user.isAdmin(bmRoom.socket.io.engine.id))&&(l+='<li><a class="subnav-delete" href="javascript:void(0);" id="del_'+e.id_str+'"><span class="room-delete"></span></a></li>'),l+="</ul>",l+="</div></div></li>"},$(document).on("keydown","#conference_twitter_hash_tag",function(e){13==e.which&&$("#add_hashtag").click()}),$(document).on("click","#twitter_show_tag, #twitter_learn_more, #twitter_add_tag",function(){var e=bmRoom.admin.admin_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1,t=bmRoom.admin.presenter_list.indexOf(bmRoom.socket.io.engine.id)>-1?!0:!1;("twitter_show_tag"==this.id&&$("#twitter_show_tag").find("#more_info").length>0||"twitter_show_tag"!=this.id)&&(e||t)&&($("#roomchat_group_area").removeClass().addClass("clroom-groupchat-body onactive hashtagshow"),$("#close_twitter").show(),$("#close_twitter_attendee").show())}),$(document).on("click","#close_twitter",function(){var e=$("#roomchat_group_area").attr("data-hashtag").length>1?" logedin":" addhashtag";$("#roomchat_group_area").removeClass().addClass(0==$("#roomchat_group_area").attr("data-hashtag").length||"#"==$("#roomchat_group_area").attr("data-hashtag")?"clroom-groupchat-body onactive"+e:"clroom-groupchat-body onactive logedin"),$("#close_twitter").hide()}),$(document).on("click","#close_twitter_attendee",function(){var e=$("#roomchat_group_area").attr("data-hashtag").length>1?" logedin":"";$("#roomchat_group_area").removeClass().addClass("clroom-groupchat-body onactive"+e),$("#close_twitter_attendee").hide()}),$.fn.setCursorPosition=function(e,t){var o=document.querySelector(e);o.focus();var i=o.firstChild,n=document.createRange();n.setStart(i,t),n.setEnd(i,t);var s=window.getSelection();s.removeAllRanges(),s.addRange(n)};var oauth_window;bmRoom.twitter.start=function(){$(document).on("click","#add_hashtag",function(){var e=checkHash($("#conference_twitter_hash_tag").val());$("#chat_bottom").attr("data-token")&&$("#chat_bottom").attr("data-token-secret")||0==$("#conference_twitter_hash_tag").val().length?(bmRoom.socket.emit("new-hashtag",{new_hashtag:e,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}),bmRoom.socket.emit("check-screen-name",{user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}),$.ajax({type:"POST",url:"/conferences/"+$("#conference-obfuscated-id").val()+"/add_twitter_hash_tag?twitter_hash_tag="+encodeURIComponent(e)+"&user_id="+$("#roomchat_group_area").attr("data-uid")}),$("#roomchat_group_area").attr("data-hashtag",e),$("#roomchat_group_area").attr("data-token")&&$("#roomchat_group_area").attr("data-token-secret")||($("#roomchat_group_area").attr("data-token",$("#chat_bottom").attr("data-token")),$("#roomchat_group_area").attr("data-token-secret",$("#chat_bottom").attr("data-token-secret")))):oauth_window=window.open("/auth/twitter?request_source=conference_room_add_hashtag&twitter_hash_tag="+encodeURIComponent(e)+"&conference_id="+$("#conference-obfuscated-id").val(),"","width=600, height=500")}),$(document).on("click","#remove_hashtag",function(){$("#conference_twitter_hash_tag").val(""),$("#add_hashtag").click()}),$(document).on("click","#hide_tweets_attendee",function(){var e=bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?" addhashtag":"";e=$("#roomchat_group_area").attr("data-hashtag").length>1?" logedin":e,1==$("#hide_tweets_flag").val()?($("#hide_tweets_flag").val(0),$(".is_twitter").show(),$("#hide_tweets_attendee").text("Hide All Tweets"),$("#roomchat_group_area")[0].className="clroom-groupchat-body onactive"+e):($("#hide_tweets_flag").val(1),$(".is_twitter").hide(),$("#hide_tweets_attendee").text("Show All Tweets"),$("#roomchat_group_area")[0].className="clroom-groupchat-body onactive"+e),$("#close_twitter_attendee").hide()}),bmRoom.socket.on("update_screen_name",function(e){"undefined"!=typeof bmRoom.user.opens[e.sid]&&($("#screen_name_"+e.sid).text("@"+e.screen_name),$("#screen_name_"+e.sid).attr("href","https://twitter.com/@"+e.screen_name),bmRoom.user.opens[e.sid].twitter_name=e.screen_name)}),bmRoom.socket.on("change_hash_tag",function(e){$("#conference_twitter_hash_tag").val(e),$("#roomchat_group_area").attr("data-hashtag",e);var t="";"#"==e?"true"==$("#conference-enable-twitter").val()&&(t=bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?"addhashtag":""):t="logedin",$("#roomchat_group_area")[0].className=$("#roomchat_group_area").hasClass("onactive")?"clroom-groupchat-body onactive "+t:"clroom-groupchat-body logedin"+t,$("#twitter_show_tag>a").html($("#twitter_show_tag a>span").length>0?e+' <span class="room-edit"></span>':e)}),$(document).ready(function(){bmRoom.socket.emit("check-screen-name",{user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}),bmRoom.socket.emit("tweets:load"),"false"==$("#conference-enable-twitter").val()&&bmRoom.socket.emit("new-hashtag",{new_hashtag:"#"})}),$("#post_and_tweet").click(function(){if($("#chat_bottom").attr("data-token")&&$("#chat_bottom").attr("data-token-secret")){var e;e=$("#chat_input_value").val().replace(/&nbsp;|<br>/gi," "),$.trim($("#chat_input_value").val().replace(/&nbsp;|<br>/gi," ")).length>0&&($("#chat_input").html(""),$("#chat_input_value").val(""),$("#type_count").html("0"),bmRoom.socket.emit("post-tweet",{post_user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,tweet_content:escape(e),conference_url:window.location.href,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")})),bmRoom.socket.emit("check-screen-name",{user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")})}else oauth_window=window.open("/auth/twitter?request_source=conference_room_post_tweet","","width=600, height=500")}),$(document).on("click","[id^=retweet_]",function(){var e=this.id.replace("retweet_","");$("#chat_bottom").attr("data-token")&&$("#chat_bottom").attr("data-token-secret")?($(this).hasClass("onactive")?bmRoom.socket.emit("undo_retweet",{retweet_id:$(this).attr("data-retweet-id"),org_id:e,user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}):bmRoom.socket.emit("retweet",{retweet_id:e,user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}),bmRoom.socket.emit("check-screen-name",{user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")})):oauth_window=window.open("/auth/twitter?request_source=conference_room_retweet&tweet_id="+e,"","width=600, height=500")}),bmRoom.socket.on("retweet",function(e){"undo"==e.type?($("#retweet_"+e.org_id).removeClass("onactive"),$("#retweet_"+e.org_id).attr("data-retweet-id","")):($("#retweet_"+e.org_id).addClass("onactive"),$("#retweet_"+e.org_id).attr("data-retweet-id",e.id))}),$(document).on("click","[id^=favor_]",function(){var e=this.id.replace("favor_","");$("#chat_bottom").attr("data-token")&&$("#chat_bottom").attr("data-token-secret")?($(this).hasClass("onactive")?bmRoom.socket.emit("undo_favorite_tweet",{favor_id:e,user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}):bmRoom.socket.emit("favorite_tweet",{favor_id:e,user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}),bmRoom.socket.emit("check-screen-name",{user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")})):oauth_window=window.open("/auth/twitter?request_source=conference_room_favorite_tweet&tweet_id="+e,"","width=600, height=500")}),bmRoom.socket.on("favorite_tweet",function(e){"undo"==e.type?$("#favor_"+e.id).removeClass("onactive"):$("#favor_"+e.id).addClass("onactive")}),$(document).on("click","[id^=del_]",function(){var e=this.id.replace("del_","");$("#chat_bottom").attr("data-token")&&$("#chat_bottom").attr("data-token-secret")?(bmRoom.socket.emit("delete_tweet",{delete_id:e,user_id:bmRoom.user.opens[bmRoom.socket.io.engine.id].id,user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")}),bmRoom.socket.emit("check-screen-name",{user_token:$("#chat_bottom").attr("data-token"),user_token_secret:$("#chat_bottom").attr("data-token-secret")})):oauth_window=window.open("/auth/twitter?request_source=conference_room_delete_tweet&tweet_id="+e,"","width=600, height=500")
}),bmRoom.socket.on("tweet:sync_delete",function(e){$("#"+e).slideUp("slow",function(){$(this).remove()})}),bmRoom.socket.on("load_new_tweets",function(e){$.each(e,function(e,t){if(t.room_id==bmRoom.roomID)if("tweet"==t.type&&t&&!t.retweeted_status&&$("#"+t.id_str).length<1){if($("#chat-message").is(":visible")){var o=bmRoom.twitter.html(t);bmRoom.chat.prepend(o,$("#chat-message"))}else{bmRoom.chat.store["group-chat"]=bmRoom.chat.store["group-chat"]||[],bmRoom.chat.store["group-chat"].push(t);var i=$('<span class="unread-count" />'),n=$.grep(bmRoom.chat.store["group-chat"],function(e){return"tweet"==e.type});n.length>100&&bmRoom.chat.store["group-chat"].splice(n[0],1),i.html(bmRoom.chat.store["group-chat"].length>99?"<i>99+</i>":"<i>"+bmRoom.chat.store["group-chat"].length+"</i>"),$("#roomchat_group .unread-count").remove(),$("#roomchat_group").append(i)}$(".is_twitter").length>200&&$(".is_twitter")[0].remove()}else if("chat"==t.type){var s=t;if(0==$("#msg-"+s.timestamp).length){var a=bmRoom.chat.message(s);bmRoom.chat.prepend(a,$("#chat-message"))}}})})},bmRoom.poll={},bmRoom.poll.choice=[],bmRoom.poll.responseHtml=function(e){var t=moment(new Date(e.timestamp)),o=t.format("h:mm a"),i='<div class="clroom-modal-box is_poll" id="'+e.poll_id+'"><div class="clroom-popupbox-content poll-width-box">';i+='<form accept-charset="UTF-8" action="/polls/'+e.poll_id+'/poll_responses" class="new_poll_response" data-remote="true" id="new_poll_response_'+e.poll_id+'" method="post">',i+='<input id="poll_response_source" name="poll_response[source]" type="hidden" value="bigroom">',i+='<div class="clroom-popupbox-close"><a href="javascript:void(0);" onclick=$(".clroom-modal-box.is_poll").remove()><span class="room-delete"></span></a></div>',i+='<div class="clroom-popupbox-content-in">',i+='<div class="clroom-popupbox-content-title-box">',i+='<div class="clroom-popupbox-content-title">Poll</div>',i+='<div class="clroom-popupbox-content-subtitle">',i+="By "+e.name+" \xb7 "+o,i+="</div>",i+="</div>",i+='<div class="clroom-popupbox-clear"><div class="clear"><div class="clroom-popup-poll-right">',i+='<div class="clroom-popup-poll-question-text">',i+=e.poll_question,i+="</div>",i+='<ul class="clroom-popup-poll-option">';for(key in e.choice)e.choice[key].value.length>0&&(i+="single"==e.selection_method?'<li><input type="radio" id="poll_response_poll_answers_attributes_0_poll_choice_id_'+e.choice[key].choice_id+'" name="poll_response[poll_answers_attributes][0][poll_choice_id]" value="'+e.choice[key].choice_id+'" data-poll-id="'+e.poll_id+'" data-label="'+e.choice[key].value+'" class="select_poll_choice"></li>':'<li><input type="checkbox" id="poll_response_poll_answers_attributes_'+key+"_poll_choice_id_"+e.choice[key].choice_id+'" name="poll_response[poll_answers_attributes]['+key+'][poll_choice_id]" value="'+e.choice[key].choice_id+'" data-poll-id="'+e.poll_id+'" data-label="'+e.choice[key].value+'" class="select_poll_choice"></li>');return i+="</ul>",i+='<div class="clroom-popup-poll-btn"><input type="submit" name="commit" id="submit_answer_'+e.poll_id+'" value="Submit"></div>',i+="</div></div></div>",i+="</div>",i+="</form>",i+="</div></div>"},bmRoom.poll.responseHtmlInTab=function(e){var t=moment(new Date(e.timestamp)),o=t.format("h:mm a"),i=$("#poll_result_area li").length+1,n='<li id="poll_id_'+e.poll_id+'">';n+='<div class="clroom-poll-box">',n+='<div class="clroom-poll-title">',n+='<span data-counter="'+i+'">POLL #'+i+"</span>",n+="</div>",n+='<div class="clroom-poll-question">',n+=e.poll_question,n+="</div>",n+='<form accept-charset="UTF-8" action="/polls/'+e.poll_id+'/poll_responses" class="new_poll_response" data-remote="true" id="new_poll_response_tab_'+e.poll_id+'" method="post">',n+='<input id="poll_response_source" name="poll_response[source]" type="hidden" value="bigroom">';for(key in e.choice)e.choice[key].value.length>0&&(n+="single"==e.selection_method?'<div class="clroom-poll-list clear"><input type="radio" id="poll_response_poll_answers_attributes_0_poll_choice_id_'+e.choice[key].choice_id+'" name="poll_response[poll_answers_attributes][0][poll_choice_id]" value="'+e.choice[key].choice_id+'" data-poll-id="'+e.poll_id+'" data-label="'+e.choice[key].value+'" class="select_poll_choice"></div>':'<div class="clroom-poll-list clear"><input type="checkbox" id="poll_response_poll_answers_attributes_'+key+"_poll_choice_id_"+e.choice[key].choice_id+'" name="poll_response[poll_answers_attributes]['+key+'][poll_choice_id]" value="'+e.choice[key].choice_id+'" data-poll-id="'+e.poll_id+'" data-label="'+e.choice[key].value+'" class="select_poll_choice"></div>');return n+='<div class="clroom-poll-statistics"><input type="submit" id="submit_answer_in_tab_'+e.poll_id+'" value="Submit"></div>',n+="</form>",n+="</div>",n+='<div class="clroom-qa-body-user clear">',n+='<div class="clroom-qa-body-userimg"><img src="'+e.photo+'"></div>',n+='<div class="clroom-poll-user"><div class="clroom-poll-user-in">',n+="Poll by "+e.name+" \xb7 "+o,n+="</div></div>",n+="</div>",n+="</li>"},bmRoom.poll.choiceResult=function(e){var t=parseInt(e.total_votes),o='<div class="clroom-poll-end-box"><div class="clroom-poll-box2">';o+='<div class="clroom-poll-end-text">Responses: '+e.total_response+"</div>";for(key in e.choice){var i=parseInt(key)+1,n=e.choice[key].choice_id,s=parseInt(e[n]),a=0==t?0:(100*s/t).toFixed(2);e.choice[key].value.length>0&&(o+='<div class="clroom-poll-list clear">',o+='<div class="clroom-poll-numb'+i+'">'+s+" ("+a+"%)</div>",o+='<div class="clroom-poll-options">',o+=e.choice[key].value,o+="</div>",o+='<div class="clroom-poll-right"><div class="clroom-poll-right-in"><div class="clroom-poll-progress-bg">',o+='<div class="clroom-poll-progress poll-'+i+'" style="width:'+a+'%;"></div>',o+="</div></div></div>",o+="</div>")}return o+="</div></div>"},bmRoom.poll.resultHtml=function(e){var t=moment(new Date(e.timestamp)),o=t.format("h:mm a"),i='<div class="clroom-modal-box result_popup" id="'+e.poll_id+'"><div class="clroom-popupbox-content poll-width-box">';return i+='<div class="clroom-popupbox-close"><a href="javascript:void(0);" onclick=$(".clroom-modal-box.is_poll").remove()><span class="room-delete"></span></a></div>',i+='<div class="clroom-popupbox-content-in">',i+='<div class="clroom-popupbox-content-title-box">',i+='<div class="clroom-popupbox-content-title">Poll the Audience</div>',i+='<div class="clroom-popupbox-content-subtitle">',i+="By "+e.name+" \xb7 "+o,i+="</div>",i+="</div>",i+='<div class="clroom-popupbox-clear"><div class="clear"><div class="clroom-popup-poll-right">',i+='<div class="clroom-popup-poll-question-text">',i+=e.poll_question,i+="</div>",i+=bmRoom.poll.choiceResult(e),i+='<div class="clroom-popup-poll-btn"><a href="javascript:void(0);" id="end_poll_'+e.poll_id+'">End Poll</a></div>',i+="</div></div></div>",i+="</div>",i+="</div></div>"},bmRoom.poll.resultHtmlInTab=function(e,t){var o=moment(new Date(e.timestamp)),i=o.format("h:mm a");if(t)var n=$("#poll_id_"+e.poll_id+" .clroom-poll-title span").attr("data-counter");else var n=$("#poll_result_area li").length+1;var s='<li id="poll_id_'+e.poll_id+'" class="poll_result">';s+='<div class="clroom-poll-box">',bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)&&(s+='<div class="clroom-popupbox-close">',s+='<a href="/polls/'+e.poll_id+'/delete_poll_in_bigroom" data-remote="true"><span class="room-delete"></span></a>',s+='<input id="delete_poll_id_'+e.poll_id+'" name="delete_poll" type="hidden">',s+="</div>"),s+='<div class="clroom-poll-title">',s+='<span data-counter="'+n+'">POLL #'+n+"</span>",s+="</div>",s+='<div class="clroom-poll-question">',s+=e.poll_question,s+="</div>";var a="undefined"==typeof e.total_votes?0:parseInt(e.total_votes);for(key in e.choice)if(e.choice[key].value.length>0){var r=parseInt(key)+1,l=e.choice[key].choice_id,c="undefined"==typeof e[l]?0:parseInt(e[l]),d=0==a?0:(100*c/a).toFixed(2);s+='<div class="clroom-poll-list clear" id="choice_tab_'+l+'">',s+='<div class="clroom-poll-numb'+r+'">'+c+" ("+d+"%)</div>",s+='<div class="clroom-poll-options">'+e.choice[key].value+"</div>",s+='<div class="clroom-poll-right"><div class="clroom-poll-right-in"><div class="clroom-poll-progress-bg">',s+='<div class="clroom-poll-progress poll-'+r+'" style="width:'+d+'%;"></div>',s+="</div></div></div>",s+="</div>"}var u=1==e.total_response?e.total_response+" response":e.total_response+" responses";return s+='<div class="clroom-poll-statistics">'+u+"</div>",bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)&&!e.ended&&(s+='<div class="clroom-popup-poll-btn"><a href="javascript:void(0);" id="end_poll_tab_'+e.poll_id+'">End Poll</a></div>'),s+="</div>",s+='<div class="clroom-qa-body-user clear">',s+='<div class="clroom-qa-body-userimg"><img src="'+e.photo+'"></div>',s+='<div class="clroom-poll-user"><div class="clroom-poll-user-in">',s+="Poll by "+e.name+" \xb7 "+i,e.ended&&(s+=" \xb7 Poll Closed"),s+="</div></div>",s+="</div>",s+="</li>"},bmRoom.poll.start=function(){bmRoom.poll.unread=$("#roomchat_poll .unread-count i").length>0?parseInt($("#roomchat_poll .unread-count i").text()):0,$("input:checkbox, input:radio").prettyCheckable({color:"green"}),$(document).on("click","#roomchat_poll",function(){$("#poll_result_area").is(":visible")&&(bmRoom.poll.unread=0,$("#roomchat_poll span").remove())}),$(document).on("click","#create_poll_node",function(){for(var e={},t=0;t<$(".clroom-popup-poll-option input[id^=poll_poll_choices_attributes_]").length;t++)e[t]={choice_id:$($(".clroom-popup-poll-option input[id^=poll_poll_choices_attributes_]")[t]).attr("data-id"),value:$(".clroom-popup-poll-option input[id^=poll_poll_choices_attributes_]")[t].value};bmRoom.socket.emit("create_poll",{sid:bmRoom.socket.io.engine.id,member_id:bmRoom.user.opens[bmRoom.socket.io.engine.id],photo:bmRoom.my.photo,name:bmRoom.my.name,timestamp:Date.now(),poll_id:$(this).val(),poll_question:$("#poll_question").val(),choice:e,selection_method:$("#poll_selection_method_single")[0].checked?"single":"multi"}),bmRoom.saveRecordingAction("CreatePoll","POLL",$("#poll_question").val().trim(),"","","",bmRoom.my.name,"","","","",poll_id)}),bmRoom.socket.on("new_poll",function(e){if(e.room_id=e.room_id.split("-")[0],e.room_id==$("#conference-obfuscated-id").val()&&(bmRoom.poll.choice[e.poll_id]=[],$.modal.close(),"separateChat"!=bmRoom.roomType&&(bmRoom.socket.io.engine.id==e.sid?$("#poll_result_area").append(bmRoom.poll.resultHtmlInTab(e,!1)):($(".clroom-main").append(bmRoom.poll.responseHtml(e)),$("#poll_result_area").append(bmRoom.poll.responseHtmlInTab(e)))),$("input:checkbox, input:radio").prettyCheckable({color:"green"}),$("#poll_result_area").scrollTop($("#poll_result_area")[0].scrollHeight),!$("#poll_result_area").is(":visible"))){bmRoom.poll.unread+=1;var t=$('<span class="unread-count" />');t.html(bmRoom.poll.unread>99?"<i>99+</i>":"<i>"+bmRoom.poll.unread+"</i>"),$("#roomchat_poll span").remove(),$("#roomchat_poll").append(t.clone())}}),$(document).on("click","[id^=end_poll_], [id^=end_poll_tab_]",function(){var e=this.id.replace("end_poll_tab_","").replace("end_poll_","");$.ajax({type:"POST",url:"/polls/"+e+"/end_poll"}),bmRoom.socket.emit("end_poll",e),bmRoom.saveRecordingAction("EndPoll","POLL",$("#poll_id_"+e+" .clroom-poll-question").text().trim(),"","","",bmRoom.my.name,"","","","",e)}),bmRoom.socket.on("end_poll",function(e){$(".clroom-modal-box.is_poll").length>0&&$(".clroom-modal-box.is_poll")[0].id==e.poll_id&&$(".clroom-modal-box.is_poll").remove(),bmRoom.socket.io.engine.id==e.sid?($("#end_poll_tab_"+e.poll_id).parent().remove(),$("#poll_id_"+e.poll_id+" .clroom-qa-body-user .clroom-poll-user .clroom-poll-user-in").append(" \xb7 Poll Closed")):$("#poll_id_"+e.poll_id).replaceWith(bmRoom.poll.resultHtmlInTab(e,!0)),$(".error-warning").addClass("green"),$(".error-warning").html("Poll #"+$("#poll_id_"+e.poll_id+" .clroom-poll-title span").attr("data-counter")+" is closed"),bmRoom.layout.errorWarning(),bmRoom.layout.change()}),$(document).on("change",".select_poll_choice",function(){var e=$(this).attr("data-poll-id");"undefined"==typeof bmRoom.poll.choice[e]&&(bmRoom.poll.choice[e]=[]),$(this).prop("checked")?"radio"==$(this).attr("type")?(bmRoom.poll.choice[e]=[],bmRoom.poll.choice[e].push($(this).val())):bmRoom.poll.choice[e].push($(this).val()):bmRoom.poll.choice[e].splice(bmRoom.poll.choice[e].indexOf($(this).val()),1),jQuery.unique(bmRoom.poll.choice[e])}),$(document).on("click","[id^=submit_answer_], [id^=submit_answer_in_tab_]",function(e){e.preventDefault();var t=this.id.replace("submit_answer_in_tab_","").replace("submit_answer_","");if("undefined"!=typeof bmRoom.poll.choice[t]&&bmRoom.poll.choice[t].length>0){$(this).closest("form").submit(),$(".clroom-modal-box.is_poll").remove(),$("#submit_answer_in_tab_"+t).parent().remove();for(var o={},i=0;i<$("#new_poll_response_tab_"+t+" [id^=poll_response_poll_answers_attributes_]").length;i++)o[i]={choice_id:$("#new_poll_response_tab_"+t+" [id^=poll_response_poll_answers_attributes_]")[i].value,value:$($("#new_poll_response_tab_"+t+" [id^=poll_response_poll_answers_attributes_]")[i]).attr("data-label")};"undefined"!=typeof bmRoom.poll.choice[t]&&bmRoom.poll.choice[t].length>0&&(bmRoom.socket.emit("submit_answer",{poll_id:t,timestamp:Date.now(),photo:bmRoom.my.photo,name:bmRoom.my.name,choose:bmRoom.poll.choice[t],submit_sid:bmRoom.socket.io.engine.id,poll_question:$("#poll_id_"+t+" .clroom-poll-question").text(),choice:o}),bmRoom.poll.choice[t].forEach(function(e){var o=$("#new_poll_response_tab_"+t+' input[value="'+e+'"]').attr("data-label").trim(),i=$("#poll_id_"+t+" .clroom-poll-question").text().trim();bmRoom.saveRecordingAction("SubmitAnswer","POLL",i,"","","",bmRoom.my.name,"","",o,e,t)})),bmRoom.poll.choice[t]=[]}}),bmRoom.socket.on("update_result",function(e){console.log(e),bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)?($(".result_popup").length>0&&$(".result_popup .clroom-poll-end-box").replaceWith(bmRoom.poll.choiceResult(e)),$("#poll_id_"+e.poll_id).replaceWith(bmRoom.poll.resultHtmlInTab(e,!0))):bmRoom.socket.io.engine.id==e.submit_sid?$("#poll_id_"+e.poll_id).replaceWith(bmRoom.poll.resultHtmlInTab(e,!0)):$("#poll_id_"+e.poll_id).length>0&&$("#poll_id_"+e.poll_id).hasClass("poll_result")&&$("#poll_id_"+e.poll_id).replaceWith(bmRoom.poll.resultHtmlInTab(e,!0))}),$(document).on("click","[id^=delete_poll_id_]",function(){var e=this.id.replace("delete_poll_id_","");bmRoom.socket.emit("delete_poll",e),bmRoom.saveRecordingAction("DeletePoll","POLL",$("#poll_id_"+e+" .clroom-poll-question").text().trim(),"","","",bmRoom.my.name,"","","","",e),$("#poll_id_"+e).remove()}),bmRoom.socket.on("delete_poll",function(e){$("#poll_id_"+e).remove(),1==bmRoom.poll.unread&&(bmRoom.poll.unread=0,$("#roomchat_poll span").remove()),$("#"+e).remove()})},/*!
 * jQuery Selectbox plugin 0.1.3
 *
 * Copyright 2011, Dimitar Ivanov (http://www.bulgaria-web-developers.com/projects/javascript/selectbox/)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 *
 * Date: Wed Jul 29 23:20:57 2011 +0200
 */
function(e,t){function o(){this._state=[],this._defaults={classHolder:"sbHolder",classHolderDisabled:"sbHolderDisabled",classSelector:"sbSelector",classOptions:"sbOptions",classGroup:"sbGroup",classSub:"sbSub",classDisabled:"sbDisabled",classToggleOpen:"sbToggleOpen",classToggle:"sbToggle",speed:200,effect:"slide",onChange:null,onOpen:null,onClose:null}}var i="selectbox",n=!1,s=!0;e.extend(o.prototype,{_isOpenSelectbox:function(e){if(!e)return n;var t=this._getInst(e);return t.isOpen},_isDisabledSelectbox:function(e){if(!e)return n;var t=this._getInst(e);return t.isDisabled},_attachSelectbox:function(t,o){function a(){var t,o=this.attr("id").split("_")[1];for(t in m._state)t!==o&&m._state.hasOwnProperty(t)&&e(":input[sb='"+t+"']")[0]&&m._closeSelectbox(e(":input[sb='"+t+"']")[0])}function r(){var o=arguments[1]&&arguments[1].sub?!0:!1,i=arguments[1]&&arguments[1].disabled?!0:!1;arguments[0].each(function(n){var a,r=e(this),l=e("<li>");r.is(":selected")&&(c.text(r.text()),f=s),n===b-1&&l.addClass("last"),r.is(":disabled")||i?(a=e("<span>",{text:r.text()}).addClass(p.settings.classDisabled),o&&a.addClass(p.settings.classSub),a.appendTo(l)):(a=e("<a>",{href:"#"+r.val(),rel:r.val(),text:r.text(),click:function(o){o.preventDefault();{var i=d;i.attr("id").split("_")[1]}m._changeSelectbox(t,e(this).attr("rel"),e(this).text()),m._closeSelectbox(t)}}),o&&a.addClass(p.settings.classSub),a.appendTo(l)),l.appendTo(u)})}if(this._getInst(t))return n;var l,c,d,u,h=e(t),m=this,p=m._newInst(h),f=n,g=(h.find("optgroup"),h.find("option")),b=g.length;h.attr("sb",p.uid),e.extend(p.settings,m._defaults,o),m._state[p.uid]=n,h.hide(),l=e("<div>",{id:"sbHolder_"+p.uid,"class":p.settings.classHolder}),c=e("<a>",{id:"sbSelector_"+p.uid,href:"#","class":p.settings.classSelector,click:function(o){o.preventDefault(),a.apply(e(this),[]);var i=e(this).attr("id").split("_")[1];m._state[i]?m._closeSelectbox(t):m._openSelectbox(t)}}),d=e("<a>",{id:"sbToggle_"+p.uid,href:"#","class":p.settings.classToggle,click:function(o){o.preventDefault(),a.apply(e(this),[]);var i=e(this).attr("id").split("_")[1];m._state[i]?m._closeSelectbox(t):m._openSelectbox(t)}}),d.appendTo(l),u=e("<ul>",{id:"sbOptions_"+p.uid,"class":p.settings.classOptions,css:{display:"none"}}),h.children().each(function(){var t,o=e(this),i={};o.is("option")?r(o):o.is("optgroup")&&(t=e("<li>"),e("<span>",{text:o.attr("label")}).addClass(p.settings.classGroup).appendTo(t),t.appendTo(u),o.is(":disabled")&&(i.disabled=!0),i.sub=!0,r(o.find("option"),i))}),f||c.text(g.first().text()),e.data(t,i,p),c.appendTo(l),u.appendTo(l),l.insertAfter(h)},_detachSelectbox:function(t){var o=this._getInst(t);return o?(e("#sbHolder_"+o.uid).remove(),e.data(t,i,null),void e(t).show()):n},_changeSelectbox:function(t,o,i){var n=this._getInst(t),a=this._get(n,"onChange");e("#sbSelector_"+n.uid).text(i),e(t).find("option[value='"+o+"']").attr("selected",s),a?a.apply(n.input?n.input[0]:null,[o,n]):n.input&&n.input.trigger("change")},_enableSelectbox:function(t){var o=this._getInst(t);return o&&o.isDisabled?(e("#sbHolder_"+o.uid).removeClass(o.settings.classHolderDisabled),o.isDisabled=n,void e.data(t,i,o)):n},_disableSelectbox:function(t){var o=this._getInst(t);return!o||o.isDisabled?n:(e("#sbHolder_"+o.uid).addClass(o.settings.classHolderDisabled),o.isDisabled=s,void e.data(t,i,o))},_optionSelectbox:function(t,o,s){var a=this._getInst(t);return a?(a[o]=s,void e.data(t,i,a)):n},_openSelectbox:function(t){var o=this._getInst(t);if(o&&!o.isOpen&&!o.isDisabled){var n=e("#sbOptions_"+o.uid),a=parseInt(e(window).height(),10),r=e("#sbHolder_"+o.uid).offset(),l=e(window).scrollTop(),c=n.prev().height(),d=a-(r.top-l)-c/2,u=this._get(o,"onOpen");n.css({top:c+"px",maxHeight:d-c+"px"}),"fade"===o.settings.effect?n.fadeIn(o.settings.speed):n.slideDown(o.settings.speed),e("#sbToggle_"+o.uid).addClass(o.settings.classToggleOpen),this._state[o.uid]=s,o.isOpen=s,u&&u.apply(o.input?o.input[0]:null,[o]),e.data(t,i,o)}},_closeSelectbox:function(t){var o=this._getInst(t);if(o&&o.isOpen){var s=this._get(o,"onClose");"fade"===o.settings.effect?e("#sbOptions_"+o.uid).fadeOut(o.settings.speed):e("#sbOptions_"+o.uid).slideUp(o.settings.speed),e("#sbToggle_"+o.uid).removeClass(o.settings.classToggleOpen),this._state[o.uid]=n,o.isOpen=n,s&&s.apply(o.input?o.input[0]:null,[o]),e.data(t,i,o)}},_newInst:function(e){var t=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:t,input:e,uid:Math.floor(99999999*Math.random()),isOpen:n,isDisabled:n,settings:{}}},_getInst:function(t){try{return e.data(t,i)}catch(o){throw"Missing instance data for this selectbox"}},_get:function(e,o){return e.settings[o]!==t?e.settings[o]:this._defaults[o]}}),e.fn.selectbox=function(t){var o=Array.prototype.slice.call(arguments,1);return"string"==typeof t&&"isDisabled"==t?e.selectbox["_"+t+"Selectbox"].apply(e.selectbox,[this[0]].concat(o)):"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?e.selectbox["_"+t+"Selectbox"].apply(e.selectbox,[this[0]].concat(o)):this.each(function(){"string"==typeof t?e.selectbox["_"+t+"Selectbox"].apply(e.selectbox,[this].concat(o)):e.selectbox._attachSelectbox(this,t)})},e.selectbox=new o,e.selectbox.version="0.1.3"}(jQuery),function(e,t,o){function i(t,o){this.element=t,this.options=e.extend({},a,o),this._defaults=a,this._name=s,this.init()}function n(t){t.find("a, label").on("touchstart click",function(t){t.preventDefault();var o=e(this).closest(".clearfix"),i=o.find("input"),n=o.find("a");i.prop("disabled")!==!0&&("radio"===i.prop("type")&&e('input[name="'+i.attr("name")+'"]').each(function(t,o){e(o).prop("checked",!1).parent().find("a").removeClass("checked")}),i.prop("checked")?i.prop("checked",!1).change():i.prop("checked",!0).change(),n.toggleClass("checked"))}),t.find("a").on("keyup",function(t){32===t.keyCode&&e(this).click()})}var s="prettyCheckable",a=(t.document,{labelPosition:"right",customClass:"",color:"blue"});i.prototype.init=function(){var t=e(this.element);t.css("display","none");var i=t.data("type")!==o?t.data("type"):t.attr("type"),s=t.data("label")!==o?t.data("label"):"",a=t.data("labelposition")!==o?"label"+t.data("labelposition"):"label"+this.options.labelPosition,r=t.data("customclass")!==o?t.data("customclass"):this.options.customClass,l=t.data("color")!==o?t.data("color"):this.options.color,c=t.prop("disabled")===!0?"disabled":"",d=["pretty"+i,a,r,l,c].join(" ");t.wrap('<div class="clearfix '+d+'"></div>').parent().html();{var u=[],h=t.prop("checked")?"checked":"";t.prop("disabled")?!0:!1}"labelright"===a?(u.push('<a href="#" class="'+h+'"></a>'),u.push('<label for="'+t.attr("id")+'">'+s+"</label>")):(u.push('<label for="'+t.attr("id")+'">'+s+"</label>"),u.push('<a href="#" class="'+h+'"></a>')),t.parent().append(u.join("\n")),n(t.parent())},i.prototype.disableInput=function(){var t=e(this.element);t.parent().addClass("disabled"),t.prop("disabled",!0)},i.prototype.enableInput=function(){var t=e(this.element);t.parent().removeClass("disabled"),t.prop("disabled",!1)},e.fn[s]=function(t){var o=[];return this.each(function(){e.data(this,"plugin_"+s)||o.push(e.data(this,"plugin_"+s,new i(this,t)))}),o}}(jQuery,window),bmRoom.message={},bmRoom.message.setEndOfContenteditable=function(e){var t,o,i=document.getElementById(e);document.createRange?(t=document.createRange(),t.selectNodeContents(i),t.collapse(!1),o=window.getSelection(),o.removeAllRanges(),o.addRange(t)):document.selection&&(t=document.body.createTextRange(),t.moveToElementText(i),t.collapse(!1),t.select())},bmRoom.message.convertCode=function(e){var t=bmRoom.user.opens[bmRoom.socket.io.engine.id],o=/@((member\-)*(\w*))((\s+)|$)/g;e.content.replace(o,function(o,i){bmRoom.socket.emit("user:getinfo",i,function(n){var s=$("#"+e.timestamp).html();s=s.replace("@"+i,function(){if(n&&"all"!=i){var e="";return t.id===i&&(e="chat-at-me"),'<span class="unfilter-by-bigmarker chat-at '+e+'">@'+n.name+"</span> "}return"all"===i?'<span class="unfilter-by-bigmarker chat-at chat-at-me">@ all</span> ':o}),$("#"+e.timestamp).html(s)})});var i=/@(guest-\w*)((\s+)|$)/g;return e.content=e.content.replace(i,function(e,o){if("guest"==t.role&&t.id==o){var i="chat-at-me";return'<span class="unfilter-by-bigmarker chat-at '+i+'">@'+t.name+"</span> "}var n;return $.each(bmRoom.user.opens,function(e,t){t.id==o&&(n='<span class="unfilter-by-bigmarker chat-at" data-uid="'+o+'">@'+t.name+"</span> ")}),n?n:'<span class="unfilter-by-bigmarker chat-at" data-uid="'+o+'">@'+o+"</span> "}),e.content},bmRoom.message.filterList=function(e){var t=0,o="",i=0;if("at"===e.type){var n=bmRoom.user.opens;n[0]={name:"All members (@all)",id:"all"},$.each(n,function(i,n){var s=" status"+n.id+" ",a=new RegExp(e.last,"i");if(a.test(n.name)){if(t>10)return;var r="";n.idle&&(r="idle"),o+='<li data-uid="'+n.id+'" data-name="'+n.name+'">',o+="all"===n.id?'  <div class="chat-place status '+s+r+'"></div>':'  <div class="chat-state status '+s+r+'"></div>',o+=n.name,o+="</li>",t++}}),$(".admin-control-body").length>0&&"none"==$(".admin-control-body").css("display")?(i=$("#room-at").offset().left-125,$(".bottom-prong").css("left","120px")):(i=$("#room-at").offset().left-47,$(".bottom-prong").css("left","42px")),pbottom=120}var s=0;"emoji"===e.type&&($.each(emoji_array,function(t,i){if(-1!=i.indexOf(e.last)){if(s>10)return;var n='src="/assets/emoji/'+i+'.png"';o+='<li data-ename="'+i+'">',o+="<img "+n+' class="unfilter-by-bigmarker chat-emoji">',o+="  :"+i+":",o+="</li>",s++}}),$(".admin-control-body").length>0&&"none"==$(".admin-control-body").css("display")?(i=$("#select_face").offset().left-155,$(".bottom-prong").css("left","150px")):(i=$("#select_face").offset().left-45,$(".bottom-prong").css("left","40px")),pbottom=55),o.length>0?($("#chat_filter_list").html(o),$("#chat_filter").css("left",i),$("#chat_filter").css("bottom",pbottom),bmRoom.message.isMobile||$("#chat_filter").show(),$("#chat_filter_list li:first").addClass("active")):($("#chat_filter_list").html(""),$("#chat_filter").hide())},bmRoom.message.emojiSelecting=!1,bmRoom.message.getInputString=function(){var e=$("#chat_input").html(),t=/<br>/gi;e=e.replace(t,"");var o=e.lastIndexOf("@"),i=e.lastIndexOf(":"),n=o>i?o:i,s={};return-1!=n?(o>i?s.type="at":(s.type="emoji",bmRoom.message.emojiSelecting=!0),s.first=e.substring(0,n),s.last=e.substring(n+1)):(s.type="",s.first=e,s.last=""),s},bmRoom.message.confirmSelect=function(){if($("#chat_filter_list li.active").length){var e=bmRoom.message.getInputString().first,t="",o=$("#chat_filter_list li.active").attr("data-uid"),i=$("#chat_filter_list li.active").attr("data-name"),n=$("#chat_filter_list li.active").attr("data-ename");if(o&&i){var s='data-src="@'+o+'"';if("all"===o||bmRoom.user.opens[bmRoom.socket.io.engine.id].id===o)var a='class="unfilter-by-bigmarker chat-at chat-at-me"';else var a='class="unfilter-by-bigmarker chat-at"';var r="all"===o?"@all":"@"+i;t+="firefox"==bmRoom.browser?'<input value="'+r+'" '+a+" "+s+' type="button">':"<span "+a+" "+s+' contenteditable="false">'+r+"</span>"}else if(n){var l='src="/assets/emoji/'+n+'.png"',c='data-src=":'+n+':"';t+="<img "+l+c+' class="unfilter-by-bigmarker chat-emoji">'}$("#chat_input").html(e+t+"&nbsp;"),$("#chat_filter").hide(),bmRoom.message.setEndOfContenteditable("chat_input"),bmRoom.message.htmlToValue()}bmRoom.message.emojiSelecting=!1,$("#chat_bottom").addClass("onfocus"),$("#roomchat_group_area").addClass("onfocus"),$("#twitter_account_bottom > span").text().length<=1&&$("#twitter_account_bottom > span").text("@"+bmRoom.user.opens[bmRoom.socket.io.engine.id].twitter_name),$("#chat_input").trigger("focus"),setTimeout(function(){$("#chat-message").scrollTop($("#chat-message").prop("scrollHeight"))},201)},bmRoom.message.htmlToValue=function(){var e=$("#chat_input").html(),t=/<(\w*)\s.*?data-src=\"(\S*?)\".*?>(.*?<\/\1>)?/gi;return e=e.replace(t,"$2 "),e=e.replace(/(.+?) style=".*?"/gi,"$1"),$("#chat_input_value").val(e)===e?!1:($("#chat_input_value").val(e),!0)},bmRoom.message.userImage=function(e){return e.photo.indexOf("default_photo")>=0||e.photo.indexOf("default-profile-picture")>=0?e.name.indexOf("guest-")>=0?"/assets/letter-icons/"+Math.floor(8*Math.random()+1)+".png":"/assets/letter-icons/"+e.name.substring(0,1).toLowerCase()+Math.floor(7*Math.random()+1)+".png":e.photo},bmRoom.preload=bmRoom.preload||{},bmRoom.openPreload=function(){var e=$(".enter-test-video-box video"),t=$(".enter-test-video-box img");e.hide(),t.show();var o=setTimeout(function(){"firefox"!=bmRoom.browser&&($("#enter-bg-allow").show(),$("#enter-bg-presenter").hide())},2e3);if(bmRoom.preload.enableVideo&&($(".enter-test-right .enter-test-list-left").addClass("onactive"),$(".enter-test-right .enter-test-list-left i").html("On"),$(".enter-test-right .enter-switchbox").removeClass("closed").addClass("onactive"),"chrome"===bmRoom.browser&&$(".enter-test-right .enter-test-select").show(),$(".enter-test-right .enter-test-speak2").show()),bmRoom.preload.enableAudio&&($(".enter-test-left .enter-test-list-left").addClass("onactive"),$(".enter-test-left .enter-test-list-left i").html("On"),$(".enter-test-left .enter-switchbox").removeClass("closed").addClass("onactive"),"chrome"===bmRoom.browser&&$(".enter-test-left .enter-test-select").show(),$(".enter-test-left .enter-test-speak").show()),clearInterval(bmRoom.preload.volumeInterval),bmRoom.preload.stream&&bmRoom.preload.stream.getTracks){var i=bmRoom.preload.stream.getTracks();i.forEach(function(e){e.stop()})}bmRoom.preload.stream=null,$(".enter-test-speak-current").css("width","0");var n={},s=JSON.parse(JSON.stringify(bmRoom.stream.videoConstraints)),a=bmRoom.preload.enableVideo?s:!1;return bmRoom.preload.enableVideo||bmRoom.preload.enableAudio?(n={video:a,audio:bmRoom.stream.audioConstraints},bmRoom.preload.enableVideo&&bmRoom.preload.enableVideo!==!0&&n.video.optional&&n.video.optional.push({sourceId:bmRoom.preload.enableVideo}),bmRoom.preload.enableAudio&&bmRoom.preload.enableAudio!==!0&&n.audio.optional&&n.audio.optional.push({sourceId:bmRoom.preload.enableAudio}),void navigator.getUserMedia(n,function(i){if(clearTimeout(o),$("#enter-bg-allow").hide(),bmRoom.preload.stream=i,bmRoom.preload.enableVideo){var n=URL.createObjectURL(i);e.attr("src",n),e.prop("autoplay",!0),e.prop("muted",!0),e.show(),t.hide()}$("#enter-bg-presenter").show();var s=bmRoom.audioCtx||new AudioContext;analyser=s.createAnalyser(),analyser.smoothingTimeConstant=.3,analyser.fftSize=512;var a=s.createMediaStreamSource(i);if(a.connect(analyser),!bmRoom.preload.enableAudio)return void clearInterval(bmRoom.preload.volumeInterval);var r=new Uint8Array(analyser.frequencyBinCount);bmRoom.preload.volumeInterval=setInterval(function(){var e=0;analyser.getByteFrequencyData(r);for(var t=0;t<r.length;t++)e+=r[t];var o=e/5e4*100+"%";$(".enter-test-speak-current").css("width",o)},500)},function(){clearTimeout(o),$("#enter-bg-allow").hide(),$("#enter-bg").hide()})):($("#enter-bg-presenter").show(),$("#enter-bg-allow").hide(),void clearTimeout(o))},bmRoom.showOverlay=function(e){e&&($("#enter-bg").show(),bmRoom.openPreload(!0))},bmRoom.hideOverlay=function(){$("#enter-bg").hide();var e="";if(bmRoom.preload.stream){if(bmRoom.preload.enableAudio&&bmRoom.preload.enableVideo?e="av":bmRoom.preload.enableAudio&&!bmRoom.preload.enableVideo?e="a":!bmRoom.preload.enableAudio&&bmRoom.preload.enableVideo&&(e="av"),!e)return;bmRoom.stream.pushLocalMedia(bmRoom.preload.stream,e,!0)}},bmRoom.toggleTestAudio=function(){var e=$(".enter-test-list-playbtu .room-test-audio-icon");bmRoom.preload.testAudio||(bmRoom.preload.testAudio=new Audio("/assets/sounds/testing-sound.mp3"),bmRoom.preload.testAudio.addEventListener("ended",function(){e.addClass("room-play").removeClass("room-stop"),e.next(".clroom-test-audio-text").text("Play Test Sound")})),e.hasClass("room-stop")?(bmRoom.preload.testAudio.pause(),bmRoom.preload.testAudio.currentTime=0,e.removeClass("room-stop").addClass("room-play"),e.next(".clroom-test-audio-text").text("Play Test Sound")):(e.addClass("room-stop").removeClass("room-play"),e.next(".clroom-test-audio-text").text("Stop Test Sound"),bmRoom.preload.testAudio.play())},bmRoom.saveRecordingAction=function(e,t,o,i,n,s,a,r,l,c,d,u){a=a?a:bmRoom.my.name;var h={member_id:bmRoom.userID,member_email:bmRoom.userEmail,member_name:a,conference_id:bmRoom.roomID,action_name:e,module_name:t,chat_content:o,wb_image:i,youtube_url:n,hashtag:r,to_member_id:l,poll_id:u,choice:c,choice_id:d,timestamp:Date.now()};"a"==t?h.module_name="MIC":"av"==t?h.module_name="WEBCAM":"sc"==t&&(h.module_name="SCREEN"),["MIC","WEBCAM","SCREEN"].includes(h.module_name)?s==bmRoom.socket.io.engine.id&&$.ajax({url:"/conferences/save_recording_action",data:{recording_action:h},type:"get"}):$.ajax({url:"/conferences/save_recording_action",data:{recording_action:h},type:"get"})};var emoji_re=/\:(\+1|\-1|100|109|1234|8ball|a|ab|abc|abcd|accept|aerial_tramway|airplane|alarm_clock|alien|ambulance|anchor|angel|anger|angry|anguished|ant|apple|aquarius|aries|arrow_backward|arrow_double_down|arrow_double_up|arrow_down|arrow_down_small|arrow_forward|arrow_heading_down|arrow_heading_up|arrow_left|arrow_lower_left|arrow_lower_right|arrow_right|arrow_right_hook|arrow_up|arrow_up_down|arrow_up_small|arrow_upper_left|arrow_upper_right|arrows_clockwise|arrows_counterclockwise|art|articulated_lorry|astonished|atm|b|baby|baby_bottle|baby_chick|baby_symbol|baggage_claim|balloon|ballot_box_with_check|bamboo|banana|bangbang|bank|bar_chart|barber|baseball|basketball|bath|bathtub|battery|bear|bee|beer|beers|beetle|beginner|bell|bento|bicyclist|bike|bikini|bird|birthday|black_circle|black_joker|black_nib|black_square|black_square_button|blossom|blowfish|blue_book|blue_car|blue_heart|blush|boar|boat|bomb|book|bookmark|bookmark_tabs|books|boom|boot|bouquet|bow|bowling|bowtie|boy|bread|bride_with_veil|bridge_at_night|briefcase|broken_heart|bug|bulb|bullettrain_front|bullettrain_side|bus|busstop|bust_in_silhouette|busts_in_silhouette|cactus|cake|calendar|calling|camel|camera|cancer|candy|capital_abcd|capricorn|car|card_index|carousel_horse|cat|cat2|cd|chart|chart_with_downwards_trend|chart_with_upwards_trend|checkered_flag|cherries|cherry_blossom|chestnut|chicken|children_crossing|chocolate_bar|christmas_tree|church|cinema|circus_tent|city_sunrise|city_sunset|cl|clap|clapper|clipboard|clock1|clock10|clock1030|clock11|clock1130|clock12|clock1230|clock130|clock2|clock230|clock3|clock330|clock4|clock430|clock5|clock530|clock6|clock630|clock7|clock730|clock8|clock830|clock9|clock930|closed_book|closed_lock_with_key|closed_umbrella|cloud|clubs|cn|cocktail|coffee|cold_sweat|collision|computer|confetti_ball|confounded|confused|congratulations|construction|construction_worker|convenience_store|cookie|cool|cop|copyright|corn|couple|couple_with_heart|couplekiss|cow|cow2|credit_card|crocodile|crossed_flags|crown|cry|crying_cat_face|crystal_ball|cupid|curly_loop|currency_exchange|curry|custard|customs|cyclone|dancer|dancers|dango|dart|dash|date|de|deciduous_tree|department_store|diamond_shape_with_a_dot_inside|diamonds|disappointed|disappointed_relieved|dizzy|dizzy_face|do_not_litter|dog|dog2|dollar|dolls|dolphin|donut|door|doughnut|dragon|dragon_face|dress|dromedary_camel|droplet|dvd|e\-mail|ear|ear_of_rice|earth_africa|earth_americas|earth_asia|egg|eggplant|eight|eight_pointed_black_star|eight_spoked_asterisk|electric_plug|elephant|email|end|envelope|es|euro|european_castle|european_post_office|evergreen_tree|exclamation|expressionless|eyeglasses|eyes|facepunch|factory|fallen_leaf|family|fast_forward|fax|fearful|feelsgood|feet|ferris_wheel|file_folder|finnadie|fire|fire_engine|fireworks|first_quarter_moon|first_quarter_moon_with_face|fish|fish_cake|fishing_pole_and_fish|fist|five|flags|flashlight|floppy_disk|flower_playing_cards|flushed|foggy|football|fork_and_knife|fountain|four|four_leaf_clover|fr|free|fried_shrimp|fries|frog|frowning|fu|fuelpump|full_moon|full_moon_with_face|game_die|gb|gem|gemini|ghost|gift|gift_heart|girl|globe_with_meridians|goat|goberserk|godmode|golf|grapes|green_apple|green_book|green_heart|grey_exclamation|grey_question|grimacing|grin|grinning|guardsman|guitar|gun|haircut|hamburger|hammer|hamster|hand|handbag|hankey|hash|hatched_chick|hatching_chick|headphones|hear_no_evil|heart|heart_decoration|heart_eyes|heart_eyes_cat|heartbeat|heartpulse|hearts|heavy_check_mark|heavy_division_sign|heavy_dollar_sign|heavy_exclamation_mark|heavy_minus_sign|heavy_multiplication_x|heavy_plus_sign|helicopter|herb|hibiscus|high_brightness|high_heel|hocho|honey_pot|honeybee|horse|horse_racing|hospital|hotel|hotsprings|hourglass|hourglass_flowing_sand|house|house_with_garden|hurtrealbad|hushed|ice_cream|icecream|id|ideograph_advantage|imp|inbox_tray|incoming_envelope|information_desk_person|information_source|innocent|interrobang|iphone|it|izakaya_lantern|jack_o_lantern|japan|japanese_castle|japanese_goblin|japanese_ogre|jeans|joy|joy_cat|jp|key|keycap_ten|kimono|kiss|kissing|kissing_cat|kissing_closed_eyes|kissing_face|kissing_heart|kissing_smiling_eyes|koala|koko|kr|large_blue_circle|large_blue_diamond|large_orange_diamond|last_quarter_moon|last_quarter_moon_with_face|laughing|leaves|ledger|left_luggage|left_right_arrow|leftwards_arrow_with_hook|lemon|leo|leopard|libra|light_rail|link|lips|lipstick|lock|lock_with_ink_pen|lollipop|loop|loudspeaker|love_hotel|love_letter|low_brightness|m|mag|mag_right|mahjong|mailbox|mailbox_closed|mailbox_with_mail|mailbox_with_no_mail|man|man_with_gua_pi_mao|man_with_turban|mans_shoe|maple_leaf|mask|massage|meat_on_bone|mega|melon|memo|mens|metal|metro|microphone|microscope|milky_way|minibus|minidisc|mobile_phone_off|money_with_wings|moneybag|monkey|monkey_face|monorail|moon|mortar_board|mount_fuji|mountain_bicyclist|mountain_cableway|mountain_railway|mouse|mouse2|movie_camera|moyai|muscle|mushroom|musical_keyboard|musical_note|musical_score|mute|nail_care|name_badge|neckbeard|necktie|negative_squared_cross_mark|neutral_face|new|new_moon|new_moon_with_face|newspaper|ng|nine|no_bell|no_bicycles|no_entry|no_entry_sign|no_good|no_mobile_phones|no_mouth|no_pedestrians|no_smoking|non\-potable_water|nose|notebook|notebook_with_decorative_cover|notes|nut_and_bolt|o|o2|ocean|octocat|octopus|oden|office|ok|ok_hand|ok_woman|older_man|older_woman|on|oncoming_automobile|oncoming_bus|oncoming_police_car|oncoming_taxi|one|open_file_folder|open_hands|open_mouth|ophiuchus|orange_book|outbox_tray|ox|page_facing_up|page_with_curl|pager|palm_tree|panda_face|paperclip|parking|part_alternation_mark|partly_sunny|passport_control|paw_prints|peach|pear|pencil|pencil2|penguin|pensive|performing_arts|persevere|person_frowning|person_with_blond_hair|person_with_pouting_face|phone|pig|pig2|pig_nose|pill|pineapple|pisces|pizza|plus1|point_down|point_left|point_right|point_up|point_up_2|police_car|poodle|poop|post_office|postal_horn|postbox|potable_water|pouch|poultry_leg|pound|pouting_cat|pray|princess|punch|purple_heart|purse|pushpin|put_litter_in_its_place|question|rabbit|rabbit2|racehorse|radio|radio_button|rage|rage1|rage2|rage3|rage4|railway_car|rainbow|raised_hand|raised_hands|raising_hand|ram|ramen|rat|recycle|red_car|red_circle|registered|relaxed|relieved|repeat|repeat_one|restroom|revolving_hearts|rewind|ribbon|rice|rice_ball|rice_cracker|rice_scene|ring|rocket|roller_coaster|rooster|rose|rotating_light|round_pushpin|rowboat|ru|rugby_football|runner|running|running_shirt_with_sash|sa|sagittarius|sailboat|sake|sandal|santa|satellite|satisfied|saxophone|school|school_satchel|scissors|scorpius|scream|scream_cat|scroll|seat|secret|see_no_evil|seedling|seven|shaved_ice|sheep|shell|ship|shipit|shirt|shit|shoe|shower|signal_strength|six|six_pointed_star|ski|skull|sleeping|sleepy|slot_machine|small_blue_diamond|small_orange_diamond|small_red_triangle|small_red_triangle_down|smile|smile_cat|smiley|smiley_cat|smiling_imp|smirk|smirk_cat|smoking|snail|snake|snowboarder|snowflake|snowman|sob|soccer|soon|sos|sound|space_invader|spades|spaghetti|sparkler|sparkles|sparkling_heart|speak_no_evil|speaker|speech_balloon|speedboat|squirrel|star|star2|stars|station|statue_of_liberty|steam_locomotive|stew|straight_ruler|strawberry|stuck_out_tongue|stuck_out_tongue_closed_eyes|stuck_out_tongue_winking_eye|sun_with_face|sunflower|sunglasses|sunny|sunrise|sunrise_over_mountains|surfer|sushi|suspect|suspension_railway|sweat|sweat_drops|sweat_smile|sweet_potato|swimmer|symbols|syringe|tada|tanabata_tree|tangerine|taurus|taxi|tea|telephone|telephone_receiver|telescope|tennis|tent|thought_balloon|three|thumbsdown|thumbsup|ticket|tiger|tiger2|tired_face|tm|toilet|tokyo_tower|tomato|tongue|top|tophat|tractor|traffic_light|train|train2|tram|triangular_flag_on_post|triangular_ruler|trident|triumph|trolleybus|trollface|trophy|tropical_drink|tropical_fish|truck|trumpet|tshirt|tulip|turtle|tv|twisted_rightwards_arrows|two|two_hearts|two_men_holding_hands|two_women_holding_hands|u5272|u5408|u55b6|u6307|u6708|u6709|u6e80|u7121|u7533|u7981|u7a7a|uk|umbrella|unamused|underage|unlock|up|us|v|vertical_traffic_light|vhs|vibration_mode|video_camera|video_game|violin|virgo|volcano|vs|walking|waning_crescent_moon|waning_gibbous_moon|warning|watch|water_buffalo|watermelon|wave|wavy_dash|waxing_crescent_moon|waxing_gibbous_moon|wc|weary|wedding|whale|whale2|wheelchair|white_check_mark|white_circle|white_flower|white_square|white_square_button|wind_chime|wine_glass|wink|wink2|wolf|woman|womans_clothes|womans_hat|womens|worried|wrench|x|yellow_heart|yen|yum|zap|zero|zzz)\:/g,emoji_string="smile,neutral_face,kissing_closed_eyes,cry,dizzy_face,kissing_face,smirk,sunglasses,sunny,+1,-1,100,109,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_nib,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,moon,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile_cat,smiley,smiley_cat,smiling_imp,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_square,white_square_button,wind_chime,wine_glass,wink,wink2,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",emoji_array=emoji_string.split(/,/);
!function(e,t){e.fn.watch=function(o){function i(t,o,i){t.each(function(){var t,o=e(this);window.MutationObserver?(t=o.data("__watcherObserver"+s.id),null==t&&(t=new MutationObserver(i.fnc),o.data("__watcherObserver"+s.id,t)),t.observe(this,{attributes:!0,subtree:s.watchChildren,childList:s.watchChildren,characterData:!0})):i.intervalId=setInterval(i.fnc,s.interval)})}function n(o,n,s){var a,r,l,c,d,u=e(this),h=u.data(o);if(h&&(a=this,h.func)){for(r=!1,l=0;l<h.props.length;l++)if(c=h.props[l],d="",d=c.startsWith("attr_")?u.attr(c.replace("attr_","")):c.startsWith("prop_")?u.prop(c.replace("prop_","")):u.css(c),d!=t&&h.vals[l]!=d){h.vals[l]=d,r=!0;break}r&&(u.unwatch(o),h.func.call(a,h,l,n,s),i(u,o,h))}}var s=e.extend({properties:null,interval:100,id:"_watcher_"+(new Date).getTime(),watchChildren:!1,callback:null},o);return this.each(function(){var t=this,o=e(this),a=function(e,o){n.call(t,s.id,e,o)},r={id:s.id,props:s.properties.split(","),vals:[s.properties.split(",").length],func:s.callback,fnc:a,origProps:s.properties,interval:s.interval,intervalId:null};e.each(r.props,function(e){var t=r.props[e];r.vals[e]=r.props[e].startsWith("attr_")?o.attr(t.replace("attr_","")):t.startsWith("prop_")?o.prop(t.replace("props_","")):o.css(t)}),o.data(s.id,r),i(o,s.id,r)})},e.fn.unwatch=function(t){return this.each(function(){var o,i=e(this),n=i.data(t);try{window.MutationObserver?(o=i.data("__watcherObserver"+t),o&&(o.disconnect(),i.removeData("__watcherObserver"+t))):clearInterval(n.intervalId)}catch(s){}}),this},String.prototype.startsWith=function(e){return null===e||e===t?!1:e==this.substr(0,e.length)}}(jQuery,void 0),bmRoom.twilioCall={},bmRoom.twilioCall.token=$("#twilio-call-token").val(),bmRoom.twilioCall.enabled=""==bmRoom.twilioCall.token?!1:!0,bmRoom.twilioCall.obfuscatedId=$("#conference-obfuscated-id").val(),bmRoom.twilioCall.faye,bmRoom.twilioCall.connect=null,bmRoom.twilioCall.start=function(){bmRoom.twilioCall.enabled&&(Twilio.Device.setup(bmRoom.twilioCall.token,{debug:!0}),Twilio.Device.error(function(){}),Twilio.Device.connect(function(e){bmRoom.twilioCall.connect=e,e.mediaStream.video.muted=!0}),Twilio.Device.disconnect(function(){bmRoom.twilioCall.connect=null})),bmRoom.twilioCall.call=function(){bmRoom.twilioCall.enabled&&(bmRoom.twilioCall.connect=Twilio.Device.connect({obfuscated_id:bmRoom.twilioCall.obfuscatedId}))},bmRoom.twilioCall.cancel=function(){bmRoom.twilioCall.enabled&&Twilio.Device.disconnectAll()},bmRoom.twilioCall.mute=function(e){bmRoom.twilioCall.enabled&&bmRoom.twilioCall.connect&&bmRoom.twilioCall.connect.mute(e)},bmRoom.socket.on("twilio-call",function(e){$.each(e,function(e,t){var o=JSON.parse(t);bmRoom.twilioCall.twilioHtml(o)})}),bmRoom.twilioCall.faye=new Faye.Client($("#server_url").val()+"/faye"),bmRoom.twilioCall.faye.subscribe("/"+$("#conference-obfuscated-id").val()+"/twilio-call",function(e){bmRoom.twilioCall.twilioHtml(e)}),bmRoom.twilioCall.faye.subscribe("/"+bmRoom.twilioCall.obfuscatedId+"/knock-to-enter",function(e){var t=e.obfuscated_id,o=e.user_name,i=e.user_email,n=e.random_id;if(bmRoom.twilioCall.obfuscatedId==t){var s=$("<li>").attr("id",n+"-li");s.append($('<div class="konck-box-waiting-name">').text(o));var a=$('<a href="javascript:void(0);">Decline</a>').attr("data-knock-status","declined").attr("data-random-id",n).attr("data-user-name",o).attr("data-user-email",i);s.append($('<div class="knock-box-grey-btn knock-btn">').append(a));var r=$('<a href="javascript:void(0);">Let In!</a>').attr("data-knock-status","allowed").attr("data-random-id",n).attr("data-user-name",o).attr("data-user-email",i);s.append($('<div class="konck-box-green-btn knock-btn">').append(r)),bmRoom.chat.displayKnockAction({random_id:n,name:o,email:i,confId:t,action:"knock"}),bmRoom.user.isAdmin(bmRoom.socket.io.engine.id)&&($("#knock-box-waiting-list").append(s),$("#knock_notification_box").show(),bindKnockEvent(n))}}),$("#knock-create-box-close").click(function(){$("#knock_notification_box").hide()}),$("#disable_knocking").click(function(){$("#knock-box-waiting-list").html(""),$("#knock_notification_box").hide(),$.ajax({url:$("#server_url").val()+"/disable-knocking-temporarily",data:{obfuscated_id:bmRoom.twilioCall.obfuscatedId,action_type:"set"},type:"get",dataType:"jsonp",crossDomain:!0,success:function(){}}),bmRoom.saveRecordingAction("DisableKnocking","KnockKnock","","","",bmRoom.socket.io.engine.id,bmRoom.my.name)}),bmRoom.twilioCall.twilioHtml=function(e){if("in-progress"==e.call_status)if($("#admin-user-"+e.phone_sid).length>0);else{var t=$("#attendee-model-html").clone().show();t.prop("id","admin-user-"+e.phone_sid).data("role","TwilioCall"),t.find(".hover-admin").hide(),t.find(".user_name").text("+"+e.phone_number),t.find(".admin-roles-a, .admin-roles-v, .admin-roles-mu, .admin-roles-m").remove(),$("#admin-panel-people-attendee > ul").append(t)}else $("#admin-user-"+e.phone_sid).remove()}},String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},/*!
 * jquery.customSelect() - v0.4.0
 * http://adam.co/lab/jquery/customselect/
 * 2013-04-28
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License
 */
function(e){e.fn.extend({customSelect:function(t){if("undefined"==typeof document.body.style.maxHeight)return this;var o={customClass:"customSelect",mapClass:!0,mapStyle:!0},t=e.extend(o,t),i=t.customClass,n=function(t,o){var i=t.find(":selected"),n=o.children(":first"),a=i.html()||"&nbsp;";n.html(a),i.attr("disabled")?o.addClass(s("DisabledOption")):o.removeClass(s("DisabledOption")),setTimeout(function(){o.removeClass(s("Open")),e(document).off("mouseup."+s("Open"))},60)},s=function(e){return i+e};return this.each(function(){var o=e(this),a=e("<span />").addClass(s("Inner")),r=e("<span />");o.after(r.append(a)),r.addClass(i),t.mapClass&&r.addClass(o.attr("class")),t.mapStyle&&r.attr("style",o.attr("style")),o.addClass("hasCustomSelect").on("update",function(){n(o,r);var e=parseInt(o.outerWidth(),10)-(parseInt(r.outerWidth(),10)-parseInt(r.width(),10));r.css({display:"inline-block"});var t=r.outerHeight();o.attr("disabled")?r.addClass(s("Disabled")):r.removeClass(s("Disabled")),a.css({width:e,display:"inline-block"}),o.css({"-webkit-appearance":"menulist-button",width:r.outerWidth(),position:"absolute",opacity:0,height:t,fontSize:r.css("font-size")})}).on("change",function(){r.addClass(s("Changed")),n(o,r)}).on("keyup",function(){r.hasClass(s("Open"))||(o.blur(),o.focus())}).on("mousedown",function(){r.removeClass(s("Changed"))}).on("mouseup",function(t){r.hasClass(s("Open"))||(r.addClass(s("Open")),t.stopPropagation(),e(document).one("mouseup."+s("Open"),function(t){t.target!=o.get(0)&&e.inArray(t.target,o.find("*").get())<0?o.blur():n(o,r)}))}).focus(function(){r.removeClass(s("Changed")).addClass(s("Focus"))}).blur(function(){r.removeClass(s("Focus")+" "+s("Open"))}).hover(function(){r.addClass(s("Hover"))},function(){r.removeClass(s("Hover"))}).trigger("update")})}})}(jQuery),$(function(){setUpCreditCardForm(),setUpLandingPageCreditCardForm()}),$(document).on("click",".js-coupon-code-link",function(e){return $(".js-coupon-section").removeClass("close"),e.preventDefault(),!1}),$(document).on("click","#js-check-coupon-button",function(e){return $.ajax({url:"/coupons/check_for_upgrade?coupon_code="+$("#js_coupon_code").val()}),e.preventDefault(),!1}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){return function e(t,o,i){function n(a,r){if(!o[a]){if(!t[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=o[a]={exports:{}};t[a][0].call(d.exports,function(e){var o=t[a][1][e];return n(o?o:e)},d,d.exports,e,t,o,i)}return o[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t){var o=e("matches-selector");t.exports=function(e,t,i){for(var n=i?e:e.parentNode;n&&n!==document;){if(o(n,t))return n;n=n.parentNode}}},{"matches-selector":2}],2:[function(e,t){function o(e,t){if(n)return n.call(e,t);for(var o=e.parentNode.querySelectorAll(t),i=0;i<o.length;++i)if(o[i]==e)return!0;return!1}var i=Element.prototype,n=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;t.exports=o},{}],3:[function(e,t){function o(e,t,o){var n=i.apply(this,arguments);return e.addEventListener(o,n),{destroy:function(){e.removeEventListener(o,n)}}}function i(e,t,o,i){return function(o){o.delegateTarget=n(o.target,t,!0),o.delegateTarget&&i.call(e,o)}}var n=e("closest");t.exports=o},{closest:1}],4:[function(e,t,o){o.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},o.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||o.node(e[0]))},o.string=function(e){return"string"==typeof e||e instanceof String},o.function=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],5:[function(e,t){function o(e,t,o){if(!e&&!t&&!o)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a.function(o))throw new TypeError("Third argument must be a Function");if(a.node(e))return i(e,t,o);if(a.nodeList(e))return n(e,t,o);if(a.string(e))return s(e,t,o);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(e,t,o){return e.addEventListener(t,o),{destroy:function(){e.removeEventListener(t,o)}}}function n(e,t,o){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,o)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,o)})}}}function s(e,t,o){return r(document.body,e,t,o)}var a=e("./is"),r=e("delegate");t.exports=o},{"./is":4,delegate:3}],6:[function(e,t){function o(e){var t;if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var o=window.getSelection(),i=document.createRange();i.selectNodeContents(e),o.removeAllRanges(),o.addRange(i),t=o.toString()}return t}t.exports=o},{}],7:[function(e,t){function o(){}o.prototype={on:function(e,t,o){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){function i(){n.off(e,i),t.apply(o,arguments)}var n=this;return i._=t,this.on(e,i,o)},emit:function(e){var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),i=0,n=o.length;for(i;n>i;i++)o[i].fn.apply(o[i].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),i=o[e],n=[];if(i&&t)for(var s=0,a=i.length;a>s;s++)i[s].fn!==t&&i[s].fn._!==t&&n.push(i[s]);return n.length?o[e]=n:delete o[e],this}},t.exports=o},{}],8:[function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}o.__esModule=!0;var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=e("select"),r=i(a),l=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return e.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},e.prototype.initSelection=function(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},e.prototype.selectFake=function(){var e=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return e.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=r["default"](this.fakeElem),this.copyText()},e.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},e.prototype.selectTarget=function(){this.selectedText=r["default"](this.target),this.copyText()},e.prototype.copyText=function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)},e.prototype.handleResult=function(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},e.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},e.prototype.destroy=function(){this.removeFake()},s(e,[{key:"action",set:function(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!=typeof e||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=e}},get:function(){return this._target}}]),e}();o["default"]=l,t.exports=o["default"]},{select:6}],9:[function(e,t,o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var o="data-clipboard-"+e;if(t.hasAttribute(o))return t.getAttribute(o)}o.__esModule=!0;var r=e("./clipboard-action"),l=i(r),c=e("tiny-emitter"),d=i(c),u=e("good-listener"),h=i(u),m=function(e){function t(o,i){n(this,t),e.call(this),this.resolveOptions(i),this.listenClick(o)}return s(t,e),t.prototype.resolveOptions=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},t.prototype.listenClick=function(e){var t=this;this.listener=h["default"](e,"click",function(e){return t.onClick(e)})},t.prototype.onClick=function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new l["default"]({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})},t.prototype.defaultAction=function(e){return a("action",e)},t.prototype.defaultTarget=function(e){var t=a("target",e);return t?document.querySelector(t):void 0},t.prototype.defaultText=function(e){return a("text",e)},t.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},t}(d["default"]);o["default"]=m,t.exports=o["default"]},{"./clipboard-action":8,"good-listener":5,"tiny-emitter":7}]},{},[9])(9)}),bmRoom.theme={},bmRoom.theme.saveAuto=!1,bmRoom.theme.isPro=!1,bmRoom.theme.start=function(){bmRoom.theme.background_color=$("#theme-background-color").val(),bmRoom.theme.text_color=$("#theme-text-color").val(),bmRoom.theme.defaultLogo=$("#default-small-logo").val();var e=["FFFFFF","4D545D","202329","1F6093","344A7C","8256AF","52A3EF"];$("#conference-logo-area.admin .edit-conf-theme-btn").unbind().click(function(e){e.preventDefault(),bmRoom.theme.resetThemeForm(),$("#edit-conf-theme-box").show()}),$("#close-conf-theme-box").unbind().click(function(e){e.preventDefault(),$("#edit-conf-theme-box").hide(),bmRoom.theme.resetThemeForm(),bmRoom.theme.changeTheme(bmRoom.theme.background_color,bmRoom.theme.text_color)}),$("#bigroom_logo").unbind().change(function(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){$("#theme-bigroom-logo img").attr("src",e.target.result)},e.readAsDataURL(this.files[0])}$("#delete_logo").val(0)}),$("#remove-bigroom-logo").unbind().click(function(){$("#theme-bigroom-logo img").attr("src",bmRoom.theme.defaultLogo),$("#presenter_icon_preview img").attr("src",bmRoom.theme.defaultLogo),$("#delete_logo").val(1),bmRoom.theme.saveAuto&&$("#change-theme-form").submit()}),$(".selected-theme-color").unbind().click(function(){var e=$(this).data("background-color");$(".selected-theme-color").removeClass("onactive"),$('.clroom-theme-color-box > li[data-background-color="'+e+'"]').addClass("onactive"),$("#background_color").val(e),$(".clroom-theme-text-color-list").css("background-color","#"+e),$("#add-custom-color").show(),$("#add-custom-color-input").hide(),"ffffff"==e.toString().toLowerCase()?$("label[for='conference_theme_text_color_4a4d50']").trigger("click"):$("label[for='conference_theme_text_color_ffffff']").trigger("click"),$("#edit-text-color-area").hide(),bmRoom.theme.changeTheme($("#background_color").val(),$('input[name="conference_theme[text_color]"]:checked').val()),bmRoom.theme.saveAuto&&$("#change-theme-form").submit()}),$("#text_color_area input[type=radio]").unbind().change(function(){bmRoom.theme.changeTheme($("#background_color").val(),$('input[name="conference_theme[text_color]"]:checked').val()),bmRoom.theme.saveAuto&&$("#change-theme-form").submit()}),$("#conference_theme_save_as_default").unbind().change(function(){bmRoom.theme.saveAuto&&$("#change-theme-form").submit()}),$("#add-custom-color").unbind().click(function(){$("#add-custom-color-input").show(),$("#edit-text-color-area").show(),$("#background_color").trigger("keyup"),$(this).hide()}),$("#background_color").unbind().keyup(function(){var e=$(this).val();bmRoom.theme.changeTheme(e,$('input[name="conference_theme[text_color]"]:checked').val()),bmRoom.theme.changeTextBackgroundColor(e),bmRoom.theme.saveAuto&&$("#change-theme-form").submit()}),jQuery.inArray(bmRoom.theme.background_color,e)||bmRoom.theme.changeTextBackgroundColor(bmRoom.theme.background_color)},bmRoom.theme.changeTextBackgroundColor=function(e){e.match(/^[0-9A-Fa-f]{6}$/)?($(".selected-theme-color").removeClass("onactive"),$("#conf-theme-errmsg").html("").hide(),$("#add-custom-color-input .clroom-theme-color-box-t").hide(),$("#add-custom-color-input .clroom-theme-color-box-c").css("background-color","#"+e).show(),$("#add-custom-color-input .clroom-theme-color-box-c path").attr("fill",""),"ffffff"==e.toLowerCase()&&$("#add-custom-color-input .clroom-theme-color-box-c path").attr("fill","#000000"),$(".clroom-theme-text-color-list").css("background-color","#"+e)):(""!=e&&($("#conf-theme-errmsg").html("Invalid theme color").show(),$("#add-custom-color-input .clroom-theme-color-box-t").show(),$("#add-custom-color-input .clroom-theme-color-box-c").css("background-color","#ffffff").hide(),$(".clroom-theme-text-color-list").css("background-color","#ffffff")),bmRoom.theme.changeTheme("ffffff","4a4d50"))},bmRoom.theme.changeTheme=function(e,t,o){e="undefined"!=typeof e?e:bmRoom.theme.background_color,t="undefined"!=typeof t?t:bmRoom.theme.text_color,o="undefined"!=typeof o?o:null,$(".clroom-header").css("background-color","#"+e),$(".change-theme-color-edit").css("background-color","#"+e),$(".change-theme-color-edit").css("color","#"+t),$("div.change-theme-color").css("color","#"+t),$("span.change-theme-color").css("color","#"+t),$("path.change-theme-color").attr("fill","#"+t),"00c083"==e.toLowerCase()?$("#mic-status-on .clroom-navbtn-text, #cam-status-on .clroom-navbtn-text").css("color","#ffffff"):$("#mic-status-on .clroom-navbtn-text, #cam-status-on .clroom-navbtn-text").css("color",""),"ffffff"==e.toLowerCase()?$(".clroom-header").css("border-bottom","#DFE1E4 1px solid"):$(".clroom-header").css("border-bottom","#d6dee2 1px solid"),bmRoom.theme.changeActiveButton(t),o&&$.ajax({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/render_bigroom_logo?role="+o})},bmRoom.theme.changeActiveButton=function(e){e="undefined"!=typeof e?e:bmRoom.theme.text_color;var t=e;bmRoom.whiteboard.status||bmRoom.mp4Share.video?$("#add-files .change-theme-color").css("color","#00c083"):($("#add-files div.change-theme-color").css("color","#"+e),$("#add-files span.change-theme-color").css("color","#"+t)),$(".screen-focus").is(":visible")?$("#switch-screen .change-theme-color").css("color","#00c083"):($("#switch-screen div.change-theme-color").css("color","#"+e),$("#switch-screen span.change-theme-color").css("color","#"+t)),$("#video-share-container").is(":visible")?$("#add-videos .change-theme-color").css("color","#00c083"):($("#add-videos div.change-theme-color").css("color","#"+e),$("#add-videos span.change-theme-color").css("color","#"+t))},bmRoom.theme.changeThemePermission=function(e){e?($("#conference-logo-area a").attr("href","#").removeAttr("target"),$("#conference-logo-area").removeClass("user").addClass("admin"),$("#theme_role").val("Organizer")):($("#conference-logo-area a").attr("href","/home").attr("target","_blank"),$("#conference-logo-area").removeClass("admin").addClass("user"),$("#theme_role").val("Member")),bmRoom.theme.start()},bmRoom.theme.resetThemeForm=function(){$("#background_color").val(bmRoom.theme.background_color),bmRoom.theme.changeTextBackgroundColor(bmRoom.theme.background_color),bmRoom.theme.changeTheme(bmRoom.theme.background_color,$('input[name="conference_theme[text_color]"]:checked').val()),$(".clroom-theme-color-box li.selected-theme-color").removeClass("onactive"),$(".clroom-theme-color-box li.selected-theme-color").each(function(){$(this).data("background-color")==bmRoom.theme.background_color&&$(this).trigger("click")}),$("#text_color_area .clroom-theme-text-color").each(function(){$(this).data("font-color")==bmRoom.theme.text_color&&$(this).find("a").trigger("click")}),$("#theme-bigroom-logo > img").attr("src",$("#real-bigroom-logo").val()),$("#conference-logo-area > a > img").attr("src",$("#real-bigroom-logo").val())},bmRoom.theme.initLogoCropper=function(e,t){bmRoom.theme.isPro="undefined"!=typeof t?t:bmRoom.theme.isPro;var o;$("#conference-room-logo-dialog").dialog({modal:!0,autoOpen:!1,width:"670px",resizable:!1,show:{duration:100},hide:{duration:100},draggable:!1,position:["center",75]}),$("#change-bigroom-logo").click(function(e){e.preventDefault(),$("#club-theme-tabs").hide(),$("#club-theme-drop-area").show(),$("#conference-room-logo-dialog").dialog("open")}),$(".select-room-logo-image").click(function(){$("#conference_room_logo").click()}),o=$("#room-logo-editor").cropit({imageBackground:!0,imageBackgroundBorderWidth:20,imageState:{src:e}}),$(document.body).on("change","#conference_room_logo",function(){$("#club-theme-tabs").show(),$("#club-theme-drop-area").hide(),o.cropit("imageSrc",window.URL.createObjectURL(this.files[0]))}),$("#conference-room_logo-crop-button").click(function(e){if(e.preventDefault(),bmRoom.theme.isPro){if(o){var t={height:$("#room-logo-editor .cropit-image-preview").height(),width:$("#room-logo-editor .cropit-image-preview").width()},i=o.cropit("imageState"),n={x:(0-i.offset.x)/i.zoom,y:(0-i.offset.y)/i.zoom};n.height=t.height/i.zoom,n.width=t.width/i.zoom,update_room_logo_croods(n)}$("#conference-room-logo-dialog .ui-button-text").text($("#conference-room_logo-crop-button").data("disable-with2")),$("#delete_logo").val(0),fileuploadData&&fileuploadData.originalFiles[0].size?(fileuploadData.formData=$("#submit_room_logo_form").serializeArray(),fileuploadData.submit()):$("#submit_room_logo_form").submit()}else{var s=$("#room-logo-editor").cropit("export");$("#theme-bigroom-logo > img").attr("src",s),$("#conference-logo-area > a > img").attr("src",s),$("#conference-room-logo-dialog").dialog("close")}}),fileuploadData=null,$("#conference_room_logo").fileupload({url:"/conferences/"+$("#conference-obfuscated-id").val()+"/submit_room_logo",dataType:"json",autoUpload:!1,dropZone:$("#club-theme-drop-area")}).on("fileuploadadd",function(e,t){t.originalFiles[0].size&&t.originalFiles[0].size>1e8?$("#conference-icon-target").text("File size shoule be less than 100 MB").show():($("#conference-icon-target").text("").hide(),fileuploadData=t,$("#club-theme-tabs").show(),$("#club-theme-drop-area").hide(),o.cropit("imageSrc",window.URL.createObjectURL(t.originalFiles[0])))}).on("fileuploadprocessalways",function(){}).on("fileuploadprogressall",function(){}).on("fileuploaddone",function(e,t){fileuploadData=null,$("#theme-bigroom-logo > img").attr("src",t.result.newLogo),$("#conference-logo-area > a.edit-conf-theme-btn > img").attr("src",t.result.newLogo),$("#real-bigroom-logo").val(t.result.newLogo),$("#conference-room-logo-dialog").dialog("close"),$("#conference-room-logo-dialog .ui-button-text").text($("#conference-room_logo-crop-button").data("enable-with2"))}).on("fileuploadfail",function(){fileuploadData=null})},bmRoom.questionAnswer={},bmRoom.questionAnswer.conferenceId=$("#conference-obfuscated-id").val(),bmRoom.questionAnswer.start=function(){bmRoom.questionAnswer.unread=$("#roomchat_qanda .unread-count i").length>0?parseInt($("#roomchat_qanda .unread-count i").text()):0,bmRoom.socket.on("questionAnswer:new",function(e){bmRoom.questionAnswer.insertHtml(e)}),bmRoom.socket.on("questionAnswer:answered",function(e){bmRoom.questionAnswer.markAnswered(e)}),bmRoom.socket.on("questionAnswer:delete",function(e){$("#"+e+"-qanda-li").fadeOut(400,function(){$(this).remove()})}),bmRoom.socket.on("questionAnswer:voted",function(e){$("#"+e.obfuscated_id+"-qanda-li .vote-count").text(e.vote_count),$("#"+e.obfuscated_id+"-qanda-li").removeAttr("data-vote-count"),$("#"+e.obfuscated_id+"-qanda-li").attr("data-vote-count",e.vote_count),bmRoom.questionAnswer.sortList()}),$("#post_qanda").click(function(){var e={};e.content=$("#qanda_text").val().trim(),e.name=bmRoom.my.name,e.photo=bmRoom.my.photo,e.user_id=bmRoom.userID,e.user_email=bmRoom.userEmail,bmRoom.admin.question_answer_lock&&""!=e.content&&bmRoom.questionAnswer.post(e)}),$("#qanda-content-list > li.answerd-li").not("#no-answerd-box").length>0&&$("#no-answerd-box").remove(),$("#qanda-content-list > li.active-li").not("#no-active-box").length>0&&$("#no-active-box").remove(),$("#view-answerd-q").click(function(e){$("#qanda-content-list").removeClass("answerd").addClass("active"),e.stopPropagation()}),$("#view-active-q").click(function(e){$("#qanda-content-list").removeClass("active").addClass("answerd"),e.stopPropagation()})},bmRoom.questionAnswer.post=function(e){$("#qanda_text").val(""),$.ajax({url:"/conferences/"+bmRoom.questionAnswer.conferenceId+"/create_qanda",data:{question_content:e.content,user_name:e.name,user_avatar:e.photo,user_id:e.user_id,user_email:e.user_email,random_id:$("#random_id").val()},type:"post",dataType:"script"}),bmRoom.saveRecordingAction("Q&A","Question",e.content,"","")},bmRoom.questionAnswer.insertHtml=function(e,t){t="undefined"!=typeof t?t:!1;var o=$("#qanda-content-list"),i=$("#qanda-content-model").clone();i.attr("id",e.obfuscated_id+"-qanda-li"),t&&i.attr("data-load",!0),i.addClass("active-li").removeAttr("style"),i.attr("data-obfuscated-id",e.obfuscated_id),i.attr("data-vote-count",e.vote_count),i.find(".clroom-groupchat-img > a > img").prop("src",e.avatar),i.find(".clroom-groupchat-name > a").text(e.user_name),i.find(".clroom-groupchat-name > div.clroom-groupchat-date").text(e.created_at),i.find(".qanda-content").html(e.content),i.find(".qanda-vote > a").attr("data-qanda-id",e.obfuscated_id),i.find(".qanda-vote > a").attr("href","/conferences/"+bmRoom.questionAnswer.conferenceId+"/vote_qanda/"+e.obfuscated_id+"/"+bmRoom.userID);var n=bmRoom.user.isAdmin(bmRoom.socket.io.engine.id);if(e.answered||!n?i.find(".mark-answered > a.answered-qanda").remove():i.find(".mark-answered > a.answered-qanda").attr("href","/conferences/"+bmRoom.questionAnswer.conferenceId+"/qanda_answered/"+e.obfuscated_id).attr("data-remote",!0),n||e.user_id==bmRoom.userID?i.find(".mark-answered > a.delete-qanda").attr("href","/conferences/"+bmRoom.questionAnswer.conferenceId+"/delete_qanda/"+e.obfuscated_id).attr("data-remote",!0):i.find(".mark-answered > a.delete-qanda").remove(),t)return $("<div />").append(i.show()).html();if(o.append(i),!$("#roomchat_qanda").hasClass("onactive")){bmRoom.questionAnswer.unread+=1;var s=$('<span class="unread-count" />');$("#roomchat_qanda span").remove(),$("#roomchat_qanda").append(s.clone())}$("#no-active-box").remove()},bmRoom.questionAnswer.markAnswered=function(e){var t=$("#"+e+"-qanda-li");t.removeClass("active-li").addClass("answerd-li"),t.find(".mark-answered > .answered-qanda").remove(),t.find(".clroom-groupchat-img > a > img").prop("src","/assets/answered_check.png"),t.find(".qanda-vote > a").attr("href","javascript:void(0);").removeAttr("data-remote"),$("#no-answerd-box").remove()},bmRoom.questionAnswer.sortList=function(){tinysort("ul#qanda-content-list>li.answerd-li",{data:"vote-count",order:"desc"}),tinysort("ul#qanda-content-list>li.active-li",{data:"vote-count",order:"desc"})},/**
 * TinySort is a small script that sorts HTML elements. It sorts by text- or attribute value, or by that of one of it's children.
 * @summary A nodeElement sorting script.
 * @version 2.3.6
 * @license MIT
 * @author Ron Valstar <ron@ronvalstar.nl>
 * @copyright Ron Valstar <ron@ronvalstar.nl>
 * @namespace tinysort
 */
function(e,t){"use strict";function o(){return t}"function"==typeof define&&define.amd?define("tinysort",o):e.tinysort=t}(this,function(){"use strict";function e(e,i){function r(){0===arguments.length?b({}):t(arguments,function(e){b(S(e)?{selector:e}:e)}),m=M.length}function b(e){var t=!!e.selector,i=t&&":"===e.selector[0],n=o(e||{},g);M.push(o({hasSelector:t,hasAttr:!(n.attr===a||""===n.attr),hasData:n.data!==a,hasFilter:i,sortReturnNumber:"asc"===n.order?1:-1},n))}function v(){t(e,function(e,t){D?D!==e.parentNode&&(j=!1):D=e.parentNode;var o=M[0],i=o.hasFilter,n=o.selector,s=!n||i&&e.matchesSelector(n)||n&&e.querySelector(n),a=s?E:I,r={elm:e,pos:t,posn:a.length};A.push(r),a.push(r)}),T=E.slice(0)}function _(e,t,o){for(var i=o(e.toString()),n=o(t.toString()),s=0;i[s]&&n[s];s++)if(i[s]!==n[s]){var a=Number(i[s]),r=Number(n[s]);return a==i[s]&&r==n[s]?a-r:i[s]>n[s]?1:-1}return i.length-n.length}function w(e){for(var t,o,i=[],n=0,s=-1,a=0;t=(o=e.charAt(n++)).charCodeAt(0);){var r=46==t||t>=48&&57>=t;r!==a&&(i[++s]="",a=r),i[s]+=o}return i}function y(e,o){var i=0;for(0!==p&&(p=0);0===i&&m>p;){var a=M[p],r=a.ignoreDashes?u:d;if(t(h,function(e){var t=e.prepare;t&&t(a)}),a.sortFunction)i=a.sortFunction(e,o);else if("rand"==a.order)i=Math.random()<.5?1:-1;else{var l=s,f=R(e,a),g=R(o,a),b=""===f||f===n,v=""===g||g===n;if(f===g)i=0;else if(a.emptyEnd&&(b||v))i=b&&v?0:b?1:-1;else{if(!a.forceStrings){var y=S(f)?f&&f.match(r):s,$=S(g)?g&&g.match(r):s;if(y&&$){var k=f.substr(0,f.length-y[0].length),x=g.substr(0,g.length-$[0].length);k==x&&(l=!s,f=c(y[0]),g=c($[0]))}}i=f===n||g===n?0:a.natural&&(isNaN(f)||isNaN(g))?_(f,g,w):g>f?-1:f>g?1:0}}t(h,function(e){var t=e.sort;t&&(i=t(a,l,f,g,i))}),i*=a.sortReturnNumber,0===i&&p++}return 0===i&&(i=e.pos>o.pos?1:-1),i}function $(){var e=E.length===A.length;if(j&&e)z?E.forEach(function(e,t){e.elm.style.order=t}):D?D.appendChild(k()):console.warn("parentNode has been removed");else{var t=M[0],o=t.place,i="org"===o,n="start"===o,s="end"===o,a="first"===o,r="last"===o;if(i)E.forEach(x),E.forEach(function(e,t){C(T[t],e.elm)});else if(n||s){var l=T[n?0:T.length-1],c=l&&l.elm.parentNode,d=c&&(n&&c.firstChild||c.lastChild);d&&(d!==l.elm&&(l={elm:d}),x(l),s&&c.appendChild(l.ghost),C(l,k()))}else if(a||r){var u=T[a?0:T.length-1];C(x(u),k())}}}function k(){return E.forEach(function(e){P.appendChild(e.elm)}),P}function x(e){var t=e.elm,o=l.createElement("div");return e.ghost=o,t.parentNode.insertBefore(o,t),e}function C(e,t){var o=e.ghost,i=o.parentNode;i.insertBefore(t,o),i.removeChild(o),delete e.ghost}function R(e,t){var o,i=e.elm;return t.selector&&(t.hasFilter?i.matchesSelector(t.selector)||(i=a):i=i.querySelector(t.selector)),t.hasAttr?o=i.getAttribute(t.attr):t.useVal?o=i.value||i.getAttribute("value"):t.hasData?o=i.getAttribute("data-"+t.data):i&&(o=i.textContent),S(o)&&(t.cases||(o=o.toLowerCase()),o=o.replace(/\s+/g," ")),null===o&&(o=f),o}function S(e){return"string"==typeof e}S(e)&&(e=l.querySelectorAll(e)),0===e.length&&console.warn("No elements to sort");var T,D,P=l.createDocumentFragment(),A=[],E=[],I=[],M=[],j=!0,O=e.length&&e[0].parentNode,F=O.rootNode!==document,z=e.length&&(i===n||i.useFlex!==!1)&&!F&&-1!==getComputedStyle(O,null).display.indexOf("flex");return r.apply(a,Array.prototype.slice.call(arguments,1)),v(),E.sort(y),$(),E.map(function(e){return e.elm})}function t(e,t){for(var o,i=e.length,n=i;n--;)o=i-n-1,t(e[o],o)}function o(e,t,o){for(var i in t)(o||e[i]===n)&&(e[i]=t[i]);return e}function i(e,t,o){h.push({prepare:e,sort:t,sortBy:o})}var n,s=!1,a=null,r=window,l=r.document,c=parseFloat,d=/(-?\d+\.?\d*)\s*$/g,u=/(\d+\.?\d*)\s*$/g,h=[],m=0,p=0,f=String.fromCharCode(4095),g={selector:a,order:"asc",attr:a,data:a,useVal:s,place:"org",returns:s,cases:s,natural:s,forceStrings:s,ignoreDashes:s,sortFunction:a,useFlex:s,emptyEnd:s};return r.Element&&function(e){e.matchesSelector=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,o=(t.parentNode||t.document).querySelectorAll(e),i=-1;o[++i]&&o[i]!=t;);return!!o[i]}}(Element.prototype),o(i,{loop:t}),o(e,{plugin:i,defaults:g})}());